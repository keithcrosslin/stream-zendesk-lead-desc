{"ast":null,"code":"import _extends from '@babel/runtime/helpers/extends';\nimport React, { useRef, useState, useCallback, useEffect, useContext, useMemo, useReducer, useImperativeHandle, Fragment, useLayoutEffect, PureComponent } from 'react';\nimport { StreamChat, Channel as Channel$2, logChatPromiseExecution } from 'stream-chat';\nimport Dayjs from 'dayjs';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport emojiRegex from 'emoji-regex';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport data from 'emoji-mart/data/all.json';\nimport { find } from 'linkifyjs/lib/linkify';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport i18n from 'i18next';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\nimport 'dayjs/locale/en';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport DefaultMedia from 'react-player';\nimport PropTypes from 'prop-types';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\nimport { FileIcon, dataTransferItemsToFiles, dataTransferItemsHaveFiles, ImagePreviewer, FilePreviewer, ImageDropzone, FileUploadButton, LoadingIndicator as LoadingIndicator$1 } from 'react-file-utils';\nimport prettybytes from 'pretty-bytes';\nimport Carousel, { ModalGateway, Modal as Modal$1 } from 'react-images';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\nimport { isValidElementType } from 'react-is';\nimport Textarea from 'react-textarea-autosize';\nimport { v4 } from 'uuid';\nimport debounce from 'lodash.debounce';\nimport throttle from 'lodash.throttle';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport { emojiIndex, Picker, NimbleEmoji } from 'emoji-mart';\nimport Immutable from 'seamless-immutable';\nimport deepequal from 'react-fast-compare';\nimport uniqBy from 'lodash.uniqby';\n/**\n * @typedef {import('../types').ChatContextValue} ChatContextProps\n */\n\nvar ChatContext = /*#__PURE__*/React.createContext(\n/** @type {ChatContextProps} */\n{\n  client: new StreamChat(''),\n  setActiveChannel: function setActiveChannel() {\n    return null;\n  }\n});\n/**\n * @function\n * @template P\n * @param {React.ComponentType<P>} OriginalComponent\n * @returns {React.ComponentType<Exclude<P, ChatContextProps>>}\n */\n\nfunction withChatContext(OriginalComponent) {\n  /** @param {Exclude<P, ChatContextProps>} props */\n  var ContextAwareComponent = function ContextComponent(props) {\n    return /*#__PURE__*/React.createElement(ChatContext.Consumer, null, function (context) {\n      return /*#__PURE__*/React.createElement(OriginalComponent, _extends({}, context, props));\n    });\n  };\n\n  ContextAwareComponent.displayName = (OriginalComponent.displayName || OriginalComponent.name || 'Component').replace('Base', '');\n  return ContextAwareComponent;\n}\n/**\n * @typedef {import('../types').ChannelContextValue} ChannelContextProps\n */\n\n\nvar ChannelContext = /*#__PURE__*/React.createContext(\n/** @type {ChannelContextProps} */\n{});\n/**\n * @function\n * @template P\n * @param { React.ComponentType<P> } OriginalComponent\n * @returns {React.ComponentType<Exclude<P, ChannelContextProps>>}\n */\n\nfunction withChannelContext(OriginalComponent) {\n  /** @param {Exclude<P, ChannelContextProps>} props */\n  var ContextAwareComponent = function ContextComponent(props) {\n    return /*#__PURE__*/React.createElement(ChannelContext.Consumer, null, function (context) {\n      return /*#__PURE__*/React.createElement(OriginalComponent, _extends({}, context, props));\n    });\n  };\n\n  ContextAwareComponent.displayName = (OriginalComponent.displayName || OriginalComponent.name || 'Component').replace('Base', '');\n  return ContextAwareComponent;\n}\n\nDayjs.extend(LocalizedFormat);\n/**\n * @typedef {Required<import('../types').TranslationContextValue>} TranslationContextProps\n */\n\nvar TranslationContext = /*#__PURE__*/React.createContext(\n/** @type {TranslationContextProps} */\n{\n  t:\n  /** @param {string} key */\n  function t(key) {\n    return key;\n  },\n  tDateTimeParser: function tDateTimeParser(input) {\n    return Dayjs(input);\n  }\n});\n/**\n * @function\n * @template P\n * @param {React.ComponentType<P>} OriginalComponent\n * @returns {React.ComponentType<Exclude<P, TranslationContextProps>>}\n */\n\nfunction withTranslationContext(OriginalComponent) {\n  /** @param {Exclude<P, TranslationContextProps>} props */\n  var ContextAwareComponent = function ContextComponent(props) {\n    return /*#__PURE__*/React.createElement(TranslationContext.Consumer, null, function (context) {\n      return /*#__PURE__*/React.createElement(OriginalComponent, _extends({}, context, props));\n    });\n  };\n\n  ContextAwareComponent.displayName = (OriginalComponent.displayName || OriginalComponent.name || 'Component').replace('Base', '');\n  return ContextAwareComponent;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar emojiSetDef = {\n  spriteUrl: 'https://getstream.imgix.net/images/emoji-sprite.png',\n  size: 20,\n  sheetColumns: 2,\n  sheetRows: 3,\n  sheetSize: 64\n};\nvar commonEmoji = {\n  emoticons: [],\n  short_names: [],\n  custom: true\n};\n/** @type {import(\"types\").MinimalEmojiInterface[]} */\n\nvar defaultMinimalEmojis = [_objectSpread(_objectSpread({\n  id: 'like',\n  name: 'like',\n  colons: ':+1:',\n  sheet_x: 0,\n  sheet_y: 0\n}, commonEmoji), emojiSetDef), _objectSpread(_objectSpread({\n  id: 'love',\n  name: 'love',\n  colons: ':heart:',\n  sheet_x: 1,\n  sheet_y: 2\n}, commonEmoji), emojiSetDef), _objectSpread(_objectSpread({\n  id: 'haha',\n  name: 'haha',\n  colons: ':joy:',\n  sheet_x: 1,\n  sheet_y: 0\n}, commonEmoji), emojiSetDef), _objectSpread(_objectSpread({\n  id: 'wow',\n  name: 'wow',\n  colons: ':astonished:',\n  sheet_x: 0,\n  sheet_y: 2\n}, commonEmoji), emojiSetDef), _objectSpread(_objectSpread({\n  id: 'sad',\n  name: 'sad',\n  colons: ':pensive:',\n  sheet_x: 0,\n  sheet_y: 1\n}, commonEmoji), emojiSetDef), _objectSpread(_objectSpread({\n  id: 'angry',\n  name: 'angry',\n  colons: ':angry:',\n  sheet_x: 1,\n  sheet_y: 1\n}, commonEmoji), emojiSetDef)];\nvar d = Object.assign({}, data);\nd.emojis = {}; // use this only for small lists like in ReactionSelector\n\nvar emojiData = d;\n\nvar isOnlyEmojis = function isOnlyEmojis(text) {\n  if (!text) return false;\n  var noEmojis = text.replace(emojiRegex(), '');\n  var noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\n\nvar isPromise = function isPromise(thing) {\n  return thing && typeof thing.then === 'function';\n};\n\nvar byDate = function byDate(a, b) {\n  return a.created_at - b.created_at;\n}; // https://stackoverflow.com/a/29234240/7625485\n\n/**\n * @deprecated This function is deprecated and will be removed in future major release.\n * @param {*} dict\n * @param {*} currentUserId\n */\n\n\nvar formatArray = function formatArray(dict, currentUserId) {\n  var arr2 = Object.keys(dict);\n  var arr3 = [];\n  arr2.forEach(function (item, i) {\n    if (currentUserId === dict[arr2[i]].user.id) {\n      return;\n    }\n\n    arr3.push(dict[arr2[i]].user.name || dict[arr2[i]].user.id);\n  });\n  var outStr = '';\n\n  if (arr3.length === 1) {\n    outStr = arr3[0] + ' is typing...';\n  } else if (arr3.length === 2) {\n    //joins all with \"and\" but =no commas\n    //example: \"bob and sam\"\n    outStr = arr3.join(' and ') + ' are typing...';\n  } else if (arr3.length > 2) {\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\n    //example: \"bob, joe, and sam\"\n    outStr = arr3.slice(0, -1).join(', ') + ', and ' + arr3.slice(-1) + ' are typing...';\n  }\n\n  return outStr;\n};\n\nvar allowedMarkups = ['html', 'root', 'text', 'break', 'paragraph', 'emphasis', 'strong', 'link', 'list', 'listItem', 'code', 'inlineCode', 'blockquote', 'delete'];\n\nvar matchMarkdownLinks = function matchMarkdownLinks(message) {\n  var regexMdLinks = /\\[([^\\[]+)\\](\\(.*\\))/gm;\n  var matches = message.match(regexMdLinks);\n  var singleMatch = /\\[([^\\[]+)\\]\\((.*)\\)/;\n  var links = matches ? matches.map(function (match) {\n    return singleMatch.exec(match)[2];\n  }) : [];\n  return links;\n};\n\nvar truncate = function truncate(input, length) {\n  var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '...';\n\n  if (input.length > length) {\n    return \"\".concat(input.substring(0, length - end.length)).concat(end);\n  }\n\n  return input;\n};\n\nvar renderText = function renderText(text, mentioned_users) {\n  // take the @ mentions and turn them into markdown?\n  // translate links\n  if (!text) return null;\n  var newText = text;\n  var markdownLinks = matchMarkdownLinks(newText); // extract all valid links/emails within text and replace it with proper markup\n\n  find(newText).forEach(function (_ref) {\n    var type = _ref.type,\n        href = _ref.href,\n        value = _ref.value; // check if message is already  markdown\n\n    var noParsingNeeded = markdownLinks && markdownLinks.filter(function (text) {\n      return text.indexOf(href) !== -1;\n    });\n    if (noParsingNeeded.length > 0) return;\n    var displayLink = type === 'email' ? value : truncate(value.replace(/(http(s?):\\/\\/)?(www\\.)?/, ''), 20);\n    newText = newText.replace(value, \"[\".concat(displayLink, \"](\").concat(encodeURI(href), \")\"));\n  });\n\n  if (mentioned_users && mentioned_users.length) {\n    for (var i = 0; i < mentioned_users.length; i++) {\n      var username = mentioned_users[i].name || mentioned_users[i].id;\n      var mkdown = \"**@\".concat(username, \"**\");\n      var re = new RegExp(\"@\".concat(username), 'g');\n      newText = newText.replace(re, mkdown);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(ReactMarkdown, {\n    allowedTypes: allowedMarkups,\n    source: newText,\n    linkTarget: \"_blank\",\n    plugins: [],\n    escapeHtml: true,\n    skipHtml: false,\n    unwrapDisallowed: true,\n    transformLinkUri: function transformLinkUri(uri) {\n      if (uri.startsWith('app://')) {\n        return uri;\n      } else {\n        return require('react-markdown').uriTransformer(uri);\n      }\n    }\n  });\n}; // https://stackoverflow.com/a/6860916/2570866\n\n\nfunction generateRandomId() {\n  // prettier-ignore\n  return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\n}\n\nfunction S4() {\n  return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n}\n\nvar smartRender = function smartRender(ElementOrComponentOrLiteral, props, fallback) {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n\n  if ( /*#__PURE__*/React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    var element = ElementOrComponentOrLiteral; // eslint-disable-line\n\n    return element;\n  } // Flow cast through any to remove React.Element after previous check\n\n\n  var ComponentOrLiteral = ElementOrComponentOrLiteral;\n\n  if (typeof ComponentOrLiteral === 'string' || typeof ComponentOrLiteral === 'number' || typeof ComponentOrLiteral === 'boolean' || ComponentOrLiteral == null) {\n    return ComponentOrLiteral;\n  }\n\n  return /*#__PURE__*/React.createElement(ComponentOrLiteral, props);\n};\n\nvar filterEmoji = function filterEmoji(emoji) {\n  if (emoji.name === 'White Smiling Face' || emoji.name === 'White Frowning Face') {\n    return false;\n  }\n\n  return true;\n};\n\nvar getReadByTooltipText = function getReadByTooltipText(users, t, client) {\n  var outStr = ''; // first filter out client user, so restLength won't count it\n\n  var otherUsers = users.filter(function (item) {\n    return item && item.id !== client.user.id;\n  }).map(function (item) {\n    return item.name || item.id;\n  });\n  var slicedArr = otherUsers.slice(0, 5);\n  var restLength = otherUsers.length - slicedArr.length;\n\n  if (slicedArr.length === 1) {\n    outStr = slicedArr[0] + ' ';\n  } else if (slicedArr.length === 2) {\n    //joins all with \"and\" but =no commas\n    //example: \"bob and sam\"\n    outStr = t('{{ firstUser }} and {{ secondUser }}', {\n      firstUser: slicedArr[0],\n      secondUser: slicedArr[1]\n    });\n  } else if (slicedArr.length > 2) {\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\n    //example: \"bob, joe, sam and 4 more\"\n    if (restLength === 0) {\n      // mutate slicedArr to remove last user to display it separately\n      var lastUser = slicedArr.splice(slicedArr.length - 2, 1);\n      outStr = t('{{ commaSeparatedUsers }}, and {{ lastUser }}', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        lastUser\n      });\n    } else {\n      outStr = t('{{ commaSeparatedUsers }} and {{ moreCount }} more', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        moreCount: restLength\n      });\n    }\n  }\n\n  return outStr;\n};\n\nvar Cancel = \"Cancel\";\nvar Close = \"Close\";\nvar Delete = \"Delete\";\nvar Delivered = \"Delivered\";\nvar Flag = \"Flag\";\nvar Mute = \"Mute\";\nvar Send = \"Send\";\nvar Thread = \"Thread\";\nvar Unmute = \"Unmute\";\nvar live = \"live\";\nvar enTranslations = {\n  \"1 reply\": \"1 reply\",\n  \"Attach files\": \"Attach files\",\n  Cancel: Cancel,\n  \"Channel Missing\": \"Channel Missing\",\n  Close: Close,\n  \"Connection failure, reconnecting now...\": \"Connection failure, reconnecting now...\",\n  Delete: Delete,\n  Delivered: Delivered,\n  \"Edit Message\": \"Edit Message\",\n  \"Empty message...\": \"Empty message...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Error adding flag: Either the flag already exist or there is issue with network connection ...\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Error connecting to chat, refresh the page to try again.\",\n  \"Error muting a user ...\": \"Error muting a user ...\",\n  \"Error unmuting a user ...\": \"Error unmuting a user ...\",\n  \"Error · Unsent\": \"Error · Unsent\",\n  \"Error: {{ errorMessage }}\": \"Error: {{ errorMessage }}\",\n  Flag: Flag,\n  \"Message Failed · Click to try again\": \"Message Failed · Click to try again\",\n  \"Message deleted\": \"Message deleted\",\n  \"Message failed. Click to try again.\": \"Message failed. Click to try again.\",\n  \"Message has been successfully flagged\": \"Message has been successfully flagged\",\n  Mute: Mute,\n  \"New Messages!\": \"New Messages!\",\n  \"Nothing yet...\": \"Nothing yet...\",\n  \"Only visible to you\": \"Only visible to you\",\n  \"Open emoji picker\": \"Open emoji picker\",\n  \"Pick your emoji\": \"Pick your emoji\",\n  Send: Send,\n  \"Sending...\": \"Sending...\",\n  \"Start of a new thread\": \"Start of a new thread\",\n  \"This message was deleted...\": \"This message was deleted...\",\n  Thread: Thread,\n  \"Type your message\": \"Type your message\",\n  Unmute: Unmute,\n  \"You have no channels currently\": \"You have no channels currently\",\n  live: live,\n  \"this content could not be displayed\": \"this content could not be displayed\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} and {{ moreCount }} more\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }}, and {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} and {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} and {{ secondUser }} are typing...\",\n  \"{{ imageCount }} more\": \"{{ imageCount }} more\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} members\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} replies\",\n  \"{{ user }} has been muted\": \"{{ user }} has been muted\",\n  \"{{ user }} has been unmuted\": \"{{ user }} has been unmuted\",\n  \"{{ user }} is typing...\": \"{{ user }} is typing...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} online\",\n  \"🏙 Attachment...\": \"🏙 Attachment...\"\n};\nvar Cancel$1 = \"Annuleer\";\nvar Close$1 = \"Sluit\";\nvar Delete$1 = \"Verwijder\";\nvar Delivered$1 = \"Afgeleverd\";\nvar Flag$1 = \"Markeer\";\nvar Mute$1 = \"Mute\";\nvar Send$1 = \"Verstuur\";\nvar Thread$1 = \"Draadje\";\nvar Unmute$1 = \"Unmute\";\nvar live$1 = \"live\";\nvar nlTranslations = {\n  \"1 reply\": \"1 antwoord\",\n  \"Attach files\": \"Bijlage toevoegen\",\n  Cancel: Cancel$1,\n  \"Channel Missing\": \"Kanaal niet gevonden\",\n  Close: Close$1,\n  \"Connection failure, reconnecting now...\": \"Probleem met de verbinding, opnieuw verbinding maken...\",\n  Delete: Delete$1,\n  Delivered: Delivered$1,\n  \"Edit Message\": \"Pas bericht aan\",\n  \"Empty message...\": \"Leeg bericht...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Fout bij het markeren: of het bericht is al gemarkeerd of er is een probleem met de netwerk verbinding\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Fout bij het verbinden, ververs de pagina om nogmaals te proberen\",\n  \"Error muting a user ...\": \"Fout bij het muten van de gebruiker\",\n  \"Error unmuting a user ...\": \"Fout bij het unmuten van de gebruiker\",\n  \"Error · Unsent\": \"Error: · niet verzonden\",\n  \"Error: {{ errorMessage }}\": \"Error: {{ errorMessage }}\",\n  Flag: Flag$1,\n  \"Message Failed · Click to try again\": \"Bericht mislukt, klik om het nogmaals te proberen\",\n  \"Message deleted\": \"Bericht verwijderd\",\n  \"Message failed. Click to try again.\": \"Bericht mislukt, klik om het nogmaals te proberen\",\n  \"Message has been successfully flagged\": \"Bericht is succesvol gemarkeerd\",\n  Mute: Mute$1,\n  \"New Messages!\": \"Nieuwe Berichten!\",\n  \"Nothing yet...\": \"Nog niets ...\",\n  \"Only visible to you\": \"Alleen zichtbaar voor jou\",\n  \"Open emoji picker\": \"Open emojipicker\",\n  \"Pick your emoji\": \"Kies je emoji\",\n  Send: Send$1,\n  \"Sending...\": \"Aan het verzenden...\",\n  \"Start of a new thread\": \"Begin van een nieuwe draadje\",\n  \"This message was deleted...\": \"Dit bericht was verwijderd\",\n  Thread: Thread$1,\n  \"Type your message\": \"Type je bericht\",\n  Unmute: Unmute$1,\n  \"You have no channels currently\": \"Er zijn geen chats beschikbaar\",\n  live: live$1,\n  \"this content could not be displayed\": \"Deze inhoud kan niet weergegeven worden\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} en {{ lastUser }} zijn aan het typen ...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} en {{ moreCount }} meer\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} en {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} en {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} en {{ secondUser }} zijn aan het typen ...\",\n  \"{{ imageCount }} more\": \"+{{ imageCount }}\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} deelnemers\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} antwoorden\",\n  \"{{ user }} has been muted\": \"{{ user }} is muted\",\n  \"{{ user }} has been unmuted\": \"{{ user }} is unmuted\",\n  \"{{ user }} is typing...\": \"{{ user }} is aan het typen...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} online\",\n  \"🏙 Attachment...\": \"🏙 Bijlage...\"\n};\nvar Cancel$2 = \"Отмена\";\nvar Close$2 = \"Закрыть\";\nvar Delete$2 = \"Удалить\";\nvar Delivered$2 = \"Отправлено\";\nvar Flag$2 = \"Пожаловаться\";\nvar Mute$2 = \"Отключить уведомления\";\nvar Send$2 = \"Отправить\";\nvar Thread$2 = \"Ветка\";\nvar Unmute$2 = \"Включить уведомления\";\nvar live$2 = \"В прямом эфире\";\nvar ruTranslations = {\n  \"1 reply\": \"1 ответ\",\n  \"Attach files\": \"Прикрепить файлы\",\n  Cancel: Cancel$2,\n  \"Channel Missing\": \"Канал не найден\",\n  Close: Close$2,\n  \"Connection failure, reconnecting now...\": \"Ошибка соединения, переподключение...\",\n  Delete: Delete$2,\n  Delivered: Delivered$2,\n  \"Edit Message\": \"Редактировать сообщение\",\n  \"Empty message...\": \"Пустое сообщение...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Ошибка добавления флага: флаг уже существует или ошибка подключения к сети...\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Ошибка подключения к чату, обновите страницу чтобы попробовать снова.\",\n  \"Error muting a user ...\": \"Ошибка отключения уведомлений от пользователя...\",\n  \"Error unmuting a user ...\": \"Ошибка включения уведомлений...\",\n  \"Error · Unsent\": \"Ошибка · Не отправлено\",\n  \"Error: {{ errorMessage }}\": \"Ошибка: {{ errorMessage }}\",\n  Flag: Flag$2,\n  \"Message Failed · Click to try again\": \"Ошибка отправки сообщения · Нажмите чтобы повторить\",\n  \"Message deleted\": \"Сообщение удалено\",\n  \"Message failed. Click to try again.\": \"Ошибка отправки сообщения · Нажмите чтобы повторить\",\n  \"Message has been successfully flagged\": \"Жалоба на сообщение была принята\",\n  Mute: Mute$2,\n  \"New Messages!\": \"Новые сообщения!\",\n  \"Nothing yet...\": \"Пока ничего нет...\",\n  \"Only visible to you\": \"Только видно для вас\",\n  \"Open emoji picker\": \"Выбрать emoji\",\n  \"Pick your emoji\": \"Выберите свой emoji\",\n  Send: Send$2,\n  \"Sending...\": \"Отправка...\",\n  \"Start of a new thread\": \"Начало новой ветки\",\n  \"This message was deleted...\": \"Сообщение было удалено...\",\n  Thread: Thread$2,\n  \"Type your message\": \"Ваше сообщение\",\n  Unmute: Unmute$2,\n  \"You have no channels currently\": \"У вас нет каналов в данный момент\",\n  live: live$2,\n  \"this content could not be displayed\": \"Этот контент не может быть отображен в данный момент\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} и {{ lastUser }} пишут...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} и {{ moreCount }} еще\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} и {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} и {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} и {{ secondUser }} пишут...\",\n  \"{{ imageCount }} more\": \"Ещё {{ imageCount }}\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} члены\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} ответов\",\n  \"{{ user }} has been muted\": \"Вы отписались от уведомлений от {{ user }}\",\n  \"{{ user }} has been unmuted\": \"Уведомления от {{ user }} были включены\",\n  \"{{ user }} is typing...\": \"{{ user }} пишет...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} в сети\",\n  \"🏙 Attachment...\": \"🏙 Вложение...\"\n};\nvar Cancel$3 = \"İptal\";\nvar Close$3 = \"Kapat\";\nvar Delete$3 = \"Sil\";\nvar Delivered$3 = \"İletildi\";\nvar Flag$3 = \"Bayrak\";\nvar Mute$3 = \"Sessiz\";\nvar Send$3 = \"Gönder\";\nvar Thread$3 = \"Konu\";\nvar Unmute$3 = \"Sesini aç\";\nvar live$3 = \"canlı\";\nvar trTranslations = {\n  \"1 reply\": \"1 cevap\",\n  \"Attach files\": \"Dosya ekle\",\n  Cancel: Cancel$3,\n  \"Channel Missing\": \"Kanal bulunamıyor\",\n  Close: Close$3,\n  \"Connection failure, reconnecting now...\": \"Bağlantı hatası, tekrar bağlanılıyor...\",\n  Delete: Delete$3,\n  Delivered: Delivered$3,\n  \"Edit Message\": \"Mesajı Düzenle\",\n  \"Empty message...\": \"Boş mesaj...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Bayraklama hatası: Bayrak zaten var veya bağlantı sorunlu\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Bağlantı hatası, sayfayı yenileyip tekrar deneyin.\",\n  \"Error muting a user ...\": \"Kullanıcıyı sessize alırken hata oluştu ...\",\n  \"Error unmuting a user ...\": \"Kullanıcının sesini açarken hata oluştu ...\",\n  \"Error · Unsent\": \"Hata · Gönderilemedi\",\n  \"Error: {{ errorMessage }}\": \"Hata: {{ errorMessage }}\",\n  Flag: Flag$3,\n  \"Message Failed · Click to try again\": \"Mesaj Başarısız · Tekrar denemek için tıklayın\",\n  \"Message deleted\": \"Mesaj silindi\",\n  \"Message failed. Click to try again.\": \"Mesaj başarısız oldu. Tekrar denemek için tıklayın\",\n  \"Message has been successfully flagged\": \"Mesaj başarıyla bayraklandı\",\n  Mute: Mute$3,\n  \"New Messages!\": \"Yeni Mesajlar!\",\n  \"Nothing yet...\": \"Şimdilik hiçbir şey...\",\n  \"Only visible to you\": \"Sadece size görünür\",\n  \"Open emoji picker\": \"Emoji klavyesini aç\",\n  \"Pick your emoji\": \"Emoji seçin\",\n  Send: Send$3,\n  \"Sending...\": \"Gönderiliyor...\",\n  \"Start of a new thread\": \"Yeni konunun başı\",\n  \"This message was deleted...\": \"Bu mesaj silindi\",\n  Thread: Thread$3,\n  \"Type your message\": \"Mesajınızı yazın\",\n  Unmute: Unmute$3,\n  \"You have no channels currently\": \"Henüz kanalınız yok\",\n  live: live$3,\n  \"this content could not be displayed\": \"bu içerik gösterilemiyor\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} ve {{ lastUser }} yazıyor...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} ve {{ moreCount }} daha\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }}, ve {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} ve {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} ve {{ secondUser }} yazıyor...\",\n  \"{{ imageCount }} more\": \"{{ imageCount }} adet daha\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} üyeler\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} cevaplar\",\n  \"{{ user }} has been muted\": \"{{ user }} sessize alındı\",\n  \"{{ user }} has been unmuted\": \"{{ user }} sesi açıldı\",\n  \"{{ user }} is typing...\": \"{{ user }} yazıyor...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} çevrimiçi\",\n  \"🏙 Attachment...\": \"🏙 Ek...\"\n};\nvar Cancel$4 = \"Annuler\";\nvar Close$4 = \"Fermer\";\nvar Delete$4 = \"Supprimer\";\nvar Delivered$4 = \"Publié\";\nvar Flag$4 = \"Signaler\";\nvar Mute$4 = \"Muet\";\nvar Send$4 = \"Envoyer\";\nvar Thread$4 = \"Fil de discussion\";\nvar Unmute$4 = \"Désactiver muet\";\nvar live$4 = \"en direct\";\nvar frTranslations = {\n  \"1 reply\": \"1 réponse\",\n  \"Attach files\": \"Pièces jointes\",\n  Cancel: Cancel$4,\n  \"Channel Missing\": \"Canal Manquant\",\n  Close: Close$4,\n  \"Connection failure, reconnecting now...\": \"Échec de la connexion, reconnexion en cours...\",\n  Delete: Delete$4,\n  Delivered: Delivered$4,\n  \"Edit Message\": \"Éditer un message\",\n  \"Empty message...\": \"Message vide...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Erreur d'ajout du flag : le flag existe déjà ou vous rencontrez un problème de connexion au réseau ...\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Erreur de connexion au chat, rafraîchissez la page pour réessayer.\",\n  \"Error muting a user ...\": \"Erreur de mise en sourdine d'un utilisateur ...\",\n  \"Error unmuting a user ...\": \"Erreur de désactivation de la fonction sourdine pour un utilisateur ...\",\n  \"Error · Unsent\": \"Erreur - Non envoyé\",\n  \"Error: {{ errorMessage }}\": \"Erreur : {{ errorMessage }}\",\n  Flag: Flag$4,\n  \"Message Failed · Click to try again\": \"Échec de l'envoi du message - Cliquez pour réessayer\",\n  \"Message deleted\": \"Message supprimé\",\n  \"Message failed. Click to try again.\": \"Échec de l'envoi du message - Cliquez pour réessayer\",\n  \"Message has been successfully flagged\": \"Le message a été signalé avec succès\",\n  Mute: Mute$4,\n  \"New Messages!\": \"Nouveaux Messages!\",\n  \"Nothing yet...\": \"Aucun message...\",\n  \"Only visible to you\": \"Visible uniquement pour vous\",\n  \"Open emoji picker\": \"Ouvrez le sélecteur d'emoji\",\n  \"Pick your emoji\": \"Choisissez votre emoji\",\n  Send: Send$4,\n  \"Sending...\": \"Envoi en cours...\",\n  \"Start of a new thread\": \"Début d'un nouveau fil de discussion\",\n  \"This message was deleted...\": \"Ce message a été supprimé...\",\n  Thread: Thread$4,\n  \"Type your message\": \"Saisissez votre message\",\n  Unmute: Unmute$4,\n  \"You have no channels currently\": \"Vous n'avez actuellement aucun canal\",\n  live: live$4,\n  \"this content could not be displayed\": \"ce contenu n'a pu être affiché\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} et {{ lastUser }} sont en train d'écrire...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} et {{ moreCount }} autres\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} et {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} et {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} et {{ secondUser }} sont en train d'écrire...\",\n  \"{{ imageCount }} more\": \"{{ imageCount }} supplémentaires\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} membres\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} réponses\",\n  \"{{ user }} has been muted\": \"{{ user }} a été mis en sourdine\",\n  \"{{ user }} has been unmuted\": \"{{ user }} n'est plus en sourdine\",\n  \"{{ user }} is typing...\": \"{{ user }} est en train d'écrire...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} en ligne\",\n  \"🏙 Attachment...\": \"🏙 Pièce jointe...\"\n};\nvar Cancel$5 = \"रद्द करें\";\nvar Close$5 = \"बंद करे\";\nvar Delete$5 = \"डिलीट\";\nvar Delivered$5 = \"पहुंच गया\";\nvar Flag$5 = \"फ्लैग करे\";\nvar Mute$5 = \"म्यूट करे\";\nvar Send$5 = \"भेजे\";\nvar Thread$5 = \"रिप्लाई थ्रेड\";\nvar Unmute$5 = \"अनम्यूट\";\nvar live$5 = \"लाइव\";\nvar hiTranslations = {\n  \"1 reply\": \"1 रिप्लाई\",\n  \"Attach files\": \"फाइल्स अटैच करे\",\n  Cancel: Cancel$5,\n  \"Channel Missing\": \"चैनल उपलब्ध नहीं है\",\n  Close: Close$5,\n  \"Connection failure, reconnecting now...\": \"कनेक्शन विफल रहा, अब पुनः कनेक्ट हो रहा है ...\",\n  Delete: Delete$5,\n  Delivered: Delivered$5,\n  \"Edit Message\": \"मैसेज में बदलाव करे\",\n  \"Empty message...\": \"खाली संदेश ...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"फ़ैल: या तो यह मैसेज के ऊपर पहले से फ्लैग है या तो आपके इंटरनेट कनेक्शन में कुछ परेशानी है\",\n  \"Error connecting to chat, refresh the page to try again.\": \"चैट से कनेक्ट करने में त्रुटि, पेज को रिफ्रेश करें\",\n  \"Error muting a user ...\": \"यूजर को म्यूट करने का प्रयास फेल हुआ\",\n  \"Error unmuting a user ...\": \"यूजर को अनम्यूट करने का प्रयास फेल हुआ\",\n  \"Error · Unsent\": \"फेल\",\n  \"Error: {{ errorMessage }}\": \"फेल: {{ errorMessage }}\",\n  Flag: Flag$5,\n  \"Message Failed · Click to try again\": \"मैसेज फ़ैल - पुनः कोशिश करें\",\n  \"Message deleted\": \"मैसेज हटा दिया गया\",\n  \"Message failed. Click to try again.\": \"मैसेज फ़ैल - पुनः कोशिश करें\",\n  \"Message has been successfully flagged\": \"मैसेज को फ्लैग कर दिया गया है\",\n  Mute: Mute$5,\n  \"New Messages!\": \"नए मैसेज!\",\n  \"Nothing yet...\": \"कोई मैसेज नहीं है\",\n  \"Only visible to you\": \"सिर्फ आपको दिखाई दे रहा है\",\n  \"Open emoji picker\": \"इमोजी पिकर खोलिये\",\n  \"Pick your emoji\": \"इमोजी चूस करे\",\n  Send: Send$5,\n  \"Sending...\": \"भेजा जा रहा है\",\n  \"Start of a new thread\": \"एक नए थ्रेड की शुरुआत\",\n  \"This message was deleted...\": \"मैसेज हटा दिया गया\",\n  Thread: Thread$5,\n  \"Type your message\": \"अपना मैसेज लिखे\",\n  Unmute: Unmute$5,\n  \"You have no channels currently\": \"आपके पास कोई चैनल नहीं है\",\n  live: live$5,\n  \"this content could not be displayed\": \"यह कॉन्टेंट लोड नहीं हो पाया\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} और {{ lastUser }} टाइप कर रहे हैं...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} और {{ moreCount }} और\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} और {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} और {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} और {{ secondUser }} टाइप कर रहे हैं...\",\n  \"{{ imageCount }} more\": \"{{ imageCount }} और\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} मेंबर्स\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} रिप्लाई\",\n  \"{{ user }} has been muted\": \"{{ user }} को म्यूट कर दिया गया है\",\n  \"{{ user }} has been unmuted\": \"{{ user }} को अनम्यूट कर दिया गया है\",\n  \"{{ user }} is typing...\": \"{{ user }} टाइप कर रहा है...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} online\",\n  \"🏙 Attachment...\": \"🏙 अटैचमेंट\"\n};\nvar Cancel$6 = \"Annulla\";\nvar Close$6 = \"Chiudi\";\nvar Delete$6 = \"Cancella\";\nvar Delivered$6 = \"Consegnato\";\nvar Flag$6 = \"Segnala\";\nvar Mute$6 = \"Silenzia\";\nvar Send$6 = \"Invia\";\nvar Thread$6 = \"Thread\";\nvar Unmute$6 = \"Riattiva le notifiche\";\nvar live$6 = \"live\";\nvar itTranslations = {\n  \"1 reply\": \"Una risposta\",\n  \"Attach files\": \"Allega file\",\n  Cancel: Cancel$6,\n  \"Channel Missing\": \"Il canale non esiste\",\n  Close: Close$6,\n  \"Connection failure, reconnecting now...\": \"Connessione fallitta, riconnessione in corso...\",\n  Delete: Delete$6,\n  Delivered: Delivered$6,\n  \"Edit Message\": \"Modifica messaggio\",\n  \"Empty message...\": \"Message vuoto...\",\n  \"Error adding flag: Either the flag already exist or there is issue with network connection ...\": \"Errore durante la segnalazione: la segnalazione esiste giá o c'é un problema di connessione ...\",\n  \"Error connecting to chat, refresh the page to try again.\": \"Errore di connessione alla chat, aggiorna la pagina per riprovare\",\n  \"Error muting a user ...\": \"Errore silenziando un utente ...\",\n  \"Error unmuting a user ...\": \"Errore riattivando le notifiche per l'utente ...\",\n  \"Error · Unsent\": \"Errore · Non inviato\",\n  \"Error: {{ errorMessage }}\": \"Errore: {{ errorMessage }}\",\n  Flag: Flag$6,\n  \"Message Failed · Click to try again\": \"Invio messaggio fallito · Clicca per riprovare\",\n  \"Message deleted\": \"Messaggio cancellato\",\n  \"Message failed. Click to try again.\": \"Invio messaggio fallito. Clicca per riprovare.\",\n  \"Message has been successfully flagged\": \"Il messaggio é stato segnalato con successo\",\n  Mute: Mute$6,\n  \"New Messages!\": \"Nuovo messaggio!\",\n  \"Nothing yet...\": \"Ancora niente...\",\n  \"Only visible to you\": \"Visibile soltanto da te\",\n  \"Open emoji picker\": \"Apri il selettore dellle emoji\",\n  \"Pick your emoji\": \"Scegli la tua emoji\",\n  Send: Send$6,\n  \"Sending...\": \"Invio in corso...\",\n  \"Start of a new thread\": \"Inizia un nuovo thread\",\n  \"This message was deleted...\": \"Questo messaggio é stato cancellato\",\n  Thread: Thread$6,\n  \"Type your message\": \"Scrivi il tuo messaggio\",\n  Unmute: Unmute$6,\n  \"You have no channels currently\": \"Al momento non sono presenti canali\",\n  live: live$6,\n  \"this content could not be displayed\": \"questo contenuto non puó essere mostrato\",\n  \"{{ commaSeparatedUsers }} and {{ lastUser }} are typing...\": \"{{ commaSeparatedUsers }} e {{ lastUser }} stanno scrivendo...\",\n  \"{{ commaSeparatedUsers }} and {{ moreCount }} more\": \"{{ commaSeparatedUsers }} e altri {{ moreCount }}\",\n  \"{{ commaSeparatedUsers }}, and {{ lastUser }}\": \"{{ commaSeparatedUsers }} e {{ lastUser }}\",\n  \"{{ firstUser }} and {{ secondUser }}\": \"{{ firstUser }} e {{ secondUser }}\",\n  \"{{ firstUser }} and {{ secondUser }} are typing...\": \"{{ firstUser }} e {{ secondUser }} stanno scrivendo...\",\n  \"{{ imageCount }} more\": \"+ {{ imageCount }}\",\n  \"{{ memberCount }} members\": \"{{ memberCount }} membri\",\n  \"{{ replyCount }} replies\": \"{{ replyCount }} risposte\",\n  \"{{ user }} has been muted\": \"{{ user }} é stato silenziato\",\n  \"{{ user }} has been unmuted\": \"Notifiche riattivate per {{ user }}\",\n  \"{{ user }} is typing...\": \"{{ user }} sta scrivendo...\",\n  \"{{ watcherCount }} online\": \"{{ watcherCount }} online\",\n  \"🏙 Attachment...\": \"🏙 Allegato...\"\n};\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar defaultNS = 'translation';\nvar defaultLng = 'en';\nDayjs.extend(updateLocale);\nDayjs.updateLocale('nl', {\n  calendar: {\n    sameDay: '[vandaag om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    sameDay: '[Oggi alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    sameDay: '[आज] LT',\n    nextDay: '[कल] LT',\n    nextWeek: 'dddd, LT',\n    lastDay: '[कल] LT',\n    lastWeek: '[पिछले] dddd, LT',\n    sameElse: 'L'\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiemParse: /रात|सुबह|दोपहर|शाम/,\n\n  meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n\n    if (meridiem === 'रात') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === 'सुबह') {\n      return hour;\n    } else if (meridiem === 'दोपहर') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === 'शाम') {\n      return hour + 12;\n    }\n  },\n\n  meridiem(hour) {\n    if (hour < 4) {\n      return 'रात';\n    } else if (hour < 10) {\n      return 'सुबह';\n    } else if (hour < 17) {\n      return 'दोपहर';\n    } else if (hour < 20) {\n      return 'शाम';\n    } else {\n      return 'रात';\n    }\n  }\n\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    sameDay: '[Aujourd’hui à] LT',\n    nextDay: '[Demain à] LT',\n    nextWeek: 'dddd [à] LT',\n    lastDay: '[Hier à] LT',\n    lastWeek: 'dddd [dernier à] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    sameDay: '[bugün saat] LT',\n    nextDay: '[yarın saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    lastDay: '[dün] LT',\n    lastWeek: '[geçen] dddd [saat] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    sameDay: '[Сегодня, в] LT',\n    nextDay: '[Завтра, в] LT',\n    lastDay: '[Вчера, в] LT'\n  }\n});\nvar en_locale = {\n  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_')\n};\n/**\n * Wrapper around [i18next](https://www.i18next.com/) class for Stream related translations.\n * Instance of this class should be provided to Chat component to handle translations.\n * Stream provides following list of in-built translations:\n * 1. English (en)\n * 2. Dutch (nl)\n * 3. Russian (ru)\n * 4. Turkish (tr)\n * 5. French (fr)\n * 6. Italian (it)\n * 7. Hindi (hi)\n *\n * Simplest way to start using chat components in one of the in-built languages would be following:\n *\n * ```\n * const i18n = new Streami18n({ language 'nl' });\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * If you would like to override certain keys in in-built translation.\n * UI will be automatically updated in this case.\n *\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  translationsForLanguage: {\n *    'Nothing yet...': 'Nog Niet ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n *  }\n * });\n *\n * If you would like to register additional languages, use registerTranslation. You can add as many languages as you want:\n *\n * i18n.registerTranslation('zh', {\n *  'Nothing yet...': 'Nog Niet ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n * });\n *\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * You can use the same function to add whole new language as well.\n *\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation('mr', {\n *  'Nothing yet...': 'काहीही नाही  ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n * });\n *\n * // Make sure to call setLanguage to reflect new language in UI.\n * i18n.setLanguage('it');\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * ## Datetime translations\n *\n * Stream react chat components uses [dayjs](https://day.js.org/en/) internally by default to format datetime stamp.\n * e.g., in ChannelPreview, MessageContent components.\n * Dayjs has locale support as well - https://day.js.org/docs/en/i18n/i18n\n * Dayjs is a lightweight alternative to Momentjs with the same modern API.\n *\n * Dayjs provides locale config for plenty of languages, you can check the whole list of locale configs at following url\n * https://github.com/iamkun/dayjs/tree/dev/src/locale\n *\n * You can either provide the dayjs locale config while registering\n * language with Streami18n (either via constructor or registerTranslation()) or you can provide your own Dayjs or Moment instance\n * to Streami18n constructor, which will be then used internally (using the language locale) in components.\n *\n * 1. Via language registration\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  dayjsLocaleConfigForLanguage: {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * });\n * ```\n *\n * Similarly, you can add locale config for moment while registering translation via `registerTranslation` function.\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation(\n *  'mr',\n *  {\n *    'Nothing yet...': 'काहीही नाही  ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n *  },\n *  {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * );\n *```\n * 2. Provide your own Moment object\n *\n * ```js\n * import 'moment/locale/nl';\n * import 'moment/locale/it';\n * // or if you want to include all locales\n * import 'moment/min/locales';\n *\n * import Moment from moment\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Moment\n * })\n * ```\n *\n * 3. Provide your own Dayjs object\n *\n * ```js\n * import Dayjs from 'dayjs'\n *\n * import 'dayjs/locale/nl';\n * import 'dayjs/locale/it';\n * // or if you want to include all locales\n * import 'dayjs/min/locales';\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Dayjs\n * })\n * ```\n * If you would like to stick with english language for datetimes in Stream compoments, you can set `disableDateTimeTranslations` to true.\n *\n */\n\nvar defaultStreami18nOptions = {\n  language: 'en',\n  disableDateTimeTranslations: false,\n  debug: false,\n  logger: function logger(msg) {\n    return console.warn(msg);\n  },\n  dayjsLocaleConfigForLanguage: null,\n  DateTimeParser: Dayjs\n};\n\nvar Streami18n = /*#__PURE__*/function () {\n  /**\n   * dayjs.defineLanguage('nl') also changes the global locale. We don't want to do that\n   * when user calls registerTranslation() function. So intead we will store the locale configs\n   * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n   * with moment, when setLanguage is called.\n   * */\n\n  /**\n   * Contructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for datetimes\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  function Streami18n() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Streami18n);\n\n    _defineProperty(this, \"i18nInstance\", i18n.createInstance());\n\n    _defineProperty(this, \"Dayjs\", null);\n\n    _defineProperty(this, \"setLanguageCallback\", function () {\n      return null;\n    });\n\n    _defineProperty(this, \"initialized\", false);\n\n    _defineProperty(this, \"t\", null);\n\n    _defineProperty(this, \"tDateTimeParser\", null);\n\n    _defineProperty(this, \"translations\", {\n      en: {\n        [defaultNS]: enTranslations\n      },\n      nl: {\n        [defaultNS]: nlTranslations\n      },\n      ru: {\n        [defaultNS]: ruTranslations\n      },\n      tr: {\n        [defaultNS]: trTranslations\n      },\n      fr: {\n        [defaultNS]: frTranslations\n      },\n      hi: {\n        [defaultNS]: hiTranslations\n      },\n      it: {\n        [defaultNS]: itTranslations\n      }\n    });\n\n    _defineProperty(this, \"dayjsLocales\", {});\n\n    _defineProperty(this, \"localeExists\", function (language) {\n      if (_this.isCustomDateTimeParser) return true;\n      return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n    });\n\n    _defineProperty(this, \"validateCurrentLanguage\", function () {\n      var availableLanguages = Object.keys(_this.translations);\n\n      if (availableLanguages.indexOf(_this.currentLanguage) === -1) {\n        _this.logger(\"Streami18n: '\".concat(_this.currentLanguage, \"' language is not registered.\") + \" Please make sure to call streami18n.registerTranslation('\".concat(_this.currentLanguage, \"', {...}) or \") + \"use one the built-in supported languages - \".concat(_this.getAvailableLanguages()));\n\n        _this.currentLanguage = defaultLng;\n      }\n    });\n\n    _defineProperty(this, \"geti18Instance\", function () {\n      return _this.i18nInstance;\n    });\n\n    _defineProperty(this, \"getAvailableLanguages\", function () {\n      return Object.keys(_this.translations);\n    });\n\n    _defineProperty(this, \"getTranslations\", function () {\n      return _this.translations;\n    });\n\n    var finalOptions = _objectSpread$1(_objectSpread$1({}, defaultStreami18nOptions), options); // Prepare the i18next configuration.\n\n\n    this.logger = finalOptions.logger;\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      // This is a shallow check to see if given parser is instance of Dayjs.\n      // For some reason Dayjs.isDayjs(this.DateTimeParser()) doesn't work.\n      if (this.DateTimeParser && this.DateTimeParser.extend) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\"Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins \".concat(error));\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    var translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: translationsForLanguage\n      };\n    } // If translations don't exist for given language, then set it as empty object.\n\n\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: {}\n      };\n    }\n\n    this.i18nextConfig = {\n      nsSeparator: false,\n      keySeparator: false,\n      fallbackLng: false,\n      debug: finalOptions.debug,\n      lng: this.currentLanguage,\n      interpolation: {\n        escapeValue: false\n      },\n      parseMissingKeyHandler: function parseMissingKeyHandler(key) {\n        _this.logger(\"Streami18n: Missing translation for key: \".concat(key));\n\n        return key;\n      }\n    };\n    this.validateCurrentLanguage(this.currentLanguage);\n    var dayjsLocaleConfigForLanguage = finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, _objectSpread$1({}, dayjsLocaleConfigForLanguage));\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\"Streami18n: Streami18n(...) - Locale config for \".concat(this.currentLanguage, \" does not exist in momentjs.\") + \"Please import the locale file using \\\"import 'moment/locale/\".concat(this.currentLanguage, \"';\\\" in your app or \") + \"register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)\");\n    }\n\n    this.tDateTimeParser = function (timestamp) {\n      if (finalOptions.disableDateTimeTranslations || !_this.localeExists(_this.currentLanguage)) {\n        return _this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n\n      return _this.DateTimeParser(timestamp).locale(_this.currentLanguage);\n    };\n  }\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n\n\n  _createClass(Streami18n, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.validateCurrentLanguage();\n                _context.prev = 1;\n                _context.next = 4;\n                return this.i18nInstance.init(_objectSpread$1(_objectSpread$1({}, this.i18nextConfig), {}, {\n                  resources: this.translations,\n                  lng: this.currentLanguage\n                }));\n\n              case 4:\n                this.t = _context.sent;\n                this.initialized = true;\n                return _context.abrupt(\"return\", {\n                  t: this.t,\n                  tDateTimeParser: this.tDateTimeParser\n                });\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                this.logger(\"Something went wrong with init:\", _context.t0);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 9]]);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"getTranslators\",\n\n    /**\n     * Returns current version translator function.\n     */\n    value: function () {\n      var _getTranslators = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.initialized) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                if (this.dayjsLocales[this.currentLanguage]) {\n                  this.addOrUpdateLocale(this.currentLanguage, this.dayjsLocales[this.currentLanguage]);\n                }\n\n                _context2.next = 4;\n                return this.init();\n\n              case 4:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 7:\n                return _context2.abrupt(\"return\", {\n                  t: this.t,\n                  tDateTimeParser: this.tDateTimeParser\n                });\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getTranslators() {\n        return _getTranslators.apply(this, arguments);\n      }\n\n      return getTranslators;\n    }()\n    /**\n     * Register translation\n     *\n     * @param {*} language\n     * @param {*} translation\n     * @param {*} customDayjsLocale\n     */\n\n  }, {\n    key: \"registerTranslation\",\n    value: function registerTranslation(language, translation, customDayjsLocale) {\n      if (!translation) {\n        this.logger(\"Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation\");\n        return;\n      }\n\n      if (!this.translations[language]) {\n        this.translations[language] = {\n          [defaultNS]: translation\n        };\n      } else {\n        this.translations[language][defaultNS] = translation;\n      }\n\n      if (customDayjsLocale) {\n        this.dayjsLocales[language] = _objectSpread$1({}, customDayjsLocale);\n      } else if (!this.localeExists(language)) {\n        this.logger(\"Streami18n: registerTranslation(language, translation, customDayjsLocale) - \" + \"Locale config for \".concat(language, \" does not exist in Dayjs.\") + \"Please import the locale file using \\\"import 'dayjs/locale/\".concat(language, \"';\\\" in your app or \") + \"register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)\");\n      }\n\n      if (this.initialized) {\n        this.i18nInstance.addResources(language, defaultNS, translation);\n      }\n    }\n  }, {\n    key: \"addOrUpdateLocale\",\n    value: function addOrUpdateLocale(key, config) {\n      if (this.localeExists(key)) {\n        Dayjs.updateLocale(key, _objectSpread$1({}, config));\n      } else {\n        // Merging the custom locale config with en config, so missing keys can default to english.\n        Dayjs.locale(_objectSpread$1({\n          name: key\n        }, _objectSpread$1(_objectSpread$1({}, en_locale), config)), null, true);\n      }\n    }\n    /**\n     * Changes the language.\n     * @param {*} language\n     */\n\n  }, {\n    key: \"setLanguage\",\n    value: function () {\n      var _setLanguage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(language) {\n        var t;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.currentLanguage = language;\n\n                if (this.initialized) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 3:\n                _context3.prev = 3;\n                _context3.next = 6;\n                return this.i18nInstance.changeLanguage(language);\n\n              case 6:\n                t = _context3.sent;\n\n                if (this.dayjsLocales[language]) {\n                  this.addOrUpdateLocale(this.currentLanguage, this.dayjsLocales[this.currentLanguage]);\n                }\n\n                this.setLanguageCallback(t);\n                return _context3.abrupt(\"return\", t);\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](3);\n                this.logger(\"Failed to set language:\", _context3.t0);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[3, 12]]);\n      }));\n\n      function setLanguage(_x) {\n        return _setLanguage.apply(this, arguments);\n      }\n\n      return setLanguage;\n    }()\n    /**\n     * @param {(t: import('i18next').TFunction) => void} callback\n     */\n\n  }, {\n    key: \"registerSetLanguageCallback\",\n    value: function registerSetLanguageCallback(callback) {\n      this.setLanguageCallback = callback;\n    }\n  }]);\n\n  return Streami18n;\n}();\n/**\n * AttachmentActions - The actions you can take on an attachment\n *\n * @example ../../docs/AttachmentActions.md\n * @type {React.FC<import('type').AttachmentActionsProps>}\n */\n\n\nvar AttachmentActions = function AttachmentActions(_ref) {\n  var text = _ref.text,\n      id = _ref.id,\n      actions = _ref.actions,\n      actionHandler = _ref.actionHandler;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-actions\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-actions-form\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    key: 0\n  }, text), actions.map(function (action) {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--\".concat(action.style),\n      \"data-testid\": \"\".concat(action.name),\n      key: \"\".concat(id, \"-\").concat(action.value),\n      \"data-value\": action.value,\n      onClick: function onClick(e) {\n        return actionHandler(action.name, action.value, e);\n      }\n    }, action.text);\n  })));\n};\n\nAttachmentActions.propTypes = {\n  /** Unique id for action button key. Key is generated by concatenating this id with action value - {`${id}-${action.value}`} */\n  id: PropTypes.string.isRequired,\n\n  /** The text for the form input */\n  text: PropTypes.string,\n\n  /** A list of actions */\n  actions: PropTypes.array.isRequired,\n\n  /**\n   *\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  actionHandler: PropTypes.func.isRequired\n};\nvar DefaultAttachmentActions = /*#__PURE__*/React.memo(AttachmentActions);\nvar progressUpdateInterval = 500;\n/**\n * Audio attachment with play/pause button and progress bar\n * @param {import(\"types\").AudioProps} props\n */\n\nvar Audio = function Audio(_ref) {\n  var og = _ref.og;\n  var audioRef = useRef(\n  /** @type {HTMLAudioElement | null} */\n  null);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isPlaying = _useState2[0],\n      setIsPlaying = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      progress = _useState4[0],\n      setProgress = _useState4[1];\n\n  var updateProgress = useCallback(function () {\n    if (audioRef.current !== null) {\n      var position = audioRef.current.currentTime;\n      var duration = audioRef.current.duration;\n      var currentProgress = 100 / duration * position;\n      setProgress(currentProgress);\n\n      if (position === duration) {\n        setIsPlaying(false);\n      }\n    }\n  }, [audioRef]);\n  useEffect(function () {\n    if (audioRef.current !== null) {\n      if (isPlaying) {\n        audioRef.current.play();\n        var interval = setInterval(updateProgress, progressUpdateInterval);\n        return function () {\n          return clearInterval(interval);\n        };\n      }\n\n      audioRef.current.pause();\n    }\n\n    return function () {};\n  }, [isPlaying, updateProgress]);\n  var asset_url = og.asset_url,\n      image_url = og.image_url,\n      title = og.title,\n      description = og.description,\n      text = og.text;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__audio\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__audio__wrapper\"\n  }, /*#__PURE__*/React.createElement(\"audio\", {\n    ref: audioRef\n  }, /*#__PURE__*/React.createElement(\"source\", {\n    src: asset_url,\n    type: \"audio/mp3\",\n    \"data-testid\": \"audio-source\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__audio__image\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__audio__image--overlay\"\n  }, !isPlaying ? /*#__PURE__*/React.createElement(\"div\", {\n    onClick: function onClick() {\n      return setIsPlaying(true);\n    },\n    className: \"str-chat__audio__image--button\",\n    \"data-testid\": \"play-audio\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"40\",\n    height: \"40\",\n    viewBox: \"0 0 64 64\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z\",\n    fillRule: \"nonzero\"\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    onClick: function onClick() {\n      return setIsPlaying(false);\n    },\n    className: \"str-chat__audio__image--button\",\n    \"data-testid\": \"pause-audio\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"40\",\n    height: \"40\",\n    viewBox: \"0 0 64 64\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z\",\n    fillRule: \"nonzero\"\n  })))), image_url && /*#__PURE__*/React.createElement(\"img\", {\n    src: image_url,\n    alt: \"\".concat(description)\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__audio__content\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__audio__content--title\"\n  }, /*#__PURE__*/React.createElement(\"strong\", null, title)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__audio__content--subtitle\"\n  }, text), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__audio__content--progress\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"\".concat(progress, \"%\")\n    },\n    \"data-testid\": \"audio-progress\"\n  })))));\n};\n\nvar DefaultAudio = /*#__PURE__*/React.memo(Audio);\nvar giphyLogo = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==\"; // @ts-check\n\n/**\n * SafeAnchor - In all ways similar to a regular anchor tag.\n * The difference is that it sanitizes the href value and prevents XSS\n * @type {React.FC<React.AnchorHTMLAttributes<HTMLAnchorElement>>}\n */\n\nvar SafeAnchor = function SafeAnchor(_ref) {\n  var href = _ref.href,\n      children = _ref.children,\n      target = _ref.target,\n      className = _ref.className;\n  if (!href) return null;\n  var sanitized = sanitizeUrl(href);\n  return /*#__PURE__*/React.createElement(\"a\", {\n    href: sanitized,\n    target: target,\n    className: className\n  }, children);\n};\n\nvar SafeAnchor$1 = /*#__PURE__*/React.memo(SafeAnchor);\n/**\n * Card - Simple Card Layout\n *\n * @example ../../docs/Card.md\n * @typedef {import('../types').CardProps} Props\n * @type React.FC<Props>\n */\n\nvar Card = function Card(_ref) {\n  var title = _ref.title,\n      title_link = _ref.title_link,\n      og_scrape_url = _ref.og_scrape_url,\n      image_url = _ref.image_url,\n      thumb_url = _ref.thumb_url,\n      text = _ref.text,\n      type = _ref.type;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var image = thumb_url || image_url;\n  /** @type {(url?: string) => string | null} Typescript syntax */\n\n  var trimUrl = function trimUrl(url) {\n    if (url !== undefined && url !== null) {\n      var _url$replace$split = url.replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '').split('/'),\n          _url$replace$split2 = _slicedToArray(_url$replace$split, 1),\n          trimmedUrl = _url$replace$split2[0];\n\n      return trimmedUrl;\n    }\n\n    return null;\n  };\n\n  if (!title && !title_link && !image) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__message-attachment-card str-chat__message-attachment-card--\".concat(type)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__message-attachment-card--content\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__message-attachment-card--text\"\n    }, t('this content could not be displayed'))));\n  }\n\n  if (!title_link && !og_scrape_url) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-card str-chat__message-attachment-card--\".concat(type)\n  }, image && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-card--header\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: image\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-card--content\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-card--flex\"\n  }, title && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-card--title\"\n  }, title), text && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-card--text\"\n  }, text), (title_link || og_scrape_url) && /*#__PURE__*/React.createElement(SafeAnchor$1, {\n    href: title_link || og_scrape_url,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    className: \"str-chat__message-attachment-card--url\"\n  }, trimUrl(title_link || og_scrape_url))), type === 'giphy' && /*#__PURE__*/React.createElement(\"img\", {\n    className: \"str-chat__message-attachment-card__giphy-logo\",\n    \"data-testid\": \"card-giphy\",\n    src: giphyLogo,\n    alt: \"giphy logo\"\n  })));\n};\n\nCard.propTypes = {\n  /** Title returned by the OG scraper */\n  title: PropTypes.string,\n\n  /** Link returned by the OG scraper */\n  title_link: PropTypes.string,\n\n  /** The scraped url, used as a fallback if the OG-data doesn't include a link */\n  og_scrape_url: PropTypes.string,\n\n  /** The url of the full sized image */\n  image_url: PropTypes.string,\n\n  /** The url for thumbnail sized image */\n  thumb_url: PropTypes.string,\n\n  /** Description returned by the OG scraper */\n  text: PropTypes.string\n};\nvar DefaultCard = /*#__PURE__*/React.memo(Card);\n/** @type React.FC<import('../types').FileAttachmentProps> */\n\nvar FileAttachment = function FileAttachment(_ref) {\n  var attachment = _ref.attachment;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"attachment-file\",\n    className: \"str-chat__message-attachment-file--item\"\n  }, /*#__PURE__*/React.createElement(FileIcon, {\n    mimeType: attachment.mime_type,\n    filename: attachment.title,\n    big: true,\n    size: 30\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-file--item-text\"\n  }, /*#__PURE__*/React.createElement(SafeAnchor$1, {\n    href: attachment.asset_url,\n    target: \"_blank\",\n    download: true\n  }, attachment.title), attachment.file_size && /*#__PURE__*/React.createElement(\"span\", null, prettybytes(attachment.file_size))));\n};\n\nvar DefaultFile = /*#__PURE__*/React.memo(FileAttachment); // @ts-check\n\n/**\n * Modal - Custom Image component used in modal\n * @type {React.FC<import('../types').ModalImageProps>}\n */\n\nvar ModalImage = function ModalImage(_ref) {\n  var data = _ref.data;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__modal-image__wrapper\",\n    \"data-testid\": \"modal-image\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: data.src,\n    className: \"str-chat__modal-image__image\"\n  }));\n};\n\nModalImage.propTypes = {\n  data: PropTypes.shape({\n    src: PropTypes.string.isRequired\n  }).isRequired\n}; // @ts-check\n\n/**\n * ImageModal - Small modal component\n * @type { React.FC<import('../types').ModalWrapperProps>}\n */\n\nvar ModalComponent = function ModalComponent(_ref) {\n  var images = _ref.images,\n      toggleModal = _ref.toggleModal,\n      index = _ref.index,\n      modalIsOpen = _ref.modalIsOpen;\n  return /*#__PURE__*/React.createElement(ModalGateway, null, modalIsOpen ?\n  /*#__PURE__*/\n  // @ts-ignore\n  React.createElement(Modal$1, {\n    onClose: toggleModal\n  }, /*#__PURE__*/React.createElement(Carousel, {\n    views: images,\n    currentIndex: index,\n    components: {\n      // @ts-ignore\n      View: ModalImage\n    }\n  })) : null);\n};\n\nModalComponent.propTypes = {\n  images: PropTypes.array.isRequired,\n  toggleModal: PropTypes.func.isRequired,\n  index: PropTypes.number,\n  modalIsOpen: PropTypes.bool.isRequired\n};\n/**\n * Gallery - displays up to 4 images in a simple responsive grid with a lightbox to view the images.\n * @example ../../docs/Gallery.md\n * @typedef {import('../types').GalleryProps} Props\n * @type React.FC<Props>\n */\n\nvar Gallery = function Gallery(_ref) {\n  var images = _ref.images;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      index = _useState2[0],\n      setIndex = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalOpen = _useState4[0],\n      setModalOpen = _useState4[1];\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n  /**\n   * @param {number} selectedIndex Index of image clicked\n   */\n\n\n  var toggleModal = function toggleModal(selectedIndex) {\n    if (modalOpen) {\n      setModalOpen(false);\n    } else {\n      setIndex(selectedIndex);\n      setModalOpen(true);\n    }\n  };\n\n  var formattedArray = useMemo(function () {\n    return images.map(function (image) {\n      return {\n        src: image.image_url || image.thumb_url || '',\n        source: image.image_url || image.thumb_url || ''\n      };\n    });\n  }, [images]);\n  var renderImages = images.slice(0, 3).map(function (image, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"gallery-image\",\n      className: \"str-chat__gallery-image\",\n      key: \"gallery-image-\".concat(i),\n      onClick: function onClick() {\n        return toggleModal(i);\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: image.image_url || image.thumb_url\n    }));\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__gallery \".concat(images.length > 3 ? 'str-chat__gallery--square' : '')\n  }, renderImages, images.length > 3 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__gallery-placeholder\",\n    style: {\n      backgroundImage: \"url(\".concat(images[3].image_url, \")\")\n    },\n    onClick: function onClick() {\n      return toggleModal(3);\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", null, t('{{ imageCount }} more', {\n    imageCount: images.length - 3\n  }))), /*#__PURE__*/React.createElement(ModalComponent, {\n    images: formattedArray,\n    index: index // @ts-ignore\n    ,\n    toggleModal: toggleModal,\n    modalIsOpen: modalOpen\n  }));\n};\n\nGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired\n};\nvar Gallery$1 = /*#__PURE__*/React.memo(Gallery);\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Image - Small wrapper around an image tag, supports thumbnails\n *\n * @example ../../docs/Image.md\n * @extends {React.PureComponent<import('type').ImageProps>}\n */\n\n\nvar Image = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Image, _React$PureComponent);\n\n  var _super = _createSuper(Image);\n\n  function Image() {\n    var _this;\n\n    _classCallCheck(this, Image);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      modalIsOpen: false,\n      currentIndex: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleModal\", function () {\n      _this.setState(function (state) {\n        return {\n          modalIsOpen: !state.modalIsOpen\n        };\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Image, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          image_url = _this$props.image_url,\n          thumb_url = _this$props.thumb_url,\n          fallback = _this$props.fallback;\n      var formattedArray = [{\n        src: image_url || thumb_url\n      }];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"str-chat__message-attachment--img\",\n        onClick: this.toggleModal,\n        src: thumb_url || image_url,\n        alt: fallback,\n        \"data-testid\": \"image-test\"\n      }), /*#__PURE__*/React.createElement(ModalComponent, {\n        images: formattedArray,\n        toggleModal: this.toggleModal,\n        index: this.state.currentIndex,\n        modalIsOpen: this.state.modalIsOpen\n      }));\n    }\n  }]);\n\n  return Image;\n}(React.PureComponent);\n\n_defineProperty(Image, \"propTypes\", {\n  /** The full size image url */\n  image_url: PropTypes.string,\n\n  /** The thumb url */\n  thumb_url: PropTypes.string,\n\n  /** The text fallback for the image */\n  fallback: PropTypes.string\n});\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$2(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$2(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar SUPPORTED_VIDEO_FORMATS = ['video/mp4', 'video/ogg', 'video/webm', 'video/quicktime'];\n/**\n * @typedef {import('../types').ExtendedAttachment} ExtendedAttachment\n * @typedef {Required<Pick<import('../types').AttachmentUIComponentProps, 'Card' | 'File' | 'Image' | 'Audio' | 'Media' | 'AttachmentActions'>>} DefaultProps\n * @typedef {Omit<import('../types').AttachmentUIComponentProps, 'Card' | 'File' | 'Image' | 'Audio' | 'Media' | 'AttachmentActions'> & DefaultProps} AttachmentProps\n */\n\n/**\n * @param {ExtendedAttachment} a\n */\n\nvar isImageAttachment = function isImageAttachment(a) {\n  return a.type === 'image' && !a.title_link && !a.og_scrape_url;\n};\n/**\n * @param {ExtendedAttachment} a\n */\n\n\nvar isMediaAttachment = function isMediaAttachment(a) {\n  return a.mime_type && SUPPORTED_VIDEO_FORMATS.indexOf(a.mime_type) !== -1 || a.type === 'video';\n};\n/**\n * @param {ExtendedAttachment} a\n */\n\n\nvar isAudioAttachment = function isAudioAttachment(a) {\n  return a.type === 'audio';\n};\n/**\n * @param {ExtendedAttachment} a\n */\n\n\nvar isFileAttachment = function isFileAttachment(a) {\n  return a.type === 'file' || a.mime_type && SUPPORTED_VIDEO_FORMATS.indexOf(a.mime_type) === -1 && a.type !== 'video';\n};\n/**\n * @param {React.ReactNode} children\n * @param {ExtendedAttachment} attachment\n * @param {string} componentType\n */\n\n\nvar renderAttachmentWithinContainer = function renderAttachmentWithinContainer(children, attachment, componentType) {\n  var extra = attachment && attachment.actions && attachment.actions.length ? 'actions' : '';\n\n  if (componentType === 'card' && !attachment.image_url && !attachment.thumb_url) {\n    extra = 'no-image';\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment str-chat__message-attachment--\".concat(componentType, \" str-chat__message-attachment--\").concat(attachment.type, \" str-chat__message-attachment--\").concat(componentType, \"--\").concat(extra)\n  }, children);\n};\n/**\n * @param {AttachmentProps} props\n */\n\n\nvar renderAttachmentActions = function renderAttachmentActions(props) {\n  var a = props.attachment,\n      AttachmentActions = props.AttachmentActions,\n      actionHandler = props.actionHandler;\n\n  if (!a.actions || !a.actions.length) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(AttachmentActions, _extends({}, a, {\n    id: a.id || '',\n    actions: a.actions || [],\n    text: a.text || '',\n    key: \"key-actions-\".concat(a.id),\n    actionHandler: actionHandler\n  }));\n};\n/**\n * @param {AttachmentProps} props\n */\n\n\nvar renderImage = function renderImage(props) {\n  var a = props.attachment,\n      Image = props.Image;\n\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__attachment\",\n      key: \"key-image-\".concat(a.id)\n    }, /*#__PURE__*/React.createElement(Image, a), renderAttachmentActions(props)), a, 'image');\n  }\n\n  return renderAttachmentWithinContainer( /*#__PURE__*/React.createElement(Image, _extends({}, a, {\n    key: \"key-image-\".concat(a.id)\n  })), a, 'image');\n};\n/**\n * @param {AttachmentProps} props\n */\n\n\nvar renderCard = function renderCard(props) {\n  var a = props.attachment,\n      Card = props.Card;\n\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__attachment\",\n      key: \"key-image-\".concat(a.id)\n    }, /*#__PURE__*/React.createElement(Card, _extends({}, a, {\n      key: \"key-card-\".concat(a.id)\n    })), renderAttachmentActions(props)), a, 'card');\n  }\n\n  return renderAttachmentWithinContainer( /*#__PURE__*/React.createElement(Card, _extends({}, a, {\n    key: \"key-card-\".concat(a.id)\n  })), a, 'card');\n};\n/**\n * @param {AttachmentProps} props\n */\n\n\nvar renderFile = function renderFile(props) {\n  var a = props.attachment,\n      File = props.File;\n  if (!a.asset_url) return null;\n  return renderAttachmentWithinContainer( /*#__PURE__*/React.createElement(File, {\n    attachment: a,\n    key: \"key-file-\".concat(a.id)\n  }), a, 'file');\n};\n/**\n * @param {AttachmentProps} props\n */\n\n\nvar renderAudio = function renderAudio(props) {\n  var a = props.attachment,\n      Audio = props.Audio;\n  return renderAttachmentWithinContainer( /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__attachment\",\n    key: \"key-video-\".concat(a.id)\n  }, /*#__PURE__*/React.createElement(Audio, {\n    og: a\n  })), a, 'audio');\n};\n/**\n * @param {AttachmentProps} props\n */\n\n\nvar renderMedia = function renderMedia(props) {\n  var a = props.attachment,\n      Media = props.Media;\n\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__attachment str-chat__attachment-media\",\n      key: \"key-video-\".concat(a.id)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__player-wrapper\"\n    }, /*#__PURE__*/React.createElement(Media, {\n      className: \"react-player\",\n      url: a.asset_url,\n      width: \"100%\",\n      height: \"100%\",\n      controls: true\n    })), renderAttachmentActions(props)), a, 'media');\n  }\n\n  return renderAttachmentWithinContainer( /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__player-wrapper\",\n    key: \"key-video-\".concat(a.id)\n  }, /*#__PURE__*/React.createElement(Media, {\n    className: \"react-player\",\n    url: a.asset_url,\n    width: \"100%\",\n    height: \"100%\",\n    controls: true\n  })), a, 'media');\n};\n/**\n * Attachment - The message attachment\n *\n * @example ../../docs/Attachment.md\n * @type { React.FC<import('../types').AttachmentUIComponentProps> }\n */\n\n\nvar Attachment = function Attachment(_ref) {\n  var attachment = _ref.attachment,\n      _ref$Card = _ref.Card,\n      Card = _ref$Card === void 0 ? DefaultCard : _ref$Card,\n      _ref$Image = _ref.Image,\n      Image$1 = _ref$Image === void 0 ? Image : _ref$Image,\n      _ref$Audio = _ref.Audio,\n      Audio = _ref$Audio === void 0 ? DefaultAudio : _ref$Audio,\n      _ref$File = _ref.File,\n      File = _ref$File === void 0 ? DefaultFile : _ref$File,\n      _ref$Media = _ref.Media,\n      Media = _ref$Media === void 0 ? DefaultMedia : _ref$Media,\n      _ref$AttachmentAction = _ref.AttachmentActions,\n      AttachmentActions = _ref$AttachmentAction === void 0 ? DefaultAttachmentActions : _ref$AttachmentAction,\n      rest = _objectWithoutProperties(_ref, [\"attachment\", \"Card\", \"Image\", \"Audio\", \"File\", \"Media\", \"AttachmentActions\"]);\n\n  var propsWithDefault = _objectSpread$2({\n    attachment,\n    Card,\n    Image: Image$1,\n    Audio,\n    File,\n    Media,\n    AttachmentActions\n  }, rest);\n\n  if (isImageAttachment(attachment)) {\n    return renderImage(propsWithDefault);\n  }\n\n  if (isFileAttachment(attachment)) {\n    return renderFile(propsWithDefault);\n  }\n\n  if (isAudioAttachment(attachment)) {\n    return renderAudio(propsWithDefault);\n  }\n\n  if (isMediaAttachment(attachment)) {\n    return renderMedia(propsWithDefault);\n  }\n\n  return renderCard(propsWithDefault);\n};\n\nAttachment.propTypes = {\n  /**\n   * The attachment to render\n   * @see See [Attachment structure](https://getstream.io/chat/docs/#message_format)\n   *\n   *  */\n  attachment: PropTypes.object.isRequired,\n\n  /**\n   *\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  actionHandler: PropTypes.func,\n\n  /**\n   * Custom UI component for card type attachment\n   * Defaults to [Card](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/Card.js)\n   */\n  Card:\n  /** @type {PropTypes.Validator<React.ComponentType<import('../types').CardProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Custom UI component for file type attachment\n   * Defaults to [File](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/File.js)\n   */\n  File:\n  /** @type {PropTypes.Validator<React.ComponentType<import('../types').FileAttachmentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Custom UI component for image type attachment\n   * Defaults to [Image](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Gallery/Image.js)\n   */\n  Image:\n  /** @type {PropTypes.Validator<React.ComponentType<import('../types').ImageProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Custom UI component for audio type attachment\n   * Defaults to [Audio](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/Audio.js)\n   */\n  Audio:\n  /** @type {PropTypes.Validator<React.ComponentType<import('../types').AudioProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Custom UI component for media type attachment\n   * Defaults to [ReactPlayer](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/ReactPlayer.js)\n   */\n  Media:\n  /** @type {PropTypes.Validator<React.ComponentType<import('react-player').ReactPlayerProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Custom UI component for attachment actions\n   * Defaults to [AttachmentActions](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/AttachmentActions.js)\n   */\n  AttachmentActions:\n  /** @type {PropTypes.Validator<React.ComponentType<import('../types').AttachmentActionsProps>>} */\n  PropTypes.elementType\n};\n/* eslint-disable */\n\nvar KEY_CODES = {\n  ESC: 27,\n  UP: 38,\n  DOWN: 40,\n  ENTER: 13,\n  TAB: 9,\n  SPACE: 32\n}; // This is self-made key shortcuts manager, used for caching key strokes\n\nvar Listener = function Listener() {\n  var _this = this;\n\n  _classCallCheck(this, Listener);\n\n  _defineProperty(this, \"startListen\", function () {\n    if (!_this.refCount) {\n      // prevent multiple listeners in case of multiple TextareaAutocomplete components on page\n      document.addEventListener('keydown', _this.f);\n    }\n\n    _this.refCount++;\n  });\n\n  _defineProperty(this, \"stopListen\", function () {\n    _this.refCount--;\n\n    if (!_this.refCount) {\n      // prevent disable listening in case of multiple TextareaAutocomplete components on page\n      document.removeEventListener('keydown', _this.f);\n    }\n  });\n\n  _defineProperty(this, \"add\", function (keyCodes, fn) {\n    var keyCode = keyCodes;\n    if (typeof keyCode !== 'object') keyCode = [keyCode];\n    _this.listeners[_this.index] = {\n      keyCode,\n      fn\n    };\n    _this.index += 1;\n    return _this.index;\n  });\n\n  _defineProperty(this, \"remove\", function (id) {\n    delete _this.listeners[id];\n  });\n\n  _defineProperty(this, \"removeAll\", function () {\n    _this.listeners = {};\n    _this.index = 0;\n  });\n\n  this.index = 0;\n  this.listeners = {};\n  this.refCount = 0;\n\n  this.f = function (e) {\n    var code = e.keyCode || e.which;\n    Object.values(_this.listeners).forEach(function (_ref) {\n      var keyCode = _ref.keyCode,\n          fn = _ref.fn;\n      if (keyCode.includes(code)) fn(e);\n    });\n  };\n};\n\nvar Listeners = new Listener();\n\nfunction _createSuper$1(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct$1();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct$1() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar Item = /*#__PURE__*/function (_React$Component) {\n  _inherits(Item, _React$Component);\n\n  var _super = _createSuper$1(Item);\n\n  function Item() {\n    var _this;\n\n    _classCallCheck(this, Item);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItem\", function () {\n      var _this$props = _this.props,\n          item = _this$props.item,\n          onSelectHandler = _this$props.onSelectHandler;\n      onSelectHandler(item);\n    });\n\n    return _this;\n  }\n\n  _createClass(Item, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          Component = _this$props2.component,\n          style = _this$props2.style,\n          onClickHandler = _this$props2.onClickHandler,\n          item = _this$props2.item,\n          selected = _this$props2.selected,\n          className = _this$props2.className,\n          innerRef = _this$props2.innerRef;\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"rta__item \".concat(className || ''),\n        style: style\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rta__entity \".concat(selected === true ? 'rta__entity--selected' : ''),\n        role: \"button\",\n        tabIndex: 0,\n        onClick: onClickHandler,\n        onFocus: this.selectItem,\n        onMouseEnter: this.selectItem\n        /* $FlowFixMe */\n        ,\n        ref: innerRef\n      }, /*#__PURE__*/React.createElement(Component, {\n        selected: selected,\n        entity: item\n      })));\n    }\n  }]);\n\n  return Item;\n}(React.Component);\n\nfunction _createSuper$2(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct$2();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct$2() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar List = /*#__PURE__*/function (_React$Component) {\n  _inherits(List, _React$Component);\n\n  var _super = _createSuper$2(List);\n\n  function List() {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      selectedItem: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"cachedValues\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"onPressEnter\", function (e) {\n      if (e && e.preventDefault) {\n        e.preventDefault();\n      }\n\n      var values = _this.props.values;\n\n      _this.modifyText(values[_this.getPositionInList()]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPositionInList\", function () {\n      var values = _this.props.values;\n      var selectedItem = _this.state.selectedItem;\n      if (!selectedItem) return 0;\n      return values.findIndex(function (a) {\n        return _this.getId(a) === _this.getId(selectedItem);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getId\", function (item) {\n      var textToReplace = _this.props.getTextToReplace(item);\n\n      if (textToReplace.key) {\n        return textToReplace.key;\n      }\n\n      if (typeof item === 'string' || !item.key) {\n        return textToReplace.text;\n      }\n\n      return item.key;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"listeners\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"itemsRef\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"modifyText\", function (value) {\n      if (!value) return;\n      var _this$props = _this.props,\n          onSelect = _this$props.onSelect,\n          getTextToReplace = _this$props.getTextToReplace,\n          getSelectedItem = _this$props.getSelectedItem;\n      onSelect(getTextToReplace(value));\n\n      if (getSelectedItem) {\n        getSelectedItem(value);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItem\", function (item) {\n      var keyboard = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      _this.setState({\n        selectedItem: item\n      }, function () {\n        if (keyboard) {\n          _this.props.dropdownScroll(_this.itemsRef[_this.getId(item)]);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scroll\", function (e) {\n      if (e && e.preventDefault) {\n        e.preventDefault();\n      }\n\n      var values = _this.props.values;\n      var code = e.keyCode || e.which;\n\n      var oldPosition = _this.getPositionInList();\n\n      var newPosition;\n\n      switch (code) {\n        case KEY_CODES.DOWN:\n          newPosition = oldPosition + 1;\n          break;\n\n        case KEY_CODES.UP:\n          newPosition = oldPosition - 1;\n          break;\n\n        default:\n          newPosition = oldPosition;\n          break;\n      }\n\n      newPosition = (newPosition % values.length + values.length) % values.length; // eslint-disable-line\n\n      _this.selectItem(values[newPosition], [KEY_CODES.DOWN, KEY_CODES.UP].includes(code));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isSelected\", function (item) {\n      var selectedItem = _this.state.selectedItem;\n      if (!selectedItem) return false;\n      return _this.getId(selectedItem) === _this.getId(item);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderHeader\", function (value) {\n      if (value[0] === '/') {\n        return \"Commands matching <strong>\".concat(value.replace('/', ''), \"</strong>\");\n      }\n\n      if (value[0] === ':') {\n        return \"Emoji matching <strong>\".concat(value.replace(':', ''), \"</strong>\");\n      }\n\n      if (value[0] === '@') {\n        return \"Searching for people\";\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.listeners.push(Listeners.add([KEY_CODES.DOWN, KEY_CODES.UP], this.scroll), Listeners.add([KEY_CODES.ENTER, KEY_CODES.TAB], this.onPressEnter));\n      var values = this.props.values;\n      if (values && values[0]) this.selectItem(values[0]);\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(_ref) {\n      var _this2 = this;\n\n      var values = _ref.values;\n      var newValues = values.map(function (val) {\n        return _this2.getId(val);\n      }).join('');\n\n      if (this.cachedValues !== newValues && values && values[0]) {\n        this.selectItem(values[0]);\n        this.cachedValues = newValues;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var listener;\n\n      while (this.listeners.length) {\n        listener = this.listeners.pop();\n        Listeners.remove(listener);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          values = _this$props2.values,\n          component = _this$props2.component,\n          style = _this$props2.style,\n          itemClassName = _this$props2.itemClassName,\n          className = _this$props2.className,\n          itemStyle = _this$props2.itemStyle;\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"rta__list \".concat(className || ''),\n        style: style\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"rta__list-header\",\n        dangerouslySetInnerHTML: {\n          __html: this.renderHeader(this.props.value)\n        }\n      }), values.map(function (item) {\n        return /*#__PURE__*/React.createElement(Item, {\n          key: _this3.getId(item),\n          innerRef: function innerRef(ref) {\n            _this3.itemsRef[_this3.getId(item)] = ref;\n          },\n          selected: _this3.isSelected(item),\n          item: item,\n          className: itemClassName,\n          style: itemStyle,\n          onClickHandler: _this3.onPressEnter,\n          onSelectHandler: _this3.selectItem,\n          component: component\n        });\n      }));\n    }\n  }]);\n\n  return List;\n}(React.Component); //\n\n\nfunction defaultScrollToItem(container, item) {\n  var itemHeight = parseInt(getComputedStyle(item).getPropertyValue('height'), 10);\n  var containerHight = parseInt(getComputedStyle(container).getPropertyValue('height'), 10) - itemHeight;\n  var itemOffsetTop = item.offsetTop;\n  var actualScrollTop = container.scrollTop;\n\n  if (itemOffsetTop < actualScrollTop + containerHight && actualScrollTop < itemOffsetTop) {\n    return;\n  } // eslint-disable-next-line\n\n\n  container.scrollTop = itemOffsetTop;\n}\n\nfunction ownKeys$3(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$3(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$3(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$3(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper$3(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct$3();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct$3() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar DEFAULT_CARET_POSITION = 'next';\n\nvar errorMessage = function errorMessage(message) {\n  return console.error(\"RTA: dataProvider fails: \".concat(message, \"\\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues\"));\n};\n\nvar ReactTextareaAutocomplete = /*#__PURE__*/function (_React$Component) {\n  _inherits(ReactTextareaAutocomplete, _React$Component);\n\n  var _super = _createSuper$3(ReactTextareaAutocomplete);\n\n  function ReactTextareaAutocomplete(_props) {\n    var _this;\n\n    _classCallCheck(this, ReactTextareaAutocomplete);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"getSelectionPosition\", function () {\n      if (!_this.textareaRef) return null;\n      return {\n        selectionStart: _this.textareaRef.selectionStart,\n        selectionEnd: _this.textareaRef.selectionEnd\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getSelectedText\", function () {\n      if (!_this.textareaRef) return null;\n      var _this$textareaRef = _this.textareaRef,\n          selectionStart = _this$textareaRef.selectionStart,\n          selectionEnd = _this$textareaRef.selectionEnd;\n      if (selectionStart === selectionEnd) return null;\n      return _this.state.value.substr(selectionStart, selectionEnd - selectionStart);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCaretPosition\", function () {\n      var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      if (!_this.textareaRef) return;\n\n      _this.textareaRef.focus();\n\n      _this.textareaRef.setSelectionRange(position, position);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCaretPosition\", function () {\n      if (!_this.textareaRef) {\n        return 0;\n      }\n\n      return _this.textareaRef.selectionEnd;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onEnter\", function (event) {\n      var trigger = _this.state.currentTrigger;\n\n      if (!_this.textareaRef) {\n        return;\n      }\n\n      var hasFocus = _this.textareaRef.matches(':focus'); // don't submit if the element has focus or the shift key is pressed\n\n\n      if (!hasFocus || event.shiftKey === true) {\n        return;\n      }\n\n      if (!trigger || !_this.state.data) {\n        // trigger a submit\n        _this._replaceWord();\n\n        if (_this.textareaRef) {\n          _this.textareaRef.selectionEnd = 0;\n        }\n\n        _this.props.handleSubmit(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onSpace\", function () {\n      if (!_this.props.replaceWord) {\n        return;\n      }\n\n      if (!_this.textareaRef) {\n        return;\n      }\n\n      var hasFocus = _this.textareaRef.matches(':focus'); // don't change characters if the element doesn't have focus\n\n\n      if (!hasFocus) {\n        return;\n      }\n\n      _this._replaceWord();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_replaceWord\", function () {\n      var lastWordRegex = /([^\\s]+)(\\s*)$/;\n      var value = _this.state.value;\n      var match = lastWordRegex.exec(value.slice(0, _this.getCaretPosition()));\n      var lastWord = match && match[1];\n\n      if (!lastWord) {\n        return;\n      }\n\n      var spaces = match[2];\n\n      var newWord = _this.props.replaceWord(lastWord);\n\n      if (newWord == null) {\n        return;\n      }\n\n      var textBeforeWord = value.slice(0, _this.getCaretPosition() - match[0].length);\n      var textAfterCaret = value.slice(_this.getCaretPosition(), -1);\n      var newText = textBeforeWord + newWord + spaces + textAfterCaret;\n\n      _this.setState({\n        value: newText\n      }, function () {\n        // fire onChange event after successful selection\n        var e = new CustomEvent('change', {\n          bubbles: true\n        });\n\n        _this.textareaRef.dispatchEvent(e);\n\n        if (_this.props.onChange) _this.props.onChange(e);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onSelect\", function (newToken) {\n      var _this$state = _this.state,\n          selectionEnd = _this$state.selectionEnd,\n          currentTrigger = _this$state.currentTrigger,\n          textareaValue = _this$state.value;\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          trigger = _this$props.trigger;\n      if (!currentTrigger) return;\n\n      var computeCaretPosition = function computeCaretPosition(position, token, startToken) {\n        switch (position) {\n          case 'start':\n            return startToken;\n\n          case 'next':\n          case 'end':\n            return startToken + token.length;\n\n          default:\n            if (!Number.isInteger(position)) {\n              throw new Error('RTA: caretPosition should be \"start\", \"next\", \"end\" or number.');\n            }\n\n            return position;\n        }\n      };\n\n      var textToModify = textareaValue.slice(0, selectionEnd);\n      var startOfTokenPosition = textToModify.search(\n      /**\n       * It's important to escape the currentTrigger char for chars like [, (,...\n       */\n      new RegExp(\"\\\\\".concat(currentTrigger, \"[^\\\\\".concat(currentTrigger, '\\\\s', \"]\"), \"*$\"))); // we add space after emoji is selected if a caret position is next\n\n      var newTokenString = newToken.caretPosition === 'next' ? \"\".concat(newToken.text, \" \") : newToken.text;\n      var newCaretPosition = computeCaretPosition(newToken.caretPosition, newTokenString, startOfTokenPosition);\n      var modifiedText = textToModify.substring(0, startOfTokenPosition) + newTokenString; // set the new textarea value and after that set the caret back to its position\n\n      _this.setState({\n        value: textareaValue.replace(textToModify, modifiedText),\n        dataLoading: false\n      }, function () {\n        // fire onChange event after successful selection\n        var e = new CustomEvent('change', {\n          bubbles: true\n        });\n\n        _this.textareaRef.dispatchEvent(e);\n\n        if (onChange) onChange(e);\n\n        _this.setCaretPosition(newCaretPosition);\n      });\n\n      _this._closeAutocomplete();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getItemOnSelect\", function () {\n      var currentTrigger = _this.state.currentTrigger;\n\n      var triggerSettings = _this._getCurrentTriggerSettings();\n\n      if (!currentTrigger || !triggerSettings) return null;\n      var callback = triggerSettings.callback;\n      if (!callback) return null;\n      return function (item) {\n        if (typeof callback !== 'function') {\n          throw new Error('Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n\n        if (callback) {\n          return callback(item, currentTrigger);\n        }\n\n        return null;\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getTextToReplace\", function () {\n      var _this$state2 = _this.state,\n          currentTrigger = _this$state2.currentTrigger,\n          actualToken = _this$state2.actualToken;\n\n      var triggerSettings = _this._getCurrentTriggerSettings();\n\n      if (!currentTrigger || !triggerSettings) return null;\n      var output = triggerSettings.output;\n      return function (item) {\n        if (typeof item === 'object' && (!output || typeof output !== 'function')) {\n          throw new Error('Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n\n        if (output) {\n          var textToReplace = output(item, currentTrigger);\n\n          if (!textToReplace || typeof textToReplace === 'number') {\n            throw new Error(\"Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \\\"\".concat(String(textToReplace), \"\\\". Check the implementation for trigger \\\"\").concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n\"));\n          }\n\n          if (typeof textToReplace === 'string') {\n            return {\n              text: textToReplace,\n              caretPosition: DEFAULT_CARET_POSITION\n            };\n          }\n\n          if (!textToReplace.text) {\n            throw new Error(\"Output \\\"text\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\"));\n          }\n\n          if (!textToReplace.caretPosition) {\n            throw new Error(\"Output \\\"caretPosition\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\"));\n          }\n\n          return textToReplace;\n        }\n\n        if (typeof item !== 'string') {\n          throw new Error('Output item should be string\\n');\n        }\n\n        return {\n          text: \"\".concat(currentTrigger).concat(item).concat(currentTrigger),\n          caretPosition: DEFAULT_CARET_POSITION\n        };\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getCurrentTriggerSettings\", function () {\n      var currentTrigger = _this.state.currentTrigger;\n      if (!currentTrigger) return null;\n      return _this.props.trigger[currentTrigger];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getValuesFromProvider\", function () {\n      var _this$state3 = _this.state,\n          currentTrigger = _this$state3.currentTrigger,\n          actualToken = _this$state3.actualToken;\n\n      var triggerSettings = _this._getCurrentTriggerSettings();\n\n      if (!currentTrigger || !triggerSettings) {\n        return;\n      }\n\n      var dataProvider = triggerSettings.dataProvider,\n          component = triggerSettings.component;\n\n      if (typeof dataProvider !== 'function') {\n        throw new Error('Trigger provider has to be a function!');\n      }\n\n      _this.setState({\n        dataLoading: true\n      }); // Modified: send the full text to support / style commands\n\n\n      dataProvider(actualToken, _this.state.value, function (data, token) {\n        // Make sure that the result is still relevant for current query\n        if (token !== _this.state.actualToken) return;\n\n        if (!Array.isArray(data)) {\n          throw new Error('Trigger provider has to provide an array!');\n        }\n\n        if (!isValidElementType(component)) {\n          throw new Error('Component should be defined!');\n        } // throw away if we resolved old trigger\n\n\n        if (currentTrigger !== _this.state.currentTrigger) return; // if we haven't resolved any data let's close the autocomplete\n\n        if (!data.length) {\n          _this._closeAutocomplete();\n\n          return;\n        }\n\n        _this.setState({\n          dataLoading: false,\n          data,\n          component\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getSuggestions\", function () {\n      var _this$state4 = _this.state,\n          currentTrigger = _this$state4.currentTrigger,\n          data = _this$state4.data;\n      if (!currentTrigger || !data || data && !data.length) return null;\n      return data;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_createRegExp\", function () {\n      var trigger = _this.props.trigger; // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n      // https://stackoverflow.com/a/8057827/2719917\n\n      _this.tokenRegExp = new RegExp(\"([\".concat(Object.keys(trigger).join(''), \"])(?:(?!\\\\1)[^\\\\s])*$\"));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_closeAutocomplete\", function () {\n      _this.setState({\n        data: null,\n        dataLoading: false,\n        currentTrigger: null,\n        top: null,\n        left: null\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_cleanUpProps\", function () {\n      var props = _objectSpread$3({}, _this.props);\n\n      var notSafe = ['loadingComponent', 'containerStyle', 'minChar', 'scrollToItem', 'ref', 'innerRef', 'onChange', 'onCaretPositionChange', 'className', 'value', 'trigger', 'listStyle', 'itemStyle', 'containerStyle', 'loaderStyle', 'className', 'containerClassName', 'listClassName', 'itemClassName', 'loaderClassName', 'closeOnClickOutside', 'dropdownStyle', 'dropdownClassName', 'movePopupAsYouType', 'handleSubmit', 'replaceWord', 'grow', 'additionalTextareaProps']; // eslint-disable-next-line\n\n      for (var prop in props) {\n        if (notSafe.includes(prop)) delete props[prop];\n      }\n\n      return props;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_isCommand\", function (text) {\n      if (text[0] !== '/') return false;\n      var tokens = text.split(' ');\n      if (tokens.length > 1) return false;\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_changeHandler\", function (e) {\n      var _this$props2 = _this.props,\n          trigger = _this$props2.trigger,\n          onChange = _this$props2.onChange,\n          minChar = _this$props2.minChar,\n          onCaretPositionChange = _this$props2.onCaretPositionChange,\n          movePopupAsYouType = _this$props2.movePopupAsYouType;\n      var _this$state5 = _this.state,\n          top = _this$state5.top,\n          left = _this$state5.left;\n      var textarea = e.target;\n      var selectionEnd = textarea.selectionEnd,\n          selectionStart = textarea.selectionStart;\n      var value = textarea.value;\n\n      if (onChange) {\n        e.persist();\n        onChange(e);\n      }\n\n      if (onCaretPositionChange) {\n        var caretPosition = _this.getCaretPosition();\n\n        onCaretPositionChange(caretPosition);\n      }\n\n      _this.setState({\n        value\n      });\n\n      var currentTrigger;\n      var lastToken;\n\n      if (_this._isCommand(value)) {\n        currentTrigger = '/';\n        lastToken = value;\n      } else {\n        var tokenMatch = value.slice(0, selectionEnd).match(/(?!^|\\W)?[:@][^\\s]*\\s?[^\\s]*$/g);\n        lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n        currentTrigger = lastToken && Object.keys(trigger).find(function (a) {\n          return a === lastToken[0];\n        }) || null;\n      }\n      /*\n       if we lost the trigger token or there is no following character we want to close\n       the autocomplete\n      */\n\n\n      if (!lastToken || lastToken.length <= minChar) {\n        _this._closeAutocomplete();\n\n        return;\n      }\n\n      var actualToken = lastToken.slice(1); // if trigger is not configured step out from the function, otherwise proceed\n\n      if (!currentTrigger) {\n        return;\n      }\n\n      if (movePopupAsYouType || top === null && left === null || // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1) {\n        var _getCaretCoordinates = getCaretCoordinates(textarea, selectionEnd),\n            newTop = _getCaretCoordinates.top,\n            newLeft = _getCaretCoordinates.left;\n\n        _this.setState({\n          // make position relative to textarea\n          top: newTop - _this.textareaRef.scrollTop || 0,\n          left: newLeft\n        });\n      }\n\n      _this.setState({\n        selectionEnd,\n        selectionStart,\n        currentTrigger,\n        actualToken\n      }, function () {\n        try {\n          _this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_selectHandler\", function (e) {\n      var _this$props3 = _this.props,\n          onCaretPositionChange = _this$props3.onCaretPositionChange,\n          onSelect = _this$props3.onSelect;\n\n      if (onCaretPositionChange) {\n        var caretPosition = _this.getCaretPosition();\n\n        onCaretPositionChange(caretPosition);\n      }\n\n      if (onSelect) {\n        e.persist();\n        onSelect(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onClickAndBlurHandler\", function (e) {\n      var _this$props4 = _this.props,\n          closeOnClickOutside = _this$props4.closeOnClickOutside,\n          onBlur = _this$props4.onBlur; // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n      // that was actually clicked. If we clicked inside the autoselect dropdown, then\n      // that's not a blur, from the autoselect's point of view, so then do nothing.\n\n      var el = e.relatedTarget;\n\n      if (_this.dropdownRef && el instanceof Node && _this.dropdownRef.contains(el)) {\n        return;\n      }\n\n      if (closeOnClickOutside) {\n        _this._closeAutocomplete();\n      }\n\n      if (onBlur) {\n        e.persist();\n        onBlur(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onScrollHandler\", function () {\n      _this._closeAutocomplete();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_dropdownScroll\", function (item) {\n      var scrollToItem = _this.props.scrollToItem;\n      if (!scrollToItem) return;\n\n      if (scrollToItem === true) {\n        defaultScrollToItem(_this.dropdownRef, item);\n        return;\n      }\n\n      if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n        throw new Error('`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.');\n      }\n\n      scrollToItem(_this.dropdownRef, item);\n    });\n\n    var _this$props5 = _this.props,\n        loadingComponent = _this$props5.loadingComponent,\n        _trigger = _this$props5.trigger,\n        _value = _this$props5.value; // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n\n    _this._createRegExp();\n\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n\n    if (!_trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n\n    _this.state = {\n      top: null,\n      left: null,\n      currentTrigger: null,\n      actualToken: '',\n      data: null,\n      value: _value || '',\n      dataLoading: false,\n      selectionEnd: 0,\n      selectionStart: 0,\n      component: null,\n      listenerIndex: 0\n    };\n    return _this;\n  }\n\n  _createClass(ReactTextareaAutocomplete, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Listeners.add(KEY_CODES.ESC, function () {\n        return _this2._closeAutocomplete();\n      });\n      Listeners.add(KEY_CODES.SPACE, function () {\n        return _this2._onSpace();\n      });\n      var listenerIndex = Listeners.add(KEY_CODES.ENTER, function (e) {\n        return _this2._onEnter(e);\n      });\n      this.setState({\n        listenerIndex\n      });\n      Listeners.startListen();\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      this._update(nextProps);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Listeners.stopListen();\n      Listeners.remove(this.state.listenerIndex);\n    }\n  }, {\n    key: \"_update\",\n    // TODO: This is an anti pattern in react, should come up with a better way\n    value: function _update(_ref) {\n      var value = _ref.value,\n          trigger = _ref.trigger;\n      var oldValue = this.state.value;\n      var oldTrigger = this.props.trigger;\n      if (value !== oldValue || !oldValue) this.setState({\n        value\n      });\n      /**\n       * check if trigger chars are changed, if so, change the regexp accordingly\n       */\n\n      if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n        this._createRegExp();\n      }\n    }\n    /**\n     * Close autocomplete, also clean up trigger (to avoid slow promises)\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props6 = this.props,\n          Loader = _this$props6.loadingComponent,\n          style = _this$props6.style,\n          className = _this$props6.className,\n          itemStyle = _this$props6.itemStyle,\n          listClassName = _this$props6.listClassName,\n          itemClassName = _this$props6.itemClassName,\n          dropdownClassName = _this$props6.dropdownClassName,\n          dropdownStyle = _this$props6.dropdownStyle,\n          containerStyle = _this$props6.containerStyle,\n          containerClassName = _this$props6.containerClassName,\n          loaderStyle = _this$props6.loaderStyle,\n          loaderClassName = _this$props6.loaderClassName;\n      var _this$state6 = this.state,\n          dataLoading = _this$state6.dataLoading,\n          currentTrigger = _this$state6.currentTrigger,\n          component = _this$state6.component,\n          value = _this$state6.value;\n\n      var suggestionData = this._getSuggestions();\n\n      var textToReplace = this._getTextToReplace();\n\n      var selectedItem = this._getItemOnSelect();\n\n      var maxRows = this.props.maxRows;\n\n      if (!this.props.grow) {\n        maxRows = 1;\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rta \".concat(dataLoading === true ? 'rta--loading' : '', \" \").concat(containerClassName || ''),\n        style: containerStyle\n      }, (dataLoading || suggestionData) && currentTrigger && /*#__PURE__*/React.createElement(\"div\", {\n        ref: function ref(_ref2) {\n          // $FlowFixMe\n          _this3.dropdownRef = _ref2;\n        },\n        style: _objectSpread$3({}, dropdownStyle),\n        className: \"rta__autocomplete \".concat(dropdownClassName || '')\n      }, suggestionData && component && textToReplace && /*#__PURE__*/React.createElement(List, {\n        value: value,\n        values: suggestionData,\n        component: component,\n        className: listClassName,\n        itemClassName: itemClassName,\n        itemStyle: itemStyle,\n        getTextToReplace: textToReplace,\n        getSelectedItem: selectedItem,\n        onSelect: this._onSelect,\n        dropdownScroll: this._dropdownScroll\n      })), /*#__PURE__*/React.createElement(Textarea, _extends({}, this._cleanUpProps(), {\n        ref: function ref(_ref3) {\n          _this3.props.innerRef && _this3.props.innerRef(_ref3);\n          _this3.textareaRef = _ref3;\n        },\n        maxRows: maxRows,\n        className: \"rta__textarea \".concat(className || ''),\n        onChange: this._changeHandler,\n        onSelect: this._selectHandler,\n        onScroll: this._onScrollHandler,\n        onClick: // The textarea itself is outside the autoselect dropdown.\n        this._onClickAndBlurHandler,\n        onBlur: this._onClickAndBlurHandler,\n        onFocus: this.props.onFocus,\n        value: value,\n        style: style\n      }, this.props.additionalTextareaProps)));\n    }\n  }]);\n\n  return ReactTextareaAutocomplete;\n}(React.Component);\n\n_defineProperty(ReactTextareaAutocomplete, \"defaultProps\", {\n  closeOnClickOutside: true,\n  movePopupAsYouType: false,\n  value: '',\n  minChar: 1,\n  scrollToItem: true,\n  maxRows: 10\n});\n\nvar triggerPropsCheck = function triggerPropsCheck(_ref4) {\n  var trigger = _ref4.trigger;\n  if (!trigger) return Error('Invalid prop trigger. Prop missing.');\n  var triggers = Object.entries(trigger);\n\n  for (var i = 0; i < triggers.length; i += 1) {\n    var _triggers$i = _slicedToArray(triggers[i], 2),\n        triggerChar = _triggers$i[0],\n        settings = _triggers$i[1];\n\n    if (typeof triggerChar !== 'string' || triggerChar.length !== 1) {\n      return Error('Invalid prop trigger. Keys of the object has to be string / one character.');\n    } // $FlowFixMe\n\n\n    var triggerSetting = settings;\n    var component = triggerSetting.component,\n        dataProvider = triggerSetting.dataProvider,\n        output = triggerSetting.output,\n        callback = triggerSetting.callback;\n\n    if (!isValidElementType(component)) {\n      return Error('Invalid prop trigger: component should be defined.');\n    }\n\n    if (!dataProvider || typeof dataProvider !== 'function') {\n      return Error('Invalid prop trigger: dataProvider should be defined.');\n    }\n\n    if (output && typeof output !== 'function') {\n      return Error('Invalid prop trigger: output should be a function.');\n    }\n\n    if (callback && typeof callback !== 'function') {\n      return Error('Invalid prop trigger: callback should be a function.');\n    }\n  }\n\n  return null;\n};\n\nReactTextareaAutocomplete.propTypes = {\n  loadingComponent: PropTypes.elementType,\n  minChar: PropTypes.number,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  className: PropTypes.string,\n  containerStyle: PropTypes.object,\n  containerClassName: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  style: PropTypes.object,\n  listStyle: PropTypes.object,\n  itemStyle: PropTypes.object,\n  loaderStyle: PropTypes.object,\n  dropdownStyle: PropTypes.object,\n  listClassName: PropTypes.string,\n  itemClassName: PropTypes.string,\n  loaderClassName: PropTypes.string,\n  dropdownClassName: PropTypes.string,\n  value: PropTypes.string,\n  trigger: triggerPropsCheck //eslint-disable-line\n\n};\n/**\n * Avatar - A round avatar image with fallback to username's first letter\n *\n * @example ../../docs/Avatar.md\n * @typedef {import('../types').AvatarProps} Props\n * @type { React.FC<Props>}\n */\n\nvar Avatar = function Avatar(_ref) {\n  var _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 32 : _ref$size,\n      name = _ref.name,\n      _ref$shape = _ref.shape,\n      shape = _ref$shape === void 0 ? 'circle' : _ref$shape,\n      image = _ref.image,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === void 0 ? function () {} : _ref$onClick,\n      _ref$onMouseOver = _ref.onMouseOver,\n      onMouseOver = _ref$onMouseOver === void 0 ? function () {} : _ref$onMouseOver;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loaded = _useState2[0],\n      setLoaded = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  useEffect(function () {\n    setLoaded(false);\n    setError(false);\n  }, [image]);\n  var initials = (name || '').charAt(0);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"avatar\",\n    className: \"str-chat__avatar str-chat__avatar--\".concat(shape),\n    title: name,\n    style: {\n      width: size,\n      height: size,\n      flexBasis: size,\n      lineHeight: \"\".concat(size, \"px\"),\n      fontSize: size / 2\n    },\n    onClick: onClick,\n    onMouseOver: onMouseOver\n  }, image && !error ? /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"avatar-img\",\n    src: image,\n    alt: initials,\n    className: \"str-chat__avatar-image\".concat(loaded ? ' str-chat__avatar-image--loaded' : ''),\n    style: {\n      width: size,\n      height: size,\n      flexBasis: size,\n      objectFit: 'cover'\n    },\n    onLoad: function onLoad() {\n      return setLoaded(true);\n    },\n    onError: function onError() {\n      return setError(true);\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"avatar-fallback\",\n    className: \"str-chat__avatar-fallback\"\n  }, initials));\n};\n\nAvatar.propTypes = {\n  /** image url */\n  image: PropTypes.string,\n\n  /** name of the picture, used for title tag fallback */\n  name: PropTypes.string,\n\n  /** shape of the avatar, circle, rounded or square */\n  shape: PropTypes.oneOf(['circle', 'rounded', 'square']),\n\n  /** size in pixels */\n  size: PropTypes.number,\n\n  /** click event handler */\n  onClick: PropTypes.func,\n\n  /** mouseOver event handler */\n  onMouseOver: PropTypes.func\n};\n/** @type {React.FC<import('../types').ChannelPreviewUIComponentProps>} */\n\nvar ChannelPreviewCountOnly = function ChannelPreviewCountOnly(_ref) {\n  var channel = _ref.channel,\n      setActiveChannel = _ref.setActiveChannel,\n      watchers = _ref.watchers,\n      unread = _ref.unread,\n      displayTitle = _ref.displayTitle;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: unread >= 1 ? 'unread' : ''\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return setActiveChannel(channel, watchers);\n    }\n  }, ' ', displayTitle, \" \", /*#__PURE__*/React.createElement(\"span\", null, unread)));\n};\n\nChannelPreviewCountOnly.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n\n  /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chat) for doc */\n  setActiveChannel: PropTypes.func.isRequired,\n\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers:\n  /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */\n  PropTypes.object,\n\n  /** Number of unread messages */\n  unread: PropTypes.number,\n\n  /** Title of channel to display */\n  displayTitle: PropTypes.string\n};\nvar ChannelPreviewCountOnly$1 = /*#__PURE__*/React.memo(ChannelPreviewCountOnly);\n\nvar getLatestMessagePreview = function getLatestMessagePreview(channel, t) {\n  var latestMessage = channel.state.messages[channel.state.messages.length - 1];\n\n  if (!latestMessage) {\n    return t('Nothing yet...');\n  }\n\n  if (latestMessage.deleted_at) {\n    return t('Message deleted');\n  }\n\n  if (latestMessage.text) {\n    return latestMessage.text;\n  }\n\n  if (latestMessage.command) {\n    return \"/\".concat(latestMessage.command);\n  }\n\n  if (latestMessage.attachments.length) {\n    return t('🏙 Attachment...');\n  }\n\n  return t('Empty message...');\n};\n\nvar getDisplayTitle = function getDisplayTitle(channel, currentUser) {\n  var title = channel.data.name;\n  var members = Object.values(channel.state.members);\n\n  if (!title && members.length === 2) {\n    var otherMember = members.find(function (m) {\n      return m.user.id !== currentUser.id;\n    });\n    title = otherMember.user.name;\n  }\n\n  return title;\n};\n\nvar getDisplayImage = function getDisplayImage(channel, currentUser) {\n  var image = channel.data.image;\n  var members = Object.values(channel.state.members);\n\n  if (!image && members.length === 2) {\n    var otherMember = members.find(function (m) {\n      return m.user.id !== currentUser.id;\n    });\n    image = otherMember.user.image;\n  }\n\n  return image;\n};\n/**\n * @type {React.FC<import('../types').ChannelPreviewProps>}\n */\n\n\nvar ChannelPreview = function ChannelPreview(props) {\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var _useContext2 = useContext(ChatContext),\n      client = _useContext2.client,\n      activeChannel = _useContext2.channel,\n      setActiveChannel = _useContext2.setActiveChannel;\n\n  var channel = props.channel,\n      _props$Preview = props.Preview,\n      Preview = _props$Preview === void 0 ? ChannelPreviewCountOnly$1 : _props$Preview;\n\n  var _useState = useState(\n  /** @type {import('stream-chat').MessageResponse | undefined} */\n  undefined),\n      _useState2 = _slicedToArray(_useState, 2),\n      lastMessage = _useState2[0],\n      setLastMessage = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      unread = _useState4[0],\n      setUnread = _useState4[1];\n\n  useEffect(function () {\n    setUnread(channel.countUnread());\n  }, [channel]);\n  useEffect(function () {\n    /** @type {(event: StreamChat.Event) => void} Typescript syntax */\n    var handleEvent = function handleEvent(event) {\n      var isActive = (activeChannel === null || activeChannel === void 0 ? void 0 : activeChannel.cid) === channel.cid;\n      setLastMessage(event.message);\n\n      if (!isActive) {\n        setUnread(channel.countUnread());\n      } else {\n        setUnread(0);\n      }\n    };\n\n    channel.on('message.new', handleEvent);\n    channel.on('message.updated', handleEvent);\n    channel.on('message.deleted', handleEvent);\n    return function () {\n      channel.off('message.new', handleEvent);\n      channel.off('message.updated', handleEvent);\n      channel.off('message.deleted', handleEvent);\n    };\n  }, [channel, activeChannel]);\n  useEffect(function () {\n    var isActive = (activeChannel === null || activeChannel === void 0 ? void 0 : activeChannel.cid) === channel.cid;\n\n    if (isActive) {\n      setUnread(0);\n    } else {\n      setUnread(channel.countUnread());\n    }\n  }, [activeChannel, channel]);\n\n  if (!Preview) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Preview, _extends({}, props, {\n    setActiveChannel: setActiveChannel,\n    lastMessage: lastMessage,\n    unread: unread,\n    latestMessage: getLatestMessagePreview(channel, t),\n    displayTitle: getDisplayTitle(channel, client.user),\n    displayImage: getDisplayImage(channel, client.user),\n    active: activeChannel && activeChannel.cid === channel.cid\n  }));\n};\n\nChannelPreview.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel:\n  /** @type {PropTypes.Validator<import('stream-chat').Channel>} */\n  PropTypes.object.isRequired,\n\n  /** Current selected channel object */\n  activeChannel:\n  /** @type {PropTypes.Validator<import('stream-chat').Channel | null | undefined>} */\n  PropTypes.object,\n\n  /**\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n   * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n   * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n   *\n   * The Preview to use, defaults to ChannelPreviewLastMessage\n   * */\n  Preview:\n  /** @type {PropTypes.Validator<React.ComponentType<import('../types').ChannelPreviewUIComponentProps>>} */\n  PropTypes.elementType\n}; // @ts-check\n\n/**\n *\n * @example ../../docs/ChannelPreviewCompact.md\n * @type {import('../types').ChannelPreviewCompact}\n */\n\nvar ChannelPreviewCompact = function ChannelPreviewCompact(props) {\n  /**\n   * @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax\n   */\n  var channelPreviewButton = useRef(null);\n  var unreadClass = props.unread_count >= 1 ? 'str-chat__channel-preview-compact--unread' : '';\n  var activeClass = props.active ? 'str-chat__channel-preview-compact--active' : '';\n\n  var onSelectChannel = function onSelectChannel() {\n    var _channelPreviewButton;\n\n    props.setActiveChannel(props.channel, props.watchers); // eslint-disable-next-line no-unused-expressions\n\n    channelPreviewButton === null || channelPreviewButton === void 0 ? void 0 : (_channelPreviewButton = channelPreviewButton.current) === null || _channelPreviewButton === void 0 ? void 0 : _channelPreviewButton.blur();\n  };\n\n  return /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"channel-preview-button\",\n    onClick: onSelectChannel,\n    ref: channelPreviewButton,\n    className: \"str-chat__channel-preview-compact \".concat(unreadClass, \" \").concat(activeClass)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview-compact--left\"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    image: props.displayImage,\n    size: 20\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview-compact--right\"\n  }, props.displayTitle));\n};\n\nChannelPreviewCompact.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.instanceOf(Channel$2).isRequired,\n\n  /** Current selected channel object */\n  activeChannel: PropTypes.instanceOf(Channel$2),\n\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers:\n  /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */\n  PropTypes.object,\n\n  /** Number of unread messages */\n  unread: PropTypes.number,\n\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n\n  /** Image of channel to display */\n  displayImage: PropTypes.string\n};\nvar ChannelPreviewCompact$1 = /*#__PURE__*/React.memo(ChannelPreviewCompact); // @ts-check\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n *\n * @example ../../docs/ChannelPreviewLastMessage.md\n * @type {import('../types').ChannelPreviewLastMessage}\n */\n\nvar ChannelPreviewLastMessage = function ChannelPreviewLastMessage(props) {\n  /** @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax */\n  var channelPreviewButton = useRef(null);\n\n  var onSelectChannel = function onSelectChannel() {\n    var _channelPreviewButton;\n\n    props.setActiveChannel(props.channel, props.watchers); // eslint-disable-next-line no-unused-expressions\n\n    channelPreviewButton === null || channelPreviewButton === void 0 ? void 0 : (_channelPreviewButton = channelPreviewButton.current) === null || _channelPreviewButton === void 0 ? void 0 : _channelPreviewButton.blur();\n  };\n\n  var unreadClass = props.unread >= 1 ? 'str-chat__channel-preview--unread' : '';\n  var activeClass = props.active ? 'str-chat__channel-preview--active' : '';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview \".concat(unreadClass, \" \").concat(activeClass)\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onSelectChannel,\n    ref: channelPreviewButton,\n    \"data-testid\": \"channel-preview-button\"\n  }, props.unread >= 1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview--dot\"\n  }), /*#__PURE__*/React.createElement(Avatar, {\n    image: props.displayImage\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview-info\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__channel-preview-title\"\n  }, props.displayTitle), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__channel-preview-last-message\"\n  }, truncate(props.latestMessage, props.latestMessageLength)), props.unread >= 1 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__channel-preview-unread-count\"\n  }, props.unread))));\n};\n\nChannelPreviewLastMessage.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n\n  /** Current selected channel object */\n  activeChannel: PropTypes.object,\n\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: PropTypes.object,\n\n  /** Number of unread messages */\n  unread: PropTypes.number,\n\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n\n  /** Length of latest message to truncate at */\n  latestMessageLength: PropTypes.number,\n\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n\n  /** Image of channel to display */\n  displayImage: PropTypes.string\n};\nChannelPreviewLastMessage.defaultProps = {\n  latestMessageLength: 20\n};\nvar ChannelPreviewLastMessage$1 = /*#__PURE__*/React.memo(ChannelPreviewLastMessage); // @ts-check\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n * Its best suited for messenger type chat.\n *\n * @example ../../docs/ChannelPreviewMessenger.md\n * @type {import('../types').ChannelPreviewMessenger}\n */\n\nvar ChannelPreviewMessenger = function ChannelPreviewMessenger(props) {\n  /** @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax */\n  var channelPreviewButton = useRef(null);\n  var unreadClass = props.unread >= 1 ? 'str-chat__channel-preview-messenger--unread' : '';\n  var activeClass = props.active ? 'str-chat__channel-preview-messenger--active' : '';\n\n  var onSelectChannel = function onSelectChannel() {\n    var _channelPreviewButton;\n\n    props.setActiveChannel(props.channel, props.watchers); // eslint-disable-next-line no-unused-expressions\n\n    channelPreviewButton === null || channelPreviewButton === void 0 ? void 0 : (_channelPreviewButton = channelPreviewButton.current) === null || _channelPreviewButton === void 0 ? void 0 : _channelPreviewButton.blur();\n  };\n\n  return /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onSelectChannel,\n    ref: channelPreviewButton,\n    className: \"str-chat__channel-preview-messenger \".concat(unreadClass, \" \").concat(activeClass),\n    \"data-testid\": \"channel-preview-button\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview-messenger--left\"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    image: props.displayImage,\n    size: 40\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview-messenger--right\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview-messenger--name\"\n  }, /*#__PURE__*/React.createElement(\"span\", null, props.displayTitle)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-preview-messenger--last-message\"\n  }, truncate(props.latestMessage, props.latestMessageLength))));\n};\n\nChannelPreviewMessenger.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n\n  /** Current selected channel object */\n  activeChannel: PropTypes.object,\n\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: PropTypes.object,\n\n  /** Number of unread messages */\n  unread: PropTypes.number,\n\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n\n  /** Length of latest message to truncate at */\n  latestMessageLength: PropTypes.number,\n\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n\n  /** Image of channel to display */\n  displayImage: PropTypes.string\n};\nChannelPreviewMessenger.defaultProps = {\n  latestMessageLength: 14\n};\nvar ChannelPreviewMessenger$1 = /*#__PURE__*/React.memo(ChannelPreviewMessenger); // @ts-check\n\nvar ReplyIcon = function ReplyIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"18\",\n    height: \"15\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z\",\n    fillRule: \"nonzero\"\n  }));\n};\n\nvar DeliveredCheckIcon = function DeliveredCheckIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\",\n    fill: \"#006CFF\",\n    fillRule: \"evenodd\"\n  }));\n};\n\nvar ReactionIcon = function ReactionIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\",\n    fillRule: \"evenodd\"\n  }));\n};\n\nvar ThreadIcon = function ThreadIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"10\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\",\n    fillRule: \"evenodd\"\n  }));\n};\n\nvar ErrorIcon = function ErrorIcon() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\",\n    fill: \"#EA152F\",\n    fillRule: \"evenodd\"\n  }));\n}; // @ts-check\n\n/** @type {React.FC<import(\"types\").MessageRepliesCountButtonProps>} */\n\n\nvar MessageRepliesCountButton = function MessageRepliesCountButton(_ref) {\n  var reply_count = _ref.reply_count,\n      labelSingle = _ref.labelSingle,\n      labelPlural = _ref.labelPlural,\n      onClick = _ref.onClick;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var singleReplyText;\n  var pluralReplyText;\n\n  if (reply_count === 1) {\n    if (labelSingle) {\n      singleReplyText = \"1 \".concat(labelSingle);\n    } else {\n      singleReplyText = t('1 reply');\n    }\n  }\n\n  if (reply_count && reply_count > 1) {\n    if (labelPlural) {\n      pluralReplyText = \"\".concat(reply_count, \" \").concat(labelPlural);\n    } else {\n      pluralReplyText = t('{{ replyCount }} replies', {\n        replyCount: reply_count\n      });\n    }\n  }\n\n  if (reply_count && reply_count !== 0) {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"replies-count-button\",\n      className: \"str-chat__message-replies-count-button\",\n      onClick: onClick\n    }, /*#__PURE__*/React.createElement(ReplyIcon, null), reply_count === 1 ? singleReplyText : pluralReplyText);\n  }\n\n  return null;\n};\n\nMessageRepliesCountButton.defaultProps = {\n  reply_count: 0\n};\nMessageRepliesCountButton.propTypes = {\n  /** Label for number of replies, when count is 1 */\n  labelSingle: PropTypes.string,\n\n  /** Label for number of replies, when count is more than 1 */\n  labelPlural: PropTypes.string,\n\n  /** Number of replies */\n  reply_count: PropTypes.number,\n\n  /**\n   * click handler for button\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  onClick: PropTypes.func\n};\nvar MessageRepliesCountButton$1 = /*#__PURE__*/React.memo(MessageRepliesCountButton); // @ts-check\n\n/** @type {React.FC<import(\"types\").ModalProps>} */\n\nvar Modal = function Modal(_ref) {\n  var children = _ref.children,\n      onClose = _ref.onClose,\n      open = _ref.open;\n  /** @type {React.RefObject<HTMLDivElement>} */\n\n  var innerRef = useRef(null);\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n  /** @param {React.MouseEvent} e */\n\n\n  var handleClick = function handleClick(e) {\n    var _innerRef$current;\n\n    if (e.target instanceof Node && !((_innerRef$current = innerRef.current) === null || _innerRef$current === void 0 ? void 0 : _innerRef$current.contains(e.target)) && onClose) {\n      onClose();\n    }\n  };\n\n  useEffect(function () {\n    if (!open) return function () {};\n    /** @type {EventListener} */\n\n    var handleEscKey = function handleEscKey(e) {\n      if (e instanceof KeyboardEvent && e.keyCode === 27 && onClose) {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keyPress', handleEscKey, false);\n    return function () {\n      return document.removeEventListener('keyPress', handleEscKey, false);\n    };\n  }, [onClose, open]);\n  var openClasses = open ? 'str-chat__modal--open' : 'str-chat__modal--closed';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__modal \".concat(openClasses),\n    onClick: handleClick\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__modal__close-button\"\n  }, t('Close'), /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"10\",\n    height: \"10\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\",\n    fillRule: \"evenodd\"\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__modal__inner\",\n    ref: innerRef\n  }, children));\n};\n\nModal.propTypes = {\n  /** Callback handler for closing of modal. */\n  onClose: PropTypes.func.isRequired,\n\n  /** If true, modal is opened or visible. */\n  open: PropTypes.bool.isRequired\n}; // @ts-check\n\nvar LoadingItems = function LoadingItems() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__loading-channels-item\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__loading-channels-avatar\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__loading-channels-meta\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__loading-channels-username\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__loading-channels-status\"\n  })));\n};\n/**\n * LoadingChannels - Fancy loading indicator for the channel list\n *\n * @example ../../docs/LoadingChannels.md\n */\n\n\nvar LoadingChannels = function LoadingChannels() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__loading-channels\"\n  }, /*#__PURE__*/React.createElement(LoadingItems, null), /*#__PURE__*/React.createElement(LoadingItems, null), /*#__PURE__*/React.createElement(LoadingItems, null));\n};\n\nvar LoadingChannels$1 = /*#__PURE__*/React.memo(LoadingChannels); // @ts-check\n\n/**\n * LoadingErrorIndicator - UI component for error indicator in Channel.\n *\n * @example ../../docs/LoadingErrorIndicator.md\n * @type {React.FC<import('../types').LoadingErrorIndicatorProps>}\n */\n\nvar LoadingErrorIndicator = function LoadingErrorIndicator(_ref) {\n  var error = _ref.error;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  if (!error) return null;\n  return (\n    /*#__PURE__*/\n    // @ts-ignore\n    React.createElement(\"div\", null, t('Error: {{ errorMessage }}', {\n      errorMessage: error.message\n    }))\n  );\n};\n\nLoadingErrorIndicator.defaultProps = {\n  error: null\n};\nLoadingErrorIndicator.propTypes = {\n  /** Error object */\n  error: PropTypes.instanceOf(Error)\n};\nvar LoadingErrorIndicatorComponent = /*#__PURE__*/React.memo(LoadingErrorIndicator); // @ts-check\n\n/**\n * LoadingIndicator - Just a simple loading spinner..\n *\n * @example ../../docs/LoadingIndicator.md\n * @type { React.FC<import('../types').LoadingIndicatorProps>}\n */\n\nvar LoadingIndicator = function LoadingIndicator(_ref) {\n  var _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 15 : _ref$size,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? '#006CFF' : _ref$color;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__loading-indicator \".concat(color),\n    \"data-testid\": \"loading-indicator-wrapper\",\n    style: {\n      width: size,\n      height: size\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: size,\n    height: size,\n    viewBox: \"0 0 30 30\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    x1: \"50%\",\n    y1: \"0%\",\n    x2: \"50%\",\n    y2: \"100%\",\n    id: \"a\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#FFF\",\n    stopOpacity: \"0\",\n    offset: \"0%\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"100%\",\n    \"data-testid\": \"loading-indicator-circle\",\n    stopColor: color,\n    stopOpacity: \"1\",\n    style: {\n      stopColor: color\n    }\n  }))), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z\",\n    fill: \"url(#a)\",\n    fillRule: \"evenodd\"\n  })));\n};\n\nvar DefaultLoadingIndicator = /*#__PURE__*/React.memo(LoadingIndicator); // @ts-check\n\n/** @type {React.FC<import(\"types\").EmoticonItemProps>} */\n\nvar EmoticonItem = function EmoticonItem(_ref) {\n  var entity = _ref.entity;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__emoji-item\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__emoji-item--entity\"\n  }, entity.native), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__emoji-item--name\"\n  }, entity.name));\n};\n\nEmoticonItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name for emoticon */\n    name: PropTypes.string.isRequired,\n\n    /** Native value or actual emoticon */\n    native: PropTypes.string.isRequired\n  }).isRequired\n};\nvar EmoticonItem$1 = /*#__PURE__*/React.memo(EmoticonItem); // @ts-check\n\n/**\n * UserItem - Component rendered in commands menu\n * @typedef {import('../types').UserItemProps} Props\n * @type {React.FC<Props>}\n */\n\nvar UserItem = function UserItem(_ref) {\n  var entity = _ref.entity;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__user-item\"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    size: 20,\n    image: entity.image\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"strong\", null, entity.name), \" \", !entity.name ? entity.id : ''));\n};\n\nUserItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name of the user */\n    name: PropTypes.string,\n\n    /** Id of the user */\n    id: PropTypes.string,\n\n    /** Image of the user */\n    image: PropTypes.string\n  }).isRequired\n};\nvar UserItem$1 = /*#__PURE__*/React.memo(UserItem); // @ts-check\n\n/**\n * @type {React.FC<import('../types').CommandItemProps>}\n */\n\nvar CommandItem = function CommandItem(_ref) {\n  var entity = _ref.entity;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__slash-command\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__slash-command-header\"\n  }, /*#__PURE__*/React.createElement(\"strong\", null, entity.name), \" \", entity.args), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__slash-command-description\"\n  }, entity.description));\n};\n\nCommandItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name of the command */\n    name: PropTypes.string,\n\n    /** Arguments of command */\n    args: PropTypes.string,\n\n    /** Description of command */\n    description: PropTypes.string\n  }).isRequired\n};\nvar CommandItem$1 = /*#__PURE__*/React.memo(CommandItem);\n/** @param {string} word */\n\nvar emojiReplace = function emojiReplace(word) {\n  var found = emojiIndex.search(word) || [];\n  var emoji = found.slice(0, 10).find(function (_ref) {\n    var emoticons = _ref.emoticons;\n    return emoticons === null || emoticons === void 0 ? void 0 : emoticons.includes(word);\n  });\n  if (!emoji || !('native' in emoji)) return null;\n  return emoji.native;\n};\n/** @type {React.FC<import(\"types\").ChatAutoCompleteProps>} */\n\n\nvar ChatAutoComplete = function ChatAutoComplete(props) {\n  var _channel$state, _channel$state2;\n\n  var _useContext = useContext(ChatContext),\n      channel = _useContext.channel;\n\n  var members = channel === null || channel === void 0 ? void 0 : (_channel$state = channel.state) === null || _channel$state === void 0 ? void 0 : _channel$state.members;\n  var watchers = channel === null || channel === void 0 ? void 0 : (_channel$state2 = channel.state) === null || _channel$state2 === void 0 ? void 0 : _channel$state2.watchers;\n  var getMembersAndWatchers = useCallback(function () {\n    var memberUsers = members ? Object.values(members).map(function (_ref2) {\n      var user = _ref2.user;\n      return user;\n    }) : [];\n    var watcherUsers = watchers ? Object.values(watchers) : [];\n    var users = [].concat(_toConsumableArray(memberUsers), _toConsumableArray(watcherUsers)); // make sure we don't list users twice\n\n    /** @type {{ [key: string]: import('stream-chat').User}} */\n\n    var uniqueUsers = {};\n    users.forEach(function (user) {\n      if (user && !uniqueUsers[user.id]) {\n        uniqueUsers[user.id] = user;\n      }\n    });\n    return Object.values(uniqueUsers);\n  }, [members, watchers]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var queryMembersdebounced = useCallback(debounce(\n  /*#__PURE__*/\n\n  /**\n   * @param {string} query\n   * @param {(data: any[]) => void} onReady\n   */\n  function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(query, onReady) {\n      var response, users;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (channel === null || channel === void 0 ? void 0 : channel.queryMembers) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              _context.next = 4;\n              return channel === null || channel === void 0 ? void 0 : channel.queryMembers({\n                name: {\n                  $autocomplete: query\n                }\n              });\n\n            case 4:\n              response = _context.sent;\n              users = response.members.map(function (m) {\n                return m.user;\n              });\n              if (onReady) onReady(users);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), 200), [channel === null || channel === void 0 ? void 0 : channel.queryMembers]);\n  var commands = props.commands,\n      onSelectItem = props.onSelectItem,\n      triggers = props.triggers;\n  /**\n   * dataProvider accepts `onReady` function, which will executed once the data is ready.\n   * Another approach would have been to simply return the data from dataProvider and let the\n   * component await for it and then execute the required logic. We are going for callback instead\n   * of async-await since we have debounce function in dataProvider. Which will delay the execution\n   * of api call on trailing end of debounce (lets call it a1) but will return with result of\n   * previous call without waiting for a1. So in this case, we want to execute onReady, when trailing\n   * end of debounce executes.\n   * @type {() => import(\"../AutoCompleteTextarea/types\").TriggerMap | object}\n   */\n\n  var getTriggers = useCallback( // eslint-disable-next-line sonarjs/cognitive-complexity\n  function () {\n    return triggers || {\n      ':': {\n        dataProvider: function dataProvider(q, text, onReady) {\n          if (q.length === 0 || q.charAt(0).match(/[^a-zA-Z0-9+-]/)) {\n            return [];\n          }\n\n          var emojis = emojiIndex.search(q) || [];\n          var result = emojis.slice(0, 10);\n          if (onReady) onReady(result, q);\n          return result;\n        },\n        component: EmoticonItem$1,\n        output: function output(entity) {\n          return {\n            key: entity.id,\n            text: \"\".concat(entity.native),\n            caretPosition: 'next'\n          };\n        }\n      },\n      '@': {\n        dataProvider: function dataProvider(query, text, onReady) {\n          // By default, we return maximum 100 members via queryChannels api call.\n          // Thus it is safe to assume, that if number of members in channel.state is < 100,\n          // then all the members are already available on client side and we don't need to\n          // make any api call to queryMembers endpoint.\n          if (!query || Object.values(members || {}).length < 100) {\n            var users = getMembersAndWatchers();\n            var matchingUsers = users.filter(function (user) {\n              if (!query) return true;\n\n              if (user.name !== undefined && user.name.toLowerCase().includes(query.toLowerCase())) {\n                return true;\n              }\n\n              return user.id.toLowerCase().includes(query.toLowerCase());\n            });\n            var data = matchingUsers.slice(0, 10);\n            if (onReady) onReady(data, query);\n            return data;\n          }\n\n          return queryMembersdebounced(query,\n          /** @param {any[]} data */\n          function (data) {\n            if (onReady) onReady(data, query);\n          });\n        },\n        component: UserItem$1,\n        output: function output(entity) {\n          return {\n            key: entity.id,\n            text: \"@\".concat(entity.name || entity.id),\n            caretPosition: 'next'\n          };\n        },\n        callback: function callback(item) {\n          return onSelectItem && onSelectItem(item);\n        }\n      },\n      '/': {\n        dataProvider: function dataProvider(q, text, onReady) {\n          if (text.indexOf('/') !== 0 || !commands) {\n            return [];\n          }\n\n          var selectedCommands = commands.filter(function (c) {\n            return c.name.indexOf(q) !== -1;\n          }); // sort alphabetically unless the you're matching the first char\n\n          selectedCommands.sort(function (a, b) {\n            var nameA = a.name.toLowerCase();\n            var nameB = b.name.toLowerCase();\n\n            if (nameA.indexOf(q) === 0) {\n              nameA = \"0\".concat(nameA);\n            }\n\n            if (nameB.indexOf(q) === 0) {\n              nameB = \"0\".concat(nameB);\n            }\n\n            if (nameA < nameB) {\n              return -1;\n            }\n\n            if (nameA > nameB) {\n              return 1;\n            }\n\n            return 0;\n          });\n          var result = selectedCommands.slice(0, 10);\n          if (onReady) onReady(result, q);\n          return result;\n        },\n        component: CommandItem$1,\n        output: function output(entity) {\n          return {\n            key: entity.id,\n            text: \"/\".concat(entity.name),\n            caretPosition: 'next'\n          };\n        }\n      }\n    };\n  }, [members, getMembersAndWatchers, commands, onSelectItem, queryMembersdebounced, triggers]);\n  var innerRef = props.innerRef;\n  var updateInnerRef = useCallback(function (ref) {\n    if (innerRef) innerRef.current = ref;\n  }, [innerRef]);\n  return /*#__PURE__*/React.createElement(ReactTextareaAutocomplete, {\n    loadingComponent: DefaultLoadingIndicator,\n    trigger: getTriggers(),\n    replaceWord: emojiReplace,\n    minChar: 0,\n    maxRows: props.maxRows,\n    innerRef: updateInnerRef,\n    onFocus: props.onFocus,\n    rows: props.rows,\n    className: \"str-chat__textarea__textarea\",\n    containerClassName: \"str-chat__textarea\",\n    dropdownClassName: \"str-chat__emojisearch\",\n    listClassName: \"str-chat__emojisearch__list\",\n    itemClassName: \"str-chat__emojisearch__item\",\n    placeholder: props.placeholder,\n    onChange: props.onChange,\n    handleSubmit: props.handleSubmit,\n    onPaste: props.onPaste,\n    value: props.value,\n    grow: props.grow,\n    disabled: props.disabled,\n    additionalTextareaProps: props.additionalTextareaProps\n  });\n};\n\nChatAutoComplete.propTypes = {\n  /** The number of rows you want the textarea to have */\n  rows: PropTypes.number,\n\n  /** Grow the number of rows of the textarea while you're typing */\n  grow: PropTypes.bool,\n\n  /** Maximum number of rows */\n  maxRows: PropTypes.number,\n\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n\n  /** The value of the textarea */\n  value: PropTypes.string,\n\n  /** Function to run on pasting within the textarea */\n  onPaste: PropTypes.func,\n\n  /** Function that runs on submit */\n  handleSubmit: PropTypes.func,\n\n  /** Function that runs on change */\n  onChange: PropTypes.func,\n\n  /** Placeholder for the textare */\n  placeholder: PropTypes.string,\n\n  /** What loading component to use for the auto complete when loading results. */\n  // @ts-ignore\n  LoadingIndicator: PropTypes.elementType,\n\n  /** Minimum number of Character */\n  minChar: PropTypes.number,\n\n  /**\n   * Handler for selecting item from suggestions list\n   *\n   * @param item Selected item object.\n   *  */\n  onSelectItem: PropTypes.func,\n\n  /** Array of [commands](https://getstream.io/chat/docs/#channel_commands) */\n  commands: PropTypes.array,\n\n  /** Listener for onfocus event on textarea */\n  onFocus: PropTypes.func,\n\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object\n};\nChatAutoComplete.defaultProps = {\n  rows: 3\n};\nvar ChatAutoComplete$1 = /*#__PURE__*/React.memo(ChatAutoComplete);\n/**\n * @type {React.FC<import('../types').TooltipProps>}\n */\n\nvar Tooltip = function Tooltip(props) {\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: \"str-chat__tooltip\"\n  }, props), props.children);\n};\n\nvar Tooltip$1 = /*#__PURE__*/React.memo(Tooltip);\n\nfunction ownKeys$4(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$4(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$4(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$4(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\n * @typedef {import(\"types\").MessageInputState} State\n * @typedef {import(\"types\").MessageInputProps} Props\n * @typedef {import(\"stream-chat\").FileUploadAPIResponse} FileUploadAPIResponse\n * @typedef {import('stream-chat').UserResponse} UserResponse\n */\n\n/**\n * Get attachment type from MIME type\n * @param {string} mime\n * @returns {string}\n */\n\n\nvar getAttachmentTypeFromMime = function getAttachmentTypeFromMime(mime) {\n  if (mime.includes('video/')) return 'media';\n  if (mime.includes('audio/')) return 'audio';\n  return 'file';\n};\n/** @type {{ [id: string]: import('../types').FileUpload }} */\n\n\nvar emptyFileUploads = {};\n/** @type {{ [id: string]: import('../types').ImageUpload }} */\n\nvar emptyImageUploads = {};\n/**\n * Initializes the state. Empty if the message prop is falsy.\n * @param {import(\"stream-chat\").MessageResponse | undefined} message\n * @returns {State}\n */\n\nfunction initState(message) {\n  var _message$attachments, _message$attachments2, _message$attachments3;\n\n  if (!message) {\n    return {\n      text: '',\n      imageOrder: [],\n      imageUploads: Immutable(emptyImageUploads),\n      fileOrder: [],\n      fileUploads: Immutable(emptyFileUploads),\n      numberOfUploads: 0,\n      attachments: [],\n      mentioned_users: [],\n      emojiPickerIsOpen: false\n    };\n  } // if message prop is defined, get imageuploads, fileuploads, text, etc. from it\n\n\n  var imageUploads = ((_message$attachments = message.attachments) === null || _message$attachments === void 0 ? void 0 : _message$attachments.filter(function (_ref) {\n    var type = _ref.type;\n    return type === 'image';\n  }).reduce(function (acc, attachment) {\n    var id = generateRandomId();\n    return acc.setIn([id], {\n      id,\n      url: attachment.image_url,\n      state: 'finished',\n      file: {\n        name: attachment.fallback\n      }\n    });\n  }, Immutable(emptyImageUploads))) || Immutable(emptyImageUploads);\n  var imageOrder = Object.keys(imageUploads);\n  var fileUploads = ((_message$attachments2 = message.attachments) === null || _message$attachments2 === void 0 ? void 0 : _message$attachments2.filter(function (_ref2) {\n    var type = _ref2.type;\n    return type === 'file';\n  }).reduce(function (acc, attachment) {\n    var id = generateRandomId();\n    return acc.setIn([id], {\n      id,\n      url: attachment.asset_url,\n      state: 'finished',\n      file: {\n        name: attachment.title,\n        type: attachment.mime_type,\n        size: attachment.file_size\n      }\n    });\n  }, Immutable(emptyFileUploads))) || Immutable(emptyFileUploads);\n  var fileOrder = Object.keys(fileUploads);\n  var numberOfUploads = fileOrder.length + imageOrder.length;\n  var attachments = ((_message$attachments3 = message.attachments) === null || _message$attachments3 === void 0 ? void 0 : _message$attachments3.filter(function (_ref3) {\n    var type = _ref3.type;\n    return type !== 'file' && type !== 'image';\n  })) || [];\n  var mentioned_users = message.mentioned_users || [];\n  return {\n    text: message.text || '',\n    imageOrder,\n    imageUploads,\n    fileOrder,\n    fileUploads,\n    numberOfUploads,\n    attachments,\n    mentioned_users,\n    emojiPickerIsOpen: false\n  };\n}\n/**\n * MessageInput state reducer\n * @param {State} state\n * @param {import(\"./types\").MessageInputReducerAction} action\n * @returns {State}\n */\n\n\nfunction messageInputReducer(state, action) {\n  switch (action.type) {\n    case 'setEmojiPickerIsOpen':\n      return _objectSpread$4(_objectSpread$4({}, state), {}, {\n        emojiPickerIsOpen: action.value\n      });\n\n    case 'setText':\n      return _objectSpread$4(_objectSpread$4({}, state), {}, {\n        text: action.getNewText(state.text)\n      });\n\n    case 'clear':\n      return _objectSpread$4(_objectSpread$4({}, state), {}, {\n        text: '',\n        mentioned_users: [],\n        imageOrder: [],\n        imageUploads: Immutable(emptyImageUploads),\n        fileOrder: [],\n        fileUploads: Immutable(emptyFileUploads),\n        numberOfUploads: 0\n      });\n\n    case 'setImageUpload':\n      {\n        var imageAlreadyExists = state.imageUploads[action.id];\n        var imageOrder = imageAlreadyExists ? state.imageOrder : state.imageOrder.concat(action.id);\n\n        var type = action.type,\n            newUploadFields = _objectWithoutProperties(action, [\"type\"]);\n\n        return _objectSpread$4(_objectSpread$4({}, state), {}, {\n          imageOrder,\n          imageUploads: state.imageUploads.setIn([action.id], _objectSpread$4(_objectSpread$4({}, state.imageUploads[action.id]), newUploadFields)),\n          numberOfUploads: imageAlreadyExists ? state.numberOfUploads : state.numberOfUploads + 1\n        });\n      }\n\n    case 'setFileUpload':\n      {\n        var fileAlreadyExists = state.fileUploads[action.id];\n        var fileOrder = fileAlreadyExists ? state.fileOrder : state.fileOrder.concat(action.id);\n\n        var _type = action.type,\n            _newUploadFields = _objectWithoutProperties(action, [\"type\"]);\n\n        return _objectSpread$4(_objectSpread$4({}, state), {}, {\n          fileOrder,\n          fileUploads: state.fileUploads.setIn([action.id], _objectSpread$4(_objectSpread$4({}, state.fileUploads[action.id]), _newUploadFields)),\n          numberOfUploads: fileAlreadyExists ? state.numberOfUploads : state.numberOfUploads + 1\n        });\n      }\n\n    case 'removeImageUpload':\n      if (!state.imageUploads[action.id]) return state; // cannot remove anything\n\n      return _objectSpread$4(_objectSpread$4({}, state), {}, {\n        numberOfUploads: state.numberOfUploads - 1,\n        imageOrder: state.imageOrder.filter(function (_id) {\n          return _id !== action.id;\n        }),\n        imageUploads: state.imageUploads.without(action.id)\n      });\n\n    case 'removeFileUpload':\n      if (!state.fileUploads[action.id]) return state; // cannot remove anything\n\n      return _objectSpread$4(_objectSpread$4({}, state), {}, {\n        numberOfUploads: state.numberOfUploads - 1,\n        fileOrder: state.fileOrder.filter(function (_id) {\n          return _id !== action.id;\n        }),\n        fileUploads: state.fileUploads.without(action.id)\n      });\n\n    case 'reduceNumberOfUploads':\n      // TODO: figure out if we can just use uploadOrder instead\n      return _objectSpread$4(_objectSpread$4({}, state), {}, {\n        numberOfUploads: state.numberOfUploads - 1\n      });\n\n    case 'addMentionedUser':\n      return _objectSpread$4(_objectSpread$4({}, state), {}, {\n        mentioned_users: state.mentioned_users.concat(action.user)\n      });\n\n    default:\n      return state;\n  }\n}\n/**\n * hook for MessageInput state\n * @param {Props} props\n */\n\n\nfunction useMessageInputState(props) {\n  var doImageUploadRequest = props.doImageUploadRequest,\n      doFileUploadRequest = props.doFileUploadRequest,\n      focus = props.focus,\n      message = props.message,\n      clearEditingState = props.clearEditingState,\n      overrideSubmitHandler = props.overrideSubmitHandler,\n      parent = props.parent,\n      noFiles = props.noFiles,\n      errorHandler = props.errorHandler,\n      publishTypingEvent = props.publishTypingEvent;\n\n  var _useReducer = useReducer(messageInputReducer, message, initState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var textareaRef = useRef(\n  /** @type {HTMLTextAreaElement | undefined} */\n  undefined);\n  var emojiPickerRef = useRef(\n  /** @type {HTMLDivElement | null} */\n  null);\n  var channelContext = useContext(ChannelContext);\n  var text = state.text,\n      imageOrder = state.imageOrder,\n      imageUploads = state.imageUploads,\n      fileOrder = state.fileOrder,\n      fileUploads = state.fileUploads,\n      attachments = state.attachments,\n      numberOfUploads = state.numberOfUploads,\n      mentioned_users = state.mentioned_users;\n  var channel = channelContext.channel,\n      editMessage = channelContext.editMessage,\n      sendMessage = channelContext.sendMessage; // Focus\n\n  useEffect(function () {\n    if (focus && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [focus]); // Text + cursor position\n\n  var newCursorPosition = useRef(\n  /** @type {number | null} */\n  null);\n  var insertText = useCallback(function (textToInsert) {\n    if (!textareaRef.current) {\n      dispatch({\n        type: 'setText',\n        getNewText: function getNewText(t) {\n          return t + textToInsert;\n        }\n      });\n      return;\n    }\n\n    var textareaElement = textareaRef.current;\n    var selectionStart = textareaElement.selectionStart,\n        selectionEnd = textareaElement.selectionEnd;\n    newCursorPosition.current = selectionStart + textToInsert.length;\n    dispatch({\n      type: 'setText',\n      getNewText: function getNewText(prevText) {\n        return prevText.slice(0, selectionStart) + textToInsert + prevText.slice(selectionEnd);\n      }\n    });\n  }, [textareaRef, newCursorPosition]);\n  useEffect(function () {\n    var textareaElement = textareaRef.current;\n\n    if (textareaElement && newCursorPosition.current !== null) {\n      textareaElement.selectionStart = newCursorPosition.current;\n      textareaElement.selectionEnd = newCursorPosition.current;\n      newCursorPosition.current = null;\n    }\n  }, [text, newCursorPosition]);\n  var handleChange = useCallback(function (event) {\n    event.preventDefault();\n\n    if (!event || !event.target) {\n      return;\n    }\n\n    var newText = event.target.value;\n    dispatch({\n      type: 'setText',\n      getNewText: function getNewText() {\n        return newText;\n      }\n    });\n\n    if (publishTypingEvent && newText && channel) {\n      logChatPromiseExecution(channel.keystroke(), 'start typing event');\n    }\n  }, [channel, publishTypingEvent]); // Emoji\n\n  var closeEmojiPicker = useCallback(function (e) {\n    if (emojiPickerRef.current && !emojiPickerRef.current.contains(e.target)) {\n      dispatch({\n        type: 'setEmojiPickerIsOpen',\n        value: false\n      });\n      document.removeEventListener('click', closeEmojiPicker, false);\n    }\n  }, [emojiPickerRef]);\n  var openEmojiPicker = useCallback(function () {\n    dispatch({\n      type: 'setEmojiPickerIsOpen',\n      value: true\n    });\n    document.addEventListener('click', closeEmojiPicker, false);\n  }, [closeEmojiPicker]);\n  var onSelectEmoji = useCallback(function (emoji) {\n    return insertText(emoji.native);\n  }, [insertText]); // Commands / mentions\n\n  var getCommands = useCallback(function () {\n    return channel && channel.getConfig().commands;\n  }, [channel]);\n  var getUsers = useCallback(function () {\n    if (!channel) return [];\n    return [].concat(_toConsumableArray(Object.values(channel.state.members).map(function (_ref4) {\n      var user = _ref4.user;\n      return user;\n    })), _toConsumableArray(Object.values(channel.state.watchers))).filter(function (_user, index, self) {\n      return self.findIndex(function (user) {\n        return (user === null || user === void 0 ? void 0 : user.id) === (_user === null || _user === void 0 ? void 0 : _user.id);\n      }) === index;\n    } // filter out non-unique ids\n    );\n  }, [channel]);\n  var onSelectItem = useCallback(\n  /** @param {UserResponse} item */\n  function (item) {\n    dispatch({\n      type: 'addMentionedUser',\n      user: item\n    });\n  }, []); // Submitting\n\n  var getAttachmentsFromUploads = useCallback(function () {\n    var imageAttachments = imageOrder.map(function (id) {\n      return imageUploads[id];\n    }).filter(function (upload) {\n      return upload.state !== 'failed';\n    }).filter(function (_ref5, index, self) {\n      var id = _ref5.id,\n          url = _ref5.url;\n      return (// filter out duplicates based on url\n        self.every(function (upload) {\n          return upload.id === id || upload.url !== url;\n        })\n      );\n    }).map(function (upload) {\n      return {\n        type: 'image',\n        image_url: upload.url,\n        fallback: upload.file.name\n      };\n    });\n    var fileAttachments = fileOrder.map(function (id) {\n      return fileUploads[id];\n    }).filter(function (upload) {\n      return upload.state !== 'failed';\n    }).map(function (upload) {\n      return {\n        type: getAttachmentTypeFromMime(upload.file.type),\n        asset_url: upload.url,\n        title: upload.file.name,\n        mime_type: upload.file.type,\n        file_size: upload.file.size\n      };\n    });\n    return [].concat(_toConsumableArray(attachments), _toConsumableArray(imageAttachments), _toConsumableArray(fileAttachments));\n  }, [imageOrder, imageUploads, fileOrder, fileUploads, attachments]);\n  /**\n   * @param {React.FormEvent | React.MouseEvent} event\n   */\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    var trimmedMessage = text.trim();\n    var isEmptyMessage = trimmedMessage === '' || trimmedMessage === '>' || trimmedMessage === '``````' || trimmedMessage === '``' || trimmedMessage === '**' || trimmedMessage === '____' || trimmedMessage === '__' || trimmedMessage === '****';\n\n    if (isEmptyMessage && numberOfUploads === 0) {\n      return;\n    } // the channel component handles the actual sending of the message\n\n\n    var someAttachmentsUploading = Object.values(imageUploads).some(function (upload) {\n      return upload.state === 'uploading';\n    }) || Object.values(fileUploads).some(function (upload) {\n      return upload.state === 'uploading';\n    });\n\n    if (someAttachmentsUploading) {\n      // TODO: show error to user that they should wait until image is uploaded\n      return;\n    }\n\n    var newAttachments = getAttachmentsFromUploads(); // Instead of checking if a user is still mentioned every time the text changes,\n    // just filter out non-mentioned users before submit, which is cheaper\n    // and allows users to easily undo any accidental deletion\n\n    var actualMentionedUsers = Array.from(new Set(mentioned_users.filter(function (_ref6) {\n      var name = _ref6.name,\n          id = _ref6.id;\n      return text.includes(\"@\".concat(id)) || text.includes(\"@\".concat(name));\n    }).map(function (_ref7) {\n      var id = _ref7.id;\n      return id;\n    })));\n    var updatedMessage = {\n      text,\n      attachments: newAttachments,\n      mentioned_users: actualMentionedUsers\n    };\n\n    if (!!message && editMessage) {\n      // TODO: Remove this line and show an error when submit fails\n      if (clearEditingState) clearEditingState();\n      var updateMessagePromise = editMessage(_objectSpread$4(_objectSpread$4({}, updatedMessage), {}, {\n        id: message.id\n      })).then(clearEditingState);\n      logChatPromiseExecution(updateMessagePromise, 'update message');\n    } else if (overrideSubmitHandler && typeof overrideSubmitHandler === 'function' && channel) {\n      overrideSubmitHandler(_objectSpread$4(_objectSpread$4({}, updatedMessage), {}, {\n        parent\n      }), channel.cid);\n      dispatch({\n        type: 'clear'\n      });\n    } else if (sendMessage) {\n      var sendMessagePromise = sendMessage(_objectSpread$4(_objectSpread$4({}, updatedMessage), {}, {\n        parent\n      }));\n      logChatPromiseExecution(sendMessagePromise, 'send message');\n      dispatch({\n        type: 'clear'\n      });\n    }\n\n    if (channel && publishTypingEvent) logChatPromiseExecution(channel.stopTyping(), 'stop typing');\n  }; // Attachments\n  // Files\n\n\n  var uploadFile = useCallback(function (id) {\n    dispatch({\n      type: 'setFileUpload',\n      id,\n      state: 'uploading'\n    });\n  }, []);\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var upload, id, file, response, alreadyRemoved;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (channel) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              upload = Object.values(fileUploads).find(function (fileUpload) {\n                return fileUpload.state === 'uploading' && fileUpload.file;\n              });\n\n              if (upload) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 5:\n              id = upload.id, file = upload.file;\n              /** @type FileUploadAPIResponse */\n\n              _context.prev = 6;\n\n              if (!doFileUploadRequest) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 10;\n              return doFileUploadRequest(file, channel);\n\n            case 10:\n              response = _context.sent;\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.next = 15;\n              return channel.sendFile(file);\n\n            case 15:\n              response = _context.sent;\n\n            case 16:\n              _context.next = 26;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](6);\n              console.warn(_context.t0);\n              alreadyRemoved = false;\n              dispatch({\n                type: 'reduceNumberOfUploads'\n              });\n\n              if (!fileUploads[id]) {\n                alreadyRemoved = true;\n              } else {\n                dispatch({\n                  type: 'setFileUpload',\n                  id,\n                  state: 'failed'\n                });\n              }\n\n              if (!alreadyRemoved && errorHandler) {\n                // TODO: verify if the paramaters passed to the error handler actually make sense\n                errorHandler(_context.t0, 'upload-file', file);\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 26:\n              dispatch({\n                type: 'setFileUpload',\n                id,\n                state: 'finished',\n                url: response.file\n              });\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[6, 18]]);\n    }))();\n  }, [fileUploads, channel, doFileUploadRequest, errorHandler]);\n  var removeFile = useCallback(function (id) {\n    // TODO: cancel upload if still uploading\n    dispatch({\n      type: 'removeFileUpload',\n      id\n    });\n  }, []); // Images\n\n  var uploadImage = useCallback( /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var img, file, response, alreadyRemoved;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              img = imageUploads[id];\n\n              if (!(!img || !channel)) {\n                _context2.next = 3;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              file = img.file;\n\n              if (img.state !== 'uploading') {\n                dispatch({\n                  type: 'setImageUpload',\n                  id,\n                  state: 'uploading'\n                });\n              }\n              /** @type FileUploadAPIResponse */\n\n\n              _context2.prev = 5;\n\n              if (!doImageUploadRequest) {\n                _context2.next = 12;\n                break;\n              }\n\n              _context2.next = 9;\n              return doImageUploadRequest(file, channel);\n\n            case 9:\n              response = _context2.sent;\n              _context2.next = 15;\n              break;\n\n            case 12:\n              _context2.next = 14;\n              return channel.sendImage(file);\n\n            case 14:\n              response = _context2.sent;\n\n            case 15:\n              _context2.next = 25;\n              break;\n\n            case 17:\n              _context2.prev = 17;\n              _context2.t0 = _context2[\"catch\"](5);\n              console.warn(_context2.t0);\n              alreadyRemoved = false;\n              dispatch({\n                type: 'reduceNumberOfUploads'\n              });\n\n              if (!imageUploads[id]) {\n                alreadyRemoved = true;\n              } else {\n                dispatch({\n                  type: 'setImageUpload',\n                  id,\n                  state: 'failed'\n                });\n              }\n\n              if (!alreadyRemoved && errorHandler) {\n                // TODO: verify if the paramaters passed to the error handler actually make sense\n                errorHandler(_context2.t0, 'upload-image', {\n                  id,\n                  file\n                });\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 25:\n              if (imageUploads[id]) {\n                _context2.next = 27;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 27:\n              // removed before done\n              dispatch({\n                type: 'setImageUpload',\n                id,\n                state: 'finished',\n                url: response.file\n              });\n\n            case 28:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[5, 17]]);\n    }));\n\n    return function (_x) {\n      return _ref9.apply(this, arguments);\n    };\n  }(), [imageUploads, channel, doImageUploadRequest, errorHandler]);\n  useEffect(function () {\n    if (FileReader) {\n      var upload = Object.values(imageUploads).find(function (imageUpload) {\n        return imageUpload.state === 'uploading' && !!imageUpload.file && !imageUpload.previewUri;\n      });\n\n      if (upload) {\n        var id = upload.id,\n            file = upload.file; // TODO: Possibly use URL.createObjectURL instead. However, then we need\n        // to release the previews when not used anymore though.\n\n        var reader = new FileReader();\n\n        reader.onload = function (event) {\n          var _event$target;\n\n          if (typeof ((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result) !== 'string') return;\n          dispatch({\n            type: 'setImageUpload',\n            id,\n            previewUri: event.target.result\n          });\n        };\n\n        reader.readAsDataURL(file);\n        uploadImage(id);\n        return function () {\n          reader.onload = null;\n        };\n      }\n    }\n\n    return function () {};\n  }, [imageUploads, uploadImage]);\n  var removeImage = useCallback(function (id) {\n    dispatch({\n      type: 'removeImageUpload',\n      id\n    }); // TODO: cancel upload if still uploading\n  }, []);\n  var uploadNewFiles = useCallback(\n  /**\n   * @param {FileList} files\n   */\n  function (files) {\n    Array.from(files).forEach(function (file) {\n      var id = generateRandomId();\n\n      if (file.type.startsWith('image/')) {\n        dispatch({\n          type: 'setImageUpload',\n          id,\n          file,\n          state: 'uploading'\n        });\n      } else if (file instanceof File && !noFiles) {\n        dispatch({\n          type: 'setFileUpload',\n          id,\n          file,\n          state: 'uploading'\n        });\n      }\n    });\n  }, [noFiles]);\n  var onPaste = useCallback(function (e) {\n    (function () {\n      var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event) {\n        var items, plainTextPromise, plainTextItem, fileLikes, s;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                // TODO: Move this handler to package with ImageDropzone\n                items = event.clipboardData.items;\n\n                if (dataTransferItemsHaveFiles(items)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 3:\n                event.preventDefault(); // Get a promise for the plain text in case no files are\n                // found. This needs to be done here because chrome cleans\n                // up the DataTransferItems after resolving of a promise.\n\n                /** @type {DataTransferItem} */\n\n                plainTextItem = _toConsumableArray(items).find(function (_ref11) {\n                  var kind = _ref11.kind,\n                      type = _ref11.type;\n                  return kind === 'string' && type === 'text/plain';\n                });\n\n                if (plainTextItem) {\n                  plainTextPromise = new Promise(function (resolve) {\n                    plainTextItem.getAsString(function (s) {\n                      resolve(s);\n                    });\n                  });\n                }\n\n                _context3.next = 8;\n                return dataTransferItemsToFiles(items);\n\n              case 8:\n                fileLikes = _context3.sent;\n\n                if (!fileLikes.length) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                uploadNewFiles(fileLikes);\n                return _context3.abrupt(\"return\");\n\n              case 12:\n                if (!plainTextPromise) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                _context3.next = 15;\n                return plainTextPromise;\n\n              case 15:\n                s = _context3.sent;\n                insertText(s);\n\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref10.apply(this, arguments);\n      };\n    })()(e);\n  }, [uploadNewFiles, insertText]);\n  return _objectSpread$4(_objectSpread$4({}, state), {}, {\n    // refs\n    textareaRef,\n    emojiPickerRef,\n    // handlers\n    uploadNewFiles,\n    removeImage,\n    uploadImage,\n    removeFile,\n    uploadFile,\n    onSelectEmoji,\n    getUsers,\n    getCommands,\n    handleSubmit,\n    handleChange,\n    onPaste,\n    onSelectItem,\n    openEmojiPicker\n  });\n} // @ts-check\n\n/** @type {React.FC<import(\"types\").MessageInputEmojiPickerProps>} */\n\n\nvar EmojiPicker = function EmojiPicker(_ref) {\n  var emojiPickerIsOpen = _ref.emojiPickerIsOpen,\n      emojiPickerRef = _ref.emojiPickerRef,\n      onSelectEmoji = _ref.onSelectEmoji,\n      small = _ref.small;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  if (emojiPickerIsOpen) {\n    var className = small ? 'str-chat__small-message-input-emojipicker' : 'str-chat__input--emojipicker';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: className,\n      ref: emojiPickerRef\n    }, /*#__PURE__*/React.createElement(Picker, {\n      native: true,\n      emoji: \"point_up\",\n      title: t('Pick your emoji'),\n      onSelect: onSelectEmoji,\n      color: \"#006CFF\",\n      showPreview: false,\n      useButton: true,\n      emojisToShowFilter: filterEmoji\n    }));\n  }\n\n  return null;\n}; // @ts-check\n\n/** @type {React.FC<import(\"types\").MessageInputUploadsProps>} */\n\n\nvar UploadsPreview = function UploadsPreview(_ref) {\n  var imageOrder = _ref.imageOrder,\n      imageUploads = _ref.imageUploads,\n      removeImage = _ref.removeImage,\n      uploadImage = _ref.uploadImage,\n      uploadNewFiles = _ref.uploadNewFiles,\n      numberOfUploads = _ref.numberOfUploads,\n      fileOrder = _ref.fileOrder,\n      fileUploads = _ref.fileUploads,\n      removeFile = _ref.removeFile,\n      uploadFile = _ref.uploadFile;\n  var channelContext = useContext(ChannelContext);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, imageOrder.length > 0 && /*#__PURE__*/React.createElement(ImagePreviewer, {\n    imageUploads: imageOrder.map(function (id) {\n      return imageUploads[id];\n    }),\n    handleRemove: removeImage,\n    handleRetry: uploadImage,\n    handleFiles: uploadNewFiles,\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && numberOfUploads >= channelContext.maxNumberOfFiles\n  }), fileOrder.length > 0 && /*#__PURE__*/React.createElement(FilePreviewer, {\n    uploads: fileOrder.map(function (id) {\n      return fileUploads[id];\n    }),\n    handleRemove: removeFile,\n    handleRetry: uploadFile,\n    handleFiles: uploadNewFiles\n  }));\n}; // @ts-check\n\n/** @type {React.FC<import(\"types\").SendButtonProps>} */\n\n\nvar SendButton = function SendButton(_ref) {\n  var sendMessage = _ref.sendMessage;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: \"str-chat__send-button\",\n    onClick: sendMessage\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"18\",\n    height: \"17\",\n    viewBox: \"0 0 18 17\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Send')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\",\n    fillRule: \"evenodd\",\n    fill: \"#006cff\"\n  })));\n};\n\nvar SendButtonComponent = /*#__PURE__*/React.memo(SendButton); // @ts-check\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\n\nvar MessageInputLarge = function MessageInputLarge(props) {\n  var messageInput = useMessageInputState(props);\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var channelContext = useContext(ChannelContext);\n  /**\n   * @typedef {import(\"stream-chat\").Event} ClientEvent\n   * @param {{ [userid: string]: ClientEvent } | {}} typingUsers\n   */\n\n  var constructTypingString = function constructTypingString(typingUsers) {\n    var otherTypingUsers = Object.values(typingUsers).filter(function (_ref) {\n      var _channelContext$clien;\n\n      var user = _ref.user;\n      return ((_channelContext$clien = channelContext.client) === null || _channelContext$clien === void 0 ? void 0 : _channelContext$clien.user.id) !== (user === null || user === void 0 ? void 0 : user.id);\n    }).map(function (_ref2) {\n      var user = _ref2.user;\n      return (user === null || user === void 0 ? void 0 : user.name) || (user === null || user === void 0 ? void 0 : user.id);\n    });\n    if (otherTypingUsers.length === 0) return '';\n\n    if (otherTypingUsers.length === 1) {\n      return t('{{ user }} is typing...', {\n        user: otherTypingUsers[0]\n      });\n    }\n\n    if (otherTypingUsers.length === 2) {\n      // joins all with \"and\" but =no commas\n      // example: \"bob and sam\"\n      return t('{{ firstUser }} and {{ secondUser }} are typing...', {\n        firstUser: otherTypingUsers[0],\n        secondUser: otherTypingUsers[1]\n      });\n    } // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, and sam\"\n\n\n    return t('{{ commaSeparatedUsers }} and {{ lastUser }} are typing...', {\n      commaSeparatedUsers: otherTypingUsers.slice(0, -1).join(', '),\n      lastUser: otherTypingUsers[otherTypingUsers.length - 1]\n    });\n  };\n\n  var SendButton = props.SendButton;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__input-large\"\n  }, /*#__PURE__*/React.createElement(ImageDropzone, {\n    accept: channelContext.acceptedFiles,\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= channelContext.maxNumberOfFiles,\n    handleFiles: messageInput.uploadNewFiles\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__input\"\n  }, /*#__PURE__*/React.createElement(EmojiPicker, messageInput), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__input--textarea-wrapper\"\n  }, /*#__PURE__*/React.createElement(UploadsPreview, messageInput), /*#__PURE__*/React.createElement(ChatAutoComplete$1, {\n    commands: messageInput.getCommands(),\n    innerRef: messageInput.textareaRef,\n    handleSubmit: messageInput.handleSubmit,\n    onChange: messageInput.handleChange,\n    onSelectItem: messageInput.onSelectItem,\n    value: messageInput.text,\n    rows: 1,\n    maxRows: props.maxRows,\n    placeholder: t('Type your message'),\n    onPaste: messageInput.onPaste,\n    triggers: props.autocompleteTriggers,\n    grow: props.grow,\n    disabled: props.disabled,\n    additionalTextareaProps: props.additionalTextareaProps\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__emojiselect-wrapper\"\n  }, /*#__PURE__*/React.createElement(Tooltip$1, null, t('Open emoji picker')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__input-emojiselect\",\n    onClick: messageInput.openEmojiPicker,\n    ref: messageInput.emojiPickerRef\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Open emoji picker')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\",\n    fillRule: \"evenodd\"\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__fileupload-wrapper\",\n    \"data-testid\": \"fileinput\"\n  }, /*#__PURE__*/React.createElement(Tooltip$1, null, t('Attach files')), /*#__PURE__*/React.createElement(FileUploadButton, {\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= channelContext.maxNumberOfFiles,\n    accepts: channelContext.acceptedFiles,\n    handleFiles: messageInput.uploadNewFiles\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__input-fileupload\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Attach files')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\",\n    fillRule: \"nonzero\"\n  })))))), SendButton && /*#__PURE__*/React.createElement(SendButton, {\n    sendMessage: messageInput.handleSubmit\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__input-footer\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__input-footer--count \".concat(!channelContext.watcher_count ? 'str-chat__input-footer--count--hidden' : '')\n  }, t('{{ watcherCount }} online', {\n    watcherCount: channelContext.watcher_count\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__input-footer--typing\"\n  }, constructTypingString(channelContext.typing || {}))))));\n};\n\nMessageInputLarge.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  // @ts-ignore\n  SendButton: PropTypes.elementType\n};\nMessageInputLarge.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  Input: MessageInputLarge,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {}\n};\n\nvar MessageInput = function MessageInput(props) {\n  var Input = props.Input;\n  return /*#__PURE__*/React.createElement(Input, props);\n};\n\nMessageInput.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  Input: MessageInputLarge,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {}\n};\nvar MessageInput$1 = /*#__PURE__*/React.memo(MessageInput); // @ts-check\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\n\nvar MessageInputFlat = function MessageInputFlat(props) {\n  var messageInput = useMessageInputState(props);\n  var channelContext = useContext(ChannelContext);\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var SendButton = props.SendButton;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__input-flat \".concat(SendButton ? 'str-chat__input-flat--send-button-active' : null)\n  }, /*#__PURE__*/React.createElement(ImageDropzone, {\n    accept: channelContext.acceptedFiles,\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= channelContext.maxNumberOfFiles,\n    handleFiles: messageInput.uploadNewFiles\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__input-flat-wrapper\"\n  }, /*#__PURE__*/React.createElement(EmojiPicker, messageInput), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__input-flat--textarea-wrapper\"\n  }, /*#__PURE__*/React.createElement(UploadsPreview, messageInput), /*#__PURE__*/React.createElement(ChatAutoComplete$1, {\n    commands: messageInput.getCommands(),\n    innerRef: messageInput.textareaRef,\n    handleSubmit: messageInput.handleSubmit,\n    onSelectItem: messageInput.onSelectItem,\n    onChange: messageInput.handleChange,\n    value: messageInput.text,\n    rows: 1,\n    maxRows: props.maxRows,\n    placeholder: t('Type your message'),\n    onPaste: messageInput.onPaste,\n    triggers: props.autocompleteTriggers,\n    grow: props.grow,\n    disabled: props.disabled,\n    additionalTextareaProps: props.additionalTextareaProps\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__emojiselect-wrapper\"\n  }, /*#__PURE__*/React.createElement(Tooltip$1, null, t('Open emoji picker')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__input-flat-emojiselect\",\n    onClick: messageInput.openEmojiPicker\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"28\",\n    height: \"28\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Open emoji picker')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z\",\n    fillRule: \"evenodd\"\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__fileupload-wrapper\",\n    \"data-testid\": \"fileinput\"\n  }, /*#__PURE__*/React.createElement(Tooltip$1, null, t('Attach files')), /*#__PURE__*/React.createElement(FileUploadButton, {\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= channelContext.maxNumberOfFiles,\n    accepts: channelContext.acceptedFiles,\n    handleFiles: messageInput.uploadNewFiles\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__input-flat-fileupload\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Attach files')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z\",\n    fillRule: \"nonzero\"\n  })))))), SendButton && /*#__PURE__*/React.createElement(SendButton, {\n    sendMessage: messageInput.handleSubmit\n  }))));\n};\n\nMessageInputFlat.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  // @ts-ignore\n  SendButton: PropTypes.elementType\n};\nMessageInputFlat.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {}\n};\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\n\nvar MessageInputSmall = function MessageInputSmall(props) {\n  var messageInput = useMessageInputState(props);\n  var channelContext = useContext(ChannelContext);\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var SendButton = props.SendButton;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__small-message-input__wrapper\"\n  }, /*#__PURE__*/React.createElement(ImageDropzone, {\n    accept: channelContext.acceptedFiles,\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= channelContext.maxNumberOfFiles,\n    handleFiles: messageInput.uploadNewFiles\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__small-message-input \".concat(SendButton ? 'str-chat__small-message-input--send-button-active' : null)\n  }, /*#__PURE__*/React.createElement(EmojiPicker, _extends({}, messageInput, {\n    small: true\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__small-message-input--textarea-wrapper\"\n  }, /*#__PURE__*/React.createElement(UploadsPreview, messageInput), /*#__PURE__*/React.createElement(ChatAutoComplete$1, {\n    commands: messageInput.getCommands(),\n    innerRef: messageInput.textareaRef,\n    handleSubmit: messageInput.handleSubmit,\n    onChange: messageInput.handleChange,\n    value: messageInput.text,\n    rows: 1,\n    maxRows: props.maxRows,\n    onSelectItem: messageInput.onSelectItem,\n    placeholder: t('Type your message'),\n    onPaste: messageInput.onPaste,\n    triggers: props.autocompleteTriggers,\n    grow: props.grow,\n    disabled: props.disabled,\n    additionalTextareaProps: props.additionalTextareaProps\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__emojiselect-wrapper\"\n  }, /*#__PURE__*/React.createElement(Tooltip$1, null, t('Open emoji picker')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__small-message-input-emojiselect\",\n    onClick: messageInput.openEmojiPicker\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Open emoji picker')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\",\n    fillRule: \"evenodd\"\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__fileupload-wrapper\",\n    \"data-testid\": \"fileinput\"\n  }, /*#__PURE__*/React.createElement(Tooltip$1, null, t('Attach files')), /*#__PURE__*/React.createElement(FileUploadButton, {\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= channelContext.maxNumberOfFiles,\n    accepts: channelContext.acceptedFiles,\n    handleFiles: messageInput.uploadNewFiles\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__small-message-input-fileupload\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Attach files')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\",\n    fillRule: \"nonzero\"\n  })))))), SendButton && /*#__PURE__*/React.createElement(SendButton, {\n    sendMessage: messageInput.handleSubmit\n  }))));\n};\n\nMessageInputSmall.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  // @ts-ignore\n  SendButton: PropTypes.elementType\n};\nMessageInputSmall.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {}\n};\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\n\nvar EditMessageForm = function EditMessageForm(props) {\n  var messageInput = useMessageInputState(props);\n  var channelContext = useContext(ChannelContext);\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var clearEditingState = props.clearEditingState;\n  useEffect(function () {\n    /** @type {(event: KeyboardEvent) => void} Typescript syntax */\n    var onKeyDown = function onKeyDown(event) {\n      console.log('event.keyCode :>> ', event.keyCode);\n      if (event.keyCode === KEY_CODES.ESC && clearEditingState) clearEditingState();\n    };\n\n    document.addEventListener('keydown', onKeyDown);\n    return function () {\n      return document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [clearEditingState]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__edit-message-form\"\n  }, /*#__PURE__*/React.createElement(ImageDropzone, {\n    accept: channelContext.acceptedFiles,\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= channelContext.maxNumberOfFiles,\n    handleFiles: messageInput.uploadNewFiles\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: messageInput.handleSubmit\n  }, /*#__PURE__*/React.createElement(UploadsPreview, messageInput), /*#__PURE__*/React.createElement(EmojiPicker, _extends({}, messageInput, {\n    small: true\n  })), /*#__PURE__*/React.createElement(ChatAutoComplete$1, {\n    commands: messageInput.getCommands(),\n    innerRef: messageInput.textareaRef,\n    handleSubmit: messageInput.handleSubmit,\n    onChange: messageInput.handleChange,\n    onSelectItem: messageInput.onSelectItem,\n    placeholder: t('Type your message'),\n    value: messageInput.text,\n    rows: 1,\n    maxRows: props.maxRows,\n    onPaste: messageInput.onPaste,\n    grow: props.grow,\n    additionalTextareaProps: props.additionalTextareaProps\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-team-form-footer\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__edit-message-form-options\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__input-emojiselect\",\n    onClick: messageInput.openEmojiPicker\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Open emoji picker')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\",\n    fillRule: \"evenodd\"\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__fileupload-wrapper\",\n    \"data-testid\": \"fileinput\"\n  }, /*#__PURE__*/React.createElement(Tooltip$1, null, t('Attach files')), /*#__PURE__*/React.createElement(FileUploadButton, {\n    multiple: channelContext.multipleUploads,\n    disabled: channelContext.maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= channelContext.maxNumberOfFiles,\n    accepts: channelContext.acceptedFiles,\n    handleFiles: messageInput.uploadNewFiles\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__input-fileupload\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, t('Attach files')), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\",\n    fillRule: \"nonzero\"\n  })))))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: props.clearEditingState\n  }, t('Cancel')), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\"\n  }, t('Send')))))));\n};\n\nEditMessageForm.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  // @ts-ignore\n  SendButton: PropTypes.elementType,\n\n  /**\n   * Clears edit state for current message (passed down from message component)\n   */\n  clearEditingState: PropTypes.func\n};\nEditMessageForm.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {}\n};\n/** @type {React.ForwardRefRenderFunction<HTMLDivElement | null, import(\"types\").ReactionSelectorProps>} */\n\nvar ReactionSelectorWithRef = function ReactionSelectorWithRef(_ref, ref) {\n  var _getUsersPerReactionT;\n\n  var latest_reactions = _ref.latest_reactions,\n      reaction_counts = _ref.reaction_counts,\n      _ref$reactionOptions = _ref.reactionOptions,\n      reactionOptions = _ref$reactionOptions === void 0 ? defaultMinimalEmojis : _ref$reactionOptions,\n      _ref$reverse = _ref.reverse,\n      reverse = _ref$reverse === void 0 ? false : _ref$reverse,\n      handleReaction = _ref.handleReaction,\n      _ref$detailedView = _ref.detailedView,\n      detailedView = _ref$detailedView === void 0 ? true : _ref$detailedView;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      tooltipReactionType = _useState2[0],\n      setTooltipReactionType = _useState2[1];\n\n  var _useState3 = useState(\n  /** @type {{ tooltip: number, arrow: number } | null} */\n  null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      tooltipPositions = _useState4[0],\n      setTooltipPositions = _useState4[1];\n\n  var containerRef = useRef(\n  /** @type {HTMLDivElement | null} */\n  null);\n  var tooltipRef = useRef(\n  /** @type {HTMLDivElement | null} */\n  null);\n  var targetRef = useRef(\n  /** @type {HTMLDivElement | null} */\n  null); // @ts-ignore because it's okay for our ref to be null in the parent component.\n\n  useImperativeHandle(ref, function () {\n    return containerRef.current;\n  });\n  var showTooltip = useCallback(function (e, reactionType) {\n    targetRef.current = e.target;\n    setTooltipReactionType(reactionType);\n  }, []);\n  var hideTooltip = useCallback(function () {\n    setTooltipReactionType(null);\n    setTooltipPositions(null);\n  }, []);\n  useEffect(function () {\n    if (tooltipReactionType) {\n      var _tooltipRef$current, _targetRef$current, _containerRef$current;\n\n      var tooltip = (_tooltipRef$current = tooltipRef.current) === null || _tooltipRef$current === void 0 ? void 0 : _tooltipRef$current.getBoundingClientRect();\n      var target = (_targetRef$current = targetRef.current) === null || _targetRef$current === void 0 ? void 0 : _targetRef$current.getBoundingClientRect();\n      var container = (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.getBoundingClientRect();\n      if (!tooltip || !target || !container) return;\n      var tooltipPosition = tooltip.width === container.width || tooltip.x < container.x ? 0 : target.left + target.width / 2 - container.left - tooltip.width / 2;\n      var arrowPosition = target.x - tooltip.x + target.width / 2 - tooltipPosition;\n      setTooltipPositions({\n        tooltip: tooltipPosition,\n        arrow: arrowPosition\n      });\n    }\n  }, [tooltipReactionType, containerRef]);\n  /**\n   * @param {string | null} type\n   * @returns {string[] | undefined}\n   * */\n\n  var getUsersPerReactionType = function getUsersPerReactionType(type) {\n    return latest_reactions === null || latest_reactions === void 0 ? void 0 : latest_reactions.map(function (reaction) {\n      if (reaction.type === type) {\n        var _reaction$user, _reaction$user2;\n\n        return ((_reaction$user = reaction.user) === null || _reaction$user === void 0 ? void 0 : _reaction$user.name) || ((_reaction$user2 = reaction.user) === null || _reaction$user2 === void 0 ? void 0 : _reaction$user2.id);\n      }\n\n      return null;\n    }).filter(Boolean);\n  };\n  /**\n   * @param {string | null} type\n   * @returns {import(\"stream-chat\").User | undefined}\n   * */\n\n\n  var getLatestUserForReactionType = function getLatestUserForReactionType(type) {\n    var _latest_reactions$fin;\n\n    return latest_reactions === null || latest_reactions === void 0 ? void 0 : (_latest_reactions$fin = latest_reactions.find(function (reaction) {\n      return reaction.type === type && !!reaction.user;\n    })) === null || _latest_reactions$fin === void 0 ? void 0 : _latest_reactions$fin.user;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"reaction-selector\",\n    className: \"str-chat__reaction-selector \".concat(reverse ? 'str-chat__reaction-selector--reverse' : ''),\n    ref: containerRef\n  }, !!tooltipReactionType && detailedView && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__reaction-selector-tooltip\",\n    ref: tooltipRef,\n    style: {\n      left: tooltipPositions === null || tooltipPositions === void 0 ? void 0 : tooltipPositions.tooltip,\n      visibility: tooltipPositions ? 'visible' : 'hidden'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrow\",\n    style: {\n      left: tooltipPositions === null || tooltipPositions === void 0 ? void 0 : tooltipPositions.arrow\n    }\n  }), (_getUsersPerReactionT = getUsersPerReactionType(tooltipReactionType)) === null || _getUsersPerReactionT === void 0 ? void 0 : _getUsersPerReactionT.map(function (user, i, users) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"latest-user-username\",\n      key: \"key-\".concat(i, \"-\").concat(user)\n    }, \"\".concat(user).concat(i < users.length - 1 ? ', ' : ''));\n  })), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"str-chat__message-reactions-list\"\n  }, reactionOptions.map(function (reactionOption) {\n    var latestUser = getLatestUserForReactionType(reactionOption.id);\n    var count = reaction_counts && reaction_counts[reactionOption.id];\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: \"item-\".concat(reactionOption.id),\n      className: \"str-chat__message-reactions-list-item\",\n      \"data-text\": reactionOption.id,\n      onClick: function onClick() {\n        return handleReaction && handleReaction(reactionOption.id);\n      }\n    }, !!count && detailedView && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"latest-user\",\n      onMouseEnter: function onMouseEnter(e) {\n        return showTooltip(e, reactionOption.id);\n      },\n      onMouseLeave: hideTooltip\n    }, latestUser ? /*#__PURE__*/React.createElement(Avatar, {\n      image: latestUser.image,\n      size: 20,\n      name: latestUser.name || null\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"latest-user-not-found\"\n    }))), /*#__PURE__*/React.createElement(NimbleEmoji // @ts-ignore because emoji-mart types don't support specifying\n    // spriteUrl instead of imageUrl, while the implementation does\n    , _extends({\n      emoji: reactionOption\n    }, emojiSetDef, {\n      data: emojiData\n    })), Boolean(count) && detailedView && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"str-chat__message-reactions-list-item__count\"\n    }, count || ''));\n  })));\n};\n\nvar ReactionSelector = /*#__PURE__*/React.forwardRef(ReactionSelectorWithRef);\nReactionSelector.propTypes = {\n  /**\n   * Array of latest reactions.\n   * Reaction object has following structure:\n   *\n   * ```json\n   * {\n   *  \"type\": \"love\",\n   *  \"user_id\": \"demo_user_id\",\n   *  \"user\": {\n   *    ...userObject\n   *  },\n   *  \"created_at\": \"datetime\";\n   * }\n   * ```\n   * */\n  latest_reactions: PropTypes.array,\n\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n  reverse: PropTypes.bool,\n\n  /**\n   * Handler to set/unset reaction on message.\n   *\n   * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * */\n  handleReaction: PropTypes.func.isRequired,\n\n  /** Enable the avatar display */\n  detailedView: PropTypes.bool\n};\nvar ReactionSelector$1 = /*#__PURE__*/React.memo(ReactionSelector);\n/** @type {React.FC<import(\"types\").ReactionsListProps>} */\n\nvar ReactionsList = function ReactionsList(_ref) {\n  var reactions = _ref.reactions,\n      reaction_counts = _ref.reaction_counts,\n      _ref$reactionOptions = _ref.reactionOptions,\n      reactionOptions = _ref$reactionOptions === void 0 ? defaultMinimalEmojis : _ref$reactionOptions,\n      _ref$reverse = _ref.reverse,\n      reverse = _ref$reverse === void 0 ? false : _ref$reverse,\n      onClick = _ref.onClick;\n\n  var getTotalReactionCount = function getTotalReactionCount() {\n    return Object.values(reaction_counts || {}).reduce(function (total, count) {\n      return total + count;\n    }, 0);\n  };\n  /** @param {string} type */\n\n\n  var getOptionForType = function getOptionForType(type) {\n    return reactionOptions.find(function (option) {\n      return option.id === type;\n    });\n  };\n\n  var getReactionTypes = function getReactionTypes() {\n    if (!reactions) return [];\n    var allTypes = new Set();\n    reactions.forEach(function (_ref2) {\n      var type = _ref2.type;\n      allTypes.add(type);\n    });\n    return Array.from(allTypes);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"reaction-list\",\n    className: \"str-chat__reaction-list \".concat(reverse ? 'str-chat__reaction-list--reverse' : ''),\n    onClick: onClick\n  }, /*#__PURE__*/React.createElement(\"ul\", null, getReactionTypes().map(function (reactionType) {\n    var emojiDefinition = getOptionForType(reactionType);\n    return emojiDefinition ? /*#__PURE__*/React.createElement(\"li\", {\n      key: emojiDefinition.id\n    }, /*#__PURE__*/React.createElement(NimbleEmoji // emoji-mart type defs don't support spriteSheet use case\n    // (but implementation does)\n    // @ts-ignore\n    , _extends({\n      emoji: emojiDefinition\n    }, emojiSetDef, {\n      size: 16,\n      data: emojiData\n    })), ' ', \"\\xA0\") : null;\n  }), /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__reaction-list--counter\"\n  }, getTotalReactionCount()))));\n};\n\nReactionsList.propTypes = {\n  reactions: PropTypes.array,\n\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n  reverse: PropTypes.bool,\n  onClick: PropTypes.func\n};\nvar ReactionsList$1 = /*#__PURE__*/React.memo(ReactionsList);\n/** @type {React.FC<import(\"types\").SimpleReactionsListProps>} */\n\nvar SimpleReactionsList = function SimpleReactionsList(_ref) {\n  var reactions = _ref.reactions,\n      reaction_counts = _ref.reaction_counts,\n      _ref$reactionOptions = _ref.reactionOptions,\n      reactionOptions = _ref$reactionOptions === void 0 ? defaultMinimalEmojis : _ref$reactionOptions,\n      handleReaction = _ref.handleReaction;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      tooltipReactionType = _useState2[0],\n      setTooltipReactionType = _useState2[1];\n  /** @param {string | null} type */\n\n\n  var getUsersPerReactionType = function getUsersPerReactionType(type) {\n    return reactions === null || reactions === void 0 ? void 0 : reactions.map(function (reaction) {\n      if (reaction.type === type) {\n        var _reaction$user, _reaction$user2;\n\n        return ((_reaction$user = reaction.user) === null || _reaction$user === void 0 ? void 0 : _reaction$user.name) || ((_reaction$user2 = reaction.user) === null || _reaction$user2 === void 0 ? void 0 : _reaction$user2.id);\n      }\n\n      return null;\n    }).filter(Boolean);\n  };\n\n  var getTotalReactionCount = function getTotalReactionCount() {\n    return Object.values(reaction_counts || {}).reduce(function (total, count) {\n      return total + count;\n    }, 0);\n  };\n\n  var getReactionTypes = function getReactionTypes() {\n    if (!reactions) return [];\n    var allTypes = new Set();\n    reactions.forEach(function (_ref2) {\n      var type = _ref2.type;\n      allTypes.add(type);\n    });\n    return Array.from(allTypes);\n  };\n  /** @param {string} type */\n\n\n  var getOptionForType = function getOptionForType(type) {\n    return reactionOptions.find(function (option) {\n      return option.id === type;\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    \"data-testid\": \"simple-reaction-list\",\n    className: \"str-chat__simple-reactions-list\",\n    onMouseLeave: function onMouseLeave() {\n      return setTooltipReactionType(null);\n    }\n  }, getReactionTypes().map(function (reactionType, i) {\n    var _getOptionForType, _getUsersPerReactionT;\n\n    var emojiDefinition = getOptionForType(reactionType);\n    return emojiDefinition ? /*#__PURE__*/React.createElement(\"li\", {\n      className: \"str-chat__simple-reactions-list-item\",\n      key: \"\".concat(emojiDefinition === null || emojiDefinition === void 0 ? void 0 : emojiDefinition.id, \"-\").concat(i),\n      onClick: function onClick() {\n        return handleReaction && handleReaction(reactionType);\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      onMouseEnter: function onMouseEnter() {\n        return setTooltipReactionType(reactionType);\n      }\n    }, /*#__PURE__*/React.createElement(NimbleEmoji // emoji-mart type defs don't support spriteSheet use case\n    // (but implementation does)\n    // @ts-ignore\n    , _extends({\n      emoji: emojiDefinition\n    }, emojiSetDef, {\n      size: 13,\n      data: emojiData\n    })), \"\\xA0\"), tooltipReactionType === ((_getOptionForType = getOptionForType(reactionType)) === null || _getOptionForType === void 0 ? void 0 : _getOptionForType.id) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__simple-reactions-list-tooltip\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"arrow\"\n    }), (_getUsersPerReactionT = getUsersPerReactionType(tooltipReactionType)) === null || _getUsersPerReactionT === void 0 ? void 0 : _getUsersPerReactionT.join(', '))) : null;\n  }), (reactions === null || reactions === void 0 ? void 0 : reactions.length) !== 0 && /*#__PURE__*/React.createElement(\"li\", {\n    className: \"str-chat__simple-reactions-list-item--last-number\"\n  }, getTotalReactionCount()));\n};\n\nSimpleReactionsList.propTypes = {\n  reactions: PropTypes.array,\n\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n\n  /**\n   * Handler to set/unset reaction on message.\n   *\n   * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * */\n  handleReaction: PropTypes.func\n};\nvar SimpleReactionsList$1 = /*#__PURE__*/React.memo(SimpleReactionsList);\nvar handleActionWarning = \"Action handler was called, but it is missing one of its required arguments.\\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.\";\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => (name: string, value: string, event: React.MouseEvent<HTMLElement>) => Promise<void>}\n */\n\nvar useActionHandler = function useActionHandler(message) {\n  var _useContext = useContext(ChannelContext),\n      channel = _useContext.channel,\n      updateMessage = _useContext.updateMessage,\n      removeMessage = _useContext.removeMessage;\n\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(name, value, event) {\n      var messageID, formData, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n\n              if (!(!message || !updateMessage || !removeMessage || !channel)) {\n                _context.next = 4;\n                break;\n              }\n\n              console.warn(handleActionWarning);\n              return _context.abrupt(\"return\");\n\n            case 4:\n              messageID = message.id;\n              formData = {\n                [name]: value\n              };\n              _context.next = 8;\n              return channel.sendAction(messageID, formData);\n\n            case 8:\n              data = _context.sent;\n\n              if (data && data.message) {\n                updateMessage(data.message);\n              } else {\n                removeMessage(message);\n              }\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2, _x3) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) =>  (event: React.MouseEvent<HTMLElement>) => Promise<void>}\n */\n\n\nvar useDeleteHandler = function useDeleteHandler(message) {\n  var _useContext = useContext(ChannelContext),\n      updateMessage = _useContext.updateMessage,\n      client = _useContext.client;\n\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n\n              if (!(!message || !client || !updateMessage)) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              _context.next = 5;\n              return client.deleteMessage(message.id);\n\n            case 5:\n              data = _context.sent;\n              updateMessage(data.message);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\n/**\n * @type {(\n *   customInitialState?: boolean,\n *   customSetEditing?: (event: React.MouseEvent<HTMLElement>) => void,\n *   customClearEditing?: (event: React.MouseEvent<HTMLElement>) => void\n * ) => {\n *   editing: boolean,\n *   setEdit: (event: React.MouseEvent<HTMLElement>) => void,\n *   clearEdit: (event: React.MouseEvent<HTMLElement>) => void\n * }}\n */\n\n\nvar useEditHandler = function useEditHandler() {\n  var customInitialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  var customSetEditing = arguments.length > 1 ? arguments[1] : undefined;\n  var customClearEditingHandler = arguments.length > 2 ? arguments[2] : undefined;\n\n  var _useState = useState(customInitialState),\n      _useState2 = _slicedToArray(_useState, 2),\n      editing = _useState2[0],\n      setEditing = _useState2[1];\n\n  var setEdit = customSetEditing || function (event) {\n    event === null || event === void 0 ? void 0 : event.preventDefault();\n    setEditing(true);\n  };\n\n  var clearEdit = customClearEditingHandler || function (event) {\n    event === null || event === void 0 ? void 0 : event.preventDefault();\n    setEditing(false);\n  };\n\n  return {\n    editing,\n    setEdit,\n    clearEdit\n  };\n};\n/**\n * Following function validates a function which returns notification message.\n * It validates if the first parameter is function and also if return value of function is string or no.\n *\n * @type {(func: Function, args: any) => null | string}\n */\n\n\nvar validateAndGetMessage = function validateAndGetMessage(func, args) {\n  if (!func || typeof func !== 'function') return null;\n  var returnValue = func.apply(void 0, _toConsumableArray(args));\n  if (typeof returnValue !== 'string') return null;\n  return returnValue;\n};\n/**\n * Tell if the owner of the current message is muted\n *\n * @type {(message?: import('stream-chat').MessageResponse, mutes?: import('stream-chat').Mute[]) => boolean}\n */\n\n\nvar isUserMuted = function isUserMuted(message, mutes) {\n  if (!mutes || !message) {\n    return false;\n  }\n\n  var userMuted = mutes.filter(\n  /** @type {(el: import('stream-chat').Mute) => boolean} Typescript syntax */\n  function (el) {\n    var _message$user;\n\n    return el.target.id === ((_message$user = message.user) === null || _message$user === void 0 ? void 0 : _message$user.id);\n  });\n  return !!userMuted.length;\n};\n\nvar MESSAGE_ACTIONS = {\n  edit: 'edit',\n  delete: 'delete',\n  flag: 'flag',\n  mute: 'mute'\n};\n/**\n * @typedef {{\n *   canEdit: boolean;\n *   canDelete: boolean;\n *   canMute: boolean;\n *   canFlag: boolean;\n * }} Capabilities\n * @type {(actions: string[] | boolean, capabilities: Capabilities) => string[]} Typescript syntax\n */\n\nvar getMessageActions = function getMessageActions(actions, _ref) {\n  var canDelete = _ref.canDelete,\n      canFlag = _ref.canFlag,\n      canEdit = _ref.canEdit,\n      canMute = _ref.canMute;\n  var messageActionsAfterPermission = [];\n  var messageActions = [];\n\n  if (actions && typeof actions === 'boolean') {\n    // If value of actions is true, then populate all the possible values\n    messageActions = Object.keys(MESSAGE_ACTIONS);\n  } else if (actions && actions.length > 0) {\n    messageActions = _toConsumableArray(actions);\n  } else {\n    return [];\n  }\n\n  if (canEdit && messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n  }\n\n  if (canDelete && messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n  }\n\n  if (canFlag && messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n  }\n\n  if (canMute && messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n  }\n\n  return messageActionsAfterPermission;\n};\n/**\n * @typedef {Pick<import('../types').MessageComponentProps, 'message' | 'readBy' | 'groupStyles' | 'lastReceivedId' | 'messageListRect'>} MessageEqualProps\n * @type {(props: MessageEqualProps, nextProps: MessageEqualProps) => boolean} Typescript syntax\n */\n\n\nvar areMessagePropsEqual = function areMessagePropsEqual(props, nextProps) {\n  return (// Message content is equal\n    nextProps.message === props.message && // Message was read by someone\n    deepequal(nextProps.readBy, props.readBy) && // Group style changes (it often happens that the last 3 messages of a channel have different group styles)\n    deepequal(nextProps.groupStyles, props.groupStyles) && // @ts-ignore\n    deepequal(nextProps.mutes, props.mutes) && // Last message received in the channel changes\n    deepequal(nextProps.lastReceivedId, props.lastReceivedId) && // User toggles edit state\n    // @ts-ignore // TODO: fix\n    nextProps.editing === props.editing && // Message wrapper layout changes\n    nextProps.messageListRect === props.messageListRect\n  );\n};\n/**\n * @type {(nextProps: import('../types').MessageComponentProps, props: import('../types').MessageComponentProps ) => boolean} Typescript syntax\n */\n\n\nvar shouldMessageComponentUpdate = function shouldMessageComponentUpdate(props, nextProps) {\n  // Component should only update if:\n  return !areMessagePropsEqual(props, nextProps);\n};\n/** @type {(message: import('stream-chat').MessageResponse | undefined) => boolean} */\n\n\nvar messageHasReactions = function messageHasReactions(message) {\n  return !!(message === null || message === void 0 ? void 0 : message.latest_reactions) && !!message.latest_reactions.length;\n};\n/** @type {(message: import('stream-chat').MessageResponse | undefined) => boolean} */\n\n\nvar messageHasAttachments = function messageHasAttachments(message) {\n  return !!(message === null || message === void 0 ? void 0 : message.attachments) && !!message.attachments.length;\n};\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => import('stream-chat').Attachment[] }\n */\n\n\nvar getImages = function getImages(message) {\n  if (!(message === null || message === void 0 ? void 0 : message.attachments)) {\n    return [];\n  }\n\n  return message.attachments.filter(\n  /** @type {(item: import('stream-chat').Attachment) => boolean} Typescript syntax */\n  function (item) {\n    return item.type === 'image';\n  });\n};\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => import('stream-chat').Attachment[] }\n */\n\n\nvar getNonImageAttachments = function getNonImageAttachments(message) {\n  if (!(message === null || message === void 0 ? void 0 : message.attachments)) {\n    return [];\n  }\n\n  return message.attachments.filter(\n  /** @type {(item: import('stream-chat').Attachment) => boolean} Typescript syntax */\n  function (item) {\n    return item.type !== 'image';\n  });\n};\n\nvar MessagePropTypes = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  html: PropTypes.string.isRequired,\n  created_at: PropTypes.instanceOf(Date).isRequired,\n  updated_at: PropTypes.instanceOf(Date).isRequired\n}).isRequired;\nvar missingUseFlagHandlerParameterWarning = 'useFlagHandler was called but it is missing one or more necessary parameters.';\n/**\n * @typedef {{\n *   notify?: import('../types').MessageComponentProps['addNotification'],\n *   getSuccessNotification?: import('../types').MessageComponentProps['getMuteUserSuccessNotification'],\n *   getErrorNotification?: import('../types').MessageComponentProps['getMuteUserErrorNotification'],\n * }} NotificationArg\n * @type {(message: import('stream-chat').MessageResponse | undefined, notification: NotificationArg) => (event: React.MouseEvent<HTMLElement>) => Promise<void>}\n */\n\nvar useFlagHandler = function useFlagHandler(message) {\n  var notifications = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _useContext = useContext(ChannelContext),\n      client = _useContext.client;\n\n  var _useContext2 = useContext(TranslationContext),\n      t = _useContext2.t;\n  /** @type {(event: React.MouseEvent<HTMLElement>) => Promise<void>} Typescript syntax */\n\n\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var notify, getSuccessNotification, getErrorNotification, successMessage, errorMessage;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              notify = notifications.notify, getSuccessNotification = notifications.getSuccessNotification, getErrorNotification = notifications.getErrorNotification;\n\n              if (!(!client || !t || !notify || !message)) {\n                _context.next = 5;\n                break;\n              }\n\n              console.warn(missingUseFlagHandlerParameterWarning);\n              return _context.abrupt(\"return\");\n\n            case 5:\n              _context.prev = 5;\n              _context.next = 8;\n              return client.flagMessage(message.id);\n\n            case 8:\n              successMessage = getSuccessNotification && validateAndGetMessage(getSuccessNotification, [message]);\n              notify(successMessage || t('Message has been successfully flagged'), 'success');\n              _context.next = 16;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](5);\n              errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n              notify(errorMessage || t('Error adding flag: Either the flag already exist or there is issue with network connection ...'), 'error');\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 12]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n}; // @ts-check\n\n/** @type {(fn: Function | undefined, message: import('stream-chat').MessageResponse | undefined) => Handler} * */\n\n\nfunction createEventHandler(fn, message) {\n  return function (e) {\n    if (typeof fn !== 'function' || !(message === null || message === void 0 ? void 0 : message.mentioned_users)) {\n      return;\n    }\n\n    fn(e, message.mentioned_users);\n  };\n}\n/**\n * @typedef {React.EventHandler<React.SyntheticEvent>} Handler\n * @typedef { import('stream-chat').MessageResponse | undefined } Message\n * @typedef { (event: React.MouseEvent, user: import('stream-chat').UserResponse[] ) => void } CustomMentionHandler\n * @type {(\n *   message: Message,\n *   customMentionHandler?: {\n *     onMentionsClick?: CustomMentionHandler,\n *     onMentionsHover?: CustomMentionHandler\n *   }\n * ) => { onMentionsClick: Handler, onMentionsHover: Handler }}\n */\n\n\nvar useMentionsHandler = function useMentionsHandler(message, customMentionHandler) {\n  /**\n   * @type{import('../types').ChannelContextValue}\n   */\n  var _useContext = useContext(ChannelContext),\n      channelOnMentionsClick = _useContext.onMentionsClick,\n      channelOnMentionsHover = _useContext.onMentionsHover;\n\n  var onMentionsClick = (customMentionHandler === null || customMentionHandler === void 0 ? void 0 : customMentionHandler.onMentionsClick) || channelOnMentionsClick || function () {};\n\n  var onMentionsHover = (customMentionHandler === null || customMentionHandler === void 0 ? void 0 : customMentionHandler.onMentionsHover) || channelOnMentionsHover || function () {};\n\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsClick: createEventHandler(onMentionsClick, message),\n\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsHover: createEventHandler(onMentionsHover, message)\n  };\n};\n/**\n * @type {(\n *   message: Message,\n *   eventHandlers?: {\n *     onMentionsClick?: Handler,\n *     onMentionsHover?: Handler,\n *   },\n * ) => { onMentionsClick: Handler, onMentionsHover: Handler }}\n */\n\n\nvar useMentionsUIHandler = function useMentionsUIHandler(message, eventHandlers) {\n  /**\n   * @type{import('../types').ChannelContextValue}\n   */\n  var _useContext2 = useContext(ChannelContext),\n      onMentionsClick = _useContext2.onMentionsClick,\n      onMentionsHover = _useContext2.onMentionsHover;\n\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsClick: (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.onMentionsClick) || createEventHandler(onMentionsClick, message),\n\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsHover: (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.onMentionsHover) || createEventHandler(onMentionsHover, message)\n  };\n};\n\nvar missingUseMuteHandlerParamsWarning = 'useMuteHandler was called but it is missing one or more necessary parameter.';\n/**\n * @typedef {{\n *   notify?: import('../types').MessageComponentProps['addNotification'],\n *   getSuccessNotification?: import('../types').MessageComponentProps['getMuteUserSuccessNotification'],\n *   getErrorNotification?: import('../types').MessageComponentProps['getMuteUserErrorNotification'],\n * }} NotificationArg\n * @type {(message: import('stream-chat').MessageResponse | undefined, notification: NotificationArg) => (event: React.MouseEvent<HTMLElement>) => Promise<void>}\n */\n\nvar useMuteHandler = function useMuteHandler(message) {\n  var notifications = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _useContext = useContext(ChannelContext),\n      client = _useContext.client,\n      mutes = _useContext.mutes;\n\n  var _useContext2 = useContext(TranslationContext),\n      t = _useContext2.t;\n  /** @type {(event: React.MouseEvent<HTMLElement>) => Promise<void>} Typescript syntax */\n\n\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var notify, getSuccessNotification, getErrorNotification, successMessage, errorMessage, fallbackMessage, _successMessage, _errorMessage;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              notify = notifications.notify, getSuccessNotification = notifications.getSuccessNotification, getErrorNotification = notifications.getErrorNotification;\n\n              if (!(!t || !(message === null || message === void 0 ? void 0 : message.user) || !notify || !client)) {\n                _context.next = 5;\n                break;\n              }\n\n              console.warn(missingUseMuteHandlerParamsWarning);\n              return _context.abrupt(\"return\");\n\n            case 5:\n              if (isUserMuted(message, mutes)) {\n                _context.next = 19;\n                break;\n              }\n\n              _context.prev = 6;\n              _context.next = 9;\n              return client.muteUser(message.user.id);\n\n            case 9:\n              successMessage = getSuccessNotification && validateAndGetMessage(getSuccessNotification, [message.user]);\n              notify(successMessage || t(\"{{ user }} has been muted\", {\n                user: message.user.name || message.user.id\n              }), 'success');\n              _context.next = 17;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](6);\n              errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message.user]);\n              notify(errorMessage || t('Error muting a user ...'), 'error');\n\n            case 17:\n              _context.next = 31;\n              break;\n\n            case 19:\n              _context.prev = 19;\n              _context.next = 22;\n              return client.unmuteUser(message.user.id);\n\n            case 22:\n              fallbackMessage = t(\"{{ user }} has been unmuted\", {\n                user: message.user.name || message.user.id\n              });\n              _successMessage = getSuccessNotification && validateAndGetMessage(getSuccessNotification, [message.user]) || fallbackMessage;\n\n              if (typeof _successMessage === 'string') {\n                notify(_successMessage, 'success');\n              }\n\n              _context.next = 31;\n              break;\n\n            case 27:\n              _context.prev = 27;\n              _context.t1 = _context[\"catch\"](19);\n              _errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message.user]) || t('Error unmuting a user ...');\n\n              if (typeof _errorMessage === 'string') {\n                notify(_errorMessage, 'error');\n              }\n\n            case 31:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[6, 13], [19, 27]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n}; // @ts-check\n\n/**\n * @type {(\n *   message: import('stream-chat').MessageResponse | undefined,\n *   customOpenThread?: (message: import('stream-chat').MessageResponse, event: React.SyntheticEvent) => void\n * ) => (event: React.SyntheticEvent) => void}\n */\n\n\nvar useOpenThreadHandler = function useOpenThreadHandler(message, customOpenThread) {\n  /**\n   * @type{import('../types').ChannelContextValue}\n   */\n  var _useContext = useContext(ChannelContext),\n      channelOpenThread = _useContext.openThread;\n\n  var openThread = customOpenThread || channelOpenThread;\n  return function (event) {\n    if (!openThread || !message) {\n      console.warn('Open thread handler was called but it is missing one of its parameters');\n      return;\n    }\n\n    openThread(message, event);\n  };\n};\n\nvar reactionHandlerWarning = \"Reaction handler was called, but it is missing one of its required arguments.\\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.\";\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => (reactionType: string, event: React.MouseEvent) => Promise<void>}\n */\n\nvar useReactionHandler = function useReactionHandler(message) {\n  var _useContext = useContext(ChannelContext),\n      client = _useContext.client,\n      channel = _useContext.channel,\n      updateMessage = _useContext.updateMessage;\n\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(reactionType, event) {\n      var userExistingReaction, currentUser, originalMessage, reactionChangePromise, messageID, reaction;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (event && event.preventDefault) {\n                event.preventDefault();\n              }\n\n              if (!(!updateMessage || !message || !channel || !client)) {\n                _context.next = 4;\n                break;\n              }\n\n              console.warn(reactionHandlerWarning);\n              return _context.abrupt(\"return\");\n\n            case 4:\n              userExistingReaction = null;\n              currentUser = client.userID;\n\n              if (message.own_reactions) {\n                message.own_reactions.forEach(function (reaction) {\n                  // own user should only ever contain the current user id\n                  // just in case we check to prevent bugs with message updates from breaking reactions\n                  if (reaction.user && currentUser === reaction.user.id && reaction.type === reactionType) {\n                    userExistingReaction = reaction;\n                  } else if (reaction.user && currentUser !== reaction.user.id) {\n                    console.warn(\"message.own_reactions contained reactions from a different user, this indicates a bug\");\n                  }\n                });\n              }\n\n              originalMessage = message;\n              /*\n              - Make the API call in the background\n              - If it fails, revert to the old message...\n               */\n\n              if (userExistingReaction) {\n                reactionChangePromise = channel.deleteReaction(message.id, // @ts-ignore Typescript doesn't understand that the userExistingReaction variable might have been mutated inside the foreach loop\n                userExistingReaction.type);\n              } else {\n                // add the reaction\n                messageID = message.id;\n                reaction = {\n                  type: reactionType\n                }; // this.props.channel.state.addReaction(tmpReaction, this.props.message);\n\n                reactionChangePromise = channel.sendReaction(messageID, reaction);\n              }\n\n              _context.prev = 9;\n              _context.next = 12;\n              return reactionChangePromise;\n\n            case 12:\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](9); // revert to the original message if the API call fails\n\n              updateMessage(originalMessage);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[9, 14]]);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\n/**\n * @typedef {{ onReactionListClick: () => void, showDetailedReactions: boolean }} ReactionClickHandler\n * @type {(\n *   message: import('stream-chat').MessageResponse | undefined,\n *   reactionSelectorRef: React.RefObject<HTMLDivElement | null>,\n *   messageWrapperRef?: React.RefObject<HTMLElement | null>\n * ) => ReactionClickHandler}\n */\n\n\nvar useReactionClick = function useReactionClick(message, reactionSelectorRef, messageWrapperRef) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showDetailedReactions = _useState2[0],\n      setShowDetailedReactions = _useState2[1];\n\n  var messageDeleted = !!(message === null || message === void 0 ? void 0 : message.deleted_at);\n  var hasListener = useRef(false);\n  /** @type {EventListener} */\n\n  var closeDetailedReactions = useCallback(function (event) {\n    var _reactionSelectorRef$;\n\n    if (event.target && ( // @ts-ignore\n    reactionSelectorRef === null || reactionSelectorRef === void 0 ? void 0 : (_reactionSelectorRef$ = reactionSelectorRef.current) === null || _reactionSelectorRef$ === void 0 ? void 0 : _reactionSelectorRef$.contains(event.target))) {\n      return;\n    }\n\n    setShowDetailedReactions(false);\n  }, [setShowDetailedReactions, reactionSelectorRef]);\n  useEffect(function () {\n    var messageWrapper = messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current;\n\n    if (showDetailedReactions && !hasListener.current) {\n      hasListener.current = true;\n      document.addEventListener('click', closeDetailedReactions);\n      document.addEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.addEventListener('mouseleave', closeDetailedReactions);\n      }\n    }\n\n    if (!showDetailedReactions && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', closeDetailedReactions);\n      }\n\n      hasListener.current = false;\n    }\n\n    return function () {\n      if (hasListener.current) {\n        document.removeEventListener('click', closeDetailedReactions);\n        document.removeEventListener('touchend', closeDetailedReactions);\n\n        if (messageWrapper) {\n          messageWrapper.removeEventListener('mouseleave', closeDetailedReactions);\n        }\n\n        hasListener.current = false;\n      }\n    };\n  }, [showDetailedReactions, closeDetailedReactions, messageWrapperRef]);\n  useEffect(function () {\n    var messageWrapper = messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current;\n\n    if (messageDeleted && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', closeDetailedReactions);\n      }\n\n      hasListener.current = false;\n    }\n  }, [messageDeleted, closeDetailedReactions, messageWrapperRef]);\n  /** @type {() => void} Typescript syntax */\n\n  var onReactionListClick = function onReactionListClick() {\n    setShowDetailedReactions(true);\n  };\n\n  return {\n    onReactionListClick,\n    showDetailedReactions\n  };\n};\n/**\n * @type {(\n *  customRetrySendMessage?: (message: import('stream-chat').Message) => Promise<void>\n * ) => (message: import('stream-chat').Message | undefined) => Promise<void>}\n */\n\n\nvar useRetryHandler = function useRetryHandler(customRetrySendMessage) {\n  /**\n   *@type {import('../types').ChannelContextValue}\n   */\n  var _useContext = useContext(ChannelContext),\n      contextRetrySendMessage = _useContext.retrySendMessage;\n\n  var retrySendMessage = customRetrySendMessage || contextRetrySendMessage;\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(message) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(retrySendMessage && message)) {\n                _context.next = 3;\n                break;\n              }\n\n              _context.next = 3;\n              return retrySendMessage(message);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n}; // @ts-check\n\n/**\n * @typedef {React.EventHandler<React.SyntheticEvent>} Handler\n * @typedef {(e: React.MouseEvent, user: import('stream-chat').User) => void} UserEventHandler\n * @type {(message: import('stream-chat').MessageResponse | undefined, eventHandlers: {onUserClickHandler?: UserEventHandler, onUserHoverHandler?: UserEventHandler}) => { onUserClick: Handler, onUserHover: Handler }}\n */\n\n\nvar useUserHandler = function useUserHandler(message, eventHandlers) {\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onUserClick: function onUserClick(e) {\n      if (typeof (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.onUserClickHandler) !== 'function' || !(message === null || message === void 0 ? void 0 : message.user)) {\n        return;\n      }\n\n      eventHandlers.onUserClickHandler(e, message.user);\n    },\n\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onUserHover: function onUserHover(e) {\n      if (typeof (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.onUserHoverHandler) !== 'function' || !(message === null || message === void 0 ? void 0 : message.user)) {\n        return;\n      }\n\n      eventHandlers.onUserHoverHandler(e, message.user);\n    }\n  };\n}; // @ts-check\n\n/**\n * @typedef {{\n *   isMyMessage: boolean;\n *   isAdmin: boolean;\n *   isModerator: boolean;\n *   isOwner: boolean;\n *   canEditMessage: boolean;\n *   canDeleteMessage: boolean;\n * }} UserRoles\n * @type {(message: import('stream-chat').MessageResponse | undefined) => UserRoles} Typescript syntax\n */\n\n\nvar useUserRole = function useUserRole(message) {\n  var _client$user, _channel$state, _channel$state$member, _channel$state2, _channel$state2$membe, _channel$state3, _channel$state3$membe, _channel$state4, _channel$state4$membe;\n\n  var _useContext = useContext(ChannelContext),\n      client = _useContext.client,\n      channel = _useContext.channel;\n\n  var isMyMessage = !!(message === null || message === void 0 ? void 0 : message.user) && !!(client === null || client === void 0 ? void 0 : client.user) && client.user.id === message.user.id;\n  var isAdmin = (client === null || client === void 0 ? void 0 : (_client$user = client.user) === null || _client$user === void 0 ? void 0 : _client$user.role) === 'admin' || (channel === null || channel === void 0 ? void 0 : (_channel$state = channel.state) === null || _channel$state === void 0 ? void 0 : (_channel$state$member = _channel$state.membership) === null || _channel$state$member === void 0 ? void 0 : _channel$state$member.role) === 'admin';\n  var isOwner = (channel === null || channel === void 0 ? void 0 : (_channel$state2 = channel.state) === null || _channel$state2 === void 0 ? void 0 : (_channel$state2$membe = _channel$state2.membership) === null || _channel$state2$membe === void 0 ? void 0 : _channel$state2$membe.role) === 'owner';\n  var isModerator = (channel === null || channel === void 0 ? void 0 : (_channel$state3 = channel.state) === null || _channel$state3 === void 0 ? void 0 : (_channel$state3$membe = _channel$state3.membership) === null || _channel$state3$membe === void 0 ? void 0 : _channel$state3$membe.role) === 'channel_moderator' || (channel === null || channel === void 0 ? void 0 : (_channel$state4 = channel.state) === null || _channel$state4 === void 0 ? void 0 : (_channel$state4$membe = _channel$state4.membership) === null || _channel$state4$membe === void 0 ? void 0 : _channel$state4$membe.role) === 'moderator';\n  var canEditMessage = isMyMessage || isModerator || isOwner || isAdmin;\n  var canDeleteMessage = canEditMessage;\n  return {\n    isMyMessage,\n    isAdmin,\n    isOwner,\n    isModerator,\n    canEditMessage,\n    canDeleteMessage\n  };\n};\n/** @type {React.FC<import(\"types\").MessageActionsBoxProps>} */\n\n\nvar MessageActionsBox = function MessageActionsBox(_ref) {\n  var handleFlag = _ref.handleFlag,\n      handleMute = _ref.handleMute,\n      handleEdit = _ref.handleEdit,\n      handleDelete = _ref.handleDelete,\n      getMessageActions = _ref.getMessageActions,\n      isUserMuted = _ref.isUserMuted,\n      _ref$open = _ref.open,\n      open = _ref$open === void 0 ? false : _ref$open,\n      mine = _ref.mine,\n      messageListRect = _ref.messageListRect;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var messageActions = getMessageActions();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      reverse = _useState2[0],\n      setReverse = _useState2[1];\n\n  var checkIfReverse = useCallback(function (containerElement) {\n    if (!containerElement) {\n      setReverse(false);\n      return;\n    }\n\n    if (open) {\n      var containerRect = containerElement.getBoundingClientRect();\n\n      if (mine) {\n        setReverse(!!messageListRect && containerRect.left < messageListRect.left);\n      } else {\n        setReverse(!!messageListRect && containerRect.right + 5 > messageListRect.right);\n      }\n    }\n  }, [messageListRect, mine, open]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-actions-box\",\n    className: \"str-chat__message-actions-box\\n        \".concat(open ? 'str-chat__message-actions-box--open' : '', \"\\n        \").concat(mine ? 'str-chat__message-actions-box--mine' : '', \"\\n        \").concat(reverse ? 'str-chat__message-actions-box--reverse' : '', \"\\n      \"),\n    ref: checkIfReverse\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"str-chat__message-actions-list\"\n  }, messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleFlag\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"str-chat__message-actions-list-item\"\n  }, t('Flag'))), messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleMute\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"str-chat__message-actions-list-item\"\n  }, isUserMuted && isUserMuted() ? t('Unmute') : t('Mute'))), messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleEdit\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"str-chat__message-actions-list-item\"\n  }, t('Edit Message'))), messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1 && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDelete\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"str-chat__message-actions-list-item\"\n  }, t('Delete')))));\n};\n\nMessageActionsBox.propTypes = {\n  /** If the message actions box should be open or not */\n  open: PropTypes.bool,\n\n  /** If message belongs to current user. */\n  mine: PropTypes.bool,\n\n  /** DOMRect object for parent MessageList component */\n  messageListRect:\n  /** @type {PropTypes.Validator<DOMRect>} */\n  PropTypes.object,\n\n  /**\n   * Handler for flaging a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleFlag: PropTypes.func,\n\n  /**\n   * Handler for muting a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleMute: PropTypes.func,\n\n  /**\n   * Handler for editing a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleEdit: PropTypes.func,\n\n  /**\n   * Handler for deleting a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleDelete: PropTypes.func,\n\n  /**\n   * Returns array of avalable message actions for current message.\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   */\n  getMessageActions: PropTypes.func.isRequired\n};\nvar MessageActionsBox$1 = /*#__PURE__*/React.memo(MessageActionsBox);\n/**\n * @type { React.FC<import('../types').MessageActionsProps> }\n */\n\nvar MessageActions = function MessageActions(props) {\n  var addNotification = props.addNotification,\n      message = props.message,\n      getMessageActions = props.getMessageActions,\n      messageListRect = props.messageListRect,\n      messageWrapperRef = props.messageWrapperRef,\n      setEditingState = props.setEditingState,\n      getMuteUserSuccessNotification = props.getMuteUserSuccessNotification,\n      getMuteUserErrorNotification = props.getMuteUserErrorNotification,\n      getFlagMessageErrorNotification = props.getFlagMessageErrorNotification,\n      getFlagMessageSuccessNotification = props.getFlagMessageSuccessNotification,\n      propHandleFlag = props.handleFlag,\n      propHandleMute = props.handleMute,\n      propHandleDelete = props.handleDelete,\n      inline = props.inline,\n      customWrapperClass = props.customWrapperClass;\n\n  var _useContext = useContext(ChatContext),\n      mutes = _useContext.mutes;\n\n  var messageActions = getMessageActions();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      actionsBoxOpen = _useState2[0],\n      setActionsBoxOpen = _useState2[1];\n\n  var _useUserRole = useUserRole(message),\n      isMyMessage = _useUserRole.isMyMessage;\n\n  var handleDelete = useDeleteHandler(message);\n  var handleFlag = useFlagHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getFlagMessageErrorNotification,\n    getErrorNotification: getFlagMessageSuccessNotification\n  });\n  var handleMute = useMuteHandler(message, {\n    notify: addNotification,\n    getErrorNotification: getMuteUserSuccessNotification,\n    getSuccessNotification: getMuteUserErrorNotification\n  });\n  var isMuted = useCallback(function () {\n    return isUserMuted(message, mutes);\n  }, [message, mutes]);\n  /** @type {() => void} Typescript syntax */\n\n  var hideOptions = useCallback(function () {\n    return setActionsBoxOpen(false);\n  }, []);\n  var messageDeletedAt = !!(message === null || message === void 0 ? void 0 : message.deleted_at);\n  useEffect(function () {\n    if (messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current) {\n      messageWrapperRef.current.addEventListener('onMouseLeave', hideOptions);\n    }\n  }, [messageWrapperRef, hideOptions]);\n  useEffect(function () {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n  useEffect(function () {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n\n    return function () {\n      document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (messageActions.length === 0) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(MessageActionsWrapper, {\n    inline: inline,\n    customWrapperClass: customWrapperClass,\n    setActionsBoxOpen: setActionsBoxOpen\n  }, /*#__PURE__*/React.createElement(MessageActionsBox$1, {\n    getMessageActions: getMessageActions,\n    open: actionsBoxOpen,\n    messageListRect: messageListRect,\n    handleFlag: propHandleFlag || handleFlag,\n    isUserMuted: isMuted,\n    handleMute: propHandleMute || handleMute,\n    handleEdit: setEditingState,\n    handleDelete: propHandleDelete || handleDelete,\n    mine: isMyMessage\n  }), /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"11\",\n    height: \"4\",\n    viewBox: \"0 0 11 4\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\",\n    fillRule: \"nonzero\"\n  })));\n};\n/**\n * This is a workaround to encompass the different styles message actions can have at the moment\n * while allowing for sharing the component's stateful logic.\n * @type { React.FC<import('../types').MessageActionsWrapperProps> }\n */\n\n\nvar MessageActionsWrapper = function MessageActionsWrapper(props) {\n  var children = props.children,\n      customWrapperClass = props.customWrapperClass,\n      inline = props.inline,\n      setActionsBoxOpen = props.setActionsBoxOpen;\n  var defaultWrapperClass = 'str-chat__message-simple__actions__action str-chat__message-simple__actions__action--options';\n  var wrapperClass = typeof customWrapperClass === 'string' ? customWrapperClass : defaultWrapperClass;\n  /** @type {() => void} Typescript syntax */\n\n  var onClickOptionsAction = function onClickOptionsAction() {\n    return setActionsBoxOpen(true);\n  };\n\n  var wrapperProps = {\n    'data-testid': 'message-actions',\n    onClick: onClickOptionsAction,\n    className: wrapperClass\n  };\n\n  if (inline) {\n    return /*#__PURE__*/React.createElement(\"span\", wrapperProps, children);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", wrapperProps, children);\n};\n/**\n * @type { React.FC<import('../types').MessageOptionsProps> }\n */\n\n\nvar MessageOptionsComponent = function MessageOptionsComponent(props) {\n  var _props$displayActions = props.displayActions,\n      displayActions = _props$displayActions === void 0 ? true : _props$displayActions,\n      _props$displayLeft = props.displayLeft,\n      displayLeft = _props$displayLeft === void 0 ? true : _props$displayLeft,\n      _props$displayReplies = props.displayReplies,\n      displayReplies = _props$displayReplies === void 0 ? true : _props$displayReplies,\n      propHandleOpenThread = props.handleOpenThread,\n      initialMessage = props.initialMessage,\n      message = props.message,\n      messageWrapperRef = props.messageWrapperRef,\n      onReactionListClick = props.onReactionListClick,\n      _props$theme = props.theme,\n      theme = _props$theme === void 0 ? 'simple' : _props$theme,\n      threadList = props.threadList;\n\n  var _useUserRole = useUserRole(message),\n      isMyMessage = _useUserRole.isMyMessage;\n\n  var handleOpenThread = useOpenThreadHandler(message);\n  /**\n   * @type {import('../types').ChannelContextValue}\n   */\n\n  var _useContext = useContext(ChannelContext),\n      channel = _useContext.channel;\n\n  var channelConfig = channel === null || channel === void 0 ? void 0 : channel.getConfig();\n  var shouldShowReplies = displayReplies && !threadList && channelConfig && channelConfig.replies;\n  var shouldShowReactions = channelConfig && channelConfig.reactions;\n\n  if (!message || message.type === 'error' || message.type === 'system' || message.type === 'ephemeral' || message.status === 'failed' || message.status === 'sending' || initialMessage) {\n    return null;\n  }\n\n  if (isMyMessage && displayLeft) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"message-options-left\",\n      className: \"str-chat__message-\".concat(theme, \"__actions\")\n    }, /*#__PURE__*/React.createElement(MessageActions, _extends({}, props, {\n      messageWrapperRef: messageWrapperRef\n    })), shouldShowReplies && /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"thread-action\",\n      onClick: propHandleOpenThread || handleOpenThread,\n      className: \"str-chat__message-\".concat(theme, \" str-chat__message-\").concat(theme, \"__actions__action--thread\")\n    }, /*#__PURE__*/React.createElement(ThreadIcon, null)), shouldShowReactions && /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"message-reaction-action\",\n      className: \"str-chat__message-\".concat(theme, \"__actions__action str-chat__message-\").concat(theme, \"__actions__action--reactions\"),\n      onClick: onReactionListClick\n    }, /*#__PURE__*/React.createElement(ReactionIcon, null)));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-options\",\n    className: \"str-chat__message-\".concat(theme, \"__actions\")\n  }, shouldShowReactions && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-reaction-action\",\n    className: \"str-chat__message-\".concat(theme, \"__actions__action str-chat__message-\").concat(theme, \"__actions__action--reactions\"),\n    onClick: onReactionListClick\n  }, /*#__PURE__*/React.createElement(ReactionIcon, null)), shouldShowReplies && /*#__PURE__*/React.createElement(\"div\", {\n    onClick: propHandleOpenThread || handleOpenThread,\n    \"data-testid\": \"thread-action\",\n    className: \"str-chat__message-\".concat(theme, \"__actions__action str-chat__message-\").concat(theme, \"__actions__action--thread\")\n  }, /*#__PURE__*/React.createElement(ThreadIcon, null)), displayActions && /*#__PURE__*/React.createElement(MessageActions, _extends({}, props, {\n    messageWrapperRef: messageWrapperRef\n  })));\n};\n\nvar MessageOptions = /*#__PURE__*/React.memo(MessageOptionsComponent);\n/**\n * @type { React.FC<import('../types').MessageTextProps> }\n */\n\nvar MessageTextComponent = function MessageTextComponent(props) {\n  var propOnMentionsClick = props.onMentionsClickMessage,\n      propOnMentionsHover = props.onMentionsHoverMessage,\n      customWrapperClass = props.customWrapperClass,\n      customInnerClass = props.customInnerClass,\n      _props$theme = props.theme,\n      theme = _props$theme === void 0 ? 'simple' : _props$theme,\n      message = props.message,\n      unsafeHTML = props.unsafeHTML,\n      customOptionProps = props.customOptionProps;\n  var reactionSelectorRef = useRef(\n  /** @type {HTMLDivElement | null} */\n  null);\n\n  var _useMentionsUIHandler = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover\n  }),\n      onMentionsClick = _useMentionsUIHandler.onMentionsClick,\n      onMentionsHover = _useMentionsUIHandler.onMentionsHover;\n\n  var _useReactionClick = useReactionClick(message, reactionSelectorRef),\n      onReactionListClick = _useReactionClick.onReactionListClick,\n      showDetailedReactions = _useReactionClick.showDetailedReactions;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var hasReactions = messageHasReactions(message);\n  var hasAttachment = messageHasAttachments(message);\n  var handleReaction = useReactionHandler(message);\n  var messageText = useMemo(function () {\n    return renderText(message === null || message === void 0 ? void 0 : message.text, message === null || message === void 0 ? void 0 : message.mentioned_users);\n  }, [message === null || message === void 0 ? void 0 : message.text, message === null || message === void 0 ? void 0 : message.mentioned_users]);\n  var wrapperClass = customWrapperClass || 'str-chat__message-text';\n  var innerClass = customInnerClass || \"str-chat__message-text-inner str-chat__message-\".concat(theme, \"-text-inner\");\n\n  if (!(message === null || message === void 0 ? void 0 : message.text)) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: wrapperClass\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-text-inner-wrapper\",\n    className: \"\\n          \".concat(innerClass, \"\\n          \").concat(hasAttachment ? \" str-chat__message-\".concat(theme, \"-text-inner--has-attachment\") : '', \"\\n          \").concat(isOnlyEmojis(message.text) ? \" str-chat__message-\".concat(theme, \"-text-inner--is-emoji\") : '', \"\\n        \").trim(),\n    onMouseOver: onMentionsHover,\n    onClick: onMentionsClick\n  }, message.type === 'error' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__\".concat(theme, \"-message--error-message\")\n  }, t && t('Error · Unsent')), message.status === 'failed' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__\".concat(theme, \"-message--error-message\")\n  }, t && t('Message Failed · Click to try again')), unsafeHTML ? /*#__PURE__*/React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: message.html\n    }\n  }) : messageText, hasReactions && !showDetailedReactions && /*#__PURE__*/React.createElement(ReactionsList$1, {\n    reactions: message.latest_reactions,\n    reaction_counts: message.reaction_counts,\n    onClick: onReactionListClick,\n    reverse: true\n  }), showDetailedReactions && /*#__PURE__*/React.createElement(ReactionSelector$1, {\n    handleReaction: handleReaction,\n    detailedView: true,\n    reaction_counts: message.reaction_counts,\n    latest_reactions: message.latest_reactions,\n    ref: reactionSelectorRef\n  })), /*#__PURE__*/React.createElement(MessageOptions, _extends({}, props, customOptionProps, {\n    onReactionListClick: onReactionListClick\n  })));\n};\n\nvar MessageText = /*#__PURE__*/React.memo(MessageTextComponent); // @ts-check\n\n/**\n * @type{React.FC<import('../types').MessageDeletedProps>}\n */\n\nvar MessageDeleted = function MessageDeleted(props) {\n  var message = props.message;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  var _useUserRole = useUserRole(message),\n      isMyMessage = _useUserRole.isMyMessage;\n\n  if (props.isMyMessage) {\n    console.warn('The isMyMessage is deprecated, and will be removed in the next major release.');\n  }\n\n  var messageClasses = props.isMyMessage && props.isMyMessage(message) || isMyMessage ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me' : 'str-chat__message str-chat__message-simple';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: message.id,\n    className: \"\".concat(messageClasses, \" str-chat__message--deleted \").concat(message.type, \" \"),\n    \"data-testid\": 'message-deleted-component'\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message--deleted-inner\"\n  }, t && t('This message was deleted...')));\n};\n\nMessageDeleted.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  // @ts-ignore\n  // Ignoring this for now as Typescript definitions on 'strem-chat' are wrong.\n  message: MessagePropTypes,\n\n  /** @deprecated This is no longer needed. The component should now rely on the user role custom hook */\n  isMyMessage: PropTypes.func\n}; // @ts-check\n\nvar defaultTimestampFormat = 'h:mmA';\nvar notValidDateWarning = 'MessageTimestamp was called without a message, or message has invalid created_at date.';\nvar noParsingFunctionWarning = 'MessageTimestamp was called but there is no datetime parsing function available';\n/**\n * @type { (\n *   messageCreatedAt?: string,\n *   formatDate?: import('../types').MessageTimestampProps['formatDate'],\n *   calendar?: boolean,\n *   tDateTimeParser?: import('../types').MessageTimestampProps['tDateTimeParser'],\n *   format?: string,\n * ) => string | null }\n */\n\nfunction getDateString(messageCreatedAt, formatDate, calendar, tDateTimeParser, format) {\n  if (!messageCreatedAt || !Date.parse(messageCreatedAt)) {\n    console.warn(notValidDateWarning);\n    return null;\n  }\n\n  if (typeof formatDate === 'function') {\n    return formatDate(new Date(messageCreatedAt));\n  }\n\n  if (!tDateTimeParser) {\n    console.warn(noParsingFunctionWarning);\n    return null;\n  }\n\n  var parsedTime = tDateTimeParser(messageCreatedAt);\n\n  if (calendar && typeof parsedTime.calendar !== 'function') {\n    return null;\n  }\n\n  return calendar ? parsedTime.calendar() : parsedTime.format(format);\n}\n/**\n * @typedef { import('../types').MessageTimestampProps } Props\n * @type { React.FC<Props> }\n */\n\n\nvar MessageTimestamp = function MessageTimestamp(props) {\n  var message = props.message,\n      formatDate = props.formatDate,\n      propTDatetimeParser = props.tDateTimeParser,\n      _props$customClass = props.customClass,\n      customClass = _props$customClass === void 0 ? '' : _props$customClass,\n      _props$format = props.format,\n      format = _props$format === void 0 ? defaultTimestampFormat : _props$format,\n      _props$calendar = props.calendar,\n      calendar = _props$calendar === void 0 ? false : _props$calendar;\n\n  var _useContext = useContext(TranslationContext),\n      contextTDateTimeParser = _useContext.tDateTimeParser;\n\n  var tDateTimeParser = propTDatetimeParser || contextTDateTimeParser;\n  var when = useMemo(function () {\n    return getDateString(message === null || message === void 0 ? void 0 : message.created_at, formatDate, calendar, tDateTimeParser, format);\n  }, [formatDate, calendar, tDateTimeParser, format, message === null || message === void 0 ? void 0 : message.created_at]);\n\n  if (!when) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"time\", {\n    className: customClass,\n    dateTime: message === null || message === void 0 ? void 0 : message.created_at,\n    title: message === null || message === void 0 ? void 0 : message.created_at\n  }, when);\n};\n\nvar MessageTimestamp$1 = /*#__PURE__*/React.memo(MessageTimestamp);\n/**\n * MessageSimple - Render component, should be used together with the Message component\n *\n * @example ../../docs/MessageSimple.md\n * @type { React.FC<import('../types').MessageSimpleProps> }\n */\n// eslint-disable-next-line sonarjs/cognitive-complexity\n\nvar MessageSimple = function MessageSimple(props) {\n  var _message$attachments, _message$attachments2;\n\n  var clearEditingState = props.clearEditingState,\n      editing = props.editing,\n      message = props.message,\n      threadList = props.threadList,\n      formatDate = props.formatDate,\n      propUpdateMessage = props.updateMessage,\n      propHandleAction = props.handleAction,\n      propHandleOpenThread = props.handleOpenThread,\n      propHandleReaction = props.handleReaction,\n      propHandleRetry = props.handleRetry,\n      onUserClickCustomHandler = props.onUserClick,\n      onUserHoverCustomHandler = props.onUserHover,\n      propTDateTimeParser = props.tDateTimeParser;\n\n  var _useContext = useContext(ChannelContext),\n      channelUpdateMessage = _useContext.updateMessage;\n\n  var updateMessage = propUpdateMessage || channelUpdateMessage;\n\n  var _useUserRole = useUserRole(message),\n      isMyMessage = _useUserRole.isMyMessage;\n\n  var handleOpenThread = useOpenThreadHandler(message);\n  var handleReaction = useReactionHandler(message);\n  var handleAction = useActionHandler(message);\n  var handleRetry = useRetryHandler();\n\n  var _useUserHandler = useUserHandler(message, {\n    onUserClickHandler: onUserClickCustomHandler,\n    onUserHoverHandler: onUserHoverCustomHandler\n  }),\n      onUserClick = _useUserHandler.onUserClick,\n      onUserHover = _useUserHandler.onUserHover;\n\n  var reactionSelectorRef = /*#__PURE__*/React.createRef();\n  var messageWrapperRef = useRef(null);\n\n  var _useReactionClick = useReactionClick(message, reactionSelectorRef),\n      onReactionListClick = _useReactionClick.onReactionListClick,\n      showDetailedReactions = _useReactionClick.showDetailedReactions;\n\n  var _props$Attachment = props.Attachment,\n      Attachment$1 = _props$Attachment === void 0 ? Attachment : _props$Attachment,\n      _props$MessageDeleted = props.MessageDeleted,\n      MessageDeleted$1 = _props$MessageDeleted === void 0 ? MessageDeleted : _props$MessageDeleted;\n  var hasReactions = messageHasReactions(message);\n  var hasAttachment = messageHasAttachments(message);\n  var messageClasses = isMyMessage ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me' : 'str-chat__message str-chat__message-simple';\n  var images = hasAttachment && (message === null || message === void 0 ? void 0 : (_message$attachments = message.attachments) === null || _message$attachments === void 0 ? void 0 : _message$attachments.filter(\n  /** @type {(item: import('stream-chat').Attachment) => boolean} Typescript syntax */\n  function (item) {\n    return item.type === 'image';\n  }));\n\n  if ((message === null || message === void 0 ? void 0 : message.type) === 'message.read' || (message === null || message === void 0 ? void 0 : message.type) === 'message.date') {\n    return null;\n  }\n\n  if (message === null || message === void 0 ? void 0 : message.deleted_at) {\n    return smartRender(MessageDeleted$1, {\n      message\n    }, null);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, editing && /*#__PURE__*/React.createElement(Modal, {\n    open: editing,\n    onClose: clearEditingState\n  }, /*#__PURE__*/React.createElement(MessageInput$1, _extends({\n    Input: EditMessageForm,\n    message: message,\n    clearEditingState: clearEditingState,\n    updateMessage: updateMessage\n  }, props.additionalMessageInputProps))), message && /*#__PURE__*/React.createElement(\"div\", {\n    key: message.id || '',\n    className: \"\\n\\t\\t\\t\\t\\t\\t\".concat(messageClasses, \"\\n\\t\\t\\t\\t\\t\\tstr-chat__message--\").concat(message.type, \"\\n\\t\\t\\t\\t\\t\\tstr-chat__message--\").concat(message.status, \"\\n\\t\\t\\t\\t\\t\\t\").concat(message.text ? 'str-chat__message--has-text' : 'has-no-text', \"\\n\\t\\t\\t\\t\\t\\t\").concat(hasAttachment ? 'str-chat__message--has-attachment' : '', \"\\n\\t\\t\\t\\t\\t\\t\").concat(hasReactions ? 'str-chat__message--with-reactions' : '', \"\\n\\t\\t\\t\\t\\t\").trim(),\n    ref: messageWrapperRef\n  }, /*#__PURE__*/React.createElement(MessageSimpleStatus, props), message.user && /*#__PURE__*/React.createElement(Avatar, {\n    image: message.user.image,\n    name: message.user.name || message.user.id,\n    onClick: onUserClick,\n    onMouseOver: onUserHover\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-inner\",\n    className: \"str-chat__message-inner\",\n    onClick: function onClick() {\n      if (message.status === 'failed' && (propHandleRetry || handleRetry)) {\n        var retryHandler = propHandleRetry || handleRetry; // FIXME: type checking fails here because in the case of a failed message,\n        // `message` is of type Client.Message (i.e. request object)\n        // instead of Client.MessageResponse (i.e. server response object)\n        // @ts-ignore\n\n        retryHandler(message);\n      }\n    }\n  }, !message.text && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MessageOptions, _extends({}, props, {\n    messageWrapperRef: messageWrapperRef,\n    onReactionListClick: onReactionListClick,\n    handleOpenThread: propHandleOpenThread\n  })), hasReactions && !showDetailedReactions && /*#__PURE__*/React.createElement(ReactionsList$1, {\n    reactions: message.latest_reactions,\n    reaction_counts: message.reaction_counts,\n    onClick: onReactionListClick,\n    reverse: true\n  }), showDetailedReactions && /*#__PURE__*/React.createElement(ReactionSelector$1, {\n    handleReaction: propHandleReaction || handleReaction,\n    detailedView: true,\n    reaction_counts: message.reaction_counts,\n    latest_reactions: message.latest_reactions,\n    ref: reactionSelectorRef\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-attachment-container\"\n  }, hasAttachment && ((_message$attachments2 = message.attachments) === null || _message$attachments2 === void 0 ? void 0 : _message$attachments2.map(\n  /** @type {(item: import('stream-chat').Attachment) => React.ReactElement | null} Typescript syntax */\n  function (attachment, index) {\n    if (attachment.type === 'image' && images && images.length > 1) return null;\n    return /*#__PURE__*/React.createElement(Attachment$1, {\n      key: \"\".concat(message.id, \"-\").concat(index),\n      attachment: attachment,\n      actionHandler: propHandleAction || handleAction\n    });\n  }))), images && images.length > 1 && /*#__PURE__*/React.createElement(Gallery$1, {\n    images: images\n  }), message.text && /*#__PURE__*/React.createElement(MessageText, _extends({}, props, {\n    customOptionProps: {\n      messageWrapperRef,\n      handleOpenThread: propHandleOpenThread\n    } // FIXME: There's some unmatched definition between the infered and the declared\n    // ReactionSelector reference\n    // @ts-ignore\n    ,\n    reactionSelectorRef: reactionSelectorRef\n  })), !threadList && message.reply_count !== 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-simple-reply-button\"\n  }, /*#__PURE__*/React.createElement(MessageRepliesCountButton$1, {\n    onClick: propHandleOpenThread || handleOpenThread,\n    reply_count: message.reply_count\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-data str-chat__message-simple-data\"\n  }, !isMyMessage && message.user ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__message-simple-name\"\n  }, message.user.name || message.user.id) : null, /*#__PURE__*/React.createElement(MessageTimestamp$1, {\n    customClass: \"str-chat__message-simple-timestamp\",\n    tDateTimeParser: propTDateTimeParser,\n    formatDate: formatDate,\n    message: message,\n    calendar: true\n  })))));\n};\n/** @type { React.FC<import('../types').MessageSimpleProps> } */\n\n\nvar MessageSimpleStatus = function MessageSimpleStatus(_ref) {\n  var readBy = _ref.readBy,\n      message = _ref.message,\n      threadList = _ref.threadList,\n      lastReceivedId = _ref.lastReceivedId;\n\n  var _useContext2 = useContext(TranslationContext),\n      t = _useContext2.t;\n\n  var _useContext3 = useContext(ChannelContext),\n      client = _useContext3.client;\n\n  var _useUserRole2 = useUserRole(message),\n      isMyMessage = _useUserRole2.isMyMessage;\n\n  if (!isMyMessage || (message === null || message === void 0 ? void 0 : message.type) === 'error') {\n    return null;\n  }\n\n  var justReadByMe = readBy && readBy.length === 1 && readBy[0] && client && readBy[0].id === client.user.id;\n\n  if (message && message.status === 'sending') {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"str-chat__message-simple-status\",\n      \"data-testid\": \"message-status-sending\"\n    }, /*#__PURE__*/React.createElement(Tooltip$1, null, t && t('Sending...')), /*#__PURE__*/React.createElement(DefaultLoadingIndicator, null));\n  }\n\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    var lastReadUser = readBy.filter(\n    /** @type {(item: import('stream-chat').UserResponse) => boolean} Typescript syntax */\n    function (item) {\n      return !!item && !!client && item.id !== client.user.id;\n    })[0];\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"str-chat__message-simple-status\",\n      \"data-testid\": \"message-status-read-by\"\n    }, /*#__PURE__*/React.createElement(Tooltip$1, null, readBy && getReadByTooltipText(readBy, t, client)), /*#__PURE__*/React.createElement(Avatar, {\n      name: lastReadUser && lastReadUser.name ? lastReadUser.name : null,\n      image: lastReadUser && lastReadUser.image ? lastReadUser.image : null,\n      size: 15\n    }), readBy.length > 2 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"str-chat__message-simple-status-number\",\n      \"data-testid\": \"message-status-read-by-many\"\n    }, readBy.length - 1));\n  }\n\n  if (message && message.status === 'received' && message.id === lastReceivedId && !threadList) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"str-chat__message-simple-status\",\n      \"data-testid\": \"message-status-received\"\n    }, /*#__PURE__*/React.createElement(Tooltip$1, null, t && t('Delivered')), /*#__PURE__*/React.createElement(DeliveredCheckIcon, null));\n  }\n\n  return null;\n};\n\nMessageSimple.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message:\n  /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */\n  PropTypes.object.isRequired,\n\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').AttachmentUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   * */\n  Message:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageUIComponentProps>>} */\n  PropTypes.oneOfType([PropTypes.node, PropTypes.func, PropTypes.object]).isRequired,\n\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n\n  /** Client object */\n  // @ts-ignore\n  client: PropTypes.object,\n\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n\n  /** Channel config object */\n  channelConfig:\n  /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */\n  PropTypes.object.isRequired,\n\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n\n  /**\n   * Function to open thread on current messxage\n   * @deprecated The component now relies on the useThreadHandler custom hook\n   * You can customize the behaviour for your thread handler on the <Channel> component instead.\n   */\n  handleOpenThread: PropTypes.func,\n\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n\n  /**\n   * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions: PropTypes.func.isRequired,\n\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   * @deprecated This component now relies on the useRetryHandler custom hook.\n   */\n  handleRetry: PropTypes.func,\n\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   * @deprecated This component now relies on the useReactionHandler custom hook.\n   */\n  handleReaction: PropTypes.func,\n\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n  actionsEnabled: PropTypes.bool,\n\n  /** DOMRect object for parent MessageList component */\n  messageListRect: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    top: PropTypes.number.isRequired,\n    right: PropTypes.number.isRequired,\n    bottom: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    toJSON: PropTypes.func.isRequired\n  }),\n\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   * @deprecated This component now relies on the useActionHandler custom hook, and this prop will be removed on the next major release.\n   */\n  handleAction: PropTypes.func,\n\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   * @deprecated This component now relies on the useMentionsHandler custom hook, and this prop will be removed on the next major release.\n   * You can customize the behaviour for your mention handler on the <Channel> component instead.\n   */\n  onMentionsHoverMessage: PropTypes.func,\n\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   * @deprecated This component now relies on the useMentionsHandler custom hook, and this prop will be removed on the next major release.\n   * You can customize the behaviour for your mention handler on the <Channel> component instead.\n   */\n  onMentionsClickMessage: PropTypes.func,\n\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n\n  /**\n   * Additional props for underlying MessageInput component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageDeletedProps>>} */\n  PropTypes.elementType\n};\nvar MessageSimple$1 = /*#__PURE__*/React.memo(MessageSimple, areMessagePropsEqual);\n/**\n * Message - A high level component which implements all the logic required for a message.\n * The actual rendering of the message is delegated via the \"Message\" property\n *\n * @example ../../docs/Message.md\n * @type { React.FC<import('../types').MessageComponentProps> }\n */\n\nvar Message = function Message(props) {\n  var addNotification = props.addNotification,\n      getFlagMessageErrorNotification = props.getFlagMessageErrorNotification,\n      getFlagMessageSuccessNotification = props.getFlagMessageSuccessNotification,\n      getMuteUserErrorNotification = props.getMuteUserErrorNotification,\n      getMuteUserSuccessNotification = props.getMuteUserSuccessNotification,\n      message = props.message,\n      propChannel = props.channel,\n      propOnUserClick = props.onUserClick,\n      propOnUserHover = props.onUserHover,\n      propOpenThread = props.openThread,\n      propRetrySendMessage = props.retrySendMessage,\n      propOnMentionsClick = props.onMentionsClick,\n      propOnMentionsHover = props.onMentionsHover,\n      _props$Message = props.Message,\n      MessageUIComponent = _props$Message === void 0 ? MessageSimple$1 : _props$Message,\n      _props$messageActions = props.messageActions,\n      messageActions = _props$messageActions === void 0 ? Object.keys(MESSAGE_ACTIONS) : _props$messageActions,\n      formatDate = props.formatDate,\n      _props$groupStyles = props.groupStyles,\n      groupStyles = _props$groupStyles === void 0 ? [] : _props$groupStyles;\n\n  var _useContext = useContext(ChannelContext),\n      contextChannel = _useContext.channel;\n\n  var channel = propChannel || contextChannel;\n  var channelConfig = (channel === null || channel === void 0 ? void 0 : channel.getConfig) && channel.getConfig();\n\n  var _useEditHandler = useEditHandler(),\n      editing = _useEditHandler.editing,\n      setEdit = _useEditHandler.setEdit,\n      clearEdit = _useEditHandler.clearEdit;\n\n  var handleDelete = useDeleteHandler(message);\n  var handleReaction = useReactionHandler(message);\n  var handleAction = useActionHandler(message);\n  var handleRetry = useRetryHandler(propRetrySendMessage);\n  var handleOpenThread = useOpenThreadHandler(message, propOpenThread);\n  var handleFlag = useFlagHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getFlagMessageSuccessNotification,\n    getErrorNotification: getFlagMessageErrorNotification\n  });\n  var handleMute = useMuteHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getMuteUserSuccessNotification,\n    getErrorNotification: getMuteUserErrorNotification\n  });\n\n  var _useMentionsHandler = useMentionsHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover\n  }),\n      onMentionsClick = _useMentionsHandler.onMentionsClick,\n      onMentionsHover = _useMentionsHandler.onMentionsHover;\n\n  var _useUserHandler = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover\n  }),\n      onUserClick = _useUserHandler.onUserClick,\n      onUserHover = _useUserHandler.onUserHover;\n\n  var _useUserRole = useUserRole(message),\n      _isMyMessage = _useUserRole.isMyMessage,\n      isAdmin = _useUserRole.isAdmin,\n      isModerator = _useUserRole.isModerator,\n      isOwner = _useUserRole.isOwner;\n\n  var canEdit = _isMyMessage || isModerator || isOwner || isAdmin;\n  var canDelete = canEdit;\n  var messageActionsHandler = useCallback(function () {\n    if (!message || !messageActions) {\n      return [];\n    }\n\n    return getMessageActions(messageActions, {\n      canDelete,\n      canEdit,\n      canFlag: !_isMyMessage,\n      canMute: !_isMyMessage && !!(channelConfig === null || channelConfig === void 0 ? void 0 : channelConfig.mutes)\n    });\n  }, [channelConfig, message, messageActions, canDelete, canEdit, _isMyMessage]);\n  var actionsEnabled = message && message.type === 'regular' && message.status === 'received';\n  return MessageUIComponent && /*#__PURE__*/React.createElement(MessageUIComponent, _extends({}, props, {\n    editing: editing,\n    formatDate: formatDate,\n    clearEditingState: clearEdit,\n    setEditingState: setEdit,\n    groupStyles: groupStyles,\n    actionsEnabled: actionsEnabled,\n    Message: MessageUIComponent,\n    handleReaction: handleReaction,\n    getMessageActions: messageActionsHandler,\n    handleFlag: handleFlag,\n    handleMute: handleMute,\n    handleAction: handleAction,\n    handleDelete: handleDelete,\n    handleEdit: setEdit,\n    handleRetry: handleRetry,\n    handleOpenThread: handleOpenThread,\n    isMyMessage: function isMyMessage() {\n      return _isMyMessage;\n    },\n    channelConfig: channelConfig,\n    onMentionsClickMessage: onMentionsClick,\n    onMentionsHoverMessage: onMentionsHover,\n    onUserClick: onUserClick,\n    onUserHover: onUserHover\n  }));\n};\n\nMessage.propTypes = {\n  /** The message object */\n  message:\n  /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */\n  PropTypes.shape({\n    text: PropTypes.string.isRequired,\n    html: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n    reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n    reaction_scores: PropTypes.objectOf(PropTypes.number.isRequired),\n    created_at: PropTypes.string.isRequired,\n    updated_at: PropTypes.string.isRequired\n  }).isRequired,\n\n  /** The client connection object for connecting to Stream */\n  client: PropTypes.instanceOf(StreamChat).isRequired,\n\n  /** The current channel this message is displayed in */\n  channel: PropTypes.instanceOf(Channel$2).isRequired,\n\n  /** A list of users that have read this message */\n  readBy: PropTypes.array,\n\n  /** groupStyles, a list of styles to apply to this message. ie. top, bottom, single etc */\n  groupStyles: PropTypes.array,\n\n  /**\n   * Message UI component to display a message in message list.\n   * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\n   * */\n  Message:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All props are passed into this component.\n   */\n  MessageDeleted:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageDeletedProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Attachment UI component to display attachment in individual message.\n   * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\n   * */\n  Attachment:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').AttachmentUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n\n  /**\n   * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\n   * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n   * */\n  messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageSuccessNotification: PropTypes.func,\n\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageErrorNotification: PropTypes.func,\n\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserSuccessNotification: PropTypes.func,\n\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserErrorNotification: PropTypes.func,\n\n  /** Latest message id on current channel */\n  lastReceivedId: PropTypes.string,\n\n  /** DOMRect object for parent MessageList component */\n  messageListRect:\n  /** @type {PropTypes.Validator<DOMRect>} */\n  PropTypes.object,\n\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  members:\n  /** @type {PropTypes.Validator<import('seamless-immutable').ImmutableObject<{[user_id: string]: import('stream-chat').Member}> | null | undefined>} */\n  PropTypes.object,\n\n  /**\n   * Function to add custom notification on messagelist\n   *\n   * @param text Notification text to display\n   * @param type Type of notification. 'success' | 'error'\n   * */\n  addNotification: PropTypes.func,\n\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  updateMessage: PropTypes.func,\n\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  removeMessage: PropTypes.func,\n\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  retrySendMessage: PropTypes.func,\n\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  onMentionsClick: PropTypes.func,\n\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  onMentionsHover: PropTypes.func,\n\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user the User object for the corresponding user.\n   */\n  onUserClick: PropTypes.func,\n\n  /**\n   * The handler for hover events on the user that posted the message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user the User object for the corresponding user.\n   */\n  onUserHover: PropTypes.func,\n\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  openThread: PropTypes.func,\n\n  /**\n   * Additional props for underlying MessageInput component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object\n};\nMessage.defaultProps = {\n  Message: MessageSimple$1,\n  readBy: [],\n  groupStyles: [],\n  messageActions: Object.keys(MESSAGE_ACTIONS)\n};\nvar Message$1 = /*#__PURE__*/React.memo(Message, areMessagePropsEqual);\n/**\n * MessageCommerce - Render component, should be used together with the Message component\n *\n * @example ../../docs/MessageCommerce.md\n * @type { React.FC<import('../types').MessageCommerceProps> }\n */\n\nvar MessageCommerce = function MessageCommerce(props) {\n  var _message$user, _message$user2, _message$user3, _message$user4, _message$user5;\n\n  var message = props.message,\n      formatDate = props.formatDate,\n      groupStyles = props.groupStyles,\n      actionsEnabled = props.actionsEnabled,\n      threadList = props.threadList,\n      MessageDeleted = props.MessageDeleted,\n      getMessageActions = props.getMessageActions,\n      propHandleReaction = props.handleReaction,\n      propHandleAction = props.handleAction,\n      propHandleOpenThread = props.handleOpenThread,\n      propOnUserClick = props.onUserClick,\n      propOnUserHover = props.onUserHover,\n      propTDateTimeParser = props.tDateTimeParser;\n  var Attachment$1 = props.Attachment || Attachment;\n  var hasReactions = messageHasReactions(message);\n  var handleAction = useActionHandler(message);\n  var handleReaction = useReactionHandler(message);\n  var handleOpenThread = useOpenThreadHandler(message);\n  var reactionSelectorRef = useRef(null);\n\n  var _useReactionClick = useReactionClick(message, reactionSelectorRef),\n      onReactionListClick = _useReactionClick.onReactionListClick,\n      showDetailedReactions = _useReactionClick.showDetailedReactions;\n\n  var _useUserHandler = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover\n  }),\n      onUserClick = _useUserHandler.onUserClick,\n      onUserHover = _useUserHandler.onUserHover;\n\n  var _useUserRole = useUserRole(message),\n      isMyMessage = _useUserRole.isMyMessage;\n\n  var messageClasses = \"str-chat__message-commerce str-chat__message-commerce--\".concat(isMyMessage ? 'right' : 'left');\n  var hasAttachment = messageHasAttachments(message);\n  var images = getImages(message);\n  var firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message === null || message === void 0 ? void 0 : message.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n\n  if (message && (message.type === 'message.read' || message.type === 'message.date')) {\n    return null;\n  } // eslint-disable-next-line sonarjs/cognitive-complexity\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-commerce-wrapper\",\n    key: (message === null || message === void 0 ? void 0 : message.id) || '',\n    className: \"\\n\\t\\t\\t\\t\\t\\t\".concat(messageClasses, \"\\n\\t\\t\\t\\t\\t\\tstr-chat__message-commerce--\").concat(message === null || message === void 0 ? void 0 : message.type, \"\\n\\t\\t\\t\\t\\t\\t\").concat((message === null || message === void 0 ? void 0 : message.text) ? 'str-chat__message-commerce--has-text' : 'str-chat__message-commerce--has-no-text', \"\\n\\t\\t\\t\\t\\t\\t\").concat(hasAttachment ? 'str-chat__message-commerce--has-attachment' : '', \"\\n\\t\\t\\t\\t\\t\\t\").concat(hasReactions ? 'str-chat__message-commerce--with-reactions' : '', \"\\n\\t\\t\\t\\t\\t\\t\", \"str-chat__message-commerce--\".concat(firstGroupStyle), \"\\n\\t\\t\\t\\t\\t\").trim()\n  }, (firstGroupStyle === 'bottom' || firstGroupStyle === 'single') && /*#__PURE__*/React.createElement(Avatar, {\n    image: message === null || message === void 0 ? void 0 : (_message$user = message.user) === null || _message$user === void 0 ? void 0 : _message$user.image,\n    size: 32,\n    name: (message === null || message === void 0 ? void 0 : (_message$user2 = message.user) === null || _message$user2 === void 0 ? void 0 : _message$user2.name) || (message === null || message === void 0 ? void 0 : (_message$user3 = message.user) === null || _message$user3 === void 0 ? void 0 : _message$user3.id),\n    onClick: onUserClick,\n    onMouseOver: onUserHover\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-commerce-inner\"\n  }, message && !message.text && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MessageOptions, _extends({}, props, {\n    displayLeft: false,\n    displayReplies: false,\n    displayActions: false,\n    onReactionListClick: onReactionListClick,\n    theme: 'commerce'\n  })), hasReactions && !showDetailedReactions && /*#__PURE__*/React.createElement(ReactionsList$1, {\n    reactions: message.latest_reactions,\n    reaction_counts: message.reaction_counts,\n    onClick: onReactionListClick\n  }), showDetailedReactions && /*#__PURE__*/React.createElement(ReactionSelector$1, {\n    reverse: false,\n    handleReaction: propHandleReaction || handleReaction,\n    detailedView: true,\n    reaction_counts: message.reaction_counts,\n    latest_reactions: message.latest_reactions,\n    ref: reactionSelectorRef\n  })), (message === null || message === void 0 ? void 0 : message.attachments) && (!images || images.length <= 1) && message.attachments.map(function (attachment, index) {\n    return /*#__PURE__*/React.createElement(Attachment$1, {\n      key: \"\".concat(message.id, \"-\").concat(index),\n      attachment: attachment,\n      actionHandler: propHandleAction || handleAction\n    });\n  }), !!images.length && /*#__PURE__*/React.createElement(Gallery$1, {\n    images: images\n  }), (message === null || message === void 0 ? void 0 : message.text) && /*#__PURE__*/React.createElement(MessageText, {\n    actionsEnabled: actionsEnabled,\n    customWrapperClass: \"str-chat__message-commerce-text\",\n    customInnerClass: \"str-chat__message-commerce-text-inner\",\n    customOptionProps: {\n      displayLeft: false,\n      displayReplies: false,\n      displayActions: false,\n      theme: 'commerce'\n    },\n    getMessageActions: getMessageActions,\n    message: message,\n    messageListRect: props.messageListRect,\n    unsafeHTML: props.unsafeHTML,\n    onMentionsClickMessage: props.onMentionsClickMessage,\n    onMentionsHoverMessage: props.onMentionsHoverMessage,\n    theme: \"commerce\"\n  }), !threadList && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-commerce-reply-button\"\n  }, /*#__PURE__*/React.createElement(MessageRepliesCountButton$1, {\n    onClick: propHandleOpenThread || handleOpenThread,\n    reply_count: message === null || message === void 0 ? void 0 : message.reply_count\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-commerce-data\"\n  }, !isMyMessage ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__message-commerce-name\"\n  }, (message === null || message === void 0 ? void 0 : (_message$user4 = message.user) === null || _message$user4 === void 0 ? void 0 : _message$user4.name) || (message === null || message === void 0 ? void 0 : (_message$user5 = message.user) === null || _message$user5 === void 0 ? void 0 : _message$user5.id)) : null, /*#__PURE__*/React.createElement(MessageTimestamp$1, {\n    formatDate: formatDate,\n    customClass: \"str-chat__message-commerce-timestamp\",\n    message: message,\n    tDateTimeParser: propTDateTimeParser,\n    format: \"LT\"\n  })))));\n};\n\nMessageCommerce.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message:\n  /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */\n  PropTypes.object.isRequired,\n\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').AttachmentUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   */\n  Message:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageUIComponentProps>>} */\n  PropTypes.oneOfType([PropTypes.node, PropTypes.func, PropTypes.object]).isRequired,\n\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n\n  /** Channel config object */\n  channelConfig:\n  /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */\n  PropTypes.object.isRequired,\n\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n\n  /**\n   * Function to open thread on current messxage\n   * @deprecated The component now relies on the useThreadHandler custom hook\n   * You can customize the behaviour for your thread handler on the <Channel> component instead.\n   */\n  handleOpenThread: PropTypes.func,\n\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n\n  /** Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute] */\n  getMessageActions: PropTypes.func.isRequired,\n\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   * @deprecated This component now relies on the useReactionHandler custom hook.\n   */\n  handleReaction: PropTypes.func,\n\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n  actionsEnabled: PropTypes.bool,\n\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   * @deprecated This component now relies on the useActionHandler custom hook, and this prop will be removed on the next major release.\n   */\n  handleAction: PropTypes.func,\n\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n\n  /** Position of message in group. Possible values: top, bottom, middle, single */\n  groupStyles: PropTypes.array,\n\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   * @deprecated This component now relies on the useUserHandler custom hook, and this prop will be removed on the next major release.\n   */\n  onUserClick: PropTypes.func,\n\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   * @deprecated This component now relies on the useUserHandler custom hook, and this prop will be removed on the next major release.\n   */\n  onUserHover: PropTypes.func,\n\n  /** The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageDeletedProps>>} */\n  PropTypes.elementType\n};\nvar MessageCommerce$1 = /*#__PURE__*/React.memo(MessageCommerce, areMessagePropsEqual);\n/**\n * MessageLivestream - Render component, should be used together with the Message component\n * Implements the look and feel for a livestream use case.\n *\n * @example ../../docs/MessageLivestream.md\n * @typedef { import('../../../types').MessageLivestreamProps } Props\n * @type { React.FC<Props> }\n */\n// eslint-disable-next-line sonarjs/cognitive-complexity\n\nvar MessageLivestreamComponent = function MessageLivestreamComponent(props) {\n  var _message$user4, _message$user5, _message$user6, _message$user7, _message$user8;\n\n  var message = props.message,\n      groupStyles = props.groupStyles,\n      propEditing = props.editing,\n      propSetEdit = props.setEditingState,\n      propClearEdit = props.clearEditingState,\n      initialMessage = props.initialMessage,\n      unsafeHTML = props.unsafeHTML,\n      formatDate = props.formatDate,\n      propOnUserClick = props.onUserClick,\n      propHandleReaction = props.handleReaction,\n      propHandleOpenThread = props.handleOpenThread,\n      propOnUserHover = props.onUserHover,\n      propHandleRetry = props.handleRetry,\n      propHandleAction = props.handleAction,\n      propUpdateMessage = props.updateMessage,\n      propOnMentionsClick = props.onMentionsClickMessage,\n      propOnMentionsHover = props.onMentionsHoverMessage,\n      _props$Attachment = props.Attachment,\n      Attachment$1 = _props$Attachment === void 0 ? Attachment : _props$Attachment,\n      propT = props.t,\n      propTDateTimeParser = props.tDateTimeParser,\n      MessageDeleted = props.MessageDeleted;\n\n  var _useContext = useContext(TranslationContext),\n      contextT = _useContext.t;\n\n  var t = propT || contextT;\n  var messageWrapperRef = useRef(null);\n  var reactionSelectorRef = useRef(null);\n  /**\n   *@type {import('../types').ChannelContextValue}\n   */\n\n  var _useContext2 = useContext(ChannelContext),\n      channelUpdateMessage = _useContext2.updateMessage;\n\n  var _useMentionsUIHandler = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover\n  }),\n      onMentionsClick = _useMentionsUIHandler.onMentionsClick,\n      onMentionsHover = _useMentionsUIHandler.onMentionsHover;\n\n  var handleAction = useActionHandler(message);\n  var handleReaction = useReactionHandler(message);\n  var handleOpenThread = useOpenThreadHandler(message);\n\n  var _useEditHandler = useEditHandler(),\n      ownEditing = _useEditHandler.editing,\n      ownSetEditing = _useEditHandler.setEdit,\n      ownClearEditing = _useEditHandler.clearEdit;\n\n  var editing = propEditing || ownEditing;\n  var setEdit = propSetEdit || ownSetEditing;\n  var clearEdit = propClearEdit || ownClearEditing;\n  var handleRetry = useRetryHandler();\n  var retryHandler = propHandleRetry || handleRetry;\n\n  var _useReactionClick = useReactionClick(message, reactionSelectorRef, messageWrapperRef),\n      onReactionListClick = _useReactionClick.onReactionListClick,\n      showDetailedReactions = _useReactionClick.showDetailedReactions;\n\n  var _useUserHandler = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover\n  }),\n      onUserClick = _useUserHandler.onUserClick,\n      onUserHover = _useUserHandler.onUserHover;\n\n  var messageText = useMemo(function () {\n    return renderText(message === null || message === void 0 ? void 0 : message.text, message === null || message === void 0 ? void 0 : message.mentioned_users);\n  }, [message === null || message === void 0 ? void 0 : message.text, message === null || message === void 0 ? void 0 : message.mentioned_users]);\n  var hasAttachment = messageHasAttachments(message);\n  var galleryImages = getImages(message);\n  var attachments = getNonImageAttachments(message);\n  var firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (!message || message.type === 'message.read' || message.type === 'message.date') {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n\n  if (editing) {\n    var _message$user, _message$user2, _message$user3;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": 'message-livestream-edit',\n      className: \"str-chat__message-team str-chat__message-team--\".concat(firstGroupStyle, \" str-chat__message-team--editing\")\n    }, (firstGroupStyle === 'top' || firstGroupStyle === 'single') && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__message-team-meta\"\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      image: (_message$user = message.user) === null || _message$user === void 0 ? void 0 : _message$user.image,\n      name: ((_message$user2 = message.user) === null || _message$user2 === void 0 ? void 0 : _message$user2.name) || ((_message$user3 = message.user) === null || _message$user3 === void 0 ? void 0 : _message$user3.id),\n      size: 40,\n      onClick: onUserClick,\n      onMouseOver: onUserHover\n    })), /*#__PURE__*/React.createElement(MessageInput$1, {\n      Input: EditMessageForm,\n      message: message,\n      clearEditingState: clearEdit,\n      updateMessage: propUpdateMessage || channelUpdateMessage\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-livestream\",\n    className: \"str-chat__message-livestream str-chat__message-livestream--\".concat(firstGroupStyle, \" str-chat__message-livestream--\").concat(message.type, \" str-chat__message-livestream--\").concat(message.status, \" \").concat(initialMessage ? 'str-chat__message-livestream--initial-message' : ''),\n    ref: messageWrapperRef\n  }, showDetailedReactions && /*#__PURE__*/React.createElement(ReactionSelector$1, {\n    reverse: false,\n    handleReaction: handleReaction,\n    detailedView: true,\n    latest_reactions: message === null || message === void 0 ? void 0 : message.latest_reactions,\n    reaction_counts: message === null || message === void 0 ? void 0 : message.reaction_counts,\n    ref: reactionSelectorRef\n  }), /*#__PURE__*/React.createElement(MessageLivestreamActions, {\n    initialMessage: initialMessage,\n    message: message,\n    formatDate: formatDate,\n    onReactionListClick: onReactionListClick,\n    messageWrapperRef: messageWrapperRef,\n    getMessageActions: props.getMessageActions,\n    tDateTimeParser: propTDateTimeParser,\n    channelConfig: props.channelConfig,\n    threadList: props.threadList,\n    handleOpenThread: propHandleOpenThread || handleOpenThread,\n    setEditingState: setEdit\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-livestream-left\"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    image: (_message$user4 = message.user) === null || _message$user4 === void 0 ? void 0 : _message$user4.image,\n    name: ((_message$user5 = message.user) === null || _message$user5 === void 0 ? void 0 : _message$user5.name) || (message === null || message === void 0 ? void 0 : (_message$user6 = message.user) === null || _message$user6 === void 0 ? void 0 : _message$user6.id),\n    size: 30,\n    onClick: onUserClick,\n    onMouseOver: onUserHover\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-livestream-right\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-livestream-content\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-livestream-author\"\n  }, /*#__PURE__*/React.createElement(\"strong\", null, ((_message$user7 = message.user) === null || _message$user7 === void 0 ? void 0 : _message$user7.name) || ((_message$user8 = message.user) === null || _message$user8 === void 0 ? void 0 : _message$user8.id)), (message === null || message === void 0 ? void 0 : message.type) === 'error' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-team-error-header\"\n  }, t('Only visible to you'))), /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-livestream-text\",\n    className: isOnlyEmojis(message.text) ? 'str-chat__message-livestream-text--is-emoji' : '',\n    onMouseOver: onMentionsHover,\n    onClick: onMentionsClick\n  }, message.type !== 'error' && message.status !== 'failed' && !unsafeHTML && messageText, message.type !== 'error' && message.status !== 'failed' && unsafeHTML && /*#__PURE__*/React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: message.html\n    }\n  }), message.type === 'error' && !message.command && /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"message-livestream-error\"\n  }, /*#__PURE__*/React.createElement(ErrorIcon, null), message.text), message.type === 'error' && message.command && /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"message-livestream-command-error\"\n  }, /*#__PURE__*/React.createElement(ErrorIcon, null), /*#__PURE__*/React.createElement(\"strong\", null, \"/\", message.command), \" is not a valid command\"), message.status === 'failed' && /*#__PURE__*/React.createElement(\"p\", {\n    onClick: function onClick() {\n      if (retryHandler) {\n        // FIXME: type checking fails here because in the case of a failed message,\n        // `message` is of type Client.Message (i.e. request object)\n        // instead of Client.MessageResponse (i.e. server response object)\n        // @ts-ignore\n        retryHandler(message);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(ErrorIcon, null), t('Message failed. Click to try again.'))), hasAttachment && attachments.map(\n  /** @type {(item: import('stream-chat').Attachment) => React.ReactElement | null} Typescript syntax */\n  function (attachment, index) {\n    return /*#__PURE__*/React.createElement(Attachment$1, {\n      key: \"\".concat(message === null || message === void 0 ? void 0 : message.id, \"-\").concat(index),\n      attachment: attachment,\n      actionHandler: propHandleAction || handleAction\n    });\n  }), galleryImages.length !== 0 && /*#__PURE__*/React.createElement(Gallery$1, {\n    images: galleryImages\n  }), /*#__PURE__*/React.createElement(SimpleReactionsList$1, {\n    reaction_counts: message.reaction_counts,\n    reactions: message.latest_reactions,\n    handleReaction: propHandleReaction || handleReaction\n  }), !initialMessage && /*#__PURE__*/React.createElement(MessageRepliesCountButton$1, {\n    onClick: propHandleOpenThread || handleOpenThread,\n    reply_count: message.reply_count\n  })))));\n};\n/**\n * @type { React.FC<import('../types').MessageLivestreamActionProps> }\n */\n\n\nvar MessageLivestreamActions = function MessageLivestreamActions(props) {\n  var initialMessage = props.initialMessage,\n      message = props.message,\n      channelConfig = props.channelConfig,\n      threadList = props.threadList,\n      formatDate = props.formatDate,\n      messageWrapperRef = props.messageWrapperRef,\n      onReactionListClick = props.onReactionListClick,\n      getMessageActions = props.getMessageActions,\n      handleOpenThread = props.handleOpenThread,\n      propTDateTimeParser = props.tDateTimeParser;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      actionsBoxOpen = _useState2[0],\n      setActionsBoxOpen = _useState2[1];\n  /** @type {() => void} Typescript syntax */\n\n\n  var hideOptions = useCallback(function () {\n    return setActionsBoxOpen(false);\n  }, []);\n  var messageDeletedAt = !!(message === null || message === void 0 ? void 0 : message.deleted_at);\n  var messageWrapper = messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current;\n  useEffect(function () {\n    if (messageWrapper) {\n      messageWrapper.addEventListener('mouseleave', hideOptions);\n    }\n\n    return function () {\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', hideOptions);\n      }\n    };\n  }, [messageWrapper, hideOptions]);\n  useEffect(function () {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n  useEffect(function () {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n\n    return function () {\n      document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (initialMessage || !message || message.type === 'error' || message.type === 'system' || message.type === 'ephemeral' || message.status === 'failed' || message.status === 'sending') {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": 'message-livestream-actions',\n    className: \"str-chat__message-livestream-actions\"\n  }, /*#__PURE__*/React.createElement(MessageTimestamp$1, {\n    customClass: \"str-chat__message-livestream-time\",\n    message: message,\n    formatDate: formatDate,\n    tDateTimeParser: propTDateTimeParser\n  }), channelConfig && channelConfig.reactions && /*#__PURE__*/React.createElement(\"span\", {\n    onClick: onReactionListClick,\n    \"data-testid\": \"message-livestream-reactions-action\"\n  }, /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(ReactionIcon, null))), !threadList && channelConfig && channelConfig.replies && /*#__PURE__*/React.createElement(\"span\", {\n    \"data-testid\": \"message-livestream-thread-action\",\n    onClick: handleOpenThread\n  }, /*#__PURE__*/React.createElement(ThreadIcon, null)), /*#__PURE__*/React.createElement(MessageActions, _extends({}, props, {\n    getMessageActions: getMessageActions,\n    customWrapperClass: '',\n    inline: true\n  })));\n};\n\nMessageLivestreamComponent.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message:\n  /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */\n  PropTypes.object.isRequired,\n\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').AttachmentUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   * */\n  Message:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageUIComponentProps>>} */\n  PropTypes.oneOfType([PropTypes.node, PropTypes.func, PropTypes.object]).isRequired,\n\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n\n  /** Channel config object */\n  channelConfig:\n  /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */\n  PropTypes.object.isRequired,\n\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n\n  /** Function to open thread on current messxage */\n  handleOpenThread: PropTypes.func,\n\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n\n  /**\n   * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions: PropTypes.func.isRequired,\n\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   */\n  handleRetry: PropTypes.func,\n\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   */\n  handleReaction: PropTypes.func,\n\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n\n  /** @deprecated This property is no longer used * */\n  actionsEnabled: PropTypes.bool,\n\n  /** DOMRect object for parent MessageList component */\n  messageListRect: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    top: PropTypes.number.isRequired,\n    right: PropTypes.number.isRequired,\n    bottom: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    toJSON: PropTypes.func.isRequired\n  }),\n\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  handleAction: PropTypes.func,\n\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageDeletedProps>>} */\n  PropTypes.elementType\n};\nvar MessageLivestream = /*#__PURE__*/React.memo(MessageLivestreamComponent, areMessagePropsEqual); // @ts-check\n\n/**\n * MessageTeam - Render component, should be used together with the Message component\n * Implements the look and feel for a team style collaboration environment\n *\n * @example ../../docs/MessageTeam.md\n * @typedef { import('../types').MessageTeamProps } Props\n *\n * @type {React.FC<Props>}\n */\n// eslint-disable-next-line sonarjs/cognitive-complexity\n\nvar MessageTeam = function MessageTeam(props) {\n  var _message$user4, _message$user5, _message$user6, _message$user7, _message$user8;\n\n  var message = props.message,\n      threadList = props.threadList,\n      formatDate = props.formatDate,\n      initialMessage = props.initialMessage,\n      unsafeHTML = props.unsafeHTML,\n      getMessageActions = props.getMessageActions,\n      MessageDeleted = props.MessageDeleted,\n      propEditing = props.editing,\n      propSetEdit = props.setEditingState,\n      propClearEdit = props.clearEditingState,\n      propOnMentionsHover = props.onMentionsHoverMessage,\n      propOnMentionsClick = props.onMentionsClickMessage,\n      propChannelConfig = props.channelConfig,\n      propHandleAction = props.handleAction,\n      propHandleOpenThread = props.handleOpenThread,\n      propHandleReaction = props.handleReaction,\n      propHandleRetry = props.handleRetry,\n      propUpdateMessage = props.updateMessage,\n      propOnUserClick = props.onUserClick,\n      propOnUserHover = props.onUserHover,\n      propT = props.t;\n  /**\n   *@type {import('../types').ChannelContextValue}\n   */\n\n  var _useContext = useContext(ChannelContext),\n      channel = _useContext.channel,\n      channelUpdateMessage = _useContext.updateMessage;\n\n  var channelConfig = propChannelConfig || (channel === null || channel === void 0 ? void 0 : channel.getConfig());\n\n  var _useContext2 = useContext(TranslationContext),\n      contextT = _useContext2.t;\n\n  var t = propT || contextT;\n  var groupStyles = props.groupStyles || ['single'];\n  var reactionSelectorRef = useRef(null);\n  var messageWrapperRef = useRef(null);\n\n  var _useEditHandler = useEditHandler(),\n      ownEditing = _useEditHandler.editing,\n      ownSetEditing = _useEditHandler.setEdit,\n      ownClearEditing = _useEditHandler.clearEdit;\n\n  var editing = propEditing || ownEditing;\n  var setEdit = propSetEdit || ownSetEditing;\n  var clearEdit = propClearEdit || ownClearEditing;\n  var handleOpenThread = useOpenThreadHandler(message);\n  var handleReaction = useReactionHandler(message);\n  var retryHandler = useRetryHandler();\n  var retry = propHandleRetry || retryHandler;\n\n  var _useMentionsUIHandler = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover\n  }),\n      onMentionsClick = _useMentionsUIHandler.onMentionsClick,\n      onMentionsHover = _useMentionsUIHandler.onMentionsHover;\n\n  var _useReactionClick = useReactionClick(message, reactionSelectorRef, messageWrapperRef),\n      onReactionListClick = _useReactionClick.onReactionListClick,\n      showDetailedReactions = _useReactionClick.showDetailedReactions;\n\n  var _useUserHandler = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover\n  }),\n      onUserClick = _useUserHandler.onUserClick,\n      onUserHover = _useUserHandler.onUserHover;\n\n  var messageText = useMemo(function () {\n    return renderText(message === null || message === void 0 ? void 0 : message.text, message === null || message === void 0 ? void 0 : message.mentioned_users);\n  }, [message === null || message === void 0 ? void 0 : message.text, message === null || message === void 0 ? void 0 : message.mentioned_users]);\n  var galleryImages = getImages(message);\n  var attachments = getNonImageAttachments(message);\n  var firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if ((message === null || message === void 0 ? void 0 : message.type) === 'message.read') {\n    return null;\n  }\n\n  if (message === null || message === void 0 ? void 0 : message.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n\n  if (editing) {\n    var _message$user, _message$user2, _message$user3;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"message-team-edit\",\n      className: \"str-chat__message-team str-chat__message-team--\".concat(firstGroupStyle, \" str-chat__message-team--editing\")\n    }, (firstGroupStyle === 'top' || firstGroupStyle === 'single') && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__message-team-meta\"\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      image: message === null || message === void 0 ? void 0 : (_message$user = message.user) === null || _message$user === void 0 ? void 0 : _message$user.image,\n      name: (message === null || message === void 0 ? void 0 : (_message$user2 = message.user) === null || _message$user2 === void 0 ? void 0 : _message$user2.name) || (message === null || message === void 0 ? void 0 : (_message$user3 = message.user) === null || _message$user3 === void 0 ? void 0 : _message$user3.id),\n      size: 40,\n      onClick: onUserClick,\n      onMouseOver: onUserHover\n    })), /*#__PURE__*/React.createElement(MessageInput$1, {\n      Input: EditMessageForm,\n      message: message,\n      clearEditingState: clearEdit,\n      updateMessage: propUpdateMessage || channelUpdateMessage\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-team\",\n    className: \"str-chat__message-team str-chat__message-team--\".concat(firstGroupStyle, \" str-chat__message-team--\").concat(message === null || message === void 0 ? void 0 : message.type, \" \").concat(threadList ? 'thread-list' : '', \" str-chat__message-team--\").concat(message === null || message === void 0 ? void 0 : message.status),\n    ref: messageWrapperRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-team-meta\"\n  }, firstGroupStyle === 'top' || firstGroupStyle === 'single' || initialMessage ? /*#__PURE__*/React.createElement(Avatar, {\n    image: message === null || message === void 0 ? void 0 : (_message$user4 = message.user) === null || _message$user4 === void 0 ? void 0 : _message$user4.image,\n    name: (message === null || message === void 0 ? void 0 : (_message$user5 = message.user) === null || _message$user5 === void 0 ? void 0 : _message$user5.name) || (message === null || message === void 0 ? void 0 : (_message$user6 = message.user) === null || _message$user6 === void 0 ? void 0 : _message$user6.id),\n    size: 40,\n    onClick: onUserClick,\n    onMouseOver: onUserHover\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"team-meta-spacer\",\n    style: {\n      width: 40,\n      marginRight: 0\n    }\n  }), /*#__PURE__*/React.createElement(MessageTimestamp$1, {\n    message: message,\n    tDateTimeParser: props.tDateTimeParser,\n    formatDate: formatDate\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-team-group\"\n  }, message && (firstGroupStyle === 'top' || firstGroupStyle === 'single' || initialMessage) && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-team-author\",\n    className: \"str-chat__message-team-author\",\n    onClick: onUserClick\n  }, /*#__PURE__*/React.createElement(\"strong\", null, ((_message$user7 = message.user) === null || _message$user7 === void 0 ? void 0 : _message$user7.name) || ((_message$user8 = message.user) === null || _message$user8 === void 0 ? void 0 : _message$user8.id)), message.type === 'error' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message-team-error-header\"\n  }, t('Only visible to you'))), /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-team-content\",\n    className: \"str-chat__message-team-content str-chat__message-team-content--\".concat(firstGroupStyle, \" str-chat__message-team-content--\").concat((message === null || message === void 0 ? void 0 : message.text) === '' ? 'image' : 'text')\n  }, !initialMessage && message && message.status !== 'sending' && message.status !== 'failed' && message.type !== 'system' && message.type !== 'ephemeral' && message.type !== 'error' && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"message-team-actions\",\n    className: \"str-chat__message-team-actions\"\n  }, message && showDetailedReactions && /*#__PURE__*/React.createElement(ReactionSelector$1, {\n    handleReaction: propHandleReaction || handleReaction,\n    latest_reactions: message.latest_reactions,\n    reaction_counts: message.reaction_counts,\n    detailedView: true,\n    ref: reactionSelectorRef\n  }), channelConfig && channelConfig.reactions && /*#__PURE__*/React.createElement(\"span\", {\n    \"data-testid\": \"message-team-reaction-icon\",\n    title: \"Reactions\",\n    onClick: onReactionListClick\n  }, /*#__PURE__*/React.createElement(ReactionIcon, null)), !threadList && channelConfig && channelConfig.replies && /*#__PURE__*/React.createElement(\"span\", {\n    \"data-testid\": \"message-team-thread-icon\",\n    title: \"Start a thread\",\n    onClick: propHandleOpenThread || handleOpenThread\n  }, /*#__PURE__*/React.createElement(ThreadIcon, null)), message && getMessageActions && getMessageActions().length > 0 && /*#__PURE__*/React.createElement(MessageActions, {\n    addNotification: props.addNotification,\n    message: message,\n    getMessageActions: props.getMessageActions,\n    messageListRect: props.messageListRect,\n    messageWrapperRef: messageWrapperRef,\n    setEditingState: setEdit,\n    getMuteUserSuccessNotification: props.getMuteUserSuccessNotification,\n    getMuteUserErrorNotification: props.getMuteUserErrorNotification,\n    getFlagMessageErrorNotification: props.getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification: props.getFlagMessageSuccessNotification,\n    handleFlag: props.handleFlag,\n    handleMute: props.handleMute,\n    handleEdit: props.handleEdit,\n    handleDelete: props.handleDelete,\n    customWrapperClass: '',\n    inline: true\n  })), message && /*#__PURE__*/React.createElement(\"span\", {\n    \"data-testid\": \"message-team-message\",\n    className: isOnlyEmojis(message.text) ? 'str-chat__message-team-text--is-emoji' : '',\n    onMouseOver: onMentionsHover,\n    onClick: onMentionsClick\n  }, unsafeHTML ? /*#__PURE__*/React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: message.html\n    }\n  }) : messageText), galleryImages.length !== 0 && /*#__PURE__*/React.createElement(Gallery$1, {\n    images: galleryImages\n  }), message && message.text === '' && /*#__PURE__*/React.createElement(MessageTeamAttachments, {\n    Attachment: props.Attachment,\n    message: message,\n    handleAction: propHandleAction\n  }), (message === null || message === void 0 ? void 0 : message.latest_reactions) && message.latest_reactions.length !== 0 && message.text !== '' && /*#__PURE__*/React.createElement(SimpleReactionsList$1, {\n    reaction_counts: message.reaction_counts,\n    handleReaction: propHandleReaction || handleReaction,\n    reactions: message.latest_reactions\n  }), (message === null || message === void 0 ? void 0 : message.status) === 'failed' && /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"message-team-failed\",\n    className: \"str-chat__message-team-failed\",\n    onClick: function onClick() {\n      if (message.status === 'failed' && retry) {\n        // FIXME: type checking fails here because in the case of a failed message,\n        // `message` is of type Client.Message (i.e. request object)\n        // instead of Client.MessageResponse (i.e. server response object)\n        // @ts-ignore\n        retry(message);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(ErrorIcon, null), t('Message failed. Click to try again.'))), /*#__PURE__*/React.createElement(MessageTeamStatus, {\n    readBy: props.readBy,\n    message: message,\n    threadList: threadList,\n    lastReceivedId: props.lastReceivedId,\n    t: propT\n  }), message && message.text !== '' && attachments && /*#__PURE__*/React.createElement(MessageTeamAttachments, {\n    Attachment: props.Attachment,\n    message: message,\n    handleAction: propHandleAction\n  }), (message === null || message === void 0 ? void 0 : message.latest_reactions) && message.latest_reactions.length !== 0 && message.text === '' && /*#__PURE__*/React.createElement(SimpleReactionsList$1, {\n    reaction_counts: message.reaction_counts,\n    handleReaction: propHandleReaction || handleReaction,\n    reactions: message.latest_reactions\n  }), !threadList && message && /*#__PURE__*/React.createElement(MessageRepliesCountButton$1, {\n    onClick: propHandleOpenThread || handleOpenThread,\n    reply_count: message.reply_count\n  }))));\n};\n/** @type {(props: import('../types').MessageTeamStatusProps) => React.ReactElement | null} */\n\n\nvar MessageTeamStatus = function MessageTeamStatus(props) {\n  var readBy = props.readBy,\n      message = props.message,\n      threadList = props.threadList,\n      lastReceivedId = props.lastReceivedId,\n      propT = props.t;\n\n  var _useContext3 = useContext(ChannelContext),\n      client = _useContext3.client;\n\n  var _useContext4 = useContext(TranslationContext),\n      contextT = _useContext4.t;\n\n  var t = propT || contextT;\n\n  var _useUserRole = useUserRole(message),\n      isMyMessage = _useUserRole.isMyMessage;\n\n  if (!isMyMessage || (message === null || message === void 0 ? void 0 : message.type) === 'error') {\n    return null;\n  }\n\n  var justReadByMe = readBy && (client === null || client === void 0 ? void 0 : client.user) && readBy.length === 1 && readBy[0] && readBy[0].id === client.user.id;\n\n  if (message && message.status === 'sending') {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"str-chat__message-team-status\",\n      \"data-testid\": \"message-team-sending\"\n    }, /*#__PURE__*/React.createElement(Tooltip$1, null, t && t('Sending...')), /*#__PURE__*/React.createElement(DefaultLoadingIndicator, null));\n  }\n\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    var lastReadUser = readBy.filter(function (item) {\n      return item && (client === null || client === void 0 ? void 0 : client.user) && item.id !== client.user.id;\n    })[0];\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: \"str-chat__message-team-status\"\n    }, /*#__PURE__*/React.createElement(Tooltip$1, null, getReadByTooltipText(readBy, t, client)), /*#__PURE__*/React.createElement(Avatar, {\n      name: lastReadUser && lastReadUser.name ? lastReadUser.name : null,\n      image: lastReadUser && lastReadUser.image ? lastReadUser.image : null,\n      size: 15\n    }), readBy.length - 1 > 1 && /*#__PURE__*/React.createElement(\"span\", {\n      \"data-testid\": \"message-team-read-by-count\",\n      className: \"str-chat__message-team-status-number\"\n    }, readBy.length - 1));\n  }\n\n  if (message && message.status === 'received' && message.id === lastReceivedId && !threadList) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      \"data-testid\": \"message-team-received\",\n      className: \"str-chat__message-team-status\"\n    }, /*#__PURE__*/React.createElement(Tooltip$1, null, t && t('Delivered')), /*#__PURE__*/React.createElement(DeliveredCheckIcon, null));\n  }\n\n  return null;\n};\n/** @type {(props: import('../types').MessageTeamAttachmentsProps) => React.ReactElement | null} Typescript syntax */\n\n\nvar MessageTeamAttachments = function MessageTeamAttachments(props) {\n  var _props$Attachment = props.Attachment,\n      Attachment$1 = _props$Attachment === void 0 ? Attachment : _props$Attachment,\n      message = props.message,\n      propHandleAction = props.handleAction;\n  var handleAction = useActionHandler(message);\n  var attachments = getNonImageAttachments(message);\n\n  if (attachments.length > 0 && Attachment$1) {\n    return /*#__PURE__*/React.createElement(Fragment, null, attachments.map(\n    /** @type {(item: import('stream-chat').Attachment) => React.ReactElement | null} Typescript syntax */\n    function (attachment, index) {\n      return /*#__PURE__*/React.createElement(Attachment$1, {\n        key: \"\".concat(message === null || message === void 0 ? void 0 : message.id, \"-\").concat(index),\n        attachment: attachment,\n        actionHandler: propHandleAction || handleAction\n      });\n    }));\n  }\n\n  return null;\n};\n\nMessageTeam.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message:\n  /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */\n  PropTypes.object.isRequired,\n\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').AttachmentUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   * */\n  Message:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageUIComponentProps>>} */\n  PropTypes.oneOfType([PropTypes.node, PropTypes.func, PropTypes.object]).isRequired,\n\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n\n  /** Client object */\n  client:\n  /** @type {PropTypes.Validator<import('stream-chat').StreamChat>} */\n  PropTypes.object,\n\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n\n  /** Channel config object */\n  channelConfig:\n  /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */\n  PropTypes.object.isRequired,\n\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n\n  /** Function to open thread on current messxage */\n  handleOpenThread: PropTypes.func,\n\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n\n  /**\n   * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions:\n  /** @type {PropTypes.Validator<() => Array<string>>} */\n  PropTypes.func,\n\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   */\n  handleRetry: PropTypes.func,\n\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   */\n  handleReaction: PropTypes.func,\n\n  /** DOMRect object for parent MessageList component */\n  messageListRect:\n  /** @type {PropTypes.Validator<DOMRect>} */\n  PropTypes.object,\n\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  handleAction: PropTypes.func,\n\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n\n  /** Position of message in group. Possible values: top, bottom, middle, single */\n  groupStyles: PropTypes.array,\n\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').MessageDeletedProps>>} */\n  PropTypes.elementType\n};\nvar MessageTeam$1 = /*#__PURE__*/React.memo(MessageTeam, areMessagePropsEqual); // @ts-check\n\n/**\n * @typedef {import('stream-chat').UserResponse} UserResponse\n * @typedef {(e: React.MouseEvent, user?: UserResponse) => void} MentionsHandler\n * @param {MentionsHandler=} onMentionsHover\n * @param {MentionsHandler=} onMentionsClick\n */\n\nvar useMentionsHandlers = function useMentionsHandlers(onMentionsHover, onMentionsClick) {\n  return useCallback(\n  /** @type {(e: React.MouseEvent<HTMLSpanElement>, mentioned_users: UserResponse[]) => void} */\n  function (e, mentioned_users) {\n    if (!onMentionsHover && !onMentionsClick) return; // eslint-disable-next-line prefer-destructuring\n\n    var target =\n    /** @type {HTMLSpanElement} */\n    e.target;\n    var tagName = target === null || target === void 0 ? void 0 : target.tagName.toLowerCase();\n    var textContent = target === null || target === void 0 ? void 0 : target.innerHTML.replace('*', '');\n\n    if (tagName === 'strong' && textContent[0] === '@') {\n      var userName = textContent.replace('@', '');\n      var user = mentioned_users.find(function (_ref) {\n        var name = _ref.name,\n            id = _ref.id;\n        return name === userName || id === userName;\n      });\n\n      if (onMentionsHover && typeof onMentionsHover === 'function' && e.type === 'mouseover') {\n        onMentionsHover(e, user);\n      }\n\n      if (onMentionsClick && e.type === 'click' && typeof onMentionsClick === 'function') {\n        onMentionsClick(e, user);\n      }\n    }\n  }, [onMentionsClick, onMentionsHover]);\n}; // @ts-check\n\n/**\n * @typedef {import('stream-chat').Message} Message\n * @typedef {import('stream-chat').UpdateMessageAPIResponse} UpdateResponse\n * @param {((cid: string, updatedMessage: Message) => Promise<UpdateResponse>) | undefined} doUpdateMessageRequest\n * @returns {(updatedMessage: Message) => Promise<UpdateResponse>}\n */\n\n\nvar useEditMessageHandler = function useEditMessageHandler(doUpdateMessageRequest) {\n  var _useContext = useContext(ChatContext),\n      channel = _useContext.channel,\n      client = _useContext.client;\n\n  return function (updatedMessage) {\n    if (doUpdateMessageRequest && channel) {\n      return Promise.resolve(doUpdateMessageRequest(channel.cid, updatedMessage));\n    }\n\n    return client.updateMessage(updatedMessage);\n  };\n};\n\nfunction ownKeys$5(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$5(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$5(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$5(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/** @type {import('./types').ChannelStateReducer} */\n\n\nvar channelReducer = function channelReducer(state, action) {\n  switch (action.type) {\n    case 'initStateFromChannel':\n      {\n        var channel = action.channel;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          messages: channel.state.messages,\n          read: channel.state.read,\n          watchers: channel.state.watchers,\n          members: channel.state.members,\n          watcherCount: channel.state.watcher_count,\n          loading: false\n        });\n      }\n\n    case 'copyStateFromChannelOnEvent':\n      {\n        var _channel = action.channel;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          messages: _channel.state.messages,\n          read: _channel.state.read,\n          watchers: _channel.state.watchers,\n          typing: _channel.state.typing,\n          watcherCount: _channel.state.watcher_count\n        });\n      }\n\n    case 'setThread':\n      {\n        var message = action.message;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          thread: message\n        });\n      }\n\n    case 'loadMoreFinished':\n      {\n        var hasMore = action.hasMore,\n            messages = action.messages;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          loadingMore: false,\n          hasMore,\n          messages\n        });\n      }\n\n    case 'setLoadingMore':\n      {\n        var loadingMore = action.loadingMore;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          loadingMore\n        });\n      }\n\n    case 'copyMessagesFromChannel':\n      {\n        var _channel2 = action.channel,\n            parentId = action.parentId;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          messages: _channel2.state.messages,\n          threadMessages: parentId ? _channel2.state.threads[parentId] || [] : state.threadMessages\n        });\n      }\n\n    case 'updateThreadOnEvent':\n      {\n        var _channel3 = action.channel,\n            _message = action.message;\n        if (!state.thread) return state;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          threadMessages: _channel3.state.threads[state.thread.id],\n          thread: (_message === null || _message === void 0 ? void 0 : _message.id) === state.thread.id ? _channel3.state.messageToImmutable(_message) : state.thread\n        });\n      }\n\n    case 'openThread':\n      {\n        var _message2 = action.message,\n            _channel4 = action.channel;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          thread: _message2,\n          threadMessages: _channel4.state.threads[_message2.id] || []\n        });\n      }\n\n    case 'startLoadingThread':\n      {\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          threadLoadingMore: true\n        });\n      }\n\n    case 'loadMoreThreadFinished':\n      {\n        var threadHasMore = action.threadHasMore,\n            threadMessages = action.threadMessages;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          threadHasMore,\n          threadMessages,\n          threadLoadingMore: false\n        });\n      }\n\n    case 'closeThread':\n      {\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          thread: null,\n          threadMessages: Immutable([]),\n          threadLoadingMore: false\n        });\n      }\n\n    case 'setError':\n      {\n        var error = action.error;\n        return _objectSpread$5(_objectSpread$5({}, state), {}, {\n          error\n        });\n      }\n\n    default:\n      return state;\n  }\n};\n/** @type {import('./types').ChannelState} */\n\n\nvar initialState = {\n  error: null,\n  loading: true,\n  loadingMore: false,\n  hasMore: true,\n  messages: Immutable([]),\n  typing: Immutable(\n  /** @type {any} infer from ChannelState */\n  {}),\n  members: Immutable(\n  /** @type {any} infer from ChannelState */\n  {}),\n  watchers: Immutable(\n  /** @type {any} infer from ChannelState */\n  {}),\n  watcherCount: 0,\n  read: Immutable(\n  /** @type {any} infer from ChannelState */\n  {}),\n  thread: null,\n  threadMessages: Immutable([]),\n  threadLoadingMore: false,\n  threadHasMore: true\n};\n\nfunction ownKeys$6(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$6(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$6(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$6(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/** @type {React.FC<import('../types').ChannelProps>}>} */\n\n\nvar Channel = function Channel(_ref) {\n  var _ref$EmptyPlaceholder = _ref.EmptyPlaceholder,\n      EmptyPlaceholder = _ref$EmptyPlaceholder === void 0 ? null : _ref$EmptyPlaceholder,\n      props = _objectWithoutProperties(_ref, [\"EmptyPlaceholder\"]);\n\n  var _useContext = useContext(ChatContext),\n      contextChannel = _useContext.channel;\n\n  var channel = props.channel || contextChannel;\n\n  if (!(channel === null || channel === void 0 ? void 0 : channel.cid)) {\n    return EmptyPlaceholder;\n  }\n\n  return /*#__PURE__*/React.createElement(ChannelInner, _extends({}, props, {\n    channel: channel,\n    key: channel.cid\n  }));\n};\n\nChannel.propTypes = {\n  /** Which channel to connect to, will initialize the channel if it's not initialized yet */\n  channel: PropTypes.instanceOf(Channel$2),\n\n  /**\n   * Empty channel UI component. This will be shown on the screen if there is no active channel.\n   *\n   * Defaults to null which skips rendering the Channel\n   *\n   * */\n  EmptyPlaceholder: PropTypes.element,\n\n  /**\n   * Error indicator UI component. This will be shown on the screen if channel query fails.\n   *\n   * Defaults to and accepts same props as: [LoadingErrorIndicator](https://getstream.github.io/stream-chat-react/#loadingerrorindicator)\n   *\n   * */\n  // @ts-ignore elementType\n  LoadingErrorIndicator: PropTypes.elementType,\n\n  /**\n   * Loading indicator UI component. This will be shown on the screen until the messages are\n   * being queried from channelœ. Once the messages are loaded, loading indicator is removed from the screen\n   * and replaced with children of the Channel component.\n   *\n   * Defaults to and accepts same props as: [LoadingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingIndicator.js)\n   */\n  // @ts-ignore elementType\n  LoadingIndicator: PropTypes.elementType,\n\n  /**\n   * Message UI component to display a message in message list.\n   *\n   * Available built-in components (also accepts the same props as):\n   *\n   * 1. [MessageSimple](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageSimple.js) (default)\n   * 2. [MessageTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageTeam.js)\n   * 3. [MessageLivestream](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageLivestream.js)\n   * 3. [MessageCommerce](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageCommerce.js)\n   *\n   * */\n  // @ts-ignore elementType\n  Message: PropTypes.elementType,\n\n  /**\n   * Attachment UI component to display attachment in individual message.\n   *\n   * Defaults to and accepts same props as: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  // @ts-ignore elementType\n  Attachment: PropTypes.elementType,\n\n  /**\n   * Handle for click on @mention in message\n   *\n   * @param {Event} event DOM Click event\n   * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is clicked\n   */\n  onMentionsClick: PropTypes.func,\n\n  /**\n   * Handle for hover on @mention in message\n   *\n   * @param {Event} event DOM hover event\n   * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is hovered\n   */\n  onMentionsHover: PropTypes.func,\n\n  /** Weather to allow multiple attachment uploads */\n  multipleUploads: PropTypes.bool,\n\n  /** List of accepted file types */\n  acceptedFiles: PropTypes.array,\n\n  /** Maximum number of attachments allowed per message */\n  maxNumberOfFiles: PropTypes.number,\n\n  /** Override send message request (Advanced usage only)\n   *\n   * @param {String} channelId full channel ID in format of `type:id`\n   * @param {Object} message\n   */\n  doSendMessageRequest: PropTypes.func,\n\n  /** Override update(edit) message request (Advanced usage only)\n   *\n   * @param {String} channelId full channel ID in format of `type:id`\n   * @param {Object} updatedMessage\n   */\n  doUpdateMessageRequest: PropTypes.func\n};\n/** @type {React.FC<import('../types').ChannelProps & { channel: import('stream-chat').Channel }>} */\n\nvar ChannelInner = function ChannelInner(_ref2) {\n  var _props$channel;\n\n  var _ref2$LoadingIndicato = _ref2.LoadingIndicator,\n      LoadingIndicator = _ref2$LoadingIndicato === void 0 ? DefaultLoadingIndicator : _ref2$LoadingIndicato,\n      _ref2$LoadingErrorInd = _ref2.LoadingErrorIndicator,\n      LoadingErrorIndicator = _ref2$LoadingErrorInd === void 0 ? LoadingErrorIndicatorComponent : _ref2$LoadingErrorInd,\n      _ref2$Attachment = _ref2.Attachment,\n      Attachment$1 = _ref2$Attachment === void 0 ? Attachment : _ref2$Attachment,\n      _ref2$Message = _ref2.Message,\n      Message = _ref2$Message === void 0 ? MessageSimple$1 : _ref2$Message,\n      props = _objectWithoutProperties(_ref2, [\"LoadingIndicator\", \"LoadingErrorIndicator\", \"Attachment\", \"Message\"]);\n\n  var channel = props.channel;\n\n  var _useReducer = useReducer(channelReducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var originalTitle = useRef('');\n  var lastRead = useRef(new Date());\n  var chatContext = useContext(ChatContext);\n\n  var _useContext2 = useContext(TranslationContext),\n      t = _useContext2.t; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  var throttledCopyStateFromChannel = useCallback(throttle(function () {\n    dispatch({\n      type: 'copyStateFromChannelOnEvent',\n      channel\n    });\n  }, 500, {\n    leading: true,\n    trailing: true\n  }), [channel]);\n  var markRead = useCallback(function () {\n    if (channel.disconnected || !channel.getConfig().read_events) {\n      return;\n    }\n\n    lastRead.current = new Date();\n    logChatPromiseExecution(channel.markRead(), 'mark read');\n\n    if (originalTitle.current) {\n      document.title = originalTitle.current;\n    }\n  }, [channel]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var markReadThrottled = useCallback(throttle(markRead, 500, {\n    leading: true,\n    trailing: true\n  }), [markRead]);\n  var handleEvent = useCallback(function (e) {\n    dispatch({\n      type: 'updateThreadOnEvent',\n      message: e.message,\n      channel\n    });\n\n    if (e.type === 'message.new') {\n      var mainChannelUpdated = true;\n\n      if (e.message.parent_id && !e.message.show_in_channel) {\n        mainChannelUpdated = false;\n      }\n\n      if (mainChannelUpdated && e.message.user.id !== chatContext.client.userID) {\n        if (!document.hidden) {\n          markReadThrottled();\n        } else if (channel.getConfig().read_events) {\n          var unread = channel.countUnread(lastRead.current);\n          document.title = \"(\".concat(unread, \") \").concat(originalTitle.current);\n        }\n      }\n    }\n\n    throttledCopyStateFromChannel();\n  }, [channel, throttledCopyStateFromChannel, chatContext.client.userID, markReadThrottled]); // useLayoutEffect here to prevent spinner. Use Suspense when it is available in stable release\n\n  useLayoutEffect(function () {\n    var errored = false;\n    var done = false;\n\n    var onVisibilityChange = function onVisibilityChange() {\n      if (!document.hidden) {\n        markRead();\n      }\n    };\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (channel.initialized) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.prev = 1;\n              _context.next = 4;\n              return channel.watch();\n\n            case 4:\n              _context.next = 10;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](1);\n              dispatch({\n                type: 'setError',\n                error: _context.t0\n              });\n              errored = true;\n\n            case 10:\n              done = true;\n              originalTitle.current = document.title;\n\n              if (!errored) {\n                dispatch({\n                  type: 'initStateFromChannel',\n                  channel\n                });\n                if (channel.countUnread() > 0) markRead(); // The more complex sync logic is done in chat.js\n                // listen to client.connection.recovered and all channel events\n\n                document.addEventListener('visibilitychange', onVisibilityChange);\n                chatContext.client.on('connection.recovered', handleEvent);\n                channel.on(handleEvent);\n              }\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 6]]);\n    }))();\n\n    return function () {\n      if (errored || !done) return;\n      document.removeEventListener('visibilitychange', onVisibilityChange);\n      channel.off(handleEvent);\n      chatContext.client.off('connection.recovered', handleEvent);\n    };\n  }, [channel, chatContext.client, handleEvent, markRead, props.channel]);\n  useEffect(function () {\n    if (state.thread) {\n      for (var i = state.messages.length - 1; i >= 0; i -= 1) {\n        if (state.messages[i].id === state.thread.id) {\n          dispatch({\n            type: 'setThread',\n            message: state.messages[i]\n          });\n          break;\n        }\n      }\n    }\n  }, [state.messages, state.thread]); // Message\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var loadMoreFinished = useCallback(debounce(\n  /**\n   * @param {boolean} hasMore\n   * @param {import('seamless-immutable').ImmutableArray<import('stream-chat').MessageResponse>} messages\n   */\n  function (hasMore, messages) {\n    dispatch({\n      type: 'loadMoreFinished',\n      hasMore,\n      messages\n    });\n  }, 2000, {\n    leading: true,\n    trailing: true\n  }), []);\n  var loadMore = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var limit,\n        oldestMessage,\n        oldestID,\n        perPage,\n        queryResponse,\n        hasMoreMessages,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            limit = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : 100; // prevent duplicate loading events...\n\n            oldestMessage = state.messages[0];\n\n            if (!(state.loadingMore || (oldestMessage === null || oldestMessage === void 0 ? void 0 : oldestMessage.status) !== 'received')) {\n              _context2.next = 4;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 4:\n            dispatch({\n              type: 'setLoadingMore',\n              loadingMore: true\n            });\n            oldestID = (oldestMessage === null || oldestMessage === void 0 ? void 0 : oldestMessage.id) || null;\n            perPage = limit;\n            _context2.prev = 7;\n            _context2.next = 10;\n            return channel.query({\n              messages: {\n                limit: perPage,\n                id_lt: oldestID\n              }\n            });\n\n          case 10:\n            queryResponse = _context2.sent;\n            _context2.next = 18;\n            break;\n\n          case 13:\n            _context2.prev = 13;\n            _context2.t0 = _context2[\"catch\"](7);\n            console.warn('message pagination request failed with error', _context2.t0);\n            dispatch({\n              type: 'setLoadingMore',\n              loadingMore: false\n            });\n            return _context2.abrupt(\"return\");\n\n          case 18:\n            hasMoreMessages = queryResponse.messages.length === perPage;\n            loadMoreFinished(hasMoreMessages, channel.state.messages);\n\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[7, 13]]);\n  })), [channel, loadMoreFinished, state.loadingMore, state.messages]);\n  var updateMessage = useCallback(function (updatedMessage) {\n    // adds the message to the local channel state..\n    // this adds to both the main channel state as well as any reply threads\n    channel.state.addMessageSorted(updatedMessage);\n    dispatch({\n      type: 'copyMessagesFromChannel',\n      parentId: state.thread && updatedMessage.parent_id,\n      channel\n    });\n  }, [channel, state.thread]);\n  var doSendMessageRequest = props.doSendMessageRequest;\n  var doSendMessage = useCallback( /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(message) {\n      var text, attachments, id, parent_id, mentioned_users, messageData, messageResponse;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              text = message.text, attachments = message.attachments, id = message.id, parent_id = message.parent_id, mentioned_users = message.mentioned_users;\n              messageData = {\n                text,\n                attachments,\n                mentioned_users,\n                id,\n                parent_id\n              };\n              _context3.prev = 2;\n\n              if (!doSendMessageRequest) {\n                _context3.next = 9;\n                break;\n              }\n\n              _context3.next = 6;\n              return doSendMessageRequest(channel.cid, messageData);\n\n            case 6:\n              messageResponse = _context3.sent;\n              _context3.next = 12;\n              break;\n\n            case 9:\n              _context3.next = 11;\n              return channel.sendMessage(messageData);\n\n            case 11:\n              messageResponse = _context3.sent;\n\n            case 12:\n              // replace it after send is completed\n              if (messageResponse && messageResponse.message) {\n                updateMessage(_objectSpread$6(_objectSpread$6({}, messageResponse.message), {}, {\n                  status: 'received'\n                }));\n              }\n\n              _context3.next = 18;\n              break;\n\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](2); // set the message to failed..\n\n              updateMessage(_objectSpread$6(_objectSpread$6({}, message), {}, {\n                status: 'failed'\n              }));\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[2, 15]]);\n    }));\n\n    return function (_x) {\n      return _ref5.apply(this, arguments);\n    };\n  }(), [channel, doSendMessageRequest, updateMessage]);\n  var createMessagePreview = useCallback(function (text, attachments, parent, mentioned_users) {\n    // create a preview of the message\n    var clientSideID = \"\".concat(chatContext.client.userID, \"-\").concat(v4());\n    return _objectSpread$6({\n      text,\n      html: text,\n      __html: text,\n      id: clientSideID,\n      type: 'regular',\n      status: 'sending',\n      user: chatContext.client.user,\n      created_at: new Date(),\n      attachments,\n      mentioned_users,\n      reactions: []\n    }, (parent === null || parent === void 0 ? void 0 : parent.id) ? {\n      parent_id: parent.id\n    } : null);\n  }, [chatContext.client.user, chatContext.client.userID]);\n  var sendMessage = useCallback( /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref6) {\n      var text, _ref6$attachments, attachments, _ref6$mentioned_users, mentioned_users, parent, messagePreview;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              text = _ref6.text, _ref6$attachments = _ref6.attachments, attachments = _ref6$attachments === void 0 ? [] : _ref6$attachments, _ref6$mentioned_users = _ref6.mentioned_users, mentioned_users = _ref6$mentioned_users === void 0 ? [] : _ref6$mentioned_users, parent = _ref6.parent; // remove error messages upon submit\n\n              channel.state.filterErrorMessages(); // create a local preview message to show in the UI\n\n              messagePreview = createMessagePreview(text, attachments, parent, mentioned_users); // first we add the message to the UI\n\n              updateMessage(messagePreview);\n              _context4.next = 6;\n              return doSendMessage(messagePreview);\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x2) {\n      return _ref7.apply(this, arguments);\n    };\n  }(), [channel.state, createMessagePreview, doSendMessage, updateMessage]);\n  var retrySendMessage = useCallback( /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(message) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              // set the message status to sending\n              updateMessage(_objectSpread$6(_objectSpread$6({}, message), {}, {\n                status: 'sending'\n              })); // actually try to send the message...\n\n              _context5.next = 3;\n              return doSendMessage(message);\n\n            case 3:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function (_x3) {\n      return _ref8.apply(this, arguments);\n    };\n  }(), [doSendMessage, updateMessage]);\n  var removeMessage = useCallback(function (message) {\n    channel.state.removeMessage(message);\n    dispatch({\n      type: 'copyMessagesFromChannel',\n      parentId: state.thread && message.parent_id,\n      channel\n    });\n  }, [channel, state.thread]); // Thread\n\n  var openThread = useCallback(function (message, e) {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    dispatch({\n      type: 'openThread',\n      message,\n      channel\n    });\n  }, [channel]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var loadMoreThreadFinished = useCallback(debounce(\n  /**\n   * @param {boolean} threadHasMore\n   * @param {import('seamless-immutable').ImmutableArray<import('stream-chat').MessageResponse>} threadMessages\n   */\n  function (threadHasMore, threadMessages) {\n    dispatch({\n      type: 'loadMoreThreadFinished',\n      threadHasMore,\n      threadMessages\n    });\n  }, 2000, {\n    leading: true,\n    trailing: true\n  }), []);\n  var loadMoreThread = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n    var parentID, oldMessages, oldestMessageID, limit, queryResponse, threadHasMoreMessages, newThreadMessages;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            if (!(state.threadLoadingMore || !state.thread)) {\n              _context6.next = 2;\n              break;\n            }\n\n            return _context6.abrupt(\"return\");\n\n          case 2:\n            dispatch({\n              type: 'startLoadingThread'\n            });\n            parentID = state.thread.id;\n            oldMessages = channel.state.threads[parentID] || [];\n            oldestMessageID = oldMessages[0] ? oldMessages[0].id : null;\n            limit = 50;\n            _context6.next = 9;\n            return channel.getReplies(parentID, {\n              limit,\n              id_lt: oldestMessageID\n            });\n\n          case 9:\n            queryResponse = _context6.sent;\n            threadHasMoreMessages = queryResponse.messages.length === limit;\n            newThreadMessages = channel.state.threads[parentID] || []; // next set loadingMore to false so we can start asking for more data...\n\n            loadMoreThreadFinished(threadHasMoreMessages, newThreadMessages);\n\n          case 13:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  })), [channel, loadMoreThreadFinished, state.thread, state.threadLoadingMore]);\n  var closeThread = useCallback(function (e) {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    dispatch({\n      type: 'closeThread'\n    });\n  }, []);\n  var onMentionsHoverOrClick = useMentionsHandlers(props.onMentionsHover, props.onMentionsClick);\n  var editMessage = useEditMessageHandler(props.doUpdateMessageRequest);\n\n  var channelContextValue = _objectSpread$6(_objectSpread$6({}, state), {}, {\n    watcher_count: state.watcherCount,\n    // props\n    channel,\n    Message,\n    Attachment: Attachment$1,\n    multipleUploads: props.multipleUploads,\n    acceptedFiles: props.acceptedFiles,\n    maxNumberOfFiles: props.maxNumberOfFiles,\n    mutes: chatContext.mutes,\n    // handlers\n    loadMore,\n    editMessage,\n    updateMessage,\n    sendMessage,\n    retrySendMessage,\n    removeMessage,\n    openThread,\n    loadMoreThread,\n    closeThread,\n    onMentionsClick: onMentionsHoverOrClick,\n    onMentionsHover: onMentionsHoverOrClick,\n    // from chatContext, for legacy reasons\n    client: chatContext.client\n  });\n\n  var core;\n\n  if (state.error) {\n    core = /*#__PURE__*/React.createElement(LoadingErrorIndicator, {\n      error: state.error\n    });\n  } else if (state.loading) {\n    core = /*#__PURE__*/React.createElement(LoadingIndicator, {\n      size: 25\n    });\n  } else if (!((_props$channel = props.channel) === null || _props$channel === void 0 ? void 0 : _props$channel.watch)) {\n    core = /*#__PURE__*/React.createElement(\"div\", null, t('Channel Missing'));\n  } else {\n    core = /*#__PURE__*/React.createElement(ChannelContext.Provider, {\n      value: channelContextValue\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__container\"\n    }, props.children));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat str-chat-channel \".concat(chatContext.theme)\n  }, core);\n};\n\nvar Channel$1 = /*#__PURE__*/React.memo(Channel); // @ts-check\n\n/**\n * ChannelHeader - Render some basic information about this channel\n * @example ../../docs/ChannelHeader.md\n * @type {React.FC<import('../types').ChannelHeaderProps>}\n */\n\nvar ChannelHeader = function ChannelHeader(_ref) {\n  var title = _ref.title,\n      live = _ref.live;\n  /** @type {import(\"types\").TranslationContextValue} */\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n  /** @type {import(\"types\").ChannelContextValue} */\n\n\n  var _useContext2 = useContext(ChannelContext),\n      channel = _useContext2.channel,\n      watcher_count = _useContext2.watcher_count;\n\n  var _useContext3 = useContext(ChatContext),\n      openMobileNav = _useContext3.openMobileNav;\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__header-livestream\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__header-hamburger\",\n    onClick: openMobileNav\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__header-hamburger--line\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__header-hamburger--line\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__header-hamburger--line\"\n  })), channel && channel.data.image && /*#__PURE__*/React.createElement(Avatar, {\n    image: channel.data.image,\n    shape: \"rounded\",\n    size: channel.type === 'commerce' ? 60 : 40\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__header-livestream-left\"\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"str-chat__header-livestream-left--title\"\n  }, title || channel && channel.data.name, ' ', live && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__header-livestream-left--livelabel\"\n  }, t('live'))), channel && channel.data.subtitle && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"str-chat__header-livestream-left--subtitle\"\n  }, channel.data.subtitle), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"str-chat__header-livestream-left--members\"\n  }, !live && channel && channel.data.member_count && channel.data.member_count > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, t('{{ memberCount }} members', {\n    memberCount: channel.data.member_count\n  }), \",\", ' '), t('{{ watcherCount }} online', {\n    watcherCount: watcher_count\n  }))));\n};\n\nChannelHeader.propTypes = {\n  /** Set title manually */\n  title: PropTypes.string,\n\n  /** Show a little indicator that the channel is live right now */\n  live: PropTypes.bool\n};\nvar ChannelHeader$1 = /*#__PURE__*/React.memo(ChannelHeader);\nvar placeholder = \"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E\"; // @ts-check\n\n/**\n * ChatDown - Indicator that chat is down or your network isn't working\n * @example ../../docs/ChatDown.md\n * @typedef {import('../types').ChatDownProps} Props\n * @type {React.FC<Props>}\n */\n\nvar ChatDown = function ChatDown(_ref) {\n  var image = _ref.image,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'Error' : _ref$type,\n      text = _ref.text;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__down\"\n  }, /*#__PURE__*/React.createElement(LoadingChannels$1, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__down-main\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"chatdown-img\",\n    src: image || placeholder\n  }), /*#__PURE__*/React.createElement(\"h1\", null, type), /*#__PURE__*/React.createElement(\"h3\", null, text || t('Error connecting to chat, refresh the page to try again.'))));\n};\n\nChatDown.propTypes = {\n  /** The image url for this error */\n  image: PropTypes.string,\n\n  /** The type of error */\n  type: PropTypes.string.isRequired,\n\n  /** The error message to show */\n  text: PropTypes.string\n};\nvar ChatDown$1 = /*#__PURE__*/React.memo(ChatDown);\nvar chevrondown = \"data:image/svg+xml,%3Csvg%20width%3D%228%22%20height%3D%225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cpath%20id%3D%22b%22%20d%3D%22M.667.667L4%204%207.333.667z%22%2F%3E%3Cfilter%20x%3D%22-7.5%25%22%20y%3D%22-15%25%22%20width%3D%22115%25%22%20height%3D%22160%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeComposite%20in%3D%22shadowOffsetOuter1%22%20in2%3D%22SourceAlpha%22%20operator%3D%22out%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.685858243%200%22%20in%3D%22shadowOffsetOuter1%22%2F%3E%3C%2Ffilter%3E%3C%2Fdefs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3Cuse%20fill-opacity%3D%22.7%22%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\"; // @ts-check\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type React.FC<import('../types').ChannelListUIComponentProps>\n */\n\nvar ChannelListTeam = function ChannelListTeam(_ref) {\n  var _ref$error = _ref.error,\n      error = _ref$error === void 0 ? false : _ref$error,\n      loading = _ref.loading,\n      sidebarImage = _ref.sidebarImage,\n      showSidebar = _ref.showSidebar,\n      _ref$LoadingErrorIndi = _ref.LoadingErrorIndicator,\n      LoadingErrorIndicator = _ref$LoadingErrorIndi === void 0 ? ChatDown$1 : _ref$LoadingErrorIndi,\n      _ref$LoadingIndicator = _ref.LoadingIndicator,\n      LoadingIndicator = _ref$LoadingIndicator === void 0 ? LoadingChannels$1 : _ref$LoadingIndicator,\n      children = _ref.children;\n\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(LoadingErrorIndicator, {\n      type: \"Connection Error\"\n    });\n  }\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(LoadingIndicator, null);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team\"\n  }, showSidebar && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__sidebar\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__sidebar--top\"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    image: sidebarImage,\n    size: 50\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__main\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__header\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__header--left\"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    image: client.user.image,\n    name: client.user.name || client.user.id,\n    size: 40\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__header--middle\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__header--title\"\n  }, client.user.name || client.user.id), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__header--status \".concat(client.user.status)\n  }, client.user.status)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-team__header--right\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"str-chat__channel-list-team__header--button\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: chevrondown\n  })))), children));\n};\n\nChannelListTeam.propTypes = {\n  /** When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js) */\n  loading: PropTypes.bool,\n\n  /** When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js) */\n  error: PropTypes.bool,\n\n  /** When true, sidebar containing logo of the team is visible */\n  showSidebar: PropTypes.bool,\n\n  /** Url for sidebar logo image. */\n  sidebarImage: PropTypes.string,\n\n  /**\n   * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').LoadingIndicatorProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Error indicator UI Component. It will be displayed if `error` prop is true\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').ChatDownProps>>} */\n  PropTypes.elementType\n}; // @ts-check\n\n/**\n * @type {React.FC<import('../types').LoadMoreButtonProps>}\n */\n\nvar LoadMoreButton = function LoadMoreButton(_ref) {\n  var onClick = _ref.onClick,\n      refreshing = _ref.refreshing,\n      _ref$children = _ref.children,\n      children = _ref$children === void 0 ? 'Load more' : _ref$children;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__load-more-button\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"str-chat__load-more-button__button\",\n    onClick: onClick,\n    \"data-testid\": \"load-more-button\",\n    disabled: refreshing\n  }, refreshing ? /*#__PURE__*/React.createElement(LoadingIndicator$1, null) : children));\n};\n\nLoadMoreButton.propTypes = {\n  /** onClick handler load more button. Pagination logic should be executed in this handler. */\n  onClick: PropTypes.func.isRequired,\n\n  /** If true, LoadingIndicator is displayed instead of button */\n  refreshing: PropTypes.bool.isRequired\n};\nvar DefaultLoadMoreButton = /*#__PURE__*/React.memo(LoadMoreButton);\n\nvar LoadMorePaginator = function LoadMorePaginator(_ref) {\n  var reverse = _ref.reverse,\n      hasNextPage = _ref.hasNextPage,\n      refreshing = _ref.refreshing,\n      loadNextPage = _ref.loadNextPage,\n      LoadMoreButton = _ref.LoadMoreButton,\n      children = _ref.children;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !reverse && children, hasNextPage && smartRender(LoadMoreButton, {\n    refreshing,\n    onClick: loadNextPage\n  }), reverse && children);\n};\n\nLoadMorePaginator.defaultProps = {\n  LoadMoreButton: DefaultLoadMoreButton\n};\nLoadMorePaginator.propTypes = {\n  LoadMoreButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func, PropTypes.object]),\n\n  /** callback to load the next page */\n  loadNextPage: PropTypes.func,\n\n  /** indicates if there is a next page to load */\n  hasNextPage: PropTypes.bool,\n\n  /** display the items in opposite order */\n  reverse: PropTypes.bool\n};\nvar LoadMorePaginator$1 = /*#__PURE__*/React.memo(LoadMorePaginator); // @ts-check\n\n/**\n * @type {React.FC<import('../types').EmptyStateIndicatorProps>} param0\n */\n\nvar EmptyStateIndicator = function EmptyStateIndicator(_ref) {\n  var listType = _ref.listType;\n\n  var _useContext = useContext(TranslationContext),\n      t = _useContext.t;\n\n  if (listType === 'channel') return /*#__PURE__*/React.createElement(\"p\", null, t('You have no channels currently'));\n  if (listType === 'message') return null;\n  return /*#__PURE__*/React.createElement(\"p\", null, \"No items exist\");\n};\n\nEmptyStateIndicator.propTypes = {\n  /** channel | message */\n  listType: PropTypes.string.isRequired\n};\nvar DefaultEmptyStateIndicator = /*#__PURE__*/React.memo(EmptyStateIndicator); // @ts-check\n\n/**\n * @param {string} cid\n * @param {import('stream-chat').Channel[]} channels\n */\n\nvar moveChannelUp = function moveChannelUp(cid, channels) {\n  // get channel index\n  var channelIndex = channels.findIndex(function (channel) {\n    return channel.cid === cid;\n  });\n  if (channelIndex <= 0) return channels; // get channel from channels\n\n  var channel = channels[channelIndex]; // remove channel from current position\n\n  channels.splice(channelIndex, 1); // add channel at the start\n\n  channels.unshift(channel);\n  return _toConsumableArray(channels);\n};\n/**\n * @param {import('stream-chat').StreamChat} client\n * @param {string} type\n * @param {string} [id]\n */\n\n\nvar getChannel = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(client, type, id) {\n    var channel;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            channel = client.channel(type, id);\n            _context.next = 3;\n            return channel.watch();\n\n          case 3:\n            return _context.abrupt(\"return\", channel);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getChannel(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar MAX_QUERY_CHANNELS_LIMIT = 30; // @ts-check\n\n/**\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {boolean} [lockChannelOrder]\n */\n\nvar useMessageNewListener = function useMessageNewListener(setChannels) {\n  var lockChannelOrder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = function handleEvent(e) {\n      setChannels(function (channels) {\n        if (!lockChannelOrder) return moveChannelUp(e.cid, channels);\n        return channels;\n      });\n    };\n\n    client.on('message.new', handleEvent);\n    return function () {\n      client.off('message.new', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [lockChannelOrder]);\n};\n/**\n * @typedef {import('stream-chat').Event<string>} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\n\n\nvar useNotificationMessageNewListener = function useNotificationMessageNewListener(setChannels, customHandler) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var _e$channel;\n\n        var channel;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(customHandler && typeof customHandler === 'function')) {\n                  _context.next = 4;\n                  break;\n                }\n\n                customHandler(setChannels, e);\n                _context.next = 9;\n                break;\n\n              case 4:\n                if (!((_e$channel = e.channel) === null || _e$channel === void 0 ? void 0 : _e$channel.type)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 7;\n                return getChannel(client, e.channel.type, e.channel.id);\n\n              case 7:\n                channel = _context.sent; // move channel to starting position\n\n                setChannels(function (channels) {\n                  return uniqBy([channel].concat(_toConsumableArray(channels)), 'cid');\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function handleEvent(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    client.on('notification.message_new', handleEvent);\n    return function () {\n      client.off('notification.message_new', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n/**\n * @typedef {import('stream-chat').Event<string>} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\n\n\nvar useNotificationAddedToChannelListener = function useNotificationAddedToChannelListener(setChannels, customHandler) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var _e$channel;\n\n        var channel;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(customHandler && typeof customHandler === 'function')) {\n                  _context.next = 4;\n                  break;\n                }\n\n                customHandler(setChannels, e);\n                _context.next = 9;\n                break;\n\n              case 4:\n                if (!((_e$channel = e.channel) === null || _e$channel === void 0 ? void 0 : _e$channel.type)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 7;\n                return getChannel(client, e.channel.type, e.channel.id);\n\n              case 7:\n                channel = _context.sent;\n                setChannels(function (channels) {\n                  return uniqBy([channel].concat(_toConsumableArray(channels)), 'cid');\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function handleEvent(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    client.on('notification.added_to_channel', handleEvent);\n    return function () {\n      client.off('notification.added_to_channel', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n}; // @ts-check\n\n/**\n * @typedef {import('stream-chat').Event<string>} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\n\n\nvar useNotificationRemovedFromChannelListener = function useNotificationRemovedFromChannelListener(setChannels, customHandler) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = function handleEvent(e) {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else {\n        setChannels(function (channels) {\n          return channels.filter(function (channel) {\n            var _e$channel;\n\n            return channel.cid !== ((_e$channel = e.channel) === null || _e$channel === void 0 ? void 0 : _e$channel.cid);\n          });\n        });\n      }\n    };\n\n    client.on('notification.removed_from_channel', handleEvent);\n    return function () {\n      client.off('notification.removed_from_channel', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n/**\n * @typedef {import('stream-chat').Event<string>} ChannelDeletedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelDeletedEvent) => void} [customHandler]\n */\n\n\nvar useChannelDeletedListener = function useChannelDeletedListener(setChannels, customHandler) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = function handleEvent(e) {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else {\n        setChannels(function (channels) {\n          var channelIndex = channels.findIndex(function (channel) {\n            var _e$channel;\n\n            return channel.cid === ((_e$channel = e.channel) === null || _e$channel === void 0 ? void 0 : _e$channel.cid);\n          });\n          if (channelIndex < 0) return _toConsumableArray(channels); // Remove the deleted channel from the list.s\n\n          channels.splice(channelIndex, 1); // eslint-disable-next-line consistent-return\n\n          return _toConsumableArray(channels);\n        });\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n    return function () {\n      client.off('channel.deleted', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n/**\n * @typedef {import('stream-chat').Event<string>} ChannelTruncatedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelTruncatedEvent) => void} [customHandler]\n * @param {() => void} [forceUpdate]\n */\n\n\nvar useChannelTruncatedListener = function useChannelTruncatedListener(setChannels, customHandler, forceUpdate) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = function handleEvent(e) {\n      setChannels(function (channels) {\n        return _toConsumableArray(channels);\n      });\n\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      }\n\n      forceUpdate === null || forceUpdate === void 0 ? void 0 : forceUpdate();\n    };\n\n    client.on('channel.truncated', handleEvent);\n    return function () {\n      client.off('channel.truncated', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n/**\n * @typedef {import('stream-chat').Event<string>} ChannelUpdatedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelUpdatedEvent) => void} [customHandler]\n * @param {() => void} [forceUpdate]\n */\n\n\nvar useChannelUpdatedListener = function useChannelUpdatedListener(setChannels, customHandler, forceUpdate) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = function handleEvent(e) {\n      setChannels(function (channels) {\n        var channelIndex = channels.findIndex(function (channel) {\n          var _e$channel;\n\n          return channel.cid === ((_e$channel = e.channel) === null || _e$channel === void 0 ? void 0 : _e$channel.cid);\n        });\n\n        if (channelIndex > -1 && e.channel) {\n          var newChannels = channels;\n          newChannels[channelIndex].data = e.channel;\n          return _toConsumableArray(newChannels);\n        }\n\n        return channels;\n      });\n      forceUpdate === null || forceUpdate === void 0 ? void 0 : forceUpdate();\n\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      }\n    };\n\n    client.on('channel.updated', handleEvent);\n    return function () {\n      client.off('channel.updated', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n}; // @ts-check\n\n/**\n * @param {() => void} [forceUpdate]\n */\n\n\nvar useConnectionRecoveredListener = function useConnectionRecoveredListener(forceUpdate) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    var handleEvent = function handleEvent() {\n      forceUpdate === null || forceUpdate === void 0 ? void 0 : forceUpdate();\n    };\n\n    client.on('connection.recovered', handleEvent);\n    return function () {\n      client.off('connection.recovered', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n/**\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n */\n\n\nvar useUserPresenceChangedListener = function useUserPresenceChangedListener(setChannels) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client;\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = function handleEvent(e) {\n      setChannels(function (channels) {\n        var newChannels = channels.map(function (channel) {\n          var _e$user;\n\n          if (!((_e$user = e.user) === null || _e$user === void 0 ? void 0 : _e$user.id) || !channel.state.members[e.user.id]) return channel;\n          channel.state.members.setIn([e.user.id, 'user'], e.user);\n          return channel;\n        });\n        return _toConsumableArray(newChannels);\n      });\n    };\n\n    client.on('user.presence.changed', handleEvent);\n    return function () {\n      client.off('user.presence.changed', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n\nfunction ownKeys$7(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$7(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$7(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$7(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\n * @typedef {import('stream-chat').Channel} Channel\n * @param {import('stream-chat').StreamChat} client\n * @param {import('../types').ChannelFilters} filters\n * @param {import('../types').ChannelSort} [sort]\n * @param {import('../types').ChannelOptions} [options]\n * @param {(channels: Channel[], setChannels: React.Dispatch<React.SetStateAction<Channel[]>>) => void} [activeChannelHandler]\n */\n\n\nvar usePaginatedChannels = function usePaginatedChannels(client, filters, sort, options, activeChannelHandler) {\n  var _useState = useState(\n  /** @type {Channel[]} */\n  []),\n      _useState2 = _slicedToArray(_useState, 2),\n      channels = _useState2[0],\n      setChannels = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loadingChannels = _useState4[0],\n      setLoadingChannels = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      refreshing = _useState6[0],\n      setRefreshing = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      offset = _useState8[0],\n      setOffset = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      error = _useState10[0],\n      setError = _useState10[1];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      hasNextPage = _useState12[0],\n      setHasNextPage = _useState12[1];\n  /**\n   * @param {string} [queryType]\n   */\n\n\n  var queryChannels = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(queryType) {\n      var _options$limit;\n\n      var newOptions, channelQueryResponse, newChannels;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (queryType === 'reload') {\n                setChannels([]);\n                setLoadingChannels(true);\n              }\n\n              setRefreshing(true);\n              newOptions = _objectSpread$7(_objectSpread$7({\n                offset: queryType === 'reload' ? 0 : offset\n              }, options), {}, {\n                limit: (_options$limit = options === null || options === void 0 ? void 0 : options.limit) !== null && _options$limit !== void 0 ? _options$limit : MAX_QUERY_CHANNELS_LIMIT\n              });\n              _context.prev = 3;\n              _context.next = 6;\n              return client.queryChannels(filters, sort || {}, newOptions);\n\n            case 6:\n              channelQueryResponse = _context.sent;\n\n              if (queryType === 'reload') {\n                newChannels = channelQueryResponse;\n              } else {\n                newChannels = [].concat(_toConsumableArray(channels), _toConsumableArray(channelQueryResponse));\n              }\n\n              setChannels(newChannels);\n              setRefreshing(false);\n              setHasNextPage(channelQueryResponse.length >= newOptions.limit); // Set active channel only after first page.\n\n              if (offset === 0 && activeChannelHandler) {\n                activeChannelHandler(newChannels, setChannels);\n              }\n\n              setOffset(newChannels.length);\n              _context.next = 19;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](3);\n              console.warn(_context.t0);\n              setError(true);\n\n            case 19:\n              setLoadingChannels(false);\n              setRefreshing(false);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 15]]);\n    }));\n\n    return function queryChannels(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var loadNextPage = function loadNextPage() {\n    queryChannels();\n  };\n\n  useEffect(function () {\n    queryChannels('reload'); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filters]);\n  return {\n    channels,\n    loadNextPage,\n    hasNextPage,\n    status: {\n      loadingChannels,\n      refreshing,\n      error\n    },\n    setChannels\n  };\n}; // @ts-check\n\n/**\n * @param {React.MutableRefObject<HTMLDivElement | null>} channelListRef\n * @param {boolean} navOpen\n * @param {() => void} [closeMobileNav]\n */\n\n\nvar useMobileNavigation = function useMobileNavigation(channelListRef, navOpen, closeMobileNav) {\n  useEffect(function () {\n    /** @param {MouseEvent} e */\n    var handleClickOutside = function handleClickOutside(e) {\n      if (channelListRef.current && !channelListRef.current.contains(\n      /** @type {Node | null} */\n      e.target) && navOpen) {\n        closeMobileNav === null || closeMobileNav === void 0 ? void 0 : closeMobileNav();\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n    return function () {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [navOpen, channelListRef, closeMobileNav]);\n};\n\nfunction ownKeys$8(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$8(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$8(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$8(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type {React.FC<import('../types').ChannelListProps>}\n */\n\n\nvar ChannelList = function ChannelList(props) {\n  var _useContext = useContext(ChatContext),\n      client = _useContext.client,\n      setActiveChannel = _useContext.setActiveChannel,\n      _useContext$navOpen = _useContext.navOpen,\n      navOpen = _useContext$navOpen === void 0 ? false : _useContext$navOpen,\n      closeMobileNav = _useContext.closeMobileNav,\n      channel = _useContext.channel,\n      theme = _useContext.theme;\n\n  var channelListRef = useRef(\n  /** @type {HTMLDivElement | null} */\n  null);\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      channelUpdateCount = _useState2[0],\n      setChannelUpdateCount = _useState2[1];\n  /**\n   * Set a channel with id {customActiveChannel} as active and move it to the top of the list.\n   * If customActiveChannel prop is absent, then set the first channel in list as active channel.\n   * @param {import('stream-chat').Channel[]} channels\n   * @param {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} setChannels\n   */\n\n\n  var activeChannelHandler = function activeChannelHandler(channels, setChannels) {\n    var _props$setActiveChann = props.setActiveChannelOnMount,\n        setActiveChannelOnMount = _props$setActiveChann === void 0 ? true : _props$setActiveChann,\n        customActiveChannel = props.customActiveChannel,\n        watchers = props.watchers,\n        _props$options = props.options,\n        options = _props$options === void 0 ? {} : _props$options;\n\n    if (!channels || channels.length === 0 || channels.length > (options.limit || MAX_QUERY_CHANNELS_LIMIT)) {\n      return;\n    }\n\n    if (customActiveChannel) {\n      var customActiveChannelObject = channels.find(function (chan) {\n        return chan.id === customActiveChannel;\n      });\n\n      if (customActiveChannelObject) {\n        setActiveChannel === null || setActiveChannel === void 0 ? void 0 : setActiveChannel(customActiveChannelObject, watchers);\n        var newChannels = moveChannelUp(customActiveChannelObject.cid, channels);\n        setChannels(newChannels);\n      }\n\n      return;\n    }\n\n    if (setActiveChannelOnMount) {\n      setActiveChannel === null || setActiveChannel === void 0 ? void 0 : setActiveChannel(channels[0], watchers);\n    }\n  }; // When channel list (channels array) is updated without any shallow changes (or with only deep changes), then we want\n  // to force the channel preview to re-render.\n  // This happens in case of event channel.updated, channel.truncated etc. Inner properties of channel is updated but\n  // react renderer will only make shallow comparison and choose to not to re-render the UI.\n  // By updating the dummy prop - channelUpdateCount, we can force this re-render.\n\n\n  var forceUpdate = function forceUpdate() {\n    setChannelUpdateCount(function (count) {\n      return count + 1;\n    });\n  };\n\n  var _usePaginatedChannels = usePaginatedChannels(client, props.filters || {}, props.sort || {}, props.options || {}, activeChannelHandler),\n      channels = _usePaginatedChannels.channels,\n      loadNextPage = _usePaginatedChannels.loadNextPage,\n      hasNextPage = _usePaginatedChannels.hasNextPage,\n      status = _usePaginatedChannels.status,\n      setChannels = _usePaginatedChannels.setChannels;\n\n  useMobileNavigation(channelListRef, navOpen, closeMobileNav); // All the event listeners\n\n  useMessageNewListener(setChannels, props.lockChannelOrder);\n  useNotificationMessageNewListener(setChannels, props.onMessageNew);\n  useNotificationAddedToChannelListener(setChannels, props.onAddedToChannel);\n  useNotificationRemovedFromChannelListener(setChannels, props.onRemovedFromChannel);\n  useChannelDeletedListener(setChannels, props.onChannelDeleted);\n  useChannelTruncatedListener(setChannels, props.onChannelTruncated, forceUpdate);\n  useChannelUpdatedListener(setChannels, props.onChannelUpdated, forceUpdate);\n  useConnectionRecoveredListener(forceUpdate);\n  useUserPresenceChangedListener(setChannels); // If the active channel is deleted, then unset the active channel.\n\n  useEffect(function () {\n    /** @param {import('stream-chat').Event<string>} e */\n    var handleEvent = function handleEvent(e) {\n      var _e$channel;\n\n      if (((_e$channel = e.channel) === null || _e$channel === void 0 ? void 0 : _e$channel.cid) === (channel === null || channel === void 0 ? void 0 : channel.cid)) {\n        setActiveChannel === null || setActiveChannel === void 0 ? void 0 : setActiveChannel();\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n    return function () {\n      client.off('channel.deleted', handleEvent);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // renders the channel preview or item\n\n  /** @param {import('stream-chat').Channel} item */\n\n  var renderChannel = function renderChannel(item) {\n    if (!item) return null;\n    var _props$Preview = props.Preview,\n        Preview = _props$Preview === void 0 ? ChannelPreviewLastMessage$1 : _props$Preview,\n        _props$watchers = props.watchers,\n        watchers = _props$watchers === void 0 ? {} : _props$watchers;\n    var previewProps = {\n      channel: item,\n      Preview,\n      activeChannel: channel,\n      setActiveChannel,\n      watchers,\n      key: item.id,\n      // To force the update of preview component upon channel update.\n      channelUpdateCount\n    };\n    return smartRender(ChannelPreview, _objectSpread$8({}, previewProps));\n  }; // renders the empty state indicator (when there are no channels)\n\n\n  var renderEmptyStateIndicator = function renderEmptyStateIndicator() {\n    var _props$EmptyStateIndi = props.EmptyStateIndicator,\n        EmptyStateIndicator = _props$EmptyStateIndi === void 0 ? DefaultEmptyStateIndicator : _props$EmptyStateIndi;\n    return /*#__PURE__*/React.createElement(EmptyStateIndicator, {\n      listType: \"channel\"\n    });\n  }; // renders the list.\n\n\n  var renderList = function renderList() {\n    var _props$List = props.List,\n        List = _props$List === void 0 ? ChannelListTeam : _props$List,\n        _props$Paginator = props.Paginator,\n        Paginator = _props$Paginator === void 0 ? LoadMorePaginator$1 : _props$Paginator,\n        showSidebar = props.showSidebar,\n        _props$LoadingIndicat = props.LoadingIndicator,\n        LoadingIndicator = _props$LoadingIndicat === void 0 ? LoadingChannels$1 : _props$LoadingIndicat,\n        _props$LoadingErrorIn = props.LoadingErrorIndicator,\n        LoadingErrorIndicator = _props$LoadingErrorIn === void 0 ? ChatDown$1 : _props$LoadingErrorIn;\n    return /*#__PURE__*/React.createElement(List, {\n      loading: status.loadingChannels,\n      error: status.error,\n      showSidebar: showSidebar,\n      LoadingIndicator: LoadingIndicator,\n      LoadingErrorIndicator: LoadingErrorIndicator\n    }, !channels || channels.length === 0 ? renderEmptyStateIndicator() : smartRender(Paginator, {\n      loadNextPage,\n      hasNextPage,\n      refreshing: status.refreshing,\n      children: channels.map(function (item) {\n        return renderChannel(item);\n      })\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat str-chat-channel-list \".concat(theme, \" \").concat(navOpen ? 'str-chat-channel-list--open' : ''),\n    ref: channelListRef\n  }, renderList()));\n};\n\nChannelList.propTypes = {\n  /** Indicator for Empty State */\n  EmptyStateIndicator:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').EmptyStateIndicatorProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n   * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n   * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n   *\n   * The Preview to use, defaults to ChannelPreviewLastMessage\n   * */\n  Preview:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').ChannelPreviewUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Loading indicator UI Component. It will be displayed until the channels are\n   * being queried from API. Once the channels are loaded/queried, loading indicator is removed\n   * and replaced with children of the Channel component.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').LoadingIndicatorProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Error indicator UI Component. It will be displayed if there is any error if loading the channels.\n   * This error could be related to network or failing API.\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').ChatDownProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Custom UI Component for container of list of channels. Note that, list (UI component) of channels is passed\n   * to this component as children. This component is for the purpose of adding header to channel list or styling container\n   * for list of channels.\n   *\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelListTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListTeam.js) (default)\n   * 2. [ChannelListMessenger](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListMessenger.js)\n   *\n   * It has access to some additional props:\n   *\n   * - `setActiveChannel` {function} Check [chat context](https://getstream.github.io/stream-chat-react/#chat)\n   * - `activeChannel` Currently active channel object\n   * - `channels` {array} List of channels in channel list\n   */\n  List:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').ChannelListUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Paginator component for channels. It contains all the pagination logic such as\n   * - fetching next page of results when needed e.g., when scroll reaches the end of list\n   * - UI to display loading indicator when next page is being loaded\n   * - call to action button to trigger loading of next page.\n   *\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [LoadMorePaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadMorePaginator.js)\n   * 2. [InfiniteScrollPaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/InfiniteScrollPaginator.js)\n   */\n  Paginator:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').PaginatorProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Function that overrides default behaviour when new message is received on channel that is not being watched\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.message_new` event\n   * */\n  onMessageNew: PropTypes.func,\n\n  /**\n   * Function that overrides default behaviour when users gets added to a channel\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.added_to_channel` event\n   * */\n  onAddedToChannel: PropTypes.func,\n\n  /**\n   * Function that overrides default behaviour when users gets removed from a channel\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.removed_from_channel` event\n   * */\n  onRemovedFromChannel: PropTypes.func,\n\n  /**\n   * Function that overrides default behaviour when channel gets updated\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.channel_updated` event\n   * */\n  onChannelUpdated: PropTypes.func,\n\n  /**\n   * Function to customize behaviour when channel gets truncated\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `channel.truncated` event\n   * */\n  onChannelTruncated: PropTypes.func,\n\n  /**\n   * Function that overrides default behaviour when channel gets deleted. In absence of this prop, channel will be removed from the list.\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `channel.deleted` event\n   * */\n  onChannelDeleted: PropTypes.func,\n\n  /**\n   * Object containing query filters\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for filter.\n   * */\n  filters:\n  /** @type {PropTypes.Validator<import('../types').ChannelFilters>} */\n  PropTypes.object,\n\n  /**\n   * Object containing query options\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for options.\n   * */\n  options: PropTypes.object,\n\n  /**\n   * Object containing sort parameters\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for sort.\n   * */\n  sort:\n  /** @type {PropTypes.Validator<import('../types').ChannelSort>} */\n  PropTypes.object,\n\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/channel_pagination/?language=js) for a list of available fields for sort.\n   * */\n  watchers:\n  /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */\n  PropTypes.object,\n\n  /**\n   * Set a Channel (of this id) to be active and move it to the top of the list of channels by ID.\n   * */\n  customActiveChannel: PropTypes.string,\n\n  /**\n   * Last channel will be set as active channel if true, defaults to true\n   */\n  setActiveChannelOnMount: PropTypes.bool,\n\n  /**\n   * If true, channels won't be dynamically sorted by most recent message.\n   */\n  lockChannelOrder: PropTypes.bool\n};\nvar ChannelList$1 = /*#__PURE__*/React.memo(ChannelList); // @ts-check\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type React.FC<import('../types').ChannelListUIComponentProps>\n */\n\nvar ChannelListMessenger = function ChannelListMessenger(_ref) {\n  var _ref$error = _ref.error,\n      error = _ref$error === void 0 ? false : _ref$error,\n      loading = _ref.loading,\n      _ref$LoadingErrorIndi = _ref.LoadingErrorIndicator,\n      LoadingErrorIndicator = _ref$LoadingErrorIndi === void 0 ? ChatDown$1 : _ref$LoadingErrorIndi,\n      _ref$LoadingIndicator = _ref.LoadingIndicator,\n      LoadingIndicator = _ref$LoadingIndicator === void 0 ? LoadingChannels$1 : _ref$LoadingIndicator,\n      children = _ref.children;\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(LoadingErrorIndicator, {\n      type: \"Connection Error\"\n    });\n  }\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(LoadingIndicator, null);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-messenger\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-list-messenger__main\"\n  }, children));\n};\n\nChannelListMessenger.propTypes = {\n  /** When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js) */\n  loading: PropTypes.bool,\n\n  /** When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js) */\n  error: PropTypes.bool,\n\n  /**\n   * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').LoadingIndicatorProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * Error indicator UI Component. It will be displayed if `error` prop is true\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator:\n  /** @type {PropTypes.Validator<React.ElementType<import('../types').ChatDownProps>>} */\n  PropTypes.elementType\n}; // @ts-check\n\n/**\n * @type {React.FC}\n */\n\nvar ChannelSearch = function ChannelSearch() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__channel-search\"\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search\"\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"18\",\n    height: \"17\",\n    viewBox: \"0 0 18 17\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\",\n    fillRule: \"evenodd\"\n  }))));\n};\n\nvar ChannelSearch$1 = /*#__PURE__*/React.memo(ChannelSearch);\n\nfunction ownKeys$9(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$9(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$9(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$9(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\n * Chat - Wrapper component for Chat. The needs to be placed around any other chat components.\n * This Chat component provides the ChatContext to all other components.\n *\n * The ChatContext provides the following props:\n *\n * - client (the client connection)\n * - channels (the list of channels)\n * - setActiveChannel (a function to set the currently active channel)\n * - channel (the currently active channel)\n *\n * It also exposes the withChatContext HOC which you can use to consume the ChatContext\n *\n * @example ../../docs/Chat.md\n * @typedef {import('stream-chat').Channel | undefined} ChannelState\n * @type {React.FC<{ client: import('stream-chat').StreamChat, theme?: string, i18nInstance?: Streami18n, initialNavOpen?: boolean }>}\n */\n\n\nvar Chat = function Chat(_ref) {\n  var _client$user;\n\n  var client = _ref.client,\n      _ref$theme = _ref.theme,\n      theme = _ref$theme === void 0 ? 'messaging light' : _ref$theme,\n      i18nInstance = _ref.i18nInstance,\n      _ref$initialNavOpen = _ref.initialNavOpen,\n      initialNavOpen = _ref$initialNavOpen === void 0 ? true : _ref$initialNavOpen,\n      children = _ref.children;\n\n  var _useState = useState(\n  /** @type { Required<import('../types').TranslationContextValue>} */\n  {\n    t:\n    /** @param {string} key */\n    function t(key) {\n      return key;\n    },\n    tDateTimeParser: function tDateTimeParser(input) {\n      return Dayjs(input);\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      translators = _useState2[0],\n      setTranslators = _useState2[1];\n\n  var _useState3 = useState(\n  /** @type {import('stream-chat').Mute[]} */\n  []),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mutes = _useState4[0],\n      setMutes = _useState4[1];\n\n  var _useState5 = useState(initialNavOpen),\n      _useState6 = _slicedToArray(_useState5, 2),\n      navOpen = _useState6[0],\n      setNavOpen = _useState6[1];\n\n  var _useState7 = useState(\n  /** @type {ChannelState} */\n  undefined),\n      _useState8 = _slicedToArray(_useState7, 2),\n      channel = _useState8[0],\n      setChannel = _useState8[1];\n\n  var openMobileNav = function openMobileNav() {\n    return setTimeout(function () {\n      return setNavOpen(true);\n    }, 100);\n  };\n\n  var closeMobileNav = function closeMobileNav() {\n    return setNavOpen(false);\n  };\n\n  var clientMutes = client === null || client === void 0 ? void 0 : (_client$user = client.user) === null || _client$user === void 0 ? void 0 : _client$user.mutes;\n  useEffect(function () {\n    setMutes(clientMutes || []);\n    /** @param {import('stream-chat').Event<string>} e */\n\n    var handleEvent = function handleEvent(e) {\n      var _e$me;\n\n      if (e.type === 'notification.mutes_updated') setMutes(((_e$me = e.me) === null || _e$me === void 0 ? void 0 : _e$me.mutes) || []);\n    };\n\n    if (client) client.on(handleEvent);\n    return function () {\n      return client && client.off(handleEvent);\n    };\n  }, [client, clientMutes]);\n  useEffect(function () {\n    var streami18n;\n    if (i18nInstance instanceof Streami18n) streami18n = i18nInstance;else streami18n = new Streami18n({\n      language: 'en'\n    });\n    streami18n.registerSetLanguageCallback(function (t) {\n      return setTranslators(function (prevTranslator) {\n        return _objectSpread$9(_objectSpread$9({}, prevTranslator), {}, {\n          t\n        });\n      });\n    });\n    streami18n.getTranslators().then(function (translator) {\n      if (translator) setTranslators(translator);\n    });\n  }, [i18nInstance]);\n  var setActiveChannel = useCallback(\n  /*#__PURE__*/\n\n  /**\n   * @param {ChannelState} activeChannel\n   * @param {{ limit?: number; offset?: number }} [watchers]\n   * @param {React.BaseSyntheticEvent} [e]\n   */\n  function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(activeChannel) {\n      var watchers,\n          e,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              watchers = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n              e = _args.length > 2 ? _args[2] : undefined;\n              if (e && e.preventDefault) e.preventDefault();\n\n              if (!(activeChannel && Object.keys(watchers).length)) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 6;\n              return activeChannel.query({\n                watch: true,\n                watchers\n              });\n\n            case 6:\n              setChannel(activeChannel);\n              closeMobileNav();\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), []);\n  if (!translators.t) return null;\n  return /*#__PURE__*/React.createElement(ChatContext.Provider, {\n    value: {\n      client,\n      theme,\n      channel,\n      mutes,\n      navOpen,\n      setActiveChannel,\n      openMobileNav,\n      closeMobileNav\n    }\n  }, /*#__PURE__*/React.createElement(TranslationContext.Provider, {\n    value: translators\n  }, children));\n};\n\nChat.propTypes = {\n  /** The StreamChat client object */\n  client:\n  /** @type {PropTypes.Validator<import('stream-chat').StreamChat>} */\n  PropTypes.object.isRequired,\n\n  /**\n   *\n   * Theme could be used for custom styling of the components.\n   *\n   * You can override the classes used in our components under parent theme class.\n   *\n   * e.g. If you want to build a theme where background of message is black\n   *\n   * ```\n   *  <Chat client={client} theme={demo}>\n   *    <Channel>\n   *      <MessageList />\n   *    </Channel>\n   *  </Chat>\n   * ```\n   *\n   * ```scss\n   *  .demo.str-chat {\n   *    .str-chat__message-simple {\n   *      &-text-inner {\n   *        background-color: black;\n   *      }\n   *    }\n   *  }\n   * ```\n   *\n   * Built in available themes:\n   *\n   *  - `messaging light`\n   *  - `messaging dark`\n   *  - `team light`\n   *  - `team dark`\n   *  - `commerce light`\n   *  - `commerce dark`\n   *  - `livestream light`\n   *  - `livestream dark`\n   */\n  theme: PropTypes.string,\n\n  /** navOpen initial status */\n  initialNavOpen: PropTypes.bool\n}; // @ts-check\n\n/**\n * DateSeparator - A simple date separator\n *\n * @example ../../docs/DateSeparator.md\n * @type {React.FC<import('../types').DateSeparatorProps>}\n */\n\nvar DateSeparator = function DateSeparator(_ref) {\n  var _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'right' : _ref$position,\n      formatDate = _ref.formatDate,\n      date = _ref.date;\n\n  var _useContext = useContext(TranslationContext),\n      tDateTimeParser = _useContext.tDateTimeParser;\n\n  if (typeof date === 'string') return null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__date-separator\"\n  }, (position === 'right' || position === 'center') && /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"str-chat__date-separator-line\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__date-separator-date\"\n  }, formatDate ? formatDate(date) : tDateTimeParser(date.toISOString()).calendar()), (position === 'left' || position === 'center') && /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"str-chat__date-separator-line\"\n  }));\n};\n\nDateSeparator.propTypes = {\n  /** The date to format */\n  date: PropTypes.instanceOf(Date).isRequired,\n\n  /** Set the position of the date in the separator */\n  position: PropTypes.oneOf(['left', 'center', 'right']),\n\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate: PropTypes.func\n};\nvar DefaultDateSeparator = /*#__PURE__*/React.memo(DateSeparator); // @ts-check\n\n/**\n * EventComponent - Custom render component for system and channel event messages\n * @type {React.FC<import('../types').EventComponentProps>}\n */\n\nvar EventComponent = function EventComponent(_ref) {\n  var message = _ref.message;\n\n  var _useContext = useContext(TranslationContext),\n      tDateTimeParser = _useContext.tDateTimeParser;\n\n  var type = message.type,\n      text = message.text,\n      event = message.event,\n      created_at = message.created_at;\n  if (type === 'system') return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message--system\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message--system__text\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message--system__line\"\n  }), /*#__PURE__*/React.createElement(\"p\", null, text), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message--system__line\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__message--system__date\"\n  }, /*#__PURE__*/React.createElement(\"strong\", null, tDateTimeParser(created_at).format('dddd'), \" \"), \"at \", tDateTimeParser(created_at).format('hh:mm A')));\n\n  if (type === 'channel.event' && (event.type === 'member.removed' || event.type === 'member.added')) {\n    var name = event.user.name || event.user.id;\n    var sentence = \"\".concat(name, \" \").concat(event.type === 'member.added' ? 'has joined the chat' : 'was removed from the chat');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__event-component__channel-event\"\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      image: event.user.image,\n      name: name\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__event-component__channel-event__content\"\n    }, /*#__PURE__*/React.createElement(\"em\", {\n      className: \"str-chat__event-component__channel-event__sentence\"\n    }, sentence), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__event-component__channel-event__date\"\n    }, tDateTimeParser(created_at).format('LT'))));\n  }\n\n  return null;\n};\n\nEventComponent.propTypes = {\n  /** Message object */\n  // @ts-ignore\n  message: PropTypes.object.isRequired\n};\nvar EventComponent$1 = /*#__PURE__*/React.memo(EventComponent);\n\nfunction ownKeys$a(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$a(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$a(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$a(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\n * Prevents Chrome hangups\n * See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n * @param {Event} e\n */\n\n\nvar mousewheelListener = function mousewheelListener(e) {\n  if (e instanceof WheelEvent && e.deltaY === 1) {\n    e.preventDefault();\n  }\n};\n/**\n * @param {HTMLElement | Element | null} el\n * @returns {number}\n */\n\n\nvar calculateTopPosition = function calculateTopPosition(el) {\n  if (el instanceof HTMLElement) {\n    return el.offsetTop + calculateTopPosition(el.offsetParent);\n  }\n\n  return 0;\n};\n/**\n * Computes by recursively summing offsetTop until an element without offsetParent is reached\n * @param {HTMLElement} el\n * @param {number} scrollTop\n */\n\n\nvar calculateOffset = function calculateOffset(el, scrollTop) {\n  if (!el) {\n    return 0;\n  }\n\n  return calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n};\n/** @param {import(\"types\").InfiniteScrollProps} props */\n\n\nvar InfiniteScroll = function InfiniteScroll(_ref) {\n  var children = _ref.children,\n      _ref$element = _ref.element,\n      element = _ref$element === void 0 ? 'div' : _ref$element,\n      _ref$hasMore = _ref.hasMore,\n      hasMore = _ref$hasMore === void 0 ? false : _ref$hasMore,\n      _ref$initialLoad = _ref.initialLoad,\n      initialLoad = _ref$initialLoad === void 0 ? true : _ref$initialLoad,\n      _ref$isReverse = _ref.isReverse,\n      isReverse = _ref$isReverse === void 0 ? false : _ref$isReverse,\n      loader = _ref.loader,\n      loadMore = _ref.loadMore,\n      _ref$threshold = _ref.threshold,\n      threshold = _ref$threshold === void 0 ? 250 : _ref$threshold,\n      _ref$useCapture = _ref.useCapture,\n      useCapture = _ref$useCapture === void 0 ? false : _ref$useCapture,\n      _ref$useWindow = _ref.useWindow,\n      useWindow = _ref$useWindow === void 0 ? true : _ref$useWindow,\n      _ref$isLoading = _ref.isLoading,\n      isLoading = _ref$isLoading === void 0 ? false : _ref$isLoading,\n      listenToScroll = _ref.listenToScroll,\n      elementProps = _objectWithoutProperties(_ref, [\"children\", \"element\", \"hasMore\", \"initialLoad\", \"isReverse\", \"loader\", \"loadMore\", \"threshold\", \"useCapture\", \"useWindow\", \"isLoading\", \"listenToScroll\"]);\n\n  var scrollComponent = useRef(\n  /** @type {HTMLElement | null} */\n  null);\n  var scrollListener = useCallback(function () {\n    var el = scrollComponent.current;\n    if (!el) return;\n    var parentElement = el.parentElement;\n    var offset = 0;\n    var reverseOffset = 0;\n\n    if (useWindow) {\n      var doc = document.documentElement || document.body.parentNode || document.body;\n      var scrollTop = window.pageYOffset !== undefined ? window.pageYOffset : doc.scrollTop;\n      offset = calculateOffset(el, scrollTop);\n      reverseOffset = scrollTop;\n    } else if (parentElement) {\n      offset = el.scrollHeight - parentElement.scrollTop - parentElement.clientHeight;\n      reverseOffset = parentElement.scrollTop;\n    }\n\n    if (listenToScroll) listenToScroll(offset, reverseOffset); // Here we make sure the element is visible as well as checking the offset\n\n    if ((isReverse ? reverseOffset : offset) < Number(threshold) && el.offsetParent !== null && typeof loadMore === 'function') {\n      loadMore();\n    }\n  }, [useWindow, isReverse, threshold, listenToScroll, loadMore]);\n  useEffect(function () {\n    var _scrollComponent$curr;\n\n    var scrollEl = useWindow ? window : (_scrollComponent$curr = scrollComponent.current) === null || _scrollComponent$curr === void 0 ? void 0 : _scrollComponent$curr.parentNode;\n\n    if (!hasMore || isLoading || !scrollEl) {\n      return function () {};\n    }\n\n    scrollEl.addEventListener('scroll', scrollListener, useCapture);\n    scrollEl.addEventListener('resize', scrollListener, useCapture);\n\n    if (initialLoad) {\n      scrollListener();\n    }\n\n    return function () {\n      scrollEl.removeEventListener('scroll', scrollListener, useCapture);\n      scrollEl.removeEventListener('resize', scrollListener, useCapture);\n    };\n  }, [hasMore, initialLoad, isLoading, scrollListener, useCapture, useWindow]);\n  useEffect(function () {\n    var _scrollComponent$curr2;\n\n    var scrollEl = useWindow ? window : (_scrollComponent$curr2 = scrollComponent.current) === null || _scrollComponent$curr2 === void 0 ? void 0 : _scrollComponent$curr2.parentNode;\n    if (!scrollEl) return function () {};\n    scrollEl.addEventListener('mousewheel', mousewheelListener, useCapture);\n    return function () {\n      return scrollEl.removeEventListener('mousewheel', mousewheelListener, useCapture);\n    };\n  }, [useCapture, useWindow]);\n\n  var attributes = _objectSpread$a(_objectSpread$a({}, elementProps), {}, {\n    /** @param {HTMLElement} e */\n    ref: function ref(e) {\n      scrollComponent.current = e;\n    }\n  });\n\n  var childrenArray = [children];\n\n  if (isLoading && loader) {\n    if (isReverse) {\n      childrenArray.unshift(loader);\n    } else {\n      childrenArray.push(loader);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(element, attributes, childrenArray);\n};\n\nInfiniteScroll.propTypes = {\n  element: PropTypes.elementType,\n  hasMore: PropTypes.bool,\n  initialLoad: PropTypes.bool,\n  isReverse: PropTypes.bool,\n  loader: PropTypes.node,\n  loadMore: PropTypes.func.isRequired,\n  pageStart: PropTypes.number,\n  isLoading: PropTypes.bool,\n  threshold: PropTypes.number,\n  useCapture: PropTypes.bool,\n  useWindow: PropTypes.bool\n}; // @ts-check\n\n/**\n * @type { React.FC<import('../types').InfiniteScrollPaginatorProps>}\n */\n\nvar InfiniteScrollPaginator = function InfiniteScrollPaginator(_ref) {\n  var _ref$LoadingIndicator = _ref.LoadingIndicator,\n      LoadingIndicator = _ref$LoadingIndicator === void 0 ? LoadingIndicator$1 : _ref$LoadingIndicator,\n      loadNextPage = _ref.loadNextPage,\n      hasNextPage = _ref.hasNextPage,\n      refreshing = _ref.refreshing,\n      reverse = _ref.reverse,\n      threshold = _ref.threshold,\n      children = _ref.children;\n  return /*#__PURE__*/React.createElement(InfiniteScroll, {\n    loadMore: loadNextPage,\n    hasMore: hasNextPage,\n    isLoading: refreshing,\n    isReverse: reverse,\n    threshold: threshold,\n    useWindow: false,\n    loader: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"str-chat__infinite-scroll-paginator\",\n      key: \"loadingindicator\"\n    }, /*#__PURE__*/React.createElement(LoadingIndicator, null))\n  }, children);\n};\n\nInfiniteScrollPaginator.propTypes = {\n  /** callback to load the next page */\n  loadNextPage: PropTypes.func.isRequired,\n\n  /** indicates if there is a next page to load */\n  hasNextPage: PropTypes.bool,\n\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: PropTypes.bool,\n\n  /** display the items in opposite order */\n  reverse: PropTypes.bool,\n\n  /** Offset from when to start the loadNextPage call */\n  threshold: PropTypes.number,\n\n  /** The loading indicator to use */\n  // @ts-ignore\n  LoadingIndicator: PropTypes.elementType\n};\n/** @type {React.FC<import(\"types\").InfiniteScrollProps>} */\n\nvar ReverseInfiniteScroll = function ReverseInfiniteScroll(props) {\n  return /*#__PURE__*/React.createElement(InfiniteScroll, _extends({}, props, {\n    isReverse: true\n  }));\n};\n\nvar Center = function Center(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__list__center\"\n  }, children);\n};\n\nvar Center$1 = /*#__PURE__*/React.memo(Center); // @ts-check\n\n/** @type {React.FC<import('../types').MessageNotificationProps>} */\n\nvar MessageNotification = function MessageNotification(_ref) {\n  var showNotification = _ref.showNotification,\n      onClick = _ref.onClick,\n      children = _ref.children;\n  if (!showNotification) return null;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"message-notification\",\n    className: \"str-chat__message-notification\",\n    onClick: onClick\n  }, children);\n};\n\nMessageNotification.defaultProps = {\n  showNotification: true\n};\nMessageNotification.propTypes = {\n  /** If we should show the notification or not */\n  showNotification: PropTypes.bool.isRequired,\n\n  /** Onclick handler */\n  onClick: PropTypes.func.isRequired\n};\nvar MessageNotification$1 = /*#__PURE__*/React.memo(MessageNotification);\n\nvar CustomNotification = function CustomNotification(_ref) {\n  var children = _ref.children,\n      active = _ref.active,\n      type = _ref.type;\n  if (!active) return null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__custom-notification notification-\".concat(type),\n    \"data-testid\": \"custom-notification\"\n  }, children);\n};\n\nCustomNotification.propTypes = {\n  active: PropTypes.bool,\n  type: PropTypes.string\n};\nvar CustomNotification$1 = /*#__PURE__*/React.memo(CustomNotification);\n\nvar getLastReceived = function getLastReceived(messages) {\n  for (var i = messages.length - 1; i > 0; i -= 1) {\n    if (messages[i].status === 'received') return messages[i].id;\n  }\n\n  return null;\n};\n\nvar getReadStates = function getReadStates(messages, read) {\n  // create object with empty array for each message id\n  var readData = {};\n  Object.values(read).forEach(function (readState) {\n    if (!readState.last_read) return;\n    var userLastReadMsgId;\n    messages.forEach(function (msg) {\n      if (msg.updated_at < readState.last_read) userLastReadMsgId = msg.id;\n    });\n\n    if (userLastReadMsgId) {\n      if (!readData[userLastReadMsgId]) readData[userLastReadMsgId] = [];\n      readData[userLastReadMsgId].push(readState.user);\n    }\n  });\n  return readData;\n};\n\nvar insertDates = function insertDates(messages) {\n  var newMessages = [];\n\n  for (var i = 0, l = messages.length; i < l; i += 1) {\n    var message = messages[i];\n\n    if (message.type === 'message.read') {\n      newMessages.push(message);\n      continue;\n    }\n\n    var messageDate = message.created_at.toDateString();\n    var prevMessageDate = messageDate;\n\n    if (i > 0) {\n      prevMessageDate = messages[i - 1].created_at.toDateString();\n    }\n\n    if (i === 0 || messageDate !== prevMessageDate) {\n      newMessages.push({\n        type: 'message.date',\n        date: message.created_at\n      }, message);\n    } else {\n      newMessages.push(message);\n    }\n  }\n\n  return newMessages;\n};\n\nvar insertIntro = function insertIntro(messages, headerPosition) {\n  var newMessages = messages; // if no headerPosition is set, HeaderComponent will go at the top\n\n  if (!headerPosition) {\n    newMessages.unshift({\n      type: 'channel.intro'\n    });\n    return newMessages;\n  } // if no messages, intro get's inserted\n\n\n  if (!newMessages.length) {\n    newMessages.unshift({\n      type: 'channel.intro'\n    });\n    return newMessages;\n  } // else loop over the messages\n\n\n  for (var i = 0, l = messages.length; i < l; i += 1) {\n    var message = messages[i];\n    var messageTime = message.created_at ? message.created_at.getTime() : null;\n    var nextMessageTime = messages[i + 1] && messages[i + 1].created_at ? messages[i + 1].created_at.getTime() : null; // headerposition is smaller than message time so comes after;\n\n    if (messageTime < headerPosition) {\n      // if header position is also smaller than message time continue;\n      if (nextMessageTime < headerPosition) {\n        if (messages[i + 1] && messages[i + 1].type === 'message.date') continue;\n\n        if (!nextMessageTime) {\n          newMessages.push({\n            type: 'channel.intro'\n          });\n          return newMessages;\n        }\n\n        continue;\n      } else {\n        newMessages.splice(i + 1, 0, {\n          type: 'channel.intro'\n        });\n        return newMessages;\n      }\n    }\n  }\n\n  return newMessages;\n};\n\nvar getGroupStyles = function getGroupStyles(message, previousMessage, nextMessage, noGroupByUser) {\n  if (message.type === 'message.date') return '';\n  if (message.type === 'channel.event') return '';\n  if (message.type === 'channel.intro') return '';\n  if (noGroupByUser || message.attachments.length !== 0) return 'single';\n  var isTopMessage = !previousMessage || previousMessage.type === 'channel.intro' || previousMessage.type === 'message.date' || previousMessage.type === 'system' || previousMessage.type === 'channel.event' || previousMessage.attachments.length !== 0 || message.user.id !== previousMessage.user.id || previousMessage.type === 'error' || previousMessage.deleted_at;\n  var isBottomMessage = !nextMessage || nextMessage.type === 'message.date' || nextMessage.type === 'system' || nextMessage.type === 'channel.event' || nextMessage.type === 'channel.intro' || nextMessage.attachments.length !== 0 || message.user.id !== nextMessage.user.id || nextMessage.type === 'error' || nextMessage.deleted_at;\n\n  if (!isTopMessage && !isBottomMessage) {\n    if (message.deleted_at || message.type === 'error') return 'single';\n    return 'middle';\n  }\n\n  if (isBottomMessage) {\n    if (isTopMessage || message.deleted_at || message.type === 'error') return 'single';\n    return 'bottom';\n  }\n\n  if (isTopMessage) return 'top';\n  return '';\n};\n\nvar MessageListInner = function MessageListInner(props) {\n  var EmptyStateIndicator = props.EmptyStateIndicator,\n      MessageSystem = props.MessageSystem,\n      DateSeparator = props.DateSeparator,\n      HeaderComponent = props.HeaderComponent,\n      headerPosition = props.headerPosition,\n      bottomRef = props.bottomRef,\n      onMessageLoadCaptured = props.onMessageLoadCaptured,\n      messages = props.messages,\n      noGroupByUser = props.noGroupByUser,\n      client = props.client,\n      threadList = props.threadList,\n      read = props.read,\n      internalMessageProps = props.internalMessageProps,\n      internalInfiniteScrollProps = props.internalInfiniteScrollProps;\n  var enrichedMessages = useMemo(function () {\n    var messageWithDates = insertDates(messages); // messageWithDates.sort((a, b) => a.created_at - b.created_at); // TODO: remove if no issue came up\n\n    if (HeaderComponent) return insertIntro(messageWithDates, headerPosition);\n    return messageWithDates;\n  }, [HeaderComponent, headerPosition, messages]);\n  var messageGroupStyles = useMemo(function () {\n    return enrichedMessages.reduce(function (acc, message, i) {\n      var style = getGroupStyles(message, enrichedMessages[i - 1], enrichedMessages[i + 1], noGroupByUser);\n      if (style) acc[message.id] = style;\n      return acc;\n    }, {});\n  }, [enrichedMessages, noGroupByUser]); // get the readData, but only for messages submitted by the user themselves\n\n  var readData = useMemo(function () {\n    return getReadStates(enrichedMessages.filter(function (_ref) {\n      var user = _ref.user;\n      return (user === null || user === void 0 ? void 0 : user.id) === client.userID;\n    }), read);\n  }, [client.userID, enrichedMessages, read]);\n  var lastReceivedId = useMemo(function () {\n    return getLastReceived(enrichedMessages);\n  }, [enrichedMessages]);\n  var elements = useMemo(function () {\n    return enrichedMessages.map(function (message) {\n      if (message.type === 'message.date') {\n        if (threadList) return null;\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: \"\".concat(message.date.toISOString(), \"-i\")\n        }, /*#__PURE__*/React.createElement(DateSeparator, {\n          date: message.date\n        }));\n      }\n\n      if (message.type === 'channel.intro') {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: \"intro\"\n        }, /*#__PURE__*/React.createElement(HeaderComponent, null));\n      }\n\n      if (message.type === 'channel.event' || message.type === 'system') {\n        var _message$event;\n\n        if (!MessageSystem) return null;\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: ((_message$event = message.event) === null || _message$event === void 0 ? void 0 : _message$event.created_at) || message.created_at || ''\n        }, /*#__PURE__*/React.createElement(MessageSystem, {\n          message: message\n        }));\n      }\n\n      if (message.type !== 'message.read') {\n        var groupStyles = messageGroupStyles[message.id] || '';\n        return /*#__PURE__*/React.createElement(\"li\", {\n          className: \"str-chat__li str-chat__li--\".concat(groupStyles),\n          key: message.id || message.created_at,\n          onLoadCapture: onMessageLoadCaptured\n        }, /*#__PURE__*/React.createElement(Message$1, _extends({\n          client: client,\n          message: message,\n          groupStyles: [groupStyles]\n          /* TODO: convert to simple string */\n          ,\n          readBy: readData[message.id] || [],\n          lastReceivedId: lastReceivedId,\n          threadList: threadList\n        }, internalMessageProps)));\n      }\n\n      return null;\n    });\n  }, [MessageSystem, client, enrichedMessages, internalMessageProps, lastReceivedId, messageGroupStyles, onMessageLoadCaptured, readData, threadList]);\n  if (!elements.length) return /*#__PURE__*/React.createElement(EmptyStateIndicator, {\n    listType: \"message\"\n  });\n  return /*#__PURE__*/React.createElement(InfiniteScroll, _extends({\n    isReverse: true,\n    useWindow: false,\n    className: \"str-chat__reverse-infinite-scroll\",\n    \"data-testid\": \"reverse-infinite-scroll\"\n  }, internalInfiniteScrollProps), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"str-chat__ul\"\n  }, elements), /*#__PURE__*/React.createElement(\"div\", {\n    key: \"bottom\",\n    ref: bottomRef\n  }));\n};\n\nvar MessageListInner$1 = /*#__PURE__*/React.memo(MessageListInner, deepequal);\n\nfunction _createSuper$4(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct$4();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct$4() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * MessageList - The message list components renders a list of messages. Its a consumer of [Channel Context](https://getstream.github.io/stream-chat-react/#channel)\n *\n * @example ../../docs/MessageList.md\n * @extends PureComponent\n */\n\n\nvar MessageList = /*#__PURE__*/function (_PureComponent) {\n  _inherits(MessageList, _PureComponent);\n\n  var _super = _createSuper$4(MessageList);\n\n  function MessageList(props) {\n    var _this;\n\n    _classCallCheck(this, MessageList);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"connectionChanged\", function (_ref) {\n      var online = _ref.online;\n      if (_this.state.online !== online) _this.setState({\n        online\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollToBottom\", function () {\n      _this._scrollToRef(_this.bottomRef, _this.messageList);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_scrollToRef\", function (el, parent) {\n      var scrollDown = function scrollDown() {\n        if (el && el.current && parent && parent.current) {\n          _this.scrollToTarget(el.current, parent.current);\n        }\n      };\n\n      scrollDown(); // scroll down after images load again\n\n      setTimeout(scrollDown, 200);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollToTarget\", function (target, containerEl) {\n      // Moved up here for readability:\n      var isElement = target && target.nodeType === 1;\n      var isNumber = Object.prototype.toString.call(target) === '[object Number]';\n      var scrollTop;\n      if (isElement) scrollTop = target.offsetTop;else if (isNumber) scrollTop = target;else if (target === 'top') scrollTop = 0;else if (target === 'bottom') scrollTop = containerEl.scrollHeight - containerEl.offsetHeight;\n      if (scrollTop !== undefined) containerEl.scrollTop = scrollTop; // eslint-disable-line no-param-reassign\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"goToNewMessages\", function () {\n      _this.scrollToBottom();\n\n      _this.setState({\n        newMessagesNotification: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"userScrolledUp\", function () {\n      return _this.scrollOffset > 310;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"listenToScroll\", function (offset) {\n      _this.scrollOffset = offset;\n\n      if (_this.state.newMessagesNotification && !_this.userScrolledUp()) {\n        _this.setState({\n          newMessagesNotification: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addNotification\", function (notificationText, type) {\n      if (typeof notificationText !== 'string') return;\n      if (type !== 'success' && type !== 'error') return;\n      var id = v4();\n\n      _this.setState(function (_ref2) {\n        var notifications = _ref2.notifications;\n        return {\n          notifications: [].concat(_toConsumableArray(notifications), [{\n            id,\n            text: notificationText,\n            type\n          }])\n        };\n      }); // remove the notification after 5000 ms\n\n\n      var ct = setTimeout(function () {\n        return _this.setState(function (_ref3) {\n          var notifications = _ref3.notifications;\n          return {\n            notifications: notifications.filter(function (n) {\n              return n.id !== id;\n            })\n          };\n        });\n      }, 5000);\n\n      _this.notificationTimeouts.push(ct);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMessageLoadCaptured\", function () {\n      // A load event (emitted by e.g. an <img>) was captured on a message.\n      // In some cases, the loaded asset is larger than the placeholder, which means we have to scroll down.\n      if (!_this.userScrolledUp()) {\n        _this.scrollToBottom();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"loadMore\", function () {\n      return _this.props.messageLimit ? _this.props.loadMore(_this.props.messageLimit) : _this.props.loadMore();\n    });\n\n    _this.state = {\n      newMessagesNotification: false,\n      online: true,\n      notifications: []\n    };\n    _this.bottomRef = /*#__PURE__*/React.createRef();\n    _this.messageList = /*#__PURE__*/React.createRef();\n    _this.notificationTimeouts = [];\n    return _this;\n  }\n\n  _createClass(MessageList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // start at the bottom\n      this.scrollToBottom();\n      var messageListRect = this.messageList.current.getBoundingClientRect();\n      this.setState({\n        messageListRect\n      });\n      this.props.client.on('connection.changed', this.connectionChanged);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.client.off('connection.changed', this.connectionChanged);\n      this.notificationTimeouts.forEach(clearTimeout);\n    }\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate(prevProps) {\n      if (this.props.threadList) {\n        return null;\n      } // Are we adding new items to the list?\n      // Capture the scroll position so we can adjust scroll later.\n\n\n      if (prevProps.messages.length < this.props.messages.length) {\n        var list = this.messageList.current;\n        return {\n          offsetTop: list.scrollTop,\n          offsetBottom: list.scrollHeight - list.scrollTop\n        };\n      }\n\n      return null;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      // If we have a snapshot value, we've just added new items.\n      // Adjust scroll so these new items don't push the old ones out of view.\n      // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n      var userScrolledUp = this.userScrolledUp();\n      var currentLastMessage = this.props.messages[this.props.messages.length - 1];\n      var previousLastMessage = prevProps.messages[prevProps.messages.length - 1];\n\n      if (!previousLastMessage || !currentLastMessage) {\n        return;\n      }\n\n      var hasNewMessage = currentLastMessage.id !== previousLastMessage.id;\n      var isOwner = currentLastMessage.user.id === this.props.client.userID;\n      var list = this.messageList.current; // always scroll down when it's your own message that you added...\n\n      var scrollToBottom = hasNewMessage && (isOwner || !userScrolledUp);\n\n      if (scrollToBottom) {\n        this.scrollToBottom(); // remove the scroll notification if we already scrolled down...\n\n        if (this.state.newMessagesNotification) this.setState({\n          newMessagesNotification: false\n        });\n        return;\n      }\n\n      if (snapshot !== null) {\n        // Maintain the offsetTop of scroll so that content in viewport doesn't move.\n        // This is for the case where user has scroll up significantly and a new message arrives from someone.\n        if (hasNewMessage) {\n          this.scrollToTarget(snapshot.offsetTop, this.messageList.current);\n        } else {\n          // Maintain the bottomOffset of scroll.\n          // This is for the case of pagination, when more messages get loaded.\n          this.scrollToTarget(list.scrollHeight - snapshot.offsetBottom, this.messageList.current);\n        }\n      } // Check the scroll position... if you're scrolled up show a little notification\n\n\n      if (hasNewMessage && !this.state.newMessagesNotification) {\n        this.setState({\n          newMessagesNotification: true\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"str-chat__list \".concat(this.props.threadList ? 'str-chat__list--thread' : ''),\n        ref: this.messageList\n      }, /*#__PURE__*/React.createElement(MessageListInner$1, {\n        EmptyStateIndicator: this.props.EmptyStateIndicator,\n        MessageSystem: this.props.MessageSystem,\n        HeaderComponent: this.props.HeaderComponent,\n        headerPosition: this.props.headerPosition,\n        DateSeparator: this.props.DateSeparator || this.props.dateSeparator,\n        messages: this.props.messages,\n        noGroupByUser: this.props.noGroupByUser,\n        threadList: this.props.threadList,\n        client: this.props.client,\n        read: this.props.read,\n        bottomRef: this.bottomRef,\n        onMessageLoadCaptured: this.onMessageLoadCaptured,\n        internalInfiniteScrollProps: {\n          hasMore: this.props.hasMore,\n          isLoading: this.props.loadingMore,\n          listenToScroll: this.listenToScroll,\n          loadMore: this.loadMore,\n          loader: /*#__PURE__*/React.createElement(Center$1, {\n            key: \"loadingindicator\"\n          }, smartRender(this.props.LoadingIndicator, {\n            size: 20\n          }, null))\n        },\n        internalMessageProps: {\n          messageListRect: this.state.messageListRect,\n          openThread: this.props.openThread,\n          members: this.props.members,\n          watchers: this.props.watchers,\n          channel: this.props.channel,\n          retrySendMessage: this.props.retrySendMessage,\n          addNotification: this.addNotification,\n          updateMessage: this.props.updateMessage,\n          removeMessage: this.props.removeMessage,\n          Message: this.props.Message,\n          mutes: this.props.mutes,\n          unsafeHTML: this.props.unsafeHTML,\n          Attachment: this.props.Attachment,\n          onMentionsClick: this.props.onMentionsClick,\n          onMentionsHover: this.props.onMentionsHover,\n          messageActions: this.props.messageActions,\n          additionalMessageInputProps: this.props.additionalMessageInputProps,\n          getFlagMessageSuccessNotification: this.props.getFlagMessageSuccessNotification,\n          getFlagMessageErrorNotification: this.props.getFlagMessageErrorNotification,\n          getMuteUserSuccessNotification: this.props.getMuteUserSuccessNotification,\n          getMuteUserErrorNotification: this.props.getMuteUserErrorNotification\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"str-chat__list-notifications\"\n      }, this.state.notifications.map(function (notification) {\n        return /*#__PURE__*/React.createElement(CustomNotification$1, {\n          active: true,\n          key: notification.id,\n          type: notification.type\n        }, notification.text);\n      }), /*#__PURE__*/React.createElement(CustomNotification$1, {\n        active: !this.state.online,\n        type: \"error\"\n      }, t('Connection failure, reconnecting now...')), /*#__PURE__*/React.createElement(MessageNotification$1, {\n        showNotification: this.state.newMessagesNotification,\n        onClick: this.goToNewMessages\n      }, t('New Messages!'))));\n    }\n  }]);\n\n  return MessageList;\n}(PureComponent);\n\nMessageList.propTypes = {\n  /**\n   * Date separator UI component to render\n   *\n   * Defaults to and accepts same props as: [DateSeparator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/DateSeparator.js)\n   * */\n  dateSeparator: PropTypes.elementType,\n\n  /** Turn off grouping of messages by user */\n  noGroupByUser: PropTypes.bool,\n\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n\n  /** Set the limit to use when paginating messages */\n  messageLimit: PropTypes.number,\n\n  /**\n   * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\n   * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n   * */\n  messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n\n  /**\n   * Boolean weather current message list is a thread.\n   */\n  threadList: PropTypes.bool,\n\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageSuccessNotification: PropTypes.func,\n\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageErrorNotification: PropTypes.func,\n\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserSuccessNotification: PropTypes.func,\n\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserErrorNotification: PropTypes.func,\n\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  client: PropTypes.object,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  Attachment: PropTypes.elementType,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  Message: PropTypes.elementType,\n\n  /**\n   * Custom UI component to display system messages.\n   *\n   * Defaults to and accepts same props as: [EventComponent](https://github.com/GetStream/stream-chat-react/blob/master/src/components/EventComponent.js)\n   */\n  MessageSystem: PropTypes.elementType,\n\n  /**\n   * The UI Indicator to use when MessagerList or ChannelList is empty\n   * */\n  EmptyStateIndicator: PropTypes.elementType,\n\n  /**\n   * Component to render at the top of the MessageList\n   * */\n  HeaderComponent: PropTypes.elementType,\n\n  /**\n   * Component to render at the top of the MessageList while loading new messages\n   * */\n  LoadingIndicator: PropTypes.elementType,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  messages: PropTypes.array.isRequired,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  channel: PropTypes.instanceOf(Channel$2).isRequired,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  updateMessage: PropTypes.func.isRequired,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  retrySendMessage: PropTypes.func,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  removeMessage: PropTypes.func,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  onMentionsClick: PropTypes.func,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  onMentionsHover: PropTypes.func,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  openThread: PropTypes.func,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  members: PropTypes.object,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  watchers: PropTypes.object,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  read: PropTypes.object,\n\n  /**\n   * Additional props for underlying MessageInput component. We have instance of MessageInput\n   * component in MessageSimple component, for handling edit state.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object\n};\nMessageList.defaultProps = {\n  Message: MessageSimple$1,\n  MessageSystem: EventComponent$1,\n  threadList: false,\n  Attachment,\n  DateSeparator: DefaultDateSeparator,\n  LoadingIndicator: DefaultLoadingIndicator,\n  EmptyStateIndicator: DefaultEmptyStateIndicator,\n  unsafeHTML: false,\n  noGroupByUser: false,\n  messageActions: Object.keys(MESSAGE_ACTIONS)\n};\nvar MessageList$1 = withTranslationContext(function (props) {\n  return /*#__PURE__*/React.createElement(ChannelContext.Consumer, null, function (_ref4) {\n    var typing = _ref4.typing,\n        channelContext = _objectWithoutProperties(_ref4, [\"typing\"]);\n\n    return /*#__PURE__*/React.createElement(MessageList, _extends({}, channelContext, props));\n  });\n});\n\nfunction ownKeys$b(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$b(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$b(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$b(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper$5(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct$5();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct$5() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Thread - The Thread renders a parent message with a list of replies. Use the standard message list of the main channel's messages.\n * The thread is only used for the list of replies to a message.\n * Underlying MessageList, MessageInput and Message components can be customized using props:\n * - additionalParentMessageProps\n * - additionalMessageListProps\n * - additionalMessageInputProps\n *\n * @example ../../docs/Thread.md\n * @typedef { import('../types').ThreadProps & import('../types').ChannelContextValue & import('../types').TranslationContextValue} Props\n * @extends PureComponent<Props, any>\n */\n\n\nvar Thread$7 = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Thread, _PureComponent);\n\n  var _super = _createSuper$5(Thread);\n\n  function Thread() {\n    _classCallCheck(this, Thread);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Thread, [{\n    key: \"render\",\n    value: function render() {\n      if (!this.props.thread) {\n        return null;\n      }\n\n      var parentID = this.props.thread.id;\n      var cid = this.props.channel && this.props.channel.cid;\n      var key = \"thread-\".concat(parentID, \"-\").concat(cid); // We use a wrapper to make sure the key variable is set.\n      // this ensures that if you switch thread the component is recreated\n\n      return /*#__PURE__*/React.createElement(ThreadInner, _extends({}, this.props, {\n        key: key\n      }));\n    }\n  }]);\n\n  return Thread;\n}(PureComponent);\n/** @extends {PureComponent<Props, any>} */\n\n\n_defineProperty(Thread$7, \"propTypes\", {\n  /** Display the thread on 100% width of it's container. Useful for mobile style view */\n  fullWidth: PropTypes.bool,\n\n  /** Make input focus on mounting thread */\n  autoFocus: PropTypes.bool,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  channel: PropTypes.instanceOf(Channel$2).isRequired,\n\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  Message:\n  /** @type {PropTypes.Validator<React.ComponentType<import('../types').MessageUIComponentProps>>} */\n  PropTypes.elementType,\n\n  /**\n   * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n   * The thread (the parent [message object](https://getstream.io/chat/docs/#message_format)) */\n  thread:\n  /** @type {PropTypes.Validator<import('seamless-immutable').ImmutableObject<import('stream-chat').MessageResponse>>} */\n  PropTypes.object,\n\n  /**\n   * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n   * The array of immutable messages to render. By default they are provided by parent Channel component */\n  threadMessages:\n  /** @type {PropTypes.Validator<import('seamless-immutable').ImmutableArray<import('stream-chat').MessageResponse>>} */\n  PropTypes.array,\n\n  /**\n   * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n   *\n   * Function which provides next page of thread messages.\n   * loadMoreThread is called when infinite scroll wants to load more messages\n   * */\n  loadMoreThread: PropTypes.func.isRequired,\n\n  /**\n   * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n   * If there are more messages available, set to false when the end of pagination is reached.\n   * */\n  threadHasMore: PropTypes.bool,\n\n  /**\n   * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n   * If the thread is currently loading more messages. This is helpful to display a loading indicator on threadlist */\n  threadLoadingMore: PropTypes.bool,\n\n  /**\n   * Additional props for underlying Message component of parent message at the top.\n   * Available props - https://getstream.github.io/stream-chat-react/#message\n   * */\n  additionalParentMessageProps: PropTypes.object,\n\n  /**\n   * Additional props for underlying MessageList component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messagelist\n   * */\n  additionalMessageListProps: PropTypes.object,\n\n  /**\n   * Additional props for underlying MessageInput component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n\n  /** Customized MessageInput component to used within Thread instead of default MessageInput \n      Useable as follows:\n      ```\n      <Thread MessageInput={(props) => <MessageInput parent={props.parent} Input={MessageInputSmall} /> }/>\n      ```\n  */\n  MessageInput:\n  /** @type {PropTypes.Validator<React.ComponentType<import('../types').MessageInputProps>>} */\n  PropTypes.elementType\n});\n\n_defineProperty(Thread$7, \"defaultProps\", {\n  threadHasMore: true,\n  threadLoadingMore: true,\n  fullWidth: false,\n  autoFocus: true,\n  MessageInput: MessageInput$1\n});\n\nvar ThreadInner = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ThreadInner, _React$PureComponent);\n\n  var _super2 = _createSuper$5(ThreadInner);\n  /** @param { any } props */\n\n\n  function ThreadInner(props) {\n    var _this;\n\n    _classCallCheck(this, ThreadInner);\n\n    _this = _super2.call(this, props);\n    _this.messageList = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  _createClass(ThreadInner, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          thread = _this$props.thread,\n          loadMoreThread = _this$props.loadMoreThread;\n      var parentID = thread && thread.id;\n\n      if (parentID && (thread === null || thread === void 0 ? void 0 : thread.reply_count) && loadMoreThread) {\n        loadMoreThread();\n      }\n    }\n    /** @param {Props} prevProps */\n\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate(prevProps) {\n      // Are we adding new items to the list?\n      // Capture the scroll position so we can adjust scroll later.\n      if (prevProps.threadMessages && this.props.threadMessages && prevProps.threadMessages.length < this.props.threadMessages.length) {\n        var list = this.messageList.current;\n        return list.clientHeight + list.scrollTop === list.scrollHeight;\n      }\n\n      return null;\n    }\n    /**\n     * @param {Props} prevProps\n     * @param {any} prevState\n     * @param {number} snapshot\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          thread = _this$props2.thread,\n          threadMessages = _this$props2.threadMessages,\n          loadMoreThread = _this$props2.loadMoreThread;\n      var parentID = thread === null || thread === void 0 ? void 0 : thread.id;\n\n      if (parentID && (thread === null || thread === void 0 ? void 0 : thread.reply_count) && thread.reply_count > 0 && (threadMessages === null || threadMessages === void 0 ? void 0 : threadMessages.length) === 0 && loadMoreThread) {\n        loadMoreThread();\n      } // If we have a snapshot value, we've just added new items.\n      // Adjust scroll so these new items don't push the old ones out of view.\n      // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n\n\n      if (snapshot !== null) {\n        var scrollDown = function scrollDown() {\n          var list = _this2.messageList.current;\n          if (snapshot) list.scrollTop = list.scrollHeight;\n        };\n\n        scrollDown(); // scroll down after images load again\n\n        setTimeout(scrollDown, 100);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          t = _this$props3.t,\n          closeThread = _this$props3.closeThread,\n          thread = _this$props3.thread;\n\n      if (!thread) {\n        return null;\n      }\n\n      var read = {};\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"str-chat__thread \".concat(this.props.fullWidth ? 'str-chat__thread--full' : '')\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"str-chat__thread-header\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"str-chat__thread-header-details\"\n      }, /*#__PURE__*/React.createElement(\"strong\", null, t && t('Thread')), /*#__PURE__*/React.createElement(\"small\", null, ' ', t && t('{{ replyCount }} replies', {\n        replyCount: thread.reply_count\n      }))), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick(e) {\n          return closeThread && closeThread(e);\n        },\n        className: \"str-chat__square-button\",\n        \"data-testid\": \"close-button\"\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        width: \"10\",\n        height: \"10\",\n        xmlns: \"http://www.w3.org/2000/svg\"\n      }, /*#__PURE__*/React.createElement(\"path\", {\n        d: \"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\",\n        fillRule: \"evenodd\"\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"str-chat__thread-list\",\n        ref: this.messageList\n      }, /*#__PURE__*/React.createElement(Message$1 // @ts-ignore\n      , _extends({\n        message: thread,\n        initialMessage: true,\n        threadList: true,\n        Message: this.props.Message // TODO: remove the following line in next release, since we already have additionalParentMessageProps now.\n\n      }, this.props, this.props.additionalParentMessageProps)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"str-chat__thread-start\"\n      }, t && t('Start of a new thread')), /*#__PURE__*/React.createElement(MessageList$1, _extends({\n        messages: this.props.threadMessages,\n        read: read,\n        threadList: true,\n        loadMore: this.props.loadMoreThread,\n        hasMore: this.props.threadHasMore,\n        loadingMore: this.props.threadLoadingMore,\n        Message: this.props.Message\n      }, this.props.additionalMessageListProps))), smartRender(this.props.MessageInput, _objectSpread$b({\n        Input: MessageInputSmall,\n        parent: this.props.thread,\n        focus: this.props.autoFocus,\n        publishTypingEvent: false\n      }, this.props.additionalMessageInputProps)));\n    }\n  }]);\n\n  return ThreadInner;\n}(React.PureComponent);\n\n_defineProperty(ThreadInner, \"propTypes\", {\n  /** Channel is passed via the Channel Context */\n  channel: PropTypes.object.isRequired,\n\n  /** the thread (just a message) that we're rendering */\n  thread: PropTypes.object.isRequired\n});\n\nvar Thread$8 = withChannelContext(withTranslationContext(Thread$7)); // @ts-check\n\n/**\n * TypingIndicator lists users currently typing\n * @typedef {import('../types').TypingIndicatorProps} Props\n * @type {React.FC<Props>}\n */\n\nvar TypingIndicator = function TypingIndicator(props) {\n  var typing = Object.values(props.typing);\n  var show;\n\n  if (typing.length === 0 || typing.length === 1 && typing[0].user.id === props.client.user.id) {\n    show = false;\n  } else {\n    show = true;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__typing-indicator \".concat(show ? 'str-chat__typing-indicator--typing' : '')\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__typing-indicator__avatars\"\n  }, typing.filter(function (_ref) {\n    var user = _ref.user;\n    return user.id !== props.client.user.id;\n  }).map(function (_ref2) {\n    var user = _ref2.user;\n    return /*#__PURE__*/React.createElement(Avatar, {\n      image: user.image,\n      size: 32,\n      name: user.name || user.id,\n      key: user.id\n    });\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__typing-indicator__dots\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__typing-indicator__dot\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__typing-indicator__dot\"\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"str-chat__typing-indicator__dot\"\n  })));\n};\n\nTypingIndicator.propTypes = {\n  /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chatcontext) doc */\n  // @ts-ignore\n  client: PropTypes.object,\n\n  /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channelcontext) doc */\n  typing: PropTypes.object.isRequired\n};\nvar TypingIndicator$1 = /*#__PURE__*/React.memo(TypingIndicator); // @ts-check\n\n/**\n * Window - A UI component for conditionally displaying thread or channel.\n *\n * @example ../../docs/Window.md\n * @type { React.FC<import('../types').WindowProps>}\n */\n\nvar Window = function Window(_ref) {\n  var children = _ref.children,\n      _ref$hideOnThread = _ref.hideOnThread,\n      hideOnThread = _ref$hideOnThread === void 0 ? false : _ref$hideOnThread;\n\n  var _useContext = useContext(ChannelContext),\n      thread = _useContext.thread; // If thread is active and window should hide on thread. Return null\n\n\n  if (thread && hideOnThread) return null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"str-chat__main-panel\"\n  }, children);\n};\n\nWindow.propTypes = {\n  /** show or hide the window when a thread is active */\n  hideOnThread: PropTypes.bool\n};\nvar Window$1 = /*#__PURE__*/React.memo(Window);\nexport { Attachment, DefaultAttachmentActions as AttachmentActions, DefaultAudio as Audio, ReactTextareaAutocomplete as AutoCompleteTextarea, Avatar, DefaultCard as Card, Channel$1 as Channel, ChannelContext, ChannelHeader$1 as ChannelHeader, ChannelList$1 as ChannelList, ChannelListMessenger, ChannelListTeam, ChannelPreview, ChannelPreviewCompact$1 as ChannelPreviewCompact, ChannelPreviewCountOnly$1 as ChannelPreviewCountOnly, ChannelPreviewLastMessage$1 as ChannelPreviewLastMessage, ChannelPreviewMessenger$1 as ChannelPreviewMessenger, ChannelSearch$1 as ChannelSearch, Chat, ChatAutoComplete$1 as ChatAutoComplete, ChatContext, ChatDown$1 as ChatDown, CommandItem$1 as CommandItem, DefaultDateSeparator as DateSeparator, EditMessageForm, EmoticonItem$1 as EmoticonItem, DefaultEmptyStateIndicator as EmptyStateIndicator, EventComponent$1 as EventComponent, DefaultFile as FileAttachment, Gallery$1 as Gallery, Image, InfiniteScroll, InfiniteScrollPaginator, Item, KEY_CODES, List, DefaultLoadMoreButton as LoadMoreButton, LoadMorePaginator$1 as LoadMorePaginator, LoadingChannels$1 as LoadingChannels, LoadingErrorIndicatorComponent as LoadingErrorIndicator, DefaultLoadingIndicator as LoadingIndicator, MESSAGE_ACTIONS, Message$1 as Message, MessageActions, MessageActionsBox$1 as MessageActionsBox, MessageCommerce$1 as MessageCommerce, MessageInput$1 as MessageInput, MessageInputFlat, MessageInputLarge, MessageInputSmall, MessageList$1 as MessageList, MessageLivestream, MessageNotification$1 as MessageNotification, MessageOptions, MessagePropTypes, MessageRepliesCountButton$1 as MessageRepliesCountButton, MessageSimple$1 as MessageSimple, MessageTeam$1 as MessageTeam, MessageText, Modal, ModalImage, ModalComponent as ModalWrapper, ReactionSelector$1 as ReactionSelector, ReactionsList$1 as ReactionsList, ReverseInfiniteScroll, SafeAnchor$1 as SafeAnchor, SendButtonComponent as SendButton, SimpleReactionsList$1 as SimpleReactionsList, Streami18n, Thread$8 as Thread, Tooltip$1 as Tooltip, TranslationContext, TypingIndicator$1 as TypingIndicator, UserItem$1 as UserItem, Window$1 as Window, areMessagePropsEqual, byDate, commonEmoji, defaultMinimalEmojis, defaultScrollToItem, emojiData, emojiSetDef, enTranslations, filterEmoji, formatArray, frTranslations, generateRandomId, getImages, getMessageActions, getNonImageAttachments, getReadByTooltipText, handleActionWarning, hiTranslations, isOnlyEmojis, isPromise, isUserMuted, itTranslations, Listeners as listener, messageHasAttachments, messageHasReactions, missingUseFlagHandlerParameterWarning, missingUseMuteHandlerParamsWarning, nlTranslations, reactionHandlerWarning, renderText, ruTranslations, shouldMessageComponentUpdate, smartRender, trTranslations, truncate, useActionHandler, useEditMessageHandler as useChannelEditMessageHandler, useMentionsHandlers as useChannelMentionsHandler, useDeleteHandler, useEditHandler, useFlagHandler, useMentionsHandler, useMentionsUIHandler, useMessageInputState as useMessageInput, useMuteHandler, useOpenThreadHandler, useReactionClick, useReactionHandler, useRetryHandler, useUserHandler, useUserRole, validateAndGetMessage, withChannelContext, withChatContext, withTranslationContext };","map":{"version":3,"sources":["../src/context/ChatContext.js","../src/context/ChannelContext.js","../src/context/TranslationContext.js","../src/utils.js","../src/i18n/Streami18n.js","../src/components/Attachment/AttachmentActions.js","../src/components/Attachment/Audio.js","../src/assets/Poweredby_100px-White_VertText.png","../src/components/SafeAnchor/SafeAnchor.js","../src/components/Attachment/Card.js","../src/components/Attachment/FileAttachment.js","../src/components/Gallery/ModalImage.js","../src/components/Gallery/ModalWrapper.js","../src/components/Gallery/Gallery.js","../src/components/Gallery/Image.js","../src/components/Attachment/Attachment.js","../src/components/AutoCompleteTextarea/listener.js","../src/components/AutoCompleteTextarea/Item.js","../src/components/AutoCompleteTextarea/List.js","../src/components/AutoCompleteTextarea/utils.js","../src/components/AutoCompleteTextarea/Textarea.js","../src/components/Avatar/Avatar.js","../src/components/ChannelPreview/ChannelPreviewCountOnly.js","../src/components/ChannelPreview/utils.js","../src/components/ChannelPreview/ChannelPreview.js","../src/components/ChannelPreview/ChannelPreviewCompact.js","../src/components/ChannelPreview/ChannelPreviewLastMessage.js","../src/components/ChannelPreview/ChannelPreviewMessenger.js","../src/components/Message/icons.js","../src/components/Message/MessageRepliesCountButton.js","../src/components/Modal/Modal.js","../src/components/Loading/LoadingChannels.js","../src/components/Loading/LoadingErrorIndicator.js","../src/components/Loading/LoadingIndicator.js","../src/components/EmoticonItem/EmoticonItem.js","../src/components/UserItem/UserItem.js","../src/components/CommandItem/CommandItem.js","../src/components/ChatAutoComplete/ChatAutoComplete.js","../src/components/Tooltip/Tooltip.js","../src/components/MessageInput/hooks/messageInput.js","../src/components/MessageInput/EmojiPicker.js","../src/components/MessageInput/UploadsPreview.js","../src/components/MessageInput/SendButton.js","../src/components/MessageInput/MessageInputLarge.js","../src/components/MessageInput/MessageInput.js","../src/components/MessageInput/MessageInputFlat.js","../src/components/MessageInput/MessageInputSmall.js","../src/components/MessageInput/EditMessageForm.js","../src/components/Reactions/ReactionSelector.js","../src/components/Reactions/ReactionsList.js","../src/components/Reactions/SimpleReactionsList.js","../src/components/Message/hooks/useActionHandler.js","../src/components/Message/hooks/useDeleteHandler.js","../src/components/Message/hooks/useEditHandler.js","../src/components/Message/utils.js","../src/components/Message/hooks/useFlagHandler.js","../src/components/Message/hooks/useMentionsHandler.js","../src/components/Message/hooks/useMuteHandler.js","../src/components/Message/hooks/useOpenThreadHandler.js","../src/components/Message/hooks/useReactionHandler.js","../src/components/Message/hooks/useRetryHandler.js","../src/components/Message/hooks/useUserHandler.js","../src/components/Message/hooks/useUserRole.js","../src/components/MessageActions/MessageActionsBox.js","../src/components/MessageActions/MessageActions.js","../src/components/Message/MessageOptions.js","../src/components/Message/MessageText.js","../src/components/Message/MessageDeleted.js","../src/components/Message/MessageTimestamp.js","../src/components/Message/MessageSimple.js","../src/components/Message/Message.js","../src/components/Message/MessageCommerce.js","../src/components/Message/MessageLivestream.js","../src/components/Message/MessageTeam.js","../src/components/Channel/hooks/useMentionsHandlers.js","../src/components/Channel/hooks/useEditMessageHandler.js","../src/components/Channel/channelState.js","../src/components/Channel/Channel.js","../src/components/ChannelHeader/ChannelHeader.js","../src/assets/str-chat__connection-error.svg","../src/components/ChatDown/ChatDown.js","../src/assets/str-chat__icon-chevron-down.svg","../src/components/ChannelList/ChannelListTeam.js","../src/components/LoadMore/LoadMoreButton.js","../src/components/LoadMore/LoadMorePaginator.js","../src/components/EmptyStateIndicator/EmptyStateIndicator.js","../src/components/ChannelList/utils.js","../src/components/ChannelList/hooks/useMessageNewListener.js","../src/components/ChannelList/hooks/useNotificationMessageNewListener.js","../src/components/ChannelList/hooks/useNotificationAddedToChannelListener.js","../src/components/ChannelList/hooks/useNotificationRemovedFromChannelListener.js","../src/components/ChannelList/hooks/useChannelDeletedListener.js","../src/components/ChannelList/hooks/useChannelTruncatedListener.js","../src/components/ChannelList/hooks/useChannelUpdatedListener.js","../src/components/ChannelList/hooks/useConnectionRecoveredListener.js","../src/components/ChannelList/hooks/useUserPresenceChangedListener.js","../src/components/ChannelList/hooks/usePaginatedChannels.js","../src/components/ChannelList/hooks/useMobileNavigation.js","../src/components/ChannelList/ChannelList.js","../src/components/ChannelList/ChannelListMessenger.js","../src/components/ChannelSearch/ChannelSearch.js","../src/components/Chat/Chat.js","../src/components/DateSeparator/DateSeparator.js","../src/components/EventComponent/EventComponent.js","../src/components/InfiniteScrollPaginator/InfiniteScroll.js","../src/components/InfiniteScrollPaginator/InfiniteScrollPaginator.js","../src/components/InfiniteScrollPaginator/ReverseInfiniteScroll.js","../src/components/MessageList/Center.js","../src/components/MessageList/MessageNotification.js","../src/components/MessageList/CustomNotification.js","../src/components/MessageList/MessageListInner.js","../src/components/MessageList/MessageList.js","../src/components/Thread/Thread.js","../src/components/TypingIndicator/TypingIndicator.js","../src/components/Window/Window.js"],"names":["ChatContext","client","setActiveChannel","ContextAwareComponent","OriginalComponent","ChannelContext","Dayjs","TranslationContext","t","tDateTimeParser","emojiSetDef","spriteUrl","size","sheetColumns","sheetRows","sheetSize","commonEmoji","emoticons","short_names","custom","defaultMinimalEmojis","id","name","colons","sheet_x","sheet_y","d","Object","emojiData","isOnlyEmojis","noEmojis","text","emojiRegex","noSpace","isPromise","thing","byDate","a","b","formatArray","arr2","arr3","currentUserId","dict","outStr","allowedMarkups","matchMarkdownLinks","regexMdLinks","matches","message","singleMatch","links","truncate","end","input","length","renderText","newText","markdownLinks","linkifyFind","type","href","value","noParsingNeeded","displayLink","encodeURI","mentioned_users","i","username","mkdown","re","uri","require","S4","Math","smartRender","ElementOrComponentOrLiteral","React","element","ComponentOrLiteral","filterEmoji","emoji","getReadByTooltipText","otherUsers","item","slicedArr","restLength","firstUser","secondUser","lastUser","commaSeparatedUsers","moreCount","defaultNS","defaultLng","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","meridiemParse","meridiemHour","hour","meridiem","en_locale","weekdays","months","defaultStreami18nOptions","language","disableDateTimeTranslations","debug","logger","console","dayjsLocaleConfigForLanguage","DateTimeParser","Streami18n","i18n","en","enTranslations","nl","nlTranslations","ru","ruTranslations","tr","trTranslations","fr","frTranslations","hi","hiTranslations","it","itTranslations","options","finalOptions","Error","translationsForLanguage","nsSeparator","keySeparator","fallbackLng","lng","interpolation","escapeValue","parseMissingKeyHandler","resources","currentLanguage","availableLanguages","translation","key","AttachmentActions","actions","actionHandler","action","PropTypes","isRequired","progressUpdateInterval","Audio","og","audioRef","useRef","isPlaying","setIsPlaying","useState","progress","setProgress","updateProgress","useCallback","position","duration","currentProgress","useEffect","interval","setInterval","clearInterval","asset_url","image_url","title","description","width","SafeAnchor","children","target","className","sanitized","sanitizeUrl","Card","title_link","og_scrape_url","thumb_url","useContext","image","trimUrl","url","trimmedUrl","string","FileAttachment","attachment","prettybytes","ModalImage","data","src","ModalComponent","images","toggleModal","index","modalIsOpen","View","Gallery","setIndex","modalOpen","setModalOpen","formattedArray","useMemo","source","renderImages","backgroundImage","imageCount","Image","PureComponent","fallback","currentIndex","state","SUPPORTED_VIDEO_FORMATS","isImageAttachment","isMediaAttachment","isAudioAttachment","isFileAttachment","renderAttachmentWithinContainer","extra","componentType","renderAttachmentActions","props","renderImage","renderCard","renderFile","File","renderAudio","renderMedia","Media","Attachment","DefaultCard","DefaultImage","DefaultAudio","DefaultFile","DefaultMedia","DefaultAttachmentActions","rest","propsWithDefault","elementType","KEY_CODES","ESC","UP","DOWN","ENTER","TAB","SPACE","Listener","code","e","keyCode","fn","document","Item","onSelectHandler","Component","style","onClickHandler","selected","innerRef","selectItem","List","selectedItem","Listeners","values","newValues","listener","textToReplace","onSelect","getTextToReplace","getSelectedItem","keyboard","oldPosition","newPosition","component","itemClassName","itemStyle","__html","itemHeight","parseInt","getComputedStyle","containerHight","itemOffsetTop","actualScrollTop","container","DEFAULT_CARET_POSITION","errorMessage","ReactTextareaAutocomplete","closeOnClickOutside","movePopupAsYouType","minChar","scrollToItem","maxRows","loadingComponent","trigger","top","left","currentTrigger","actualToken","dataLoading","selectionEnd","selectionStart","listenerIndex","nextProps","hasFocus","event","lastWordRegex","match","lastWord","spaces","newWord","textBeforeWord","textAfterCaret","bubbles","textareaValue","onChange","computeCaretPosition","startToken","token","Number","textToModify","startOfTokenPosition","newTokenString","newToken","newCaretPosition","modifiedText","triggerSettings","callback","output","String","caretPosition","dataProvider","Array","isValidElementType","oldValue","oldTrigger","notSafe","tokens","onCaretPositionChange","textarea","lastToken","tokenMatch","newTop","newLeft","getCaretCoordinates","err","onBlur","el","defaultScrollToItem","Loader","listClassName","dropdownClassName","dropdownStyle","containerStyle","containerClassName","loaderStyle","loaderClassName","suggestionData","_dropdownScroll","triggerPropsCheck","triggers","triggerChar","settings","triggerSetting","listStyle","Avatar","shape","onClick","onMouseOver","loaded","setLoaded","error","setError","initials","height","flexBasis","lineHeight","fontSize","objectFit","func","ChannelPreviewCountOnly","channel","watchers","unread","displayTitle","getLatestMessagePreview","latestMessage","getDisplayTitle","members","otherMember","m","currentUser","getDisplayImage","ChannelPreview","activeChannel","Preview","lastMessage","setLastMessage","setUnread","handleEvent","isActive","cid","ChannelPreviewCompact","channelPreviewButton","unreadClass","activeClass","onSelectChannel","active","displayImage","ChannelPreviewLastMessage","latestMessageLength","ChannelPreviewMessenger","ReplyIcon","DeliveredCheckIcon","ReactionIcon","ThreadIcon","ErrorIcon","MessageRepliesCountButton","reply_count","labelSingle","labelPlural","singleReplyText","pluralReplyText","replyCount","Modal","onClose","open","handleClick","handleEscKey","openClasses","LoadingItems","LoadingChannels","LoadingErrorIndicator","LoadingIndicator","color","stopColor","EmoticonItem","entity","native","UserItem","CommandItem","args","emojiReplace","found","emojiIndex","ChatAutoComplete","getMembersAndWatchers","memberUsers","user","watcherUsers","users","uniqueUsers","queryMembersdebounced","debounce","response","$autocomplete","query","onReady","commands","onSelectItem","getTriggers","q","emojis","result","matchingUsers","selectedCommands","c","nameA","nameB","updateInnerRef","additionalTextareaProps","rows","grow","disabled","onPaste","handleSubmit","placeholder","onFocus","object","Tooltip","getAttachmentTypeFromMime","mime","emptyFileUploads","emptyImageUploads","imageOrder","imageUploads","Immutable","fileOrder","fileUploads","numberOfUploads","attachments","emojiPickerIsOpen","generateRandomId","file","file_size","imageAlreadyExists","newUploadFields","fileAlreadyExists","_id","doImageUploadRequest","doFileUploadRequest","focus","clearEditingState","overrideSubmitHandler","parent","noFiles","errorHandler","publishTypingEvent","dispatch","useReducer","textareaRef","emojiPickerRef","channelContext","editMessage","sendMessage","newCursorPosition","insertText","getNewText","textareaElement","textToInsert","prevText","handleChange","logChatPromiseExecution","closeEmojiPicker","openEmojiPicker","onSelectEmoji","getCommands","getUsers","_user","getAttachmentsFromUploads","imageAttachments","upload","self","fileAttachments","mime_type","trimmedMessage","isEmptyMessage","someAttachmentsUploading","newAttachments","actualMentionedUsers","updatedMessage","updateMessagePromise","sendMessagePromise","uploadFile","fileUpload","alreadyRemoved","removeFile","uploadImage","img","imageUpload","reader","previewUri","removeImage","uploadNewFiles","items","dataTransferItemsHaveFiles","plainTextItem","kind","plainTextPromise","resolve","fileLikes","dataTransferItemsToFiles","s","EmojiPicker","small","UploadsPreview","maxNumberOfFiles","SendButton","MessageInputLarge","messageInput","useMessageInput","constructTypingString","otherTypingUsers","watcherCount","watcher_count","autocompleteTriggers","Input","MessageInput","MessageInputFlat","MessageInputSmall","EditMessageForm","onKeyDown","ReactionSelectorWithRef","latest_reactions","reaction_counts","reactionOptions","reverse","handleReaction","detailedView","tooltipReactionType","setTooltipReactionType","tooltipPositions","setTooltipPositions","containerRef","tooltipRef","targetRef","useImperativeHandle","showTooltip","hideTooltip","tooltip","tooltipPosition","arrowPosition","arrow","getUsersPerReactionType","reaction","getLatestUserForReactionType","visibility","latestUser","reactionOption","count","Boolean","ReactionSelector","bool","ReactionsList","reactions","getTotalReactionCount","total","getOptionForType","option","getReactionTypes","allTypes","emojiDefinition","SimpleReactionsList","handleActionWarning","useActionHandler","updateMessage","removeMessage","messageID","formData","useDeleteHandler","useEditHandler","customInitialState","customSetEditing","customClearEditingHandler","editing","setEditing","setEdit","clearEdit","validateAndGetMessage","returnValue","isUserMuted","userMuted","MESSAGE_ACTIONS","edit","delete","flag","mute","getMessageActions","canDelete","canFlag","canEdit","canMute","messageActionsAfterPermission","messageActions","areMessagePropsEqual","deepequal","messageListRect","shouldMessageComponentUpdate","messageHasReactions","messageHasAttachments","getImages","getNonImageAttachments","MessagePropTypes","html","created_at","updated_at","missingUseFlagHandlerParameterWarning","useFlagHandler","notifications","notify","getSuccessNotification","getErrorNotification","successMessage","useMentionsHandler","channelOnMentionsClick","channelOnMentionsHover","onMentionsClick","onMentionsHover","createEventHandler","useMentionsUIHandler","missingUseMuteHandlerParamsWarning","useMuteHandler","mutes","fallbackMessage","useOpenThreadHandler","channelOpenThread","openThread","customOpenThread","reactionHandlerWarning","useReactionHandler","userExistingReaction","originalMessage","reactionChangePromise","reactionType","useReactionClick","showDetailedReactions","setShowDetailedReactions","messageDeleted","hasListener","closeDetailedReactions","reactionSelectorRef","messageWrapper","messageWrapperRef","onReactionListClick","useRetryHandler","contextRetrySendMessage","retrySendMessage","customRetrySendMessage","useUserHandler","onUserClick","eventHandlers","onUserHover","useUserRole","isMyMessage","isAdmin","isOwner","isModerator","canEditMessage","canDeleteMessage","MessageActionsBox","handleFlag","handleMute","handleEdit","handleDelete","mine","setReverse","checkIfReverse","containerRect","containerElement","MessageActions","addNotification","setEditingState","getMuteUserSuccessNotification","getMuteUserErrorNotification","getFlagMessageErrorNotification","getFlagMessageSuccessNotification","propHandleFlag","propHandleMute","propHandleDelete","inline","customWrapperClass","actionsBoxOpen","setActionsBoxOpen","isMuted","hideOptions","messageDeletedAt","MessageActionsWrapper","defaultWrapperClass","wrapperClass","onClickOptionsAction","wrapperProps","MessageOptionsComponent","displayActions","displayLeft","displayReplies","propHandleOpenThread","initialMessage","theme","threadList","handleOpenThread","channelConfig","shouldShowReplies","shouldShowReactions","MessageTextComponent","propOnMentionsClick","propOnMentionsHover","customInnerClass","unsafeHTML","customOptionProps","hasReactions","hasAttachment","messageText","innerClass","MessageDeleted","messageClasses","defaultTimestampFormat","notValidDateWarning","noParsingFunctionWarning","Date","formatDate","parsedTime","MessageTimestamp","propTDatetimeParser","customClass","format","contextTDateTimeParser","when","getDateString","MessageSimple","propUpdateMessage","propHandleAction","propHandleReaction","propHandleRetry","onUserClickCustomHandler","onUserHoverCustomHandler","propTDateTimeParser","channelUpdateMessage","handleAction","handleRetry","onUserClickHandler","onUserHoverHandler","retryHandler","MessageSimpleStatus","readBy","lastReceivedId","justReadByMe","lastReadUser","Message","actionsEnabled","x","y","right","bottom","toJSON","onMentionsHoverMessage","onMentionsClickMessage","additionalMessageInputProps","propChannel","propOnUserClick","propOnUserHover","propOpenThread","propRetrySendMessage","MessageUIComponent","groupStyles","contextChannel","messageActionsHandler","reaction_scores","MessageCommerce","firstGroupStyle","MessageLivestreamComponent","propEditing","propSetEdit","propClearEdit","propT","contextT","ownEditing","ownSetEditing","ownClearEditing","galleryImages","MessageLivestreamActions","MessageTeam","propChannelConfig","retry","marginRight","MessageTeamStatus","MessageTeamAttachments","useMentionsHandlers","tagName","textContent","userName","useEditMessageHandler","doUpdateMessageRequest","Promise","channelReducer","messages","read","loading","typing","thread","hasMore","loadingMore","parentId","threadMessages","threadLoadingMore","threadHasMore","initialState","Channel","EmptyPlaceholder","multipleUploads","acceptedFiles","doSendMessageRequest","ChannelInner","LoadingIndicatorComponent","LoadingErrorIndicatorComponent","AttachmentComponent","MessageSimpleComponent","originalTitle","lastRead","chatContext","throttledCopyStateFromChannel","throttle","leading","trailing","markRead","markReadThrottled","mainChannelUpdated","useLayoutEffect","errored","done","onVisibilityChange","loadMoreFinished","loadMore","limit","oldestMessage","oldestID","perPage","queryResponse","id_lt","hasMoreMessages","doSendMessage","parent_id","messageData","messageResponse","status","createMessagePreview","clientSideID","uuidv4","messagePreview","loadMoreThreadFinished","loadMoreThread","parentID","oldMessages","oldestMessageID","threadHasMoreMessages","newThreadMessages","closeThread","onMentionsHoverOrClick","channelContextValue","core","ChannelHeader","live","openMobileNav","memberCount","member_count","ChatDown","ChannelListTeam","sidebarImage","showSidebar","chevrondown","LoadMoreButton","refreshing","LoadMorePaginator","hasNextPage","loadNextPage","DefaultLoadMoreButton","EmptyStateIndicator","listType","moveChannelUp","channelIndex","channels","getChannel","MAX_QUERY_CHANNELS_LIMIT","useMessageNewListener","lockChannelOrder","setChannels","useNotificationMessageNewListener","customHandler","uniqBy","useNotificationAddedToChannelListener","useNotificationRemovedFromChannelListener","useChannelDeletedListener","useChannelTruncatedListener","forceUpdate","useChannelUpdatedListener","newChannels","useConnectionRecoveredListener","useUserPresenceChangedListener","usePaginatedChannels","loadingChannels","setLoadingChannels","setRefreshing","offset","setOffset","setHasNextPage","queryChannels","queryType","newOptions","channelQueryResponse","sort","activeChannelHandler","useMobileNavigation","handleClickOutside","channelListRef","closeMobileNav","ChannelList","navOpen","channelUpdateCount","setChannelUpdateCount","setActiveChannelOnMount","customActiveChannel","customActiveChannelObject","chan","renderChannel","previewProps","renderEmptyStateIndicator","renderList","Paginator","onMessageNew","onAddedToChannel","onRemovedFromChannel","onChannelUpdated","onChannelTruncated","onChannelDeleted","filters","ChannelListMessenger","ChannelSearch","Chat","i18nInstance","initialNavOpen","translators","setTranslators","setMutes","setNavOpen","setChannel","setTimeout","clientMutes","streami18n","watch","DateSeparator","date","EventComponent","sentence","mousewheelListener","calculateTopPosition","calculateOffset","window","InfiniteScroll","initialLoad","isReverse","loader","threshold","useCapture","useWindow","isLoading","listenToScroll","elementProps","scrollComponent","scrollListener","parentElement","reverseOffset","doc","scrollTop","scrollEl","attributes","ref","childrenArray","pageStart","InfiniteScrollPaginator","ReverseInfiniteScroll","Center","MessageNotification","showNotification","CustomNotification","getLastReceived","getReadStates","readData","readState","msg","userLastReadMsgId","insertDates","newMessages","l","messageDate","prevMessageDate","insertIntro","messageTime","nextMessageTime","getGroupStyles","noGroupByUser","isTopMessage","previousMessage","isBottomMessage","nextMessage","MessageListInner","MessageSystem","HeaderComponent","headerPosition","bottomRef","onMessageLoadCaptured","internalMessageProps","internalInfiniteScrollProps","enrichedMessages","messageWithDates","messageGroupStyles","acc","elements","MessageList","newMessagesNotification","online","prevProps","list","offsetTop","offsetBottom","prevState","snapshot","userScrolledUp","currentLastMessage","previousLastMessage","hasNewMessage","scrollToBottom","scrollDown","isElement","isNumber","containerEl","ct","n","messageList","notification","goToNewMessages","dateSeparator","messageLimit","withTranslationContext","Thread","fullWidth","autoFocus","additionalParentMessageProps","additionalMessageListProps","ThreadInner","withChannelContext","TypingIndicator","show","Window","hideOnThread"],"mappings":"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","sourcesContent":["// @ts-check\nimport React from 'react';\nimport { StreamChat } from 'stream-chat';\n\n/**\n * @typedef {import('types').ChatContextValue} ChatContextProps\n */\n\nexport const ChatContext = React.createContext(\n  /** @type {ChatContextProps} */ ({\n    client: new StreamChat(''),\n    setActiveChannel: () => null,\n  }),\n);\n\n/**\n * @function\n * @template P\n * @param {React.ComponentType<P>} OriginalComponent\n * @returns {React.ComponentType<Exclude<P, ChatContextProps>>}\n */\nexport function withChatContext(OriginalComponent) {\n  /** @param {Exclude<P, ChatContextProps>} props */\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <ChatContext.Consumer>\n        {(context) => <OriginalComponent {...context} {...props} />}\n      </ChatContext.Consumer>\n    );\n  };\n\n  ContextAwareComponent.displayName = (\n    OriginalComponent.displayName ||\n    OriginalComponent.name ||\n    'Component'\n  ).replace('Base', '');\n\n  return ContextAwareComponent;\n}\n","// @ts-check\n\nimport React from 'react';\n\n/**\n * @typedef {import('types').ChannelContextValue} ChannelContextProps\n */\n\nexport const ChannelContext = React.createContext(\n  /** @type {ChannelContextProps} */ ({}),\n);\n\n/**\n * @function\n * @template P\n * @param { React.ComponentType<P> } OriginalComponent\n * @returns {React.ComponentType<Exclude<P, ChannelContextProps>>}\n */\nexport function withChannelContext(OriginalComponent) {\n  /** @param {Exclude<P, ChannelContextProps>} props */\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <ChannelContext.Consumer>\n        {(context) => <OriginalComponent {...context} {...props} />}\n      </ChannelContext.Consumer>\n    );\n  };\n\n  ContextAwareComponent.displayName = (\n    OriginalComponent.displayName ||\n    OriginalComponent.name ||\n    'Component'\n  ).replace('Base', '');\n\n  return ContextAwareComponent;\n}\n","// @ts-check\n\nimport React from 'react';\nimport Dayjs from 'dayjs';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\n\nDayjs.extend(LocalizedFormat);\n\n/**\n * @typedef {Required<import('types').TranslationContextValue>} TranslationContextProps\n */\n\nexport const TranslationContext = React.createContext(\n  /** @type {TranslationContextProps} */ ({\n    t: /** @param {string} key */ (key) => key,\n    tDateTimeParser: (input) => Dayjs(input),\n  }),\n);\n\n/**\n * @function\n * @template P\n * @param {React.ComponentType<P>} OriginalComponent\n * @returns {React.ComponentType<Exclude<P, TranslationContextProps>>}\n */\nexport function withTranslationContext(OriginalComponent) {\n  /** @param {Exclude<P, TranslationContextProps>} props */\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <TranslationContext.Consumer>\n        {(context) => <OriginalComponent {...context} {...props} />}\n      </TranslationContext.Consumer>\n    );\n  };\n\n  ContextAwareComponent.displayName = (\n    OriginalComponent.displayName ||\n    OriginalComponent.name ||\n    'Component'\n  ).replace('Base', '');\n\n  return ContextAwareComponent;\n}\n","/* eslint-disable */\nimport emojiRegex from 'emoji-regex';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport data from 'emoji-mart/data/all.json';\nimport React from 'react';\nimport { find as linkifyFind } from 'linkifyjs/lib/linkify';\n\nexport const emojiSetDef = {\n  spriteUrl: 'https://getstream.imgix.net/images/emoji-sprite.png',\n  size: 20,\n  sheetColumns: 2,\n  sheetRows: 3,\n  sheetSize: 64,\n};\n\nexport const commonEmoji = {\n  emoticons: [],\n  short_names: [],\n  custom: true,\n};\n/** @type {import(\"types\").MinimalEmojiInterface[]} */\nexport const defaultMinimalEmojis = [\n  {\n    id: 'like',\n    name: 'like',\n    colons: ':+1:',\n    sheet_x: 0,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'love',\n    name: 'love',\n    colons: ':heart:',\n    sheet_x: 1,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'haha',\n    name: 'haha',\n    colons: ':joy:',\n    sheet_x: 1,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'wow',\n    name: 'wow',\n    colons: ':astonished:',\n    sheet_x: 0,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'sad',\n    name: 'sad',\n    colons: ':pensive:',\n    sheet_x: 0,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'angry',\n    name: 'angry',\n    colons: ':angry:',\n    sheet_x: 1,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n];\n\nconst d = Object.assign({}, data);\nd.emojis = {};\n\n// use this only for small lists like in ReactionSelector\nexport const emojiData = d;\n\nexport const isOnlyEmojis = (text) => {\n  if (!text) return false;\n\n  const noEmojis = text.replace(emojiRegex(), '');\n  const noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\n\nexport const isPromise = (thing) => thing && typeof thing.then === 'function';\n\nexport const byDate = (a, b) => a.created_at - b.created_at;\n\n// https://stackoverflow.com/a/29234240/7625485\n/**\n * @deprecated This function is deprecated and will be removed in future major release.\n * @param {*} dict\n * @param {*} currentUserId\n */\nexport const formatArray = (dict, currentUserId) => {\n  const arr2 = Object.keys(dict);\n  const arr3 = [];\n  arr2.forEach((item, i) => {\n    if (currentUserId === dict[arr2[i]].user.id) {\n      return;\n    }\n\n    arr3.push(dict[arr2[i]].user.name || dict[arr2[i]].user.id);\n  });\n  let outStr = '';\n  if (arr3.length === 1) {\n    outStr = arr3[0] + ' is typing...';\n    dict;\n  } else if (arr3.length === 2) {\n    //joins all with \"and\" but =no commas\n    //example: \"bob and sam\"\n    outStr = arr3.join(' and ') + ' are typing...';\n  } else if (arr3.length > 2) {\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\n    //example: \"bob, joe, and sam\"\n    outStr =\n      arr3.slice(0, -1).join(', ') +\n      ', and ' +\n      arr3.slice(-1) +\n      ' are typing...';\n  }\n\n  return outStr;\n};\n\nconst allowedMarkups = [\n  'html',\n  'root',\n  'text',\n  'break',\n  'paragraph',\n  'emphasis',\n  'strong',\n  'link',\n  'list',\n  'listItem',\n  'code',\n  'inlineCode',\n  'blockquote',\n  'delete',\n];\n\nconst matchMarkdownLinks = (message) => {\n  const regexMdLinks = /\\[([^\\[]+)\\](\\(.*\\))/gm;\n  const matches = message.match(regexMdLinks);\n  const singleMatch = /\\[([^\\[]+)\\]\\((.*)\\)/;\n\n  const links = matches\n    ? matches.map((match) => singleMatch.exec(match)[2])\n    : [];\n  return links;\n};\n\nexport const truncate = (input, length, end = '...') => {\n  if (input.length > length) {\n    return `${input.substring(0, length - end.length)}${end}`;\n  }\n  return input;\n};\n\nexport const renderText = (text, mentioned_users) => {\n  // take the @ mentions and turn them into markdown?\n  // translate links\n  if (!text) return null;\n\n  let newText = text;\n  let markdownLinks = matchMarkdownLinks(newText);\n  // extract all valid links/emails within text and replace it with proper markup\n  linkifyFind(newText).forEach(({ type, href, value }) => {\n    // check if message is already  markdown\n    const noParsingNeeded =\n      markdownLinks &&\n      markdownLinks.filter((text) => text.indexOf(href) !== -1);\n    if (noParsingNeeded.length > 0) return;\n\n    const displayLink =\n      type === 'email'\n        ? value\n        : truncate(value.replace(/(http(s?):\\/\\/)?(www\\.)?/, ''), 20);\n    newText = newText.replace(value, `[${displayLink}](${encodeURI(href)})`);\n  });\n\n  if (mentioned_users && mentioned_users.length) {\n    for (let i = 0; i < mentioned_users.length; i++) {\n      const username = mentioned_users[i].name || mentioned_users[i].id;\n      const mkdown = `**@${username}**`;\n      const re = new RegExp(`@${username}`, 'g');\n      newText = newText.replace(re, mkdown);\n    }\n  }\n\n  return (\n    <ReactMarkdown\n      allowedTypes={allowedMarkups}\n      source={newText}\n      linkTarget=\"_blank\"\n      plugins={[]}\n      escapeHtml={true}\n      skipHtml={false}\n      unwrapDisallowed={true}\n      transformLinkUri={(uri) => {\n        if (uri.startsWith('app://')) {\n          return uri;\n        } else {\n          return require('react-markdown').uriTransformer(uri);\n        }\n      }}\n    />\n  );\n};\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nexport const smartRender = (ElementOrComponentOrLiteral, props, fallback) => {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    const element = ElementOrComponentOrLiteral; // eslint-disable-line\n    return element;\n  }\n\n  // Flow cast through any to remove React.Element after previous check\n  const ComponentOrLiteral = ElementOrComponentOrLiteral;\n\n  if (\n    typeof ComponentOrLiteral === 'string' ||\n    typeof ComponentOrLiteral === 'number' ||\n    typeof ComponentOrLiteral === 'boolean' ||\n    ComponentOrLiteral == null\n  ) {\n    return ComponentOrLiteral;\n  }\n  return <ComponentOrLiteral {...props} />;\n};\n\nexport const filterEmoji = (emoji) => {\n  if (\n    emoji.name === 'White Smiling Face' ||\n    emoji.name === 'White Frowning Face'\n  ) {\n    return false;\n  }\n  return true;\n};\n\nexport const getReadByTooltipText = (users, t, client) => {\n  let outStr = '';\n  // first filter out client user, so restLength won't count it\n  const otherUsers = users\n    .filter((item) => item && item.id !== client.user.id)\n    .map((item) => item.name || item.id);\n\n  const slicedArr = otherUsers.slice(0, 5);\n  const restLength = otherUsers.length - slicedArr.length;\n\n  if (slicedArr.length === 1) {\n    outStr = slicedArr[0] + ' ';\n  } else if (slicedArr.length === 2) {\n    //joins all with \"and\" but =no commas\n    //example: \"bob and sam\"\n    outStr = t('{{ firstUser }} and {{ secondUser }}', {\n      firstUser: slicedArr[0],\n      secondUser: slicedArr[1],\n    });\n  } else if (slicedArr.length > 2) {\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\n    //example: \"bob, joe, sam and 4 more\"\n    if (restLength === 0) {\n      // mutate slicedArr to remove last user to display it separately\n      const lastUser = slicedArr.splice(slicedArr.length - 2, 1);\n      outStr = t('{{ commaSeparatedUsers }}, and {{ lastUser }}', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        lastUser,\n      });\n    } else {\n      outStr = t('{{ commaSeparatedUsers }} and {{ moreCount }} more', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        moreCount: restLength,\n      });\n    }\n  }\n\n  return outStr;\n};\n","/* eslint-disable */\nimport i18n from 'i18next';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\nimport {\n  enTranslations,\n  nlTranslations,\n  ruTranslations,\n  trTranslations,\n  frTranslations,\n  hiTranslations,\n  itTranslations,\n} from './translations';\n\nconst defaultNS = 'translation';\nconst defaultLng = 'en';\n\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\n// These locale imports also set these locale globally.\n// So As a last step I am going to import english locale\n// to make sure I don't mess up language at other places in app.\nimport 'dayjs/locale/en';\n\nDayjs.extend(updateLocale);\n\nDayjs.updateLocale('nl', {\n  calendar: {\n    sameDay: '[vandaag om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    sameDay: '[Oggi alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    sameDay: '[आज] LT',\n    nextDay: '[कल] LT',\n    nextWeek: 'dddd, LT',\n    lastDay: '[कल] LT',\n    lastWeek: '[पिछले] dddd, LT',\n    sameElse: 'L',\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiemParse: /रात|सुबह|दोपहर|शाम/,\n  meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n    if (meridiem === 'रात') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === 'सुबह') {\n      return hour;\n    } else if (meridiem === 'दोपहर') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === 'शाम') {\n      return hour + 12;\n    }\n  },\n  meridiem(hour) {\n    if (hour < 4) {\n      return 'रात';\n    } else if (hour < 10) {\n      return 'सुबह';\n    } else if (hour < 17) {\n      return 'दोपहर';\n    } else if (hour < 20) {\n      return 'शाम';\n    } else {\n      return 'रात';\n    }\n  },\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    sameDay: '[Aujourd’hui à] LT',\n    nextDay: '[Demain à] LT',\n    nextWeek: 'dddd [à] LT',\n    lastDay: '[Hier à] LT',\n    lastWeek: 'dddd [dernier à] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    sameDay: '[bugün saat] LT',\n    nextDay: '[yarın saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    lastDay: '[dün] LT',\n    lastWeek: '[geçen] dddd [saat] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    sameDay: '[Сегодня, в] LT',\n    nextDay: '[Завтра, в] LT',\n    lastDay: '[Вчера, в] LT',\n  },\n});\n\nconst en_locale = {\n  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split(\n    '_',\n  ),\n  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n    '_',\n  ),\n};\n\n/**\n * Wrapper around [i18next](https://www.i18next.com/) class for Stream related translations.\n * Instance of this class should be provided to Chat component to handle translations.\n * Stream provides following list of in-built translations:\n * 1. English (en)\n * 2. Dutch (nl)\n * 3. Russian (ru)\n * 4. Turkish (tr)\n * 5. French (fr)\n * 6. Italian (it)\n * 7. Hindi (hi)\n *\n * Simplest way to start using chat components in one of the in-built languages would be following:\n *\n * ```\n * const i18n = new Streami18n({ language 'nl' });\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * If you would like to override certain keys in in-built translation.\n * UI will be automatically updated in this case.\n *\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  translationsForLanguage: {\n *    'Nothing yet...': 'Nog Niet ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n *  }\n * });\n *\n * If you would like to register additional languages, use registerTranslation. You can add as many languages as you want:\n *\n * i18n.registerTranslation('zh', {\n *  'Nothing yet...': 'Nog Niet ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n * });\n *\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * You can use the same function to add whole new language as well.\n *\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation('mr', {\n *  'Nothing yet...': 'काहीही नाही  ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n * });\n *\n * // Make sure to call setLanguage to reflect new language in UI.\n * i18n.setLanguage('it');\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * ## Datetime translations\n *\n * Stream react chat components uses [dayjs](https://day.js.org/en/) internally by default to format datetime stamp.\n * e.g., in ChannelPreview, MessageContent components.\n * Dayjs has locale support as well - https://day.js.org/docs/en/i18n/i18n\n * Dayjs is a lightweight alternative to Momentjs with the same modern API.\n *\n * Dayjs provides locale config for plenty of languages, you can check the whole list of locale configs at following url\n * https://github.com/iamkun/dayjs/tree/dev/src/locale\n *\n * You can either provide the dayjs locale config while registering\n * language with Streami18n (either via constructor or registerTranslation()) or you can provide your own Dayjs or Moment instance\n * to Streami18n constructor, which will be then used internally (using the language locale) in components.\n *\n * 1. Via language registration\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  dayjsLocaleConfigForLanguage: {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * });\n * ```\n *\n * Similarly, you can add locale config for moment while registering translation via `registerTranslation` function.\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation(\n *  'mr',\n *  {\n *    'Nothing yet...': 'काहीही नाही  ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n *  },\n *  {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * );\n *```\n * 2. Provide your own Moment object\n *\n * ```js\n * import 'moment/locale/nl';\n * import 'moment/locale/it';\n * // or if you want to include all locales\n * import 'moment/min/locales';\n *\n * import Moment from moment\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Moment\n * })\n * ```\n *\n * 3. Provide your own Dayjs object\n *\n * ```js\n * import Dayjs from 'dayjs'\n *\n * import 'dayjs/locale/nl';\n * import 'dayjs/locale/it';\n * // or if you want to include all locales\n * import 'dayjs/min/locales';\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Dayjs\n * })\n * ```\n * If you would like to stick with english language for datetimes in Stream compoments, you can set `disableDateTimeTranslations` to true.\n *\n */\nconst defaultStreami18nOptions = {\n  language: 'en',\n  disableDateTimeTranslations: false,\n  debug: false,\n  logger: (msg) => console.warn(msg),\n  dayjsLocaleConfigForLanguage: null,\n  DateTimeParser: Dayjs,\n};\nexport class Streami18n {\n  i18nInstance = i18n.createInstance();\n  Dayjs = null;\n  setLanguageCallback = () => null;\n  initialized = false;\n\n  t = null;\n  tDateTimeParser = null;\n  translations = {\n    en: { [defaultNS]: enTranslations },\n    nl: { [defaultNS]: nlTranslations },\n    ru: { [defaultNS]: ruTranslations },\n    tr: { [defaultNS]: trTranslations },\n    fr: { [defaultNS]: frTranslations },\n    hi: { [defaultNS]: hiTranslations },\n    it: { [defaultNS]: itTranslations },\n  };\n  /**\n   * dayjs.defineLanguage('nl') also changes the global locale. We don't want to do that\n   * when user calls registerTranslation() function. So intead we will store the locale configs\n   * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n   * with moment, when setLanguage is called.\n   * */\n  dayjsLocales = {};\n  /**\n   * Contructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for datetimes\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  constructor(options = {}) {\n    const finalOptions = {\n      ...defaultStreami18nOptions,\n      ...options,\n    };\n    // Prepare the i18next configuration.\n    this.logger = finalOptions.logger;\n\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      // This is a shallow check to see if given parser is instance of Dayjs.\n      // For some reason Dayjs.isDayjs(this.DateTimeParser()) doesn't work.\n      if (this.DateTimeParser && this.DateTimeParser.extend) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\n        `Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins ${error}`,\n      );\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    const translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: translationsForLanguage,\n      };\n    }\n\n    // If translations don't exist for given language, then set it as empty object.\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: {},\n      };\n    }\n\n    this.i18nextConfig = {\n      nsSeparator: false,\n      keySeparator: false,\n      fallbackLng: false,\n      debug: finalOptions.debug,\n      lng: this.currentLanguage,\n      interpolation: { escapeValue: false },\n\n      parseMissingKeyHandler: (key) => {\n        this.logger(`Streami18n: Missing translation for key: ${key}`);\n\n        return key;\n      },\n    };\n\n    this.validateCurrentLanguage(this.currentLanguage);\n\n    const dayjsLocaleConfigForLanguage =\n      finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, {\n        ...dayjsLocaleConfigForLanguage,\n      });\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\n        `Streami18n: Streami18n(...) - Locale config for ${this.currentLanguage} does not exist in momentjs.` +\n          `Please import the locale file using \"import 'moment/locale/${this.currentLanguage}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    this.tDateTimeParser = (timestamp) => {\n      if (\n        finalOptions.disableDateTimeTranslations ||\n        !this.localeExists(this.currentLanguage)\n      ) {\n        return this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n      return this.DateTimeParser(timestamp).locale(this.currentLanguage);\n    };\n  }\n\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n  async init() {\n    this.validateCurrentLanguage();\n    try {\n      this.t = await this.i18nInstance.init({\n        ...this.i18nextConfig,\n        resources: this.translations,\n        lng: this.currentLanguage,\n      });\n      this.initialized = true;\n\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    } catch (e) {\n      this.logger(`Something went wrong with init:`, e);\n    }\n  }\n\n  localeExists = (language) => {\n    if (this.isCustomDateTimeParser) return true;\n\n    return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n  };\n\n  validateCurrentLanguage = () => {\n    const availableLanguages = Object.keys(this.translations);\n    if (availableLanguages.indexOf(this.currentLanguage) === -1) {\n      this.logger(\n        `Streami18n: '${this.currentLanguage}' language is not registered.` +\n          ` Please make sure to call streami18n.registerTranslation('${this.currentLanguage}', {...}) or ` +\n          `use one the built-in supported languages - ${this.getAvailableLanguages()}`,\n      );\n\n      this.currentLanguage = defaultLng;\n    }\n  };\n\n  /** Returns an instance of i18next used within this class instance */\n  geti18Instance = () => this.i18nInstance;\n\n  /** Returns list of available languages. */\n  getAvailableLanguages = () => Object.keys(this.translations);\n\n  /** Returns all the translation dictionary for all inbuilt-languages */\n  getTranslations = () => this.translations;\n\n  /**\n   * Returns current version translator function.\n   */\n  async getTranslators() {\n    if (!this.initialized) {\n      if (this.dayjsLocales[this.currentLanguage]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n      return await this.init();\n    } else {\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    }\n  }\n\n  /**\n   * Register translation\n   *\n   * @param {*} language\n   * @param {*} translation\n   * @param {*} customDayjsLocale\n   */\n  registerTranslation(language, translation, customDayjsLocale) {\n    if (!translation) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation`,\n      );\n      return;\n    }\n\n    if (!this.translations[language]) {\n      this.translations[language] = { [defaultNS]: translation };\n    } else {\n      this.translations[language][defaultNS] = translation;\n    }\n\n    if (customDayjsLocale) {\n      this.dayjsLocales[language] = { ...customDayjsLocale };\n    } else if (!this.localeExists(language)) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) - ` +\n          `Locale config for ${language} does not exist in Dayjs.` +\n          `Please import the locale file using \"import 'dayjs/locale/${language}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    if (this.initialized) {\n      this.i18nInstance.addResources(language, defaultNS, translation);\n    }\n  }\n\n  addOrUpdateLocale(key, config) {\n    if (this.localeExists(key)) {\n      Dayjs.updateLocale(key, { ...config });\n    } else {\n      // Merging the custom locale config with en config, so missing keys can default to english.\n      Dayjs.locale({ name: key, ...{ ...en_locale, ...config } }, null, true);\n    }\n  }\n\n  /**\n   * Changes the language.\n   * @param {*} language\n   */\n  async setLanguage(language) {\n    this.currentLanguage = language;\n\n    if (!this.initialized) return;\n\n    try {\n      const t = await this.i18nInstance.changeLanguage(language);\n      if (this.dayjsLocales[language]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n\n      this.setLanguageCallback(t);\n      return t;\n    } catch (e) {\n      this.logger(`Failed to set language:`, e);\n    }\n  }\n\n  /**\n   * @param {(t: import('i18next').TFunction) => void} callback\n   */\n  registerSetLanguageCallback(callback) {\n    this.setLanguageCallback = callback;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * AttachmentActions - The actions you can take on an attachment\n *\n * @example ../../docs/AttachmentActions.md\n * @type {React.FC<import('type').AttachmentActionsProps>}\n */\nconst AttachmentActions = ({ text, id, actions, actionHandler }) => (\n  <div className=\"str-chat__message-attachment-actions\">\n    <div className=\"str-chat__message-attachment-actions-form\">\n      <span key={0}>{text}</span>\n      {actions.map((action) => (\n        <button\n          className={`str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--${action.style}`}\n          data-testid={`${action.name}`}\n          key={`${id}-${action.value}`}\n          data-value={action.value}\n          onClick={(e) => actionHandler(action.name, action.value, e)}\n        >\n          {action.text}\n        </button>\n      ))}\n    </div>\n  </div>\n);\n\nAttachmentActions.propTypes = {\n  /** Unique id for action button key. Key is generated by concatenating this id with action value - {`${id}-${action.value}`} */\n  id: PropTypes.string.isRequired,\n  /** The text for the form input */\n  text: PropTypes.string,\n  /** A list of actions */\n  actions: PropTypes.array.isRequired,\n  /**\n   *\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  actionHandler: PropTypes.func.isRequired,\n};\n\nexport default React.memo(AttachmentActions);\n","// @ts-check\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\n\nconst progressUpdateInterval = 500;\n/**\n * Audio attachment with play/pause button and progress bar\n * @param {import(\"types\").AudioProps} props\n */\nconst Audio = ({ og }) => {\n  const audioRef = useRef(/** @type {HTMLAudioElement | null} */ (null));\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progress, setProgress] = useState(0);\n\n  const updateProgress = useCallback(() => {\n    if (audioRef.current !== null) {\n      const position = audioRef.current.currentTime;\n      const { duration } = audioRef.current;\n      const currentProgress = (100 / duration) * position;\n      setProgress(currentProgress);\n      if (position === duration) {\n        setIsPlaying(false);\n      }\n    }\n  }, [audioRef]);\n\n  useEffect(() => {\n    if (audioRef.current !== null) {\n      if (isPlaying) {\n        audioRef.current.play();\n        const interval = setInterval(updateProgress, progressUpdateInterval);\n        return () => clearInterval(interval);\n      }\n      audioRef.current.pause();\n    }\n    return () => {};\n  }, [isPlaying, updateProgress]);\n\n  const { asset_url, image_url, title, description, text } = og;\n\n  return (\n    <div className=\"str-chat__audio\">\n      <div className=\"str-chat__audio__wrapper\">\n        <audio ref={audioRef}>\n          <source src={asset_url} type=\"audio/mp3\" data-testid=\"audio-source\" />\n        </audio>\n        <div className=\"str-chat__audio__image\">\n          <div className=\"str-chat__audio__image--overlay\">\n            {!isPlaying ? (\n              <div\n                onClick={() => setIsPlaying(true)}\n                className=\"str-chat__audio__image--button\"\n                data-testid=\"play-audio\"\n              >\n                <svg\n                  width=\"40\"\n                  height=\"40\"\n                  viewBox=\"0 0 64 64\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z\"\n                    fillRule=\"nonzero\"\n                  />\n                </svg>\n              </div>\n            ) : (\n              <div\n                onClick={() => setIsPlaying(false)}\n                className=\"str-chat__audio__image--button\"\n                data-testid=\"pause-audio\"\n              >\n                <svg\n                  width=\"40\"\n                  height=\"40\"\n                  viewBox=\"0 0 64 64\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z\"\n                    fillRule=\"nonzero\"\n                  />\n                </svg>\n              </div>\n            )}\n          </div>\n          {image_url && <img src={image_url} alt={`${description}`} />}\n        </div>\n        <div className=\"str-chat__audio__content\">\n          <span className=\"str-chat__audio__content--title\">\n            <strong>{title}</strong>\n          </span>\n          <span className=\"str-chat__audio__content--subtitle\">{text}</span>\n          <div className=\"str-chat__audio__content--progress\">\n            <div\n              style={{ width: `${progress}%` }}\n              data-testid=\"audio-progress\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(Audio);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==\"","// @ts-check\nimport React from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\n/**\n * SafeAnchor - In all ways similar to a regular anchor tag.\n * The difference is that it sanitizes the href value and prevents XSS\n * @type {React.FC<React.AnchorHTMLAttributes<HTMLAnchorElement>>}\n */\nconst SafeAnchor = ({ href, children, target, className }) => {\n  if (!href) return null;\n  const sanitized = sanitizeUrl(href);\n  return (\n    <a href={sanitized} target={target} className={className}>\n      {children}\n    </a>\n  );\n};\n\nexport default React.memo(SafeAnchor);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport giphyLogo from '../../assets/Poweredby_100px-White_VertText.png';\nimport { TranslationContext } from '../../context';\nimport { SafeAnchor } from '../SafeAnchor';\n\n/**\n * Card - Simple Card Layout\n *\n * @example ../../docs/Card.md\n * @typedef {import('types').CardProps} Props\n * @type React.FC<Props>\n */\nconst Card = ({\n  title,\n  title_link,\n  og_scrape_url,\n  image_url,\n  thumb_url,\n  text,\n  type,\n}) => {\n  const { t } = useContext(TranslationContext);\n  const image = thumb_url || image_url;\n\n  /** @type {(url?: string) => string | null} Typescript syntax */\n  const trimUrl = (url) => {\n    if (url !== undefined && url !== null) {\n      const [trimmedUrl] = url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n        .split('/');\n\n      return trimmedUrl;\n    }\n    return null;\n  };\n\n  if (!title && !title_link && !image) {\n    return (\n      <div\n        className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n      >\n        <div className=\"str-chat__message-attachment-card--content\">\n          <div className=\"str-chat__message-attachment-card--text\">\n            {t('this content could not be displayed')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!title_link && !og_scrape_url) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n    >\n      {image && (\n        <div className=\"str-chat__message-attachment-card--header\">\n          <img src={image} alt={image} />\n        </div>\n      )}\n      <div className=\"str-chat__message-attachment-card--content\">\n        <div className=\"str-chat__message-attachment-card--flex\">\n          {title && (\n            <div className=\"str-chat__message-attachment-card--title\">\n              {title}\n            </div>\n          )}\n          {text && (\n            <div className=\"str-chat__message-attachment-card--text\">\n              {text}\n            </div>\n          )}\n          {(title_link || og_scrape_url) && (\n            <SafeAnchor\n              href={title_link || og_scrape_url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"str-chat__message-attachment-card--url\"\n            >\n              {trimUrl(title_link || og_scrape_url)}\n            </SafeAnchor>\n          )}\n        </div>\n        {type === 'giphy' && (\n          <img\n            className=\"str-chat__message-attachment-card__giphy-logo\"\n            data-testid=\"card-giphy\"\n            src={giphyLogo}\n            alt=\"giphy logo\"\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nCard.propTypes = {\n  /** Title returned by the OG scraper */\n  title: PropTypes.string,\n  /** Link returned by the OG scraper */\n  title_link: PropTypes.string,\n  /** The scraped url, used as a fallback if the OG-data doesn't include a link */\n  og_scrape_url: PropTypes.string,\n  /** The url of the full sized image */\n  image_url: PropTypes.string,\n  /** The url for thumbnail sized image */\n  thumb_url: PropTypes.string,\n  /** Description returned by the OG scraper */\n  text: PropTypes.string,\n};\n\nexport default React.memo(Card);\n","import React from 'react';\nimport { FileIcon } from 'react-file-utils';\nimport prettybytes from 'pretty-bytes';\nimport { SafeAnchor } from '../SafeAnchor';\n\n/** @type React.FC<import('types').FileAttachmentProps> */\nconst FileAttachment = ({ attachment }) => {\n  return (\n    <div\n      data-testid=\"attachment-file\"\n      className=\"str-chat__message-attachment-file--item\"\n    >\n      <FileIcon\n        mimeType={attachment.mime_type}\n        filename={attachment.title}\n        big={true}\n        size={30}\n      />\n      <div className=\"str-chat__message-attachment-file--item-text\">\n        <SafeAnchor href={attachment.asset_url} target=\"_blank\" download>\n          {attachment.title}\n        </SafeAnchor>\n        {attachment.file_size && (\n          <span>{prettybytes(attachment.file_size)}</span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(FileAttachment);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Modal - Custom Image component used in modal\n * @type {React.FC<import('types').ModalImageProps>}\n */\nconst ModalImage = ({ data }) => (\n  <div className=\"str-chat__modal-image__wrapper\" data-testid=\"modal-image\">\n    <img src={data.src} className=\"str-chat__modal-image__image\" />\n  </div>\n);\n\nModalImage.propTypes = {\n  data: PropTypes.shape({\n    src: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default ModalImage;\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Carousel, { Modal, ModalGateway } from 'react-images';\nimport ModalImage from './ModalImage';\n\n/**\n * ImageModal - Small modal component\n * @type { React.FC<import('types').ModalWrapperProps>}\n */\nconst ModalComponent = ({ images, toggleModal, index, modalIsOpen }) => (\n  <ModalGateway>\n    {modalIsOpen ? (\n      // @ts-ignore\n      <Modal onClose={toggleModal}>\n        <Carousel\n          views={images}\n          currentIndex={index}\n          components={{\n            // @ts-ignore\n            View: ModalImage,\n          }}\n        />\n      </Modal>\n    ) : null}\n  </ModalGateway>\n);\n\nModalComponent.propTypes = {\n  images: PropTypes.array.isRequired,\n  toggleModal: PropTypes.func.isRequired,\n  index: PropTypes.number,\n  modalIsOpen: PropTypes.bool.isRequired,\n};\n\nexport default ModalComponent;\n","// @ts-check\nimport React, { useState, useContext, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\nimport ModalWrapper from './ModalWrapper';\n\n/**\n * Gallery - displays up to 4 images in a simple responsive grid with a lightbox to view the images.\n * @example ../../docs/Gallery.md\n * @typedef {import('types').GalleryProps} Props\n * @type React.FC<Props>\n */\nconst Gallery = ({ images }) => {\n  const [index, setIndex] = useState(0);\n  const [modalOpen, setModalOpen] = useState(false);\n  const { t } = useContext(TranslationContext);\n\n  /**\n   * @param {number} selectedIndex Index of image clicked\n   */\n  const toggleModal = (selectedIndex) => {\n    if (modalOpen) {\n      setModalOpen(false);\n    } else {\n      setIndex(selectedIndex);\n      setModalOpen(true);\n    }\n  };\n\n  const formattedArray = useMemo(\n    () =>\n      images.map((image) => ({\n        src: image.image_url || image.thumb_url || '',\n        source: image.image_url || image.thumb_url || '',\n      })),\n    [images],\n  );\n\n  const renderImages = images.slice(0, 3).map((image, i) => (\n    <div\n      data-testid=\"gallery-image\"\n      className=\"str-chat__gallery-image\"\n      key={`gallery-image-${i}`}\n      onClick={() => toggleModal(i)}\n    >\n      <img src={image.image_url || image.thumb_url} />\n    </div>\n  ));\n\n  return (\n    <div\n      className={`str-chat__gallery ${\n        images.length > 3 ? 'str-chat__gallery--square' : ''\n      }`}\n    >\n      {renderImages}\n      {images.length > 3 && (\n        <div\n          className=\"str-chat__gallery-placeholder\"\n          style={{\n            backgroundImage: `url(${images[3].image_url})`,\n          }}\n          onClick={() => toggleModal(3)}\n        >\n          <p>\n            {t('{{ imageCount }} more', {\n              imageCount: images.length - 3,\n            })}\n          </p>\n        </div>\n      )}\n      <ModalWrapper\n        images={formattedArray}\n        index={index}\n        // @ts-ignore\n        toggleModal={toggleModal}\n        modalIsOpen={modalOpen}\n      />\n    </div>\n  );\n};\n\nGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired,\n};\n\nexport default React.memo(Gallery);\n","/* eslint-disable */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ModalWrapper from './ModalWrapper';\n\n/**\n * Image - Small wrapper around an image tag, supports thumbnails\n *\n * @example ../../docs/Image.md\n * @extends {React.PureComponent<import('type').ImageProps>}\n */\nclass Image extends React.PureComponent {\n  static propTypes = {\n    /** The full size image url */\n    image_url: PropTypes.string,\n    /** The thumb url */\n    thumb_url: PropTypes.string,\n    /** The text fallback for the image */\n    fallback: PropTypes.string,\n  };\n  state = {\n    modalIsOpen: false,\n    currentIndex: 0,\n  };\n\n  toggleModal = () => {\n    this.setState((state) => ({\n      modalIsOpen: !state.modalIsOpen,\n    }));\n  };\n\n  render() {\n    const { image_url, thumb_url, fallback } = this.props;\n    const formattedArray = [{ src: image_url || thumb_url }];\n    return (\n      <React.Fragment>\n        <img\n          className=\"str-chat__message-attachment--img\"\n          onClick={this.toggleModal}\n          src={thumb_url || image_url}\n          alt={fallback}\n          data-testid=\"image-test\"\n        />\n\n        <ModalWrapper\n          images={formattedArray}\n          toggleModal={this.toggleModal}\n          index={this.state.currentIndex}\n          modalIsOpen={this.state.modalIsOpen}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Image;\n","// @ts-check\n\nimport React from 'react';\nimport DefaultMedia from 'react-player';\nimport PropTypes from 'prop-types';\n\nimport DefaultAttachmentActions from './AttachmentActions';\n\nimport DefaultAudio from './Audio';\nimport DefaultCard from './Card';\nimport DefaultFile from './FileAttachment';\n\nimport { Image as DefaultImage } from '../Gallery';\n\nexport const SUPPORTED_VIDEO_FORMATS = [\n  'video/mp4',\n  'video/ogg',\n  'video/webm',\n  'video/quicktime',\n];\n\n/**\n * @typedef {import('types').ExtendedAttachment} ExtendedAttachment\n * @typedef {Required<Pick<import('types').AttachmentUIComponentProps, 'Card' | 'File' | 'Image' | 'Audio' | 'Media' | 'AttachmentActions'>>} DefaultProps\n * @typedef {Omit<import('types').AttachmentUIComponentProps, 'Card' | 'File' | 'Image' | 'Audio' | 'Media' | 'AttachmentActions'> & DefaultProps} AttachmentProps\n */\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isImageAttachment = (a) => {\n  return a.type === 'image' && !a.title_link && !a.og_scrape_url;\n};\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isMediaAttachment = (a) => {\n  return (\n    (a.mime_type && SUPPORTED_VIDEO_FORMATS.indexOf(a.mime_type) !== -1) ||\n    a.type === 'video'\n  );\n};\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isAudioAttachment = (a) => {\n  return a.type === 'audio';\n};\n\n/**\n * @param {ExtendedAttachment} a\n */\nexport const isFileAttachment = (a) => {\n  return (\n    a.type === 'file' ||\n    (a.mime_type &&\n      SUPPORTED_VIDEO_FORMATS.indexOf(a.mime_type) === -1 &&\n      a.type !== 'video')\n  );\n};\n\n/**\n * @param {React.ReactNode} children\n * @param {ExtendedAttachment} attachment\n * @param {string} componentType\n */\nexport const renderAttachmentWithinContainer = (\n  children,\n  attachment,\n  componentType,\n) => {\n  let extra =\n    attachment && attachment.actions && attachment.actions.length\n      ? 'actions'\n      : '';\n  if (\n    componentType === 'card' &&\n    !attachment.image_url &&\n    !attachment.thumb_url\n  ) {\n    extra = 'no-image';\n  }\n\n  return (\n    <div\n      className={`str-chat__message-attachment str-chat__message-attachment--${componentType} str-chat__message-attachment--${attachment.type} str-chat__message-attachment--${componentType}--${extra}`}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderAttachmentActions = (props) => {\n  const { attachment: a, AttachmentActions, actionHandler } = props;\n  if (!a.actions || !a.actions.length) {\n    return null;\n  }\n\n  return (\n    <AttachmentActions\n      {...a}\n      id={a.id || ''}\n      actions={a.actions || []}\n      text={a.text || ''}\n      key={`key-actions-${a.id}`}\n      actionHandler={actionHandler}\n    />\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderImage = (props) => {\n  const { attachment: a, Image } = props;\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer(\n      <div className=\"str-chat__attachment\" key={`key-image-${a.id}`}>\n        <Image {...a} />\n        {renderAttachmentActions(props)}\n      </div>,\n      a,\n      'image',\n    );\n  }\n\n  return renderAttachmentWithinContainer(\n    <Image {...a} key={`key-image-${a.id}`} />,\n    a,\n    'image',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderCard = (props) => {\n  const { attachment: a, Card } = props;\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer(\n      <div className=\"str-chat__attachment\" key={`key-image-${a.id}`}>\n        <Card {...a} key={`key-card-${a.id}`} />\n        {renderAttachmentActions(props)}\n      </div>,\n      a,\n      'card',\n    );\n  }\n\n  return renderAttachmentWithinContainer(\n    <Card {...a} key={`key-card-${a.id}`} />,\n    a,\n    'card',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderFile = (props) => {\n  const { attachment: a, File } = props;\n  if (!a.asset_url) return null;\n\n  return renderAttachmentWithinContainer(\n    <File attachment={a} key={`key-file-${a.id}`} />,\n    a,\n    'file',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderAudio = (props) => {\n  const { attachment: a, Audio } = props;\n  return renderAttachmentWithinContainer(\n    <div className=\"str-chat__attachment\" key={`key-video-${a.id}`}>\n      <Audio og={a} />\n    </div>,\n    a,\n    'audio',\n  );\n};\n\n/**\n * @param {AttachmentProps} props\n */\nexport const renderMedia = (props) => {\n  const { attachment: a, Media } = props;\n  if (a.actions && a.actions.length) {\n    return renderAttachmentWithinContainer(\n      <div\n        className=\"str-chat__attachment str-chat__attachment-media\"\n        key={`key-video-${a.id}`}\n      >\n        <div className=\"str-chat__player-wrapper\">\n          <Media\n            className=\"react-player\"\n            url={a.asset_url}\n            width=\"100%\"\n            height=\"100%\"\n            controls\n          />\n        </div>\n        {renderAttachmentActions(props)}\n      </div>,\n      a,\n      'media',\n    );\n  }\n\n  return renderAttachmentWithinContainer(\n    <div className=\"str-chat__player-wrapper\" key={`key-video-${a.id}`}>\n      <Media\n        className=\"react-player\"\n        url={a.asset_url}\n        width=\"100%\"\n        height=\"100%\"\n        controls\n      />\n    </div>,\n    a,\n    'media',\n  );\n};\n\n/**\n * Attachment - The message attachment\n *\n * @example ../../docs/Attachment.md\n * @type { React.FC<import('types').AttachmentUIComponentProps> }\n */\nconst Attachment = ({\n  attachment,\n  Card = DefaultCard,\n  Image = DefaultImage,\n  Audio = DefaultAudio,\n  File = DefaultFile,\n  Media = DefaultMedia,\n  AttachmentActions = DefaultAttachmentActions,\n  ...rest\n}) => {\n  const propsWithDefault = {\n    attachment,\n    Card,\n    Image,\n    Audio,\n    File,\n    Media,\n    AttachmentActions,\n    ...rest,\n  };\n\n  if (isImageAttachment(attachment)) {\n    return renderImage(propsWithDefault);\n  }\n\n  if (isFileAttachment(attachment)) {\n    return renderFile(propsWithDefault);\n  }\n\n  if (isAudioAttachment(attachment)) {\n    return renderAudio(propsWithDefault);\n  }\n\n  if (isMediaAttachment(attachment)) {\n    return renderMedia(propsWithDefault);\n  }\n\n  return renderCard(propsWithDefault);\n};\n\nAttachment.propTypes = {\n  /**\n   * The attachment to render\n   * @see See [Attachment structure](https://getstream.io/chat/docs/#message_format)\n   *\n   *  */\n  attachment: PropTypes.object.isRequired,\n  /**\n   *\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  actionHandler: PropTypes.func,\n  /**\n   * Custom UI component for card type attachment\n   * Defaults to [Card](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/Card.js)\n   */\n  Card: /** @type {PropTypes.Validator<React.ComponentType<import('types').CardProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for file type attachment\n   * Defaults to [File](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/File.js)\n   */\n  File: /** @type {PropTypes.Validator<React.ComponentType<import('types').FileAttachmentProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for image type attachment\n   * Defaults to [Image](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Gallery/Image.js)\n   */\n  Image: /** @type {PropTypes.Validator<React.ComponentType<import('types').ImageProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for audio type attachment\n   * Defaults to [Audio](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/Audio.js)\n   */\n  Audio: /** @type {PropTypes.Validator<React.ComponentType<import('types').AudioProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for media type attachment\n   * Defaults to [ReactPlayer](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/ReactPlayer.js)\n   */\n  Media: /** @type {PropTypes.Validator<React.ComponentType<import('react-player').ReactPlayerProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI component for attachment actions\n   * Defaults to [AttachmentActions](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment/AttachmentActions.js)\n   */\n  AttachmentActions: /** @type {PropTypes.Validator<React.ComponentType<import('types').AttachmentActionsProps>>} */ (PropTypes.elementType),\n};\n\nexport default Attachment;\n","/* eslint-disable */\nexport const KEY_CODES = {\n  ESC: 27,\n  UP: 38,\n  DOWN: 40,\n  ENTER: 13,\n  TAB: 9,\n  SPACE: 32,\n};\n\n// This is self-made key shortcuts manager, used for caching key strokes\nclass Listener {\n  constructor() {\n    this.index = 0;\n    this.listeners = {};\n    this.refCount = 0;\n\n    this.f = (e) => {\n      const code = e.keyCode || e.which;\n      Object.values(this.listeners).forEach(({ keyCode, fn }) => {\n        if (keyCode.includes(code)) fn(e);\n      });\n    };\n  }\n\n  startListen = () => {\n    if (!this.refCount) {\n      // prevent multiple listeners in case of multiple TextareaAutocomplete components on page\n      document.addEventListener('keydown', this.f);\n    }\n    this.refCount++;\n  };\n\n  stopListen = () => {\n    this.refCount--;\n    if (!this.refCount) {\n      // prevent disable listening in case of multiple TextareaAutocomplete components on page\n      document.removeEventListener('keydown', this.f);\n    }\n  };\n\n  add = (keyCodes, fn) => {\n    let keyCode = keyCodes;\n\n    if (typeof keyCode !== 'object') keyCode = [keyCode];\n\n    this.listeners[this.index] = {\n      keyCode,\n      fn,\n    };\n\n    this.index += 1;\n\n    return this.index;\n  };\n\n  remove = (id) => {\n    delete this.listeners[id];\n  };\n\n  removeAll = () => {\n    this.listeners = {};\n    this.index = 0;\n  };\n}\n\nexport default new Listener();\n","//\n\nimport React from 'react';\n\nexport class Item extends React.Component {\n  selectItem = () => {\n    const { item, onSelectHandler } = this.props;\n    onSelectHandler(item);\n  };\n\n  render() {\n    const {\n      component: Component,\n      style,\n      onClickHandler,\n      item,\n      selected,\n      className,\n      innerRef,\n    } = this.props;\n\n    return (\n      <li className={`rta__item ${className || ''}`} style={style}>\n        <div\n          className={`rta__entity ${\n            selected === true ? 'rta__entity--selected' : ''\n          }`}\n          role=\"button\"\n          tabIndex={0}\n          onClick={onClickHandler}\n          onFocus={this.selectItem}\n          onMouseEnter={this.selectItem}\n          /* $FlowFixMe */\n          ref={innerRef}\n        >\n          <Component selected={selected} entity={item} />\n        </div>\n      </li>\n    );\n  }\n}\n\nexport default Item;\n","/* eslint-disable */\nimport React from 'react';\n\nimport Listeners, { KEY_CODES } from './listener';\nimport Item from './Item';\n\nexport class List extends React.Component {\n  state = {\n    selectedItem: null,\n  };\n\n  cachedValues = null;\n\n  componentDidMount() {\n    this.listeners.push(\n      Listeners.add([KEY_CODES.DOWN, KEY_CODES.UP], this.scroll),\n      Listeners.add([KEY_CODES.ENTER, KEY_CODES.TAB], this.onPressEnter),\n    );\n\n    const { values } = this.props;\n    if (values && values[0]) this.selectItem(values[0]);\n  }\n\n  UNSAFE_componentWillReceiveProps({ values }) {\n    const newValues = values.map((val) => this.getId(val)).join('');\n\n    if (this.cachedValues !== newValues && values && values[0]) {\n      this.selectItem(values[0]);\n      this.cachedValues = newValues;\n    }\n  }\n\n  componentWillUnmount() {\n    let listener;\n    while (this.listeners.length) {\n      listener = this.listeners.pop();\n      Listeners.remove(listener);\n    }\n  }\n\n  onPressEnter = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    const { values } = this.props;\n\n    this.modifyText(values[this.getPositionInList()]);\n  };\n\n  getPositionInList = () => {\n    const { values } = this.props;\n    const { selectedItem } = this.state;\n\n    if (!selectedItem) return 0;\n\n    return values.findIndex((a) => this.getId(a) === this.getId(selectedItem));\n  };\n\n  getId = (item) => {\n    const textToReplace = this.props.getTextToReplace(item);\n    if (textToReplace.key) {\n      return textToReplace.key;\n    }\n\n    if (typeof item === 'string' || !item.key) {\n      return textToReplace.text;\n    }\n\n    return item.key;\n  };\n\n  listeners = [];\n\n  itemsRef = {};\n\n  modifyText = (value) => {\n    if (!value) return;\n\n    const { onSelect, getTextToReplace, getSelectedItem } = this.props;\n\n    onSelect(getTextToReplace(value));\n    if (getSelectedItem) {\n      getSelectedItem(value);\n    }\n  };\n\n  selectItem = (item, keyboard = false) => {\n    this.setState({ selectedItem: item }, () => {\n      if (keyboard) {\n        this.props.dropdownScroll(this.itemsRef[this.getId(item)]);\n      }\n    });\n  };\n\n  scroll = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    const { values } = this.props;\n\n    const code = e.keyCode || e.which;\n\n    const oldPosition = this.getPositionInList();\n    let newPosition;\n    switch (code) {\n      case KEY_CODES.DOWN:\n        newPosition = oldPosition + 1;\n        break;\n      case KEY_CODES.UP:\n        newPosition = oldPosition - 1;\n        break;\n      default:\n        newPosition = oldPosition;\n        break;\n    }\n\n    newPosition =\n      ((newPosition % values.length) + values.length) % values.length; // eslint-disable-line\n    this.selectItem(\n      values[newPosition],\n      [KEY_CODES.DOWN, KEY_CODES.UP].includes(code),\n    );\n  };\n\n  isSelected = (item) => {\n    const { selectedItem } = this.state;\n    if (!selectedItem) return false;\n\n    return this.getId(selectedItem) === this.getId(item);\n  };\n\n  renderHeader = (value) => {\n    if (value[0] === '/') {\n      return `Commands matching <strong>${value.replace('/', '')}</strong>`;\n    }\n\n    if (value[0] === ':') {\n      return `Emoji matching <strong>${value.replace(':', '')}</strong>`;\n    }\n\n    if (value[0] === '@') {\n      return `Searching for people`;\n    }\n  };\n\n  render() {\n    const {\n      values,\n      component,\n      style,\n      itemClassName,\n      className,\n      itemStyle,\n    } = this.props;\n\n    return (\n      <ul className={`rta__list ${className || ''}`} style={style}>\n        <li\n          className=\"rta__list-header\"\n          dangerouslySetInnerHTML={{\n            __html: this.renderHeader(this.props.value),\n          }}\n        />\n        {values.map((item) => (\n          <Item\n            key={this.getId(item)}\n            innerRef={(ref) => {\n              this.itemsRef[this.getId(item)] = ref;\n            }}\n            selected={this.isSelected(item)}\n            item={item}\n            className={itemClassName}\n            style={itemStyle}\n            onClickHandler={this.onPressEnter}\n            onSelectHandler={this.selectItem}\n            component={component}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default List;\n","//\n\nexport function defaultScrollToItem(container, item) {\n  const itemHeight = parseInt(\n    getComputedStyle(item).getPropertyValue('height'),\n    10,\n  );\n\n  const containerHight =\n    parseInt(getComputedStyle(container).getPropertyValue('height'), 10) -\n    itemHeight;\n\n  const itemOffsetTop = item.offsetTop;\n  const actualScrollTop = container.scrollTop;\n\n  if (\n    itemOffsetTop < actualScrollTop + containerHight &&\n    actualScrollTop < itemOffsetTop\n  ) {\n    return;\n  }\n\n  // eslint-disable-next-line\n  container.scrollTop = itemOffsetTop;\n}\n","/* eslint-disable */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\nimport { isValidElementType } from 'react-is';\n\nimport Listeners, { KEY_CODES } from './listener';\nimport List from './List';\n\nimport { defaultScrollToItem } from './utils';\n\nimport Textarea from 'react-textarea-autosize';\n\nconst DEFAULT_CARET_POSITION = 'next';\n\nconst errorMessage = (message) =>\n  console.error(\n    `RTA: dataProvider fails: ${message}\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues`,\n  );\n\nclass ReactTextareaAutocomplete extends React.Component {\n  static defaultProps = {\n    closeOnClickOutside: true,\n    movePopupAsYouType: false,\n    value: '',\n    minChar: 1,\n    scrollToItem: true,\n    maxRows: 10,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { loadingComponent, trigger, value } = this.props;\n\n    // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n\n    this._createRegExp();\n\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n\n    if (!trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n    this.state = {\n      top: null,\n      left: null,\n      currentTrigger: null,\n      actualToken: '',\n      data: null,\n      value: value || '',\n      dataLoading: false,\n      selectionEnd: 0,\n      selectionStart: 0,\n      component: null,\n      listenerIndex: 0,\n    };\n  }\n\n  componentDidMount() {\n    Listeners.add(KEY_CODES.ESC, () => this._closeAutocomplete());\n    Listeners.add(KEY_CODES.SPACE, () => this._onSpace());\n    const listenerIndex = Listeners.add(KEY_CODES.ENTER, (e) =>\n      this._onEnter(e),\n    );\n    this.setState({\n      listenerIndex,\n    });\n    Listeners.startListen();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this._update(nextProps);\n  }\n\n  componentWillUnmount() {\n    Listeners.stopListen();\n    Listeners.remove(this.state.listenerIndex);\n  }\n\n  getSelectionPosition = () => {\n    if (!this.textareaRef) return null;\n\n    return {\n      selectionStart: this.textareaRef.selectionStart,\n      selectionEnd: this.textareaRef.selectionEnd,\n    };\n  };\n\n  getSelectedText = () => {\n    if (!this.textareaRef) return null;\n    const { selectionStart, selectionEnd } = this.textareaRef;\n\n    if (selectionStart === selectionEnd) return null;\n\n    return this.state.value.substr(\n      selectionStart,\n      selectionEnd - selectionStart,\n    );\n  };\n\n  setCaretPosition = (position = 0) => {\n    if (!this.textareaRef) return;\n\n    this.textareaRef.focus();\n    this.textareaRef.setSelectionRange(position, position);\n  };\n\n  getCaretPosition = () => {\n    if (!this.textareaRef) {\n      return 0;\n    }\n\n    return this.textareaRef.selectionEnd;\n  };\n\n  // handle the on-enter behaviour\n  _onEnter = (event) => {\n    const trigger = this.state.currentTrigger;\n    if (!this.textareaRef) {\n      return;\n    }\n\n    const hasFocus = this.textareaRef.matches(':focus');\n\n    // don't submit if the element has focus or the shift key is pressed\n    if (!hasFocus || event.shiftKey === true) {\n      return;\n    }\n    if (!trigger || !this.state.data) {\n      // trigger a submit\n      this._replaceWord();\n      if (this.textareaRef) {\n        this.textareaRef.selectionEnd = 0;\n      }\n      this.props.handleSubmit(event);\n    }\n  };\n\n  // handle the on-space behaviour\n  _onSpace = () => {\n    if (!this.props.replaceWord) {\n      return;\n    }\n\n    if (!this.textareaRef) {\n      return;\n    }\n    const hasFocus = this.textareaRef.matches(':focus');\n\n    // don't change characters if the element doesn't have focus\n    if (!hasFocus) {\n      return;\n    }\n    this._replaceWord();\n  };\n\n  _replaceWord = () => {\n    const lastWordRegex = /([^\\s]+)(\\s*)$/;\n    const { value } = this.state;\n    const match = lastWordRegex.exec(value.slice(0, this.getCaretPosition()));\n    const lastWord = match && match[1];\n    if (!lastWord) {\n      return;\n    }\n    const spaces = match[2];\n\n    const newWord = this.props.replaceWord(lastWord);\n    if (newWord == null) {\n      return;\n    }\n    const textBeforeWord = value.slice(\n      0,\n      this.getCaretPosition() - match[0].length,\n    );\n    const textAfterCaret = value.slice(this.getCaretPosition(), -1);\n    const newText = textBeforeWord + newWord + spaces + textAfterCaret;\n    this.setState(\n      {\n        value: newText,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (this.props.onChange) this.props.onChange(e);\n      },\n    );\n  };\n\n  _onSelect = (newToken) => {\n    const { selectionEnd, currentTrigger, value: textareaValue } = this.state;\n    const { onChange, trigger } = this.props;\n\n    if (!currentTrigger) return;\n\n    const computeCaretPosition = (position, token, startToken) => {\n      switch (position) {\n        case 'start':\n          return startToken;\n        case 'next':\n        case 'end':\n          return startToken + token.length;\n        default:\n          if (!Number.isInteger(position)) {\n            throw new Error(\n              'RTA: caretPosition should be \"start\", \"next\", \"end\" or number.',\n            );\n          }\n\n          return position;\n      }\n    };\n\n    const textToModify = textareaValue.slice(0, selectionEnd);\n\n    const startOfTokenPosition = textToModify.search(\n      /**\n       * It's important to escape the currentTrigger char for chars like [, (,...\n       */\n      new RegExp(`\\\\${currentTrigger}${`[^\\\\${currentTrigger}${'\\\\s'}]`}*$`),\n    );\n\n    // we add space after emoji is selected if a caret position is next\n    const newTokenString =\n      newToken.caretPosition === 'next' ? `${newToken.text} ` : newToken.text;\n\n    const newCaretPosition = computeCaretPosition(\n      newToken.caretPosition,\n      newTokenString,\n      startOfTokenPosition,\n    );\n\n    const modifiedText =\n      textToModify.substring(0, startOfTokenPosition) + newTokenString;\n\n    // set the new textarea value and after that set the caret back to its position\n    this.setState(\n      {\n        value: textareaValue.replace(textToModify, modifiedText),\n        dataLoading: false,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (onChange) onChange(e);\n\n        this.setCaretPosition(newCaretPosition);\n      },\n    );\n    this._closeAutocomplete();\n  };\n\n  _getItemOnSelect = () => {\n    const { currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { callback } = triggerSettings;\n\n    if (!callback) return null;\n\n    return (item) => {\n      if (typeof callback !== 'function') {\n        throw new Error(\n          'Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n      if (callback) {\n        return callback(item, currentTrigger);\n      }\n      return null;\n    };\n  };\n\n  _getTextToReplace = () => {\n    const { currentTrigger, actualToken } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { output } = triggerSettings;\n\n    return (item) => {\n      if (\n        typeof item === 'object' &&\n        (!output || typeof output !== 'function')\n      ) {\n        throw new Error(\n          'Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n\n      if (output) {\n        const textToReplace = output(item, currentTrigger);\n\n        if (!textToReplace || typeof textToReplace === 'number') {\n          throw new Error(\n            `Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \"${String(\n              textToReplace,\n            )}\". Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n`,\n          );\n        }\n\n        if (typeof textToReplace === 'string') {\n          return {\n            text: textToReplace,\n            caretPosition: DEFAULT_CARET_POSITION,\n          };\n        }\n\n        if (!textToReplace.text) {\n          throw new Error(\n            `Output \"text\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        if (!textToReplace.caretPosition) {\n          throw new Error(\n            `Output \"caretPosition\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        return textToReplace;\n      }\n\n      if (typeof item !== 'string') {\n        throw new Error('Output item should be string\\n');\n      }\n\n      return {\n        text: `${currentTrigger}${item}${currentTrigger}`,\n        caretPosition: DEFAULT_CARET_POSITION,\n      };\n    };\n  };\n\n  _getCurrentTriggerSettings = () => {\n    const { currentTrigger } = this.state;\n\n    if (!currentTrigger) return null;\n\n    return this.props.trigger[currentTrigger];\n  };\n\n  _getValuesFromProvider = () => {\n    const { currentTrigger, actualToken } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n    if (!currentTrigger || !triggerSettings) {\n      return;\n    }\n\n    const { dataProvider, component } = triggerSettings;\n\n    if (typeof dataProvider !== 'function') {\n      throw new Error('Trigger provider has to be a function!');\n    }\n\n    this.setState({\n      dataLoading: true,\n    });\n\n    // Modified: send the full text to support / style commands\n    dataProvider(actualToken, this.state.value, (data, token) => {\n      // Make sure that the result is still relevant for current query\n      if (token !== this.state.actualToken) return;\n\n      if (!Array.isArray(data)) {\n        throw new Error('Trigger provider has to provide an array!');\n      }\n\n      if (!isValidElementType(component)) {\n        throw new Error('Component should be defined!');\n      }\n\n      // throw away if we resolved old trigger\n      if (currentTrigger !== this.state.currentTrigger) return;\n\n      // if we haven't resolved any data let's close the autocomplete\n      if (!data.length) {\n        this._closeAutocomplete();\n        return;\n      }\n\n      this.setState({\n        dataLoading: false,\n        data,\n        component,\n      });\n    });\n  };\n\n  _getSuggestions = () => {\n    const { currentTrigger, data } = this.state;\n\n    if (!currentTrigger || !data || (data && !data.length)) return null;\n\n    return data;\n  };\n\n  _createRegExp = () => {\n    const { trigger } = this.props;\n\n    // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n    // https://stackoverflow.com/a/8057827/2719917\n    this.tokenRegExp = new RegExp(\n      `([${Object.keys(trigger).join('')}])(?:(?!\\\\1)[^\\\\s])*$`,\n    );\n  };\n\n  // TODO: This is an anti pattern in react, should come up with a better way\n  _update({ value, trigger }) {\n    const { value: oldValue } = this.state;\n    const { trigger: oldTrigger } = this.props;\n\n    if (value !== oldValue || !oldValue) this.setState({ value });\n    /**\n     * check if trigger chars are changed, if so, change the regexp accordingly\n     */\n    if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n      this._createRegExp();\n    }\n  }\n\n  /**\n   * Close autocomplete, also clean up trigger (to avoid slow promises)\n   */\n  _closeAutocomplete = () => {\n    this.setState({\n      data: null,\n      dataLoading: false,\n      currentTrigger: null,\n      top: null,\n      left: null,\n    });\n  };\n\n  _cleanUpProps = () => {\n    const props = { ...this.props };\n    const notSafe = [\n      'loadingComponent',\n      'containerStyle',\n      'minChar',\n      'scrollToItem',\n      'ref',\n      'innerRef',\n      'onChange',\n      'onCaretPositionChange',\n      'className',\n      'value',\n      'trigger',\n      'listStyle',\n      'itemStyle',\n      'containerStyle',\n      'loaderStyle',\n      'className',\n      'containerClassName',\n      'listClassName',\n      'itemClassName',\n      'loaderClassName',\n      'closeOnClickOutside',\n      'dropdownStyle',\n      'dropdownClassName',\n      'movePopupAsYouType',\n      'handleSubmit',\n      'replaceWord',\n      'grow',\n      'additionalTextareaProps',\n    ];\n\n    // eslint-disable-next-line\n    for (const prop in props) {\n      if (notSafe.includes(prop)) delete props[prop];\n    }\n\n    return props;\n  };\n\n  _isCommand = (text) => {\n    if (text[0] !== '/') return false;\n\n    const tokens = text.split(' ');\n\n    if (tokens.length > 1) return false;\n\n    return true;\n  };\n\n  _changeHandler = (e) => {\n    const {\n      trigger,\n      onChange,\n      minChar,\n      onCaretPositionChange,\n      movePopupAsYouType,\n    } = this.props;\n    const { top, left } = this.state;\n\n    const textarea = e.target;\n    const { selectionEnd, selectionStart } = textarea;\n    const value = textarea.value;\n\n    if (onChange) {\n      e.persist();\n      onChange(e);\n    }\n\n    if (onCaretPositionChange) {\n      const caretPosition = this.getCaretPosition();\n      onCaretPositionChange(caretPosition);\n    }\n\n    this.setState({\n      value,\n    });\n\n    let currentTrigger;\n    let lastToken;\n\n    if (this._isCommand(value)) {\n      currentTrigger = '/';\n      lastToken = value;\n    } else {\n      let tokenMatch = value\n        .slice(0, selectionEnd)\n        .match(/(?!^|\\W)?[:@][^\\s]*\\s?[^\\s]*$/g);\n\n      lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n\n      currentTrigger =\n        (lastToken && Object.keys(trigger).find((a) => a === lastToken[0])) ||\n        null;\n    }\n\n    /*\n     if we lost the trigger token or there is no following character we want to close\n     the autocomplete\n    */\n    if (!lastToken || lastToken.length <= minChar) {\n      this._closeAutocomplete();\n      return;\n    }\n\n    const actualToken = lastToken.slice(1);\n\n    // if trigger is not configured step out from the function, otherwise proceed\n    if (!currentTrigger) {\n      return;\n    }\n\n    if (\n      movePopupAsYouType ||\n      (top === null && left === null) ||\n      // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1\n    ) {\n      const { top: newTop, left: newLeft } = getCaretCoordinates(\n        textarea,\n        selectionEnd,\n      );\n\n      this.setState({\n        // make position relative to textarea\n        top: newTop - this.textareaRef.scrollTop || 0,\n        left: newLeft,\n      });\n    }\n\n    this.setState(\n      {\n        selectionEnd,\n        selectionStart,\n        currentTrigger,\n        actualToken,\n      },\n      () => {\n        try {\n          this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      },\n    );\n  };\n\n  _selectHandler = (e) => {\n    const { onCaretPositionChange, onSelect } = this.props;\n\n    if (onCaretPositionChange) {\n      const caretPosition = this.getCaretPosition();\n      onCaretPositionChange(caretPosition);\n    }\n\n    if (onSelect) {\n      e.persist();\n      onSelect(e);\n    }\n  };\n\n  _onClickAndBlurHandler = (e) => {\n    const { closeOnClickOutside, onBlur } = this.props;\n\n    // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n    // that was actually clicked. If we clicked inside the autoselect dropdown, then\n    // that's not a blur, from the autoselect's point of view, so then do nothing.\n    const el = e.relatedTarget;\n    if (\n      this.dropdownRef &&\n      el instanceof Node &&\n      this.dropdownRef.contains(el)\n    ) {\n      return;\n    }\n\n    if (closeOnClickOutside) {\n      this._closeAutocomplete();\n    }\n\n    if (onBlur) {\n      e.persist();\n      onBlur(e);\n    }\n  };\n\n  _onScrollHandler = () => {\n    this._closeAutocomplete();\n  };\n\n  _dropdownScroll = (item) => {\n    const { scrollToItem } = this.props;\n\n    if (!scrollToItem) return;\n\n    if (scrollToItem === true) {\n      defaultScrollToItem(this.dropdownRef, item);\n      return;\n    }\n\n    if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n      throw new Error(\n        '`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.',\n      );\n    }\n\n    scrollToItem(this.dropdownRef, item);\n  };\n\n  render() {\n    const {\n      loadingComponent: Loader,\n      style,\n      className,\n      itemStyle,\n      listClassName,\n      itemClassName,\n      dropdownClassName,\n      dropdownStyle,\n      containerStyle,\n      containerClassName,\n      loaderStyle,\n      loaderClassName,\n    } = this.props;\n    const { dataLoading, currentTrigger, component, value } = this.state;\n\n    const suggestionData = this._getSuggestions();\n    const textToReplace = this._getTextToReplace();\n    const selectedItem = this._getItemOnSelect();\n\n    let maxRows = this.props.maxRows;\n    if (!this.props.grow) {\n      maxRows = 1;\n    }\n\n    return (\n      <div\n        className={`rta ${dataLoading === true ? 'rta--loading' : ''} ${\n          containerClassName || ''\n        }`}\n        style={containerStyle}\n      >\n        {(dataLoading || suggestionData) && currentTrigger && (\n          <div\n            ref={(ref) => {\n              // $FlowFixMe\n              this.dropdownRef = ref;\n            }}\n            style={{ ...dropdownStyle }}\n            className={`rta__autocomplete ${dropdownClassName || ''}`}\n          >\n            {suggestionData && component && textToReplace && (\n              <List\n                value={value}\n                values={suggestionData}\n                component={component}\n                className={listClassName}\n                itemClassName={itemClassName}\n                itemStyle={itemStyle}\n                getTextToReplace={textToReplace}\n                getSelectedItem={selectedItem}\n                onSelect={this._onSelect}\n                dropdownScroll={this._dropdownScroll}\n              />\n            )}\n          </div>\n        )}\n\n        <Textarea\n          {...this._cleanUpProps()}\n          ref={(ref) => {\n            this.props.innerRef && this.props.innerRef(ref);\n            this.textareaRef = ref;\n          }}\n          maxRows={maxRows}\n          className={`rta__textarea ${className || ''}`}\n          onChange={this._changeHandler}\n          onSelect={this._selectHandler}\n          onScroll={this._onScrollHandler}\n          onClick={\n            // The textarea itself is outside the autoselect dropdown.\n            this._onClickAndBlurHandler\n          }\n          onBlur={this._onClickAndBlurHandler}\n          onFocus={this.props.onFocus}\n          value={value}\n          style={style}\n          {...this.props.additionalTextareaProps}\n        />\n      </div>\n    );\n  }\n}\n\nconst triggerPropsCheck = ({ trigger }) => {\n  if (!trigger) return Error('Invalid prop trigger. Prop missing.');\n\n  const triggers = Object.entries(trigger);\n\n  for (let i = 0; i < triggers.length; i += 1) {\n    const [triggerChar, settings] = triggers[i];\n\n    if (typeof triggerChar !== 'string' || triggerChar.length !== 1) {\n      return Error(\n        'Invalid prop trigger. Keys of the object has to be string / one character.',\n      );\n    }\n\n    // $FlowFixMe\n    const triggerSetting = settings;\n\n    const { component, dataProvider, output, callback } = triggerSetting;\n\n    if (!isValidElementType(component)) {\n      return Error('Invalid prop trigger: component should be defined.');\n    }\n\n    if (!dataProvider || typeof dataProvider !== 'function') {\n      return Error('Invalid prop trigger: dataProvider should be defined.');\n    }\n\n    if (output && typeof output !== 'function') {\n      return Error('Invalid prop trigger: output should be a function.');\n    }\n\n    if (callback && typeof callback !== 'function') {\n      return Error('Invalid prop trigger: callback should be a function.');\n    }\n  }\n\n  return null;\n};\n\nReactTextareaAutocomplete.propTypes = {\n  loadingComponent: PropTypes.elementType,\n  minChar: PropTypes.number,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  className: PropTypes.string,\n  containerStyle: PropTypes.object,\n  containerClassName: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  style: PropTypes.object,\n  listStyle: PropTypes.object,\n  itemStyle: PropTypes.object,\n  loaderStyle: PropTypes.object,\n  dropdownStyle: PropTypes.object,\n  listClassName: PropTypes.string,\n  itemClassName: PropTypes.string,\n  loaderClassName: PropTypes.string,\n  dropdownClassName: PropTypes.string,\n  value: PropTypes.string,\n  trigger: triggerPropsCheck, //eslint-disable-line\n};\n\nexport default ReactTextareaAutocomplete;\n","// @ts-check\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Avatar - A round avatar image with fallback to username's first letter\n *\n * @example ../../docs/Avatar.md\n * @typedef {import('types').AvatarProps} Props\n * @type { React.FC<Props>}\n */\nconst Avatar = ({\n  size = 32,\n  name,\n  shape = 'circle',\n  image,\n  onClick = () => {},\n  onMouseOver = () => {},\n}) => {\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    setLoaded(false);\n    setError(false);\n  }, [image]);\n\n  const initials = (name || '').charAt(0);\n\n  return (\n    <div\n      data-testid=\"avatar\"\n      className={`str-chat__avatar str-chat__avatar--${shape}`}\n      title={name}\n      style={{\n        width: size,\n        height: size,\n        flexBasis: size,\n        lineHeight: `${size}px`,\n        fontSize: size / 2,\n      }}\n      onClick={onClick}\n      onMouseOver={onMouseOver}\n    >\n      {image && !error ? (\n        <img\n          data-testid=\"avatar-img\"\n          src={image}\n          alt={initials}\n          className={`str-chat__avatar-image${\n            loaded ? ' str-chat__avatar-image--loaded' : ''\n          }`}\n          style={{\n            width: size,\n            height: size,\n            flexBasis: size,\n            objectFit: 'cover',\n          }}\n          onLoad={() => setLoaded(true)}\n          onError={() => setError(true)}\n        />\n      ) : (\n        <div\n          data-testid=\"avatar-fallback\"\n          className=\"str-chat__avatar-fallback\"\n        >\n          {initials}\n        </div>\n      )}\n    </div>\n  );\n};\n\nAvatar.propTypes = {\n  /** image url */\n  image: PropTypes.string,\n  /** name of the picture, used for title tag fallback */\n  name: PropTypes.string,\n  /** shape of the avatar, circle, rounded or square */\n  shape: PropTypes.oneOf(['circle', 'rounded', 'square']),\n  /** size in pixels */\n  size: PropTypes.number,\n  /** click event handler */\n  onClick: PropTypes.func,\n  /** mouseOver event handler */\n  onMouseOver: PropTypes.func,\n};\n\nexport default Avatar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/** @type {React.FC<import('types').ChannelPreviewUIComponentProps>} */\nconst ChannelPreviewCountOnly = ({\n  channel,\n  setActiveChannel,\n  watchers,\n  unread,\n  displayTitle,\n}) => {\n  return (\n    <div className={unread >= 1 ? 'unread' : ''}>\n      <button onClick={() => setActiveChannel(channel, watchers)}>\n        {' '}\n        {displayTitle} <span>{unread}</span>\n      </button>\n    </div>\n  );\n};\n\nChannelPreviewCountOnly.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n  /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chat) for doc */\n  setActiveChannel: PropTypes.func.isRequired,\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */ (PropTypes.object),\n  /** Number of unread messages */\n  unread: PropTypes.number,\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n};\n\nexport default React.memo(ChannelPreviewCountOnly);\n","export const getLatestMessagePreview = (channel, t) => {\n  const latestMessage =\n    channel.state.messages[channel.state.messages.length - 1];\n\n  if (!latestMessage) {\n    return t('Nothing yet...');\n  }\n  if (latestMessage.deleted_at) {\n    return t('Message deleted');\n  }\n  if (latestMessage.text) {\n    return latestMessage.text;\n  }\n  if (latestMessage.command) {\n    return `/${latestMessage.command}`;\n  }\n  if (latestMessage.attachments.length) {\n    return t('🏙 Attachment...');\n  }\n\n  return t('Empty message...');\n};\n\nexport const getDisplayTitle = (channel, currentUser) => {\n  let title = channel.data.name;\n  const members = Object.values(channel.state.members);\n\n  if (!title && members.length === 2) {\n    const otherMember = members.find((m) => m.user.id !== currentUser.id);\n    title = otherMember.user.name;\n  }\n\n  return title;\n};\n\nexport const getDisplayImage = (channel, currentUser) => {\n  let { image } = channel.data;\n  const members = Object.values(channel.state.members);\n\n  if (!image && members.length === 2) {\n    const otherMember = members.find((m) => m.user.id !== currentUser.id);\n    image = otherMember.user.image;\n  }\n\n  return image;\n};\n","// @ts-check\nimport React, { useState, useEffect, useContext } from 'react';\n\n// eslint-disable-next-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport ChannelPreviewCountOnly from './ChannelPreviewCountOnly';\nimport { TranslationContext, ChatContext } from '../../context';\nimport {\n  getLatestMessagePreview,\n  getDisplayTitle,\n  getDisplayImage,\n} from './utils';\n\n/**\n * @type {React.FC<import('types').ChannelPreviewProps>}\n */\nconst ChannelPreview = (props) => {\n  const { t } = useContext(TranslationContext);\n  const { client, channel: activeChannel, setActiveChannel } = useContext(\n    ChatContext,\n  );\n  const { channel, Preview = ChannelPreviewCountOnly } = props;\n  const [lastMessage, setLastMessage] = useState(\n    /** @type {import('stream-chat').MessageResponse | undefined} */ (undefined),\n  );\n  const [unread, setUnread] = useState(0);\n\n  useEffect(() => {\n    setUnread(channel.countUnread());\n  }, [channel]);\n\n  useEffect(() => {\n    /** @type {(event: StreamChat.Event) => void} Typescript syntax */\n    const handleEvent = (event) => {\n      const isActive = activeChannel?.cid === channel.cid;\n      setLastMessage(event.message);\n\n      if (!isActive) {\n        setUnread(channel.countUnread());\n      } else {\n        setUnread(0);\n      }\n    };\n\n    channel.on('message.new', handleEvent);\n    channel.on('message.updated', handleEvent);\n    channel.on('message.deleted', handleEvent);\n\n    return () => {\n      channel.off('message.new', handleEvent);\n      channel.off('message.updated', handleEvent);\n      channel.off('message.deleted', handleEvent);\n    };\n  }, [channel, activeChannel]);\n\n  useEffect(() => {\n    const isActive = activeChannel?.cid === channel.cid;\n\n    if (isActive) {\n      setUnread(0);\n    } else {\n      setUnread(channel.countUnread());\n    }\n  }, [activeChannel, channel]);\n\n  if (!Preview) {\n    return null;\n  }\n\n  return (\n    <Preview\n      {...props}\n      setActiveChannel={setActiveChannel}\n      lastMessage={lastMessage}\n      unread={unread}\n      latestMessage={getLatestMessagePreview(channel, t)}\n      displayTitle={getDisplayTitle(channel, client.user)}\n      displayImage={getDisplayImage(channel, client.user)}\n      active={activeChannel && activeChannel.cid === channel.cid}\n    />\n  );\n};\n\nChannelPreview.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: /** @type {PropTypes.Validator<import('stream-chat').Channel>} */ (PropTypes\n    .object.isRequired),\n  /** Current selected channel object */\n  activeChannel: /** @type {PropTypes.Validator<import('stream-chat').Channel | null | undefined>} */ (PropTypes.object),\n  /**\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n   * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n   * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n   *\n   * The Preview to use, defaults to ChannelPreviewLastMessage\n   * */\n  Preview: /** @type {PropTypes.Validator<React.ComponentType<import('types').ChannelPreviewUIComponentProps>>} */ (PropTypes.elementType),\n};\n\nexport default ChannelPreview;\n","// @ts-check\nimport React, { useRef } from 'react';\n// eslint-disable-next-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport { Channel } from 'stream-chat';\n\nimport { Avatar } from '../Avatar';\n\n/**\n *\n * @example ../../docs/ChannelPreviewCompact.md\n * @type {import('types').ChannelPreviewCompact}\n */\nconst ChannelPreviewCompact = (props) => {\n  /**\n   * @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax\n   */\n  const channelPreviewButton = useRef(null);\n  const unreadClass =\n    props.unread_count >= 1 ? 'str-chat__channel-preview-compact--unread' : '';\n  const activeClass = props.active\n    ? 'str-chat__channel-preview-compact--active'\n    : '';\n\n  const onSelectChannel = () => {\n    props.setActiveChannel(props.channel, props.watchers);\n    // eslint-disable-next-line no-unused-expressions\n    channelPreviewButton?.current?.blur();\n  };\n\n  return (\n    <button\n      data-testid=\"channel-preview-button\"\n      onClick={onSelectChannel}\n      ref={channelPreviewButton}\n      className={`str-chat__channel-preview-compact ${unreadClass} ${activeClass}`}\n    >\n      <div className=\"str-chat__channel-preview-compact--left\">\n        <Avatar image={props.displayImage} size={20} />\n      </div>\n      <div className=\"str-chat__channel-preview-compact--right\">\n        {props.displayTitle}\n      </div>\n    </button>\n  );\n};\n\nChannelPreviewCompact.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.instanceOf(Channel).isRequired,\n  /** Current selected channel object */\n  activeChannel: PropTypes.instanceOf(Channel),\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */ (PropTypes.object),\n  /** Number of unread messages */\n  unread: PropTypes.number,\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n  /** Image of channel to display */\n  displayImage: PropTypes.string,\n};\n\nexport default React.memo(ChannelPreviewCompact);\n","// @ts-check\nimport React, { useRef } from 'react';\n// eslint-disable-next-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport { truncate } from '../../utils';\n\nimport { Avatar } from '../Avatar';\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n *\n * @example ../../docs/ChannelPreviewLastMessage.md\n * @type {import('types').ChannelPreviewLastMessage}\n */\nconst ChannelPreviewLastMessage = (props) => {\n  /** @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax */\n  const channelPreviewButton = useRef(null);\n  const onSelectChannel = () => {\n    props.setActiveChannel(props.channel, props.watchers);\n    // eslint-disable-next-line no-unused-expressions\n    channelPreviewButton?.current?.blur();\n  };\n\n  const unreadClass =\n    props.unread >= 1 ? 'str-chat__channel-preview--unread' : '';\n  const activeClass = props.active ? 'str-chat__channel-preview--active' : '';\n\n  return (\n    <div className={`str-chat__channel-preview ${unreadClass} ${activeClass}`}>\n      <button\n        onClick={onSelectChannel}\n        ref={channelPreviewButton}\n        data-testid=\"channel-preview-button\"\n      >\n        {props.unread >= 1 && (\n          <div className=\"str-chat__channel-preview--dot\" />\n        )}\n        <Avatar image={props.displayImage} />\n        <div className=\"str-chat__channel-preview-info\">\n          <span className=\"str-chat__channel-preview-title\">\n            {props.displayTitle}\n          </span>\n          <span className=\"str-chat__channel-preview-last-message\">\n            {truncate(props.latestMessage, props.latestMessageLength)}\n          </span>\n          {props.unread >= 1 && (\n            <span className=\"str-chat__channel-preview-unread-count\">\n              {props.unread}\n            </span>\n          )}\n        </div>\n      </button>\n    </div>\n  );\n};\n\nChannelPreviewLastMessage.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n  /** Current selected channel object */\n  activeChannel: PropTypes.object,\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: PropTypes.object,\n  /** Number of unread messages */\n  unread: PropTypes.number,\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n  /** Length of latest message to truncate at */\n  latestMessageLength: PropTypes.number,\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n  /** Image of channel to display */\n  displayImage: PropTypes.string,\n};\n\nChannelPreviewLastMessage.defaultProps = {\n  latestMessageLength: 20,\n};\n\nexport default React.memo(ChannelPreviewLastMessage);\n","// @ts-check\nimport React, { useRef } from 'react';\n// eslint-disable-next-line import/no-unresolved\nimport PropTypes from 'prop-types';\nimport { truncate } from '../../utils';\n\nimport { Avatar } from '../Avatar';\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n * Its best suited for messenger type chat.\n *\n * @example ../../docs/ChannelPreviewMessenger.md\n * @type {import('types').ChannelPreviewMessenger}\n */\nconst ChannelPreviewMessenger = (props) => {\n  /** @type {React.MutableRefObject<HTMLButtonElement | null>} Typescript syntax */\n  const channelPreviewButton = useRef(null);\n  const unreadClass =\n    props.unread >= 1 ? 'str-chat__channel-preview-messenger--unread' : '';\n  const activeClass = props.active\n    ? 'str-chat__channel-preview-messenger--active'\n    : '';\n  const onSelectChannel = () => {\n    props.setActiveChannel(props.channel, props.watchers);\n    // eslint-disable-next-line no-unused-expressions\n    channelPreviewButton?.current?.blur();\n  };\n\n  return (\n    <button\n      onClick={onSelectChannel}\n      ref={channelPreviewButton}\n      className={`str-chat__channel-preview-messenger ${unreadClass} ${activeClass}`}\n      data-testid=\"channel-preview-button\"\n    >\n      <div className=\"str-chat__channel-preview-messenger--left\">\n        {<Avatar image={props.displayImage} size={40} />}\n      </div>\n      <div className=\"str-chat__channel-preview-messenger--right\">\n        <div className=\"str-chat__channel-preview-messenger--name\">\n          <span>{props.displayTitle}</span>\n        </div>\n        <div className=\"str-chat__channel-preview-messenger--last-message\">\n          {truncate(props.latestMessage, props.latestMessageLength)}\n        </div>\n      </div>\n    </button>\n  );\n};\n\nChannelPreviewMessenger.propTypes = {\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  channel: PropTypes.object.isRequired,\n  /** Current selected channel object */\n  activeChannel: PropTypes.object,\n  /** Setter for selected channel */\n  setActiveChannel: PropTypes.func.isRequired,\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n   * */\n  watchers: PropTypes.object,\n  /** Number of unread messages */\n  unread: PropTypes.number,\n  /** If channel of component is active (selected) channel */\n  active: PropTypes.bool,\n  /** Latest message's text. */\n  latestMessage: PropTypes.string,\n  /** Length of latest message to truncate at */\n  latestMessageLength: PropTypes.number,\n  /** Title of channel to display */\n  displayTitle: PropTypes.string,\n  /** Image of channel to display */\n  displayImage: PropTypes.string,\n};\n\nChannelPreviewMessenger.defaultProps = {\n  latestMessageLength: 14,\n};\n\nexport default React.memo(ChannelPreviewMessenger);\n","// @ts-check\nimport React from 'react';\n\nexport const ReplyIcon = () => (\n  <svg width=\"18\" height=\"15\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z\"\n      fillRule=\"nonzero\"\n    />\n  </svg>\n);\n\nexport const DeliveredCheckIcon = () => (\n  <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\n      fill=\"#006CFF\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport const ReactionIcon = () => (\n  <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport const ThreadIcon = () => (\n  <svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport const ErrorIcon = () => (\n  <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n      fill=\"#EA152F\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\nimport { ReplyIcon } from './icons';\n\n/** @type {React.FC<import(\"types\").MessageRepliesCountButtonProps>} */\nconst MessageRepliesCountButton = ({\n  reply_count,\n  labelSingle,\n  labelPlural,\n  onClick,\n}) => {\n  const { t } = useContext(TranslationContext);\n  let singleReplyText;\n  let pluralReplyText;\n\n  if (reply_count === 1) {\n    if (labelSingle) {\n      singleReplyText = `1 ${labelSingle}`;\n    } else {\n      singleReplyText = t('1 reply');\n    }\n  }\n\n  if (reply_count && reply_count > 1) {\n    if (labelPlural) {\n      pluralReplyText = `${reply_count} ${labelPlural}`;\n    } else {\n      pluralReplyText = t('{{ replyCount }} replies', {\n        replyCount: reply_count,\n      });\n    }\n  }\n\n  if (reply_count && reply_count !== 0) {\n    return (\n      <button\n        data-testid=\"replies-count-button\"\n        className=\"str-chat__message-replies-count-button\"\n        onClick={onClick}\n      >\n        <ReplyIcon />\n        {reply_count === 1 ? singleReplyText : pluralReplyText}\n      </button>\n    );\n  }\n  return null;\n};\n\nMessageRepliesCountButton.defaultProps = {\n  reply_count: 0,\n};\n\nMessageRepliesCountButton.propTypes = {\n  /** Label for number of replies, when count is 1 */\n  labelSingle: PropTypes.string,\n  /** Label for number of replies, when count is more than 1 */\n  labelPlural: PropTypes.string,\n  /** Number of replies */\n  reply_count: PropTypes.number,\n  /**\n   * click handler for button\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  onClick: PropTypes.func,\n};\n\nexport default React.memo(MessageRepliesCountButton);\n","// @ts-check\nimport React, { useRef, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").ModalProps>} */\nconst Modal = ({ children, onClose, open }) => {\n  /** @type {React.RefObject<HTMLDivElement>} */\n  const innerRef = useRef(null);\n  const { t } = useContext(TranslationContext);\n\n  /** @param {React.MouseEvent} e */\n  const handleClick = (e) => {\n    if (\n      e.target instanceof Node &&\n      !innerRef.current?.contains(e.target) &&\n      onClose\n    ) {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    if (!open) return () => {};\n    /** @type {EventListener} */\n    const handleEscKey = (e) => {\n      if (e instanceof KeyboardEvent && e.keyCode === 27 && onClose) {\n        onClose();\n      }\n    };\n    document.addEventListener('keyPress', handleEscKey, false);\n    return () => document.removeEventListener('keyPress', handleEscKey, false);\n  }, [onClose, open]);\n\n  const openClasses = open\n    ? 'str-chat__modal--open'\n    : 'str-chat__modal--closed';\n\n  return (\n    <div className={`str-chat__modal ${openClasses}`} onClick={handleClick}>\n      <div className=\"str-chat__modal__close-button\">\n        {t('Close')}\n        <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\n            fillRule=\"evenodd\"\n          />\n        </svg>\n      </div>\n      <div className=\"str-chat__modal__inner\" ref={innerRef}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nModal.propTypes = {\n  /** Callback handler for closing of modal. */\n  onClose: PropTypes.func.isRequired,\n  /** If true, modal is opened or visible. */\n  open: PropTypes.bool.isRequired,\n};\n\nexport default Modal;\n","// @ts-check\nimport React from 'react';\n\nconst LoadingItems = () => (\n  <div className=\"str-chat__loading-channels-item\">\n    <div className=\"str-chat__loading-channels-avatar\" />\n    <div className=\"str-chat__loading-channels-meta\">\n      <div className=\"str-chat__loading-channels-username\" />\n      <div className=\"str-chat__loading-channels-status\" />\n    </div>\n  </div>\n);\n\n/**\n * LoadingChannels - Fancy loading indicator for the channel list\n *\n * @example ../../docs/LoadingChannels.md\n */\nconst LoadingChannels = () => (\n  <div className=\"str-chat__loading-channels\">\n    <LoadingItems />\n    <LoadingItems />\n    <LoadingItems />\n  </div>\n);\n\nexport default React.memo(LoadingChannels);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { TranslationContext } from '../../context';\n\n/**\n * LoadingErrorIndicator - UI component for error indicator in Channel.\n *\n * @example ../../docs/LoadingErrorIndicator.md\n * @type {React.FC<import('types').LoadingErrorIndicatorProps>}\n */\nconst LoadingErrorIndicator = ({ error }) => {\n  const { t } = useContext(TranslationContext);\n  if (!error) return null;\n\n  return (\n    // @ts-ignore\n    <div>{t('Error: {{ errorMessage }}', { errorMessage: error.message })}</div>\n  );\n};\n\nLoadingErrorIndicator.defaultProps = {\n  error: null,\n};\n\nLoadingErrorIndicator.propTypes = {\n  /** Error object */\n  error: PropTypes.instanceOf(Error),\n};\n\nexport default React.memo(LoadingErrorIndicator);\n","// @ts-check\nimport React from 'react';\n\n// @ts-ignore\nimport svg from '../../assets/str-chat__loading-indicator.svg';\n\n/**\n * LoadingIndicator - Just a simple loading spinner..\n *\n * @example ../../docs/LoadingIndicator.md\n * @type { React.FC<import('types').LoadingIndicatorProps>}\n */\nconst LoadingIndicator = ({ size = 15, color = '#006CFF' }) => (\n  <div\n    className={`str-chat__loading-indicator ${color}`}\n    data-testid=\"loading-indicator-wrapper\"\n    style={{ width: size, height: size }}\n  >\n    <svg\n      width={size}\n      height={size}\n      viewBox={`0 0 30 30`}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <defs>\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"100%\" id=\"a\">\n          <stop stopColor=\"#FFF\" stopOpacity=\"0\" offset=\"0%\" />\n          <stop\n            offset=\"100%\"\n            data-testid=\"loading-indicator-circle\"\n            stopColor={color}\n            stopOpacity=\"1\"\n            style={{ stopColor: color }}\n          />\n        </linearGradient>\n      </defs>\n      <path\n        d=\"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z\"\n        fill=\"url(#a)\"\n        fillRule=\"evenodd\"\n      />\n    </svg>\n  </div>\n);\n\nexport default React.memo(LoadingIndicator);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/** @type {React.FC<import(\"types\").EmoticonItemProps>} */\nconst EmoticonItem = ({ entity }) => (\n  <div className=\"str-chat__emoji-item\">\n    <span className=\"str-chat__emoji-item--entity\">{entity.native}</span>\n    <span className=\"str-chat__emoji-item--name\">{entity.name}</span>\n  </div>\n);\n\nEmoticonItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name for emoticon */\n    name: PropTypes.string.isRequired,\n    /** Native value or actual emoticon */\n    native: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default React.memo(EmoticonItem);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar } from '../Avatar';\n\n/**\n * UserItem - Component rendered in commands menu\n * @typedef {import('types').UserItemProps} Props\n * @type {React.FC<Props>}\n */\nconst UserItem = ({ entity }) => (\n  <div className=\"str-chat__user-item\">\n    <Avatar size={20} image={entity.image} />\n    <div>\n      <strong>{entity.name}</strong> {!entity.name ? entity.id : ''}\n    </div>\n  </div>\n);\n\nUserItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name of the user */\n    name: PropTypes.string,\n    /** Id of the user */\n    id: PropTypes.string,\n    /** Image of the user */\n    image: PropTypes.string,\n  }).isRequired,\n};\n\nexport default React.memo(UserItem);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * @type {React.FC<import('types').CommandItemProps>}\n */\nconst CommandItem = ({ entity }) => (\n  <div className=\"str-chat__slash-command\">\n    <span className=\"str-chat__slash-command-header\">\n      <strong>{entity.name}</strong> {entity.args}\n    </span>\n    <br />\n    <span className=\"str-chat__slash-command-description\">\n      {entity.description}\n    </span>\n  </div>\n);\n\nCommandItem.propTypes = {\n  entity: PropTypes.shape({\n    /** Name of the command */\n    name: PropTypes.string,\n    /** Arguments of command */\n    args: PropTypes.string,\n    /** Description of command */\n    description: PropTypes.string,\n  }).isRequired,\n};\n\nexport default React.memo(CommandItem);\n","// @ts-check\nimport React, { useContext, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { emojiIndex } from 'emoji-mart';\n// ignore TS error because the type definitions for this package requires generics, which you can't do in jsdoc\n// @ts-ignore\nimport debounce from 'lodash.debounce';\n\nimport { AutoCompleteTextarea } from '../AutoCompleteTextarea';\nimport { LoadingIndicator } from '../Loading';\nimport { EmoticonItem } from '../EmoticonItem';\nimport { UserItem } from '../UserItem';\nimport { CommandItem } from '../CommandItem';\nimport { ChatContext } from '../../context/ChatContext';\n\n/** @param {string} word */\nconst emojiReplace = (word) => {\n  const found = emojiIndex.search(word) || [];\n  const emoji = found\n    .slice(0, 10)\n    .find(({ emoticons }) => emoticons?.includes(word));\n  if (!emoji || !('native' in emoji)) return null;\n  return emoji.native;\n};\n\n/** @type {React.FC<import(\"types\").ChatAutoCompleteProps>} */\nconst ChatAutoComplete = (props) => {\n  const { channel } = useContext(ChatContext);\n  const members = channel?.state?.members;\n  const watchers = channel?.state?.watchers;\n\n  const getMembersAndWatchers = useCallback(() => {\n    const memberUsers = members\n      ? Object.values(members).map(({ user }) => user)\n      : [];\n    const watcherUsers = watchers ? Object.values(watchers) : [];\n    const users = [...memberUsers, ...watcherUsers];\n    // make sure we don't list users twice\n    /** @type {{ [key: string]: import('stream-chat').User}} */\n    const uniqueUsers = {};\n    users.forEach((user) => {\n      if (user && !uniqueUsers[user.id]) {\n        uniqueUsers[user.id] = user;\n      }\n    });\n    return Object.values(uniqueUsers);\n  }, [members, watchers]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const queryMembersdebounced = useCallback(\n    debounce(\n      /**\n       * @param {string} query\n       * @param {(data: any[]) => void} onReady\n       */\n      async (query, onReady) => {\n        if (!channel?.queryMembers) return;\n        const response = await channel?.queryMembers({\n          name: { $autocomplete: query },\n        });\n        const users = response.members.map((m) => m.user);\n        if (onReady) onReady(users);\n      },\n      200,\n    ),\n    [channel?.queryMembers],\n  );\n\n  const { commands, onSelectItem, triggers } = props;\n  /**\n   * dataProvider accepts `onReady` function, which will executed once the data is ready.\n   * Another approach would have been to simply return the data from dataProvider and let the\n   * component await for it and then execute the required logic. We are going for callback instead\n   * of async-await since we have debounce function in dataProvider. Which will delay the execution\n   * of api call on trailing end of debounce (lets call it a1) but will return with result of\n   * previous call without waiting for a1. So in this case, we want to execute onReady, when trailing\n   * end of debounce executes.\n   * @type {() => import(\"../AutoCompleteTextarea/types\").TriggerMap | object}\n   */\n  const getTriggers = useCallback(\n    // eslint-disable-next-line sonarjs/cognitive-complexity\n    () =>\n      triggers || {\n        ':': {\n          dataProvider: (q, text, onReady) => {\n            if (q.length === 0 || q.charAt(0).match(/[^a-zA-Z0-9+-]/)) {\n              return [];\n            }\n            const emojis = emojiIndex.search(q) || [];\n            const result = emojis.slice(0, 10);\n\n            if (onReady) onReady(result, q);\n\n            return result;\n          },\n          component: EmoticonItem,\n          output: (entity) => ({\n            key: entity.id,\n            text: `${entity.native}`,\n            caretPosition: 'next',\n          }),\n        },\n        '@': {\n          dataProvider: (query, text, onReady) => {\n            // By default, we return maximum 100 members via queryChannels api call.\n            // Thus it is safe to assume, that if number of members in channel.state is < 100,\n            // then all the members are already available on client side and we don't need to\n            // make any api call to queryMembers endpoint.\n            if (!query || Object.values(members || {}).length < 100) {\n              const users = getMembersAndWatchers();\n\n              const matchingUsers = users.filter((user) => {\n                if (!query) return true;\n                if (\n                  user.name !== undefined &&\n                  user.name.toLowerCase().includes(query.toLowerCase())\n                ) {\n                  return true;\n                }\n                return user.id.toLowerCase().includes(query.toLowerCase());\n              });\n              const data = matchingUsers.slice(0, 10);\n\n              if (onReady) onReady(data, query);\n\n              return data;\n            }\n            return queryMembersdebounced(\n              query,\n              /** @param {any[]} data */\n              (data) => {\n                if (onReady) onReady(data, query);\n              },\n            );\n          },\n          component: UserItem,\n          output: (entity) => ({\n            key: entity.id,\n            text: `@${entity.name || entity.id}`,\n            caretPosition: 'next',\n          }),\n          callback: (item) => onSelectItem && onSelectItem(item),\n        },\n        '/': {\n          dataProvider: (q, text, onReady) => {\n            if (text.indexOf('/') !== 0 || !commands) {\n              return [];\n            }\n            const selectedCommands = commands.filter(\n              (c) => c.name.indexOf(q) !== -1,\n            );\n\n            // sort alphabetically unless the you're matching the first char\n            selectedCommands.sort((a, b) => {\n              let nameA = a.name.toLowerCase();\n              let nameB = b.name.toLowerCase();\n              if (nameA.indexOf(q) === 0) {\n                nameA = `0${nameA}`;\n              }\n              if (nameB.indexOf(q) === 0) {\n                nameB = `0${nameB}`;\n              }\n              if (nameA < nameB) {\n                return -1;\n              }\n              if (nameA > nameB) {\n                return 1;\n              }\n\n              return 0;\n            });\n\n            const result = selectedCommands.slice(0, 10);\n            if (onReady) onReady(result, q);\n\n            return result;\n          },\n          component: CommandItem,\n          output: (entity) => ({\n            key: entity.id,\n            text: `/${entity.name}`,\n            caretPosition: 'next',\n          }),\n        },\n      },\n    [\n      members,\n      getMembersAndWatchers,\n      commands,\n      onSelectItem,\n      queryMembersdebounced,\n      triggers,\n    ],\n  );\n\n  const { innerRef } = props;\n\n  const updateInnerRef = useCallback(\n    (ref) => {\n      if (innerRef) innerRef.current = ref;\n    },\n    [innerRef],\n  );\n\n  return (\n    <AutoCompleteTextarea\n      loadingComponent={LoadingIndicator}\n      trigger={getTriggers()}\n      replaceWord={emojiReplace}\n      minChar={0}\n      maxRows={props.maxRows}\n      innerRef={updateInnerRef}\n      onFocus={props.onFocus}\n      rows={props.rows}\n      className=\"str-chat__textarea__textarea\"\n      containerClassName=\"str-chat__textarea\"\n      dropdownClassName=\"str-chat__emojisearch\"\n      listClassName=\"str-chat__emojisearch__list\"\n      itemClassName=\"str-chat__emojisearch__item\"\n      placeholder={props.placeholder}\n      onChange={props.onChange}\n      handleSubmit={props.handleSubmit}\n      onPaste={props.onPaste}\n      value={props.value}\n      grow={props.grow}\n      disabled={props.disabled}\n      additionalTextareaProps={props.additionalTextareaProps}\n    />\n  );\n};\n\nChatAutoComplete.propTypes = {\n  /** The number of rows you want the textarea to have */\n  rows: PropTypes.number,\n  /** Grow the number of rows of the textarea while you're typing */\n  grow: PropTypes.bool,\n  /** Maximum number of rows */\n  maxRows: PropTypes.number,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** The value of the textarea */\n  value: PropTypes.string,\n  /** Function to run on pasting within the textarea */\n  onPaste: PropTypes.func,\n  /** Function that runs on submit */\n  handleSubmit: PropTypes.func,\n  /** Function that runs on change */\n  onChange: PropTypes.func,\n  /** Placeholder for the textare */\n  placeholder: PropTypes.string,\n  /** What loading component to use for the auto complete when loading results. */\n  // @ts-ignore\n  LoadingIndicator: PropTypes.elementType,\n  /** Minimum number of Character */\n  minChar: PropTypes.number,\n  /**\n   * Handler for selecting item from suggestions list\n   *\n   * @param item Selected item object.\n   *  */\n  onSelectItem: PropTypes.func,\n  /** Array of [commands](https://getstream.io/chat/docs/#channel_commands) */\n  commands: PropTypes.array,\n  /** Listener for onfocus event on textarea */\n  onFocus: PropTypes.func,\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n};\n\nChatAutoComplete.defaultProps = {\n  rows: 3,\n};\n\nexport default React.memo(ChatAutoComplete);\n","// @ts-check\nimport React from 'react';\n\n/**\n * @type {React.FC<import('types').TooltipProps>}\n */\nconst Tooltip = (props) => (\n  <div className=\"str-chat__tooltip\" {...props}>\n    {props.children}\n  </div>\n);\n\nexport default React.memo(Tooltip);\n","// @ts-check\nimport { useReducer, useEffect, useContext, useRef, useCallback } from 'react';\nimport Immutable from 'seamless-immutable';\nimport { logChatPromiseExecution } from 'stream-chat';\nimport {\n  dataTransferItemsHaveFiles,\n  dataTransferItemsToFiles,\n  // @ts-ignore\n} from 'react-file-utils';\nimport { ChannelContext } from '../../../context/ChannelContext';\nimport { generateRandomId } from '../../../utils';\n\n/**\n * @typedef {import(\"types\").MessageInputState} State\n * @typedef {import(\"types\").MessageInputProps} Props\n * @typedef {import(\"stream-chat\").FileUploadAPIResponse} FileUploadAPIResponse\n * @typedef {import('stream-chat').UserResponse} UserResponse\n */\n\n/**\n * Get attachment type from MIME type\n * @param {string} mime\n * @returns {string}\n */\nconst getAttachmentTypeFromMime = (mime) => {\n  if (mime.includes('video/')) return 'media';\n  if (mime.includes('audio/')) return 'audio';\n  return 'file';\n};\n\n/** @type {{ [id: string]: import('types').FileUpload }} */\nconst emptyFileUploads = {};\n/** @type {{ [id: string]: import('types').ImageUpload }} */\nconst emptyImageUploads = {};\n\n/**\n * Initializes the state. Empty if the message prop is falsy.\n * @param {import(\"stream-chat\").MessageResponse | undefined} message\n * @returns {State}\n */\nfunction initState(message) {\n  if (!message) {\n    return {\n      text: '',\n      imageOrder: [],\n      imageUploads: Immutable(emptyImageUploads),\n      fileOrder: [],\n      fileUploads: Immutable(emptyFileUploads),\n      numberOfUploads: 0,\n      attachments: [],\n      mentioned_users: [],\n      emojiPickerIsOpen: false,\n    };\n  }\n\n  // if message prop is defined, get imageuploads, fileuploads, text, etc. from it\n  const imageUploads =\n    message.attachments\n      ?.filter(({ type }) => type === 'image')\n      .reduce((acc, attachment) => {\n        const id = generateRandomId();\n        return acc.setIn([id], {\n          id,\n          url: attachment.image_url,\n          state: 'finished',\n          file: {\n            name: attachment.fallback,\n          },\n        });\n      }, Immutable(emptyImageUploads)) || Immutable(emptyImageUploads);\n  const imageOrder = Object.keys(imageUploads);\n\n  const fileUploads =\n    message.attachments\n      ?.filter(({ type }) => type === 'file')\n      .reduce((acc, attachment) => {\n        const id = generateRandomId();\n        return acc.setIn([id], {\n          id,\n          url: attachment.asset_url,\n          state: 'finished',\n          file: {\n            name: attachment.title,\n            type: attachment.mime_type,\n            size: attachment.file_size,\n          },\n        });\n      }, Immutable(emptyFileUploads)) || Immutable(emptyFileUploads);\n  const fileOrder = Object.keys(fileUploads);\n\n  const numberOfUploads = fileOrder.length + imageOrder.length;\n\n  const attachments =\n    message.attachments?.filter(\n      ({ type }) => type !== 'file' && type !== 'image',\n    ) || [];\n\n  const mentioned_users = message.mentioned_users || [];\n\n  return {\n    text: message.text || '',\n    imageOrder,\n    imageUploads,\n    fileOrder,\n    fileUploads,\n    numberOfUploads,\n    attachments,\n    mentioned_users,\n    emojiPickerIsOpen: false,\n  };\n}\n/**\n * MessageInput state reducer\n * @param {State} state\n * @param {import(\"./types\").MessageInputReducerAction} action\n * @returns {State}\n */\nfunction messageInputReducer(state, action) {\n  switch (action.type) {\n    case 'setEmojiPickerIsOpen':\n      return { ...state, emojiPickerIsOpen: action.value };\n    case 'setText':\n      return { ...state, text: action.getNewText(state.text) };\n    case 'clear':\n      return {\n        ...state,\n        text: '',\n        mentioned_users: [],\n        imageOrder: [],\n        imageUploads: Immutable(emptyImageUploads),\n        fileOrder: [],\n        fileUploads: Immutable(emptyFileUploads),\n        numberOfUploads: 0,\n      };\n    case 'setImageUpload': {\n      const imageAlreadyExists = state.imageUploads[action.id];\n      const imageOrder = imageAlreadyExists\n        ? state.imageOrder\n        : state.imageOrder.concat(action.id);\n      const { type, ...newUploadFields } = action;\n      return {\n        ...state,\n        imageOrder,\n        imageUploads: state.imageUploads.setIn([action.id], {\n          ...state.imageUploads[action.id],\n          ...newUploadFields,\n        }),\n        numberOfUploads: imageAlreadyExists\n          ? state.numberOfUploads\n          : state.numberOfUploads + 1,\n      };\n    }\n    case 'setFileUpload': {\n      const fileAlreadyExists = state.fileUploads[action.id];\n      const fileOrder = fileAlreadyExists\n        ? state.fileOrder\n        : state.fileOrder.concat(action.id);\n      const { type, ...newUploadFields } = action;\n      return {\n        ...state,\n        fileOrder,\n        fileUploads: state.fileUploads.setIn([action.id], {\n          ...state.fileUploads[action.id],\n          ...newUploadFields,\n        }),\n        numberOfUploads: fileAlreadyExists\n          ? state.numberOfUploads\n          : state.numberOfUploads + 1,\n      };\n    }\n    case 'removeImageUpload':\n      if (!state.imageUploads[action.id]) return state; // cannot remove anything\n      return {\n        ...state,\n        numberOfUploads: state.numberOfUploads - 1,\n        imageOrder: state.imageOrder.filter((_id) => _id !== action.id),\n        imageUploads: state.imageUploads.without(action.id),\n      };\n    case 'removeFileUpload':\n      if (!state.fileUploads[action.id]) return state; // cannot remove anything\n      return {\n        ...state,\n        numberOfUploads: state.numberOfUploads - 1,\n        fileOrder: state.fileOrder.filter((_id) => _id !== action.id),\n        fileUploads: state.fileUploads.without(action.id),\n      };\n    case 'reduceNumberOfUploads': // TODO: figure out if we can just use uploadOrder instead\n      return { ...state, numberOfUploads: state.numberOfUploads - 1 };\n    case 'addMentionedUser':\n      return {\n        ...state,\n        mentioned_users: state.mentioned_users.concat(action.user),\n      };\n    default:\n      return state;\n  }\n}\n/**\n * hook for MessageInput state\n * @param {Props} props\n */\nexport default function useMessageInputState(props) {\n  const {\n    doImageUploadRequest,\n    doFileUploadRequest,\n    focus,\n    message,\n    clearEditingState,\n    overrideSubmitHandler,\n    parent,\n    noFiles,\n    errorHandler,\n    publishTypingEvent,\n  } = props;\n\n  const [state, dispatch] = useReducer(messageInputReducer, message, initState);\n  const textareaRef = useRef(\n    /** @type {HTMLTextAreaElement | undefined} */ (undefined),\n  );\n  const emojiPickerRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n  const channelContext = useContext(ChannelContext);\n  const {\n    text,\n    imageOrder,\n    imageUploads,\n    fileOrder,\n    fileUploads,\n    attachments,\n    numberOfUploads,\n    mentioned_users,\n  } = state;\n  const { channel, editMessage, sendMessage } = channelContext;\n\n  // Focus\n\n  useEffect(() => {\n    if (focus && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [focus]);\n\n  // Text + cursor position\n  const newCursorPosition = useRef(/** @type {number | null} */ (null));\n  const insertText = useCallback(\n    (textToInsert) => {\n      if (!textareaRef.current) {\n        dispatch({\n          type: 'setText',\n          getNewText: (t) => t + textToInsert,\n        });\n        return;\n      }\n\n      const textareaElement = textareaRef.current;\n      const { selectionStart, selectionEnd } = textareaElement;\n      newCursorPosition.current = selectionStart + textToInsert.length;\n      dispatch({\n        type: 'setText',\n        getNewText: (prevText) =>\n          prevText.slice(0, selectionStart) +\n          textToInsert +\n          prevText.slice(selectionEnd),\n      });\n    },\n    [textareaRef, newCursorPosition],\n  );\n\n  useEffect(() => {\n    const textareaElement = textareaRef.current;\n    if (textareaElement && newCursorPosition.current !== null) {\n      textareaElement.selectionStart = newCursorPosition.current;\n      textareaElement.selectionEnd = newCursorPosition.current;\n      newCursorPosition.current = null;\n    }\n  }, [text, newCursorPosition]);\n\n  const handleChange = useCallback(\n    (event) => {\n      event.preventDefault();\n      if (!event || !event.target) {\n        return;\n      }\n\n      const newText = event.target.value;\n      dispatch({\n        type: 'setText',\n        getNewText: () => newText,\n      });\n      if (publishTypingEvent && newText && channel) {\n        logChatPromiseExecution(channel.keystroke(), 'start typing event');\n      }\n    },\n    [channel, publishTypingEvent],\n  );\n\n  // Emoji\n\n  const closeEmojiPicker = useCallback(\n    (e) => {\n      if (\n        emojiPickerRef.current &&\n        !emojiPickerRef.current.contains(e.target)\n      ) {\n        dispatch({\n          type: 'setEmojiPickerIsOpen',\n          value: false,\n        });\n        document.removeEventListener('click', closeEmojiPicker, false);\n      }\n    },\n    [emojiPickerRef],\n  );\n\n  const openEmojiPicker = useCallback(() => {\n    dispatch({\n      type: 'setEmojiPickerIsOpen',\n      value: true,\n    });\n    document.addEventListener('click', closeEmojiPicker, false);\n  }, [closeEmojiPicker]);\n\n  const onSelectEmoji = useCallback((emoji) => insertText(emoji.native), [\n    insertText,\n  ]);\n\n  // Commands / mentions\n\n  const getCommands = useCallback(\n    () => channel && channel.getConfig().commands,\n    [channel],\n  );\n\n  const getUsers = useCallback(() => {\n    if (!channel) return [];\n    return [\n      ...Object.values(channel.state.members).map(({ user }) => user),\n      ...Object.values(channel.state.watchers),\n    ].filter(\n      (_user, index, self) =>\n        self.findIndex((user) => user?.id === _user?.id) === index, // filter out non-unique ids\n    );\n  }, [channel]);\n\n  const onSelectItem = useCallback(\n    /** @param {UserResponse} item */\n    (item) => {\n      dispatch({ type: 'addMentionedUser', user: item });\n    },\n    [],\n  );\n\n  // Submitting\n\n  const getAttachmentsFromUploads = useCallback(() => {\n    const imageAttachments = imageOrder\n      .map((id) => imageUploads[id])\n      .filter((upload) => upload.state !== 'failed')\n      .filter((\n        { id, url },\n        index,\n        self, // filter out duplicates based on url\n      ) => self.every((upload) => upload.id === id || upload.url !== url))\n      .map((upload) => ({\n        type: 'image',\n        image_url: upload.url,\n        fallback: upload.file.name,\n      }));\n\n    const fileAttachments = fileOrder\n      .map((id) => fileUploads[id])\n      .filter((upload) => upload.state !== 'failed')\n      .map((upload) => ({\n        type: getAttachmentTypeFromMime(upload.file.type),\n        asset_url: upload.url,\n        title: upload.file.name,\n        mime_type: upload.file.type,\n        file_size: upload.file.size,\n      }));\n\n    return [\n      ...attachments, // from state\n      ...imageAttachments,\n      ...fileAttachments,\n    ];\n  }, [imageOrder, imageUploads, fileOrder, fileUploads, attachments]);\n\n  /**\n   * @param {React.FormEvent | React.MouseEvent} event\n   */\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const trimmedMessage = text.trim();\n    const isEmptyMessage =\n      trimmedMessage === '' ||\n      trimmedMessage === '>' ||\n      trimmedMessage === '``````' ||\n      trimmedMessage === '``' ||\n      trimmedMessage === '**' ||\n      trimmedMessage === '____' ||\n      trimmedMessage === '__' ||\n      trimmedMessage === '****';\n    if (isEmptyMessage && numberOfUploads === 0) {\n      return;\n    }\n    // the channel component handles the actual sending of the message\n    const someAttachmentsUploading =\n      Object.values(imageUploads).some(\n        (upload) => upload.state === 'uploading',\n      ) ||\n      Object.values(fileUploads).some((upload) => upload.state === 'uploading');\n    if (someAttachmentsUploading) {\n      // TODO: show error to user that they should wait until image is uploaded\n      return;\n    }\n\n    const newAttachments = getAttachmentsFromUploads();\n\n    // Instead of checking if a user is still mentioned every time the text changes,\n    // just filter out non-mentioned users before submit, which is cheaper\n    // and allows users to easily undo any accidental deletion\n    const actualMentionedUsers = Array.from(\n      new Set(\n        mentioned_users\n          .filter(\n            ({ name, id }) =>\n              text.includes(`@${id}`) || text.includes(`@${name}`),\n          )\n          .map(({ id }) => id),\n      ),\n    );\n\n    const updatedMessage = {\n      text,\n      attachments: newAttachments,\n      mentioned_users: actualMentionedUsers,\n    };\n\n    if (!!message && editMessage) {\n      // TODO: Remove this line and show an error when submit fails\n      if (clearEditingState) clearEditingState();\n\n      const updateMessagePromise = editMessage({\n        ...updatedMessage,\n        id: message.id,\n      }).then(clearEditingState);\n\n      logChatPromiseExecution(updateMessagePromise, 'update message');\n    } else if (\n      overrideSubmitHandler &&\n      typeof overrideSubmitHandler === 'function' &&\n      channel\n    ) {\n      overrideSubmitHandler(\n        {\n          ...updatedMessage,\n          parent,\n        },\n        channel.cid,\n      );\n      dispatch({ type: 'clear' });\n    } else if (sendMessage) {\n      const sendMessagePromise = sendMessage({\n        ...updatedMessage,\n        parent,\n      });\n      logChatPromiseExecution(sendMessagePromise, 'send message');\n      dispatch({ type: 'clear' });\n    }\n    if (channel && publishTypingEvent)\n      logChatPromiseExecution(channel.stopTyping(), 'stop typing');\n  };\n\n  // Attachments\n\n  // Files\n\n  const uploadFile = useCallback((id) => {\n    dispatch({ type: 'setFileUpload', id, state: 'uploading' });\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      if (!channel) return;\n      const upload = Object.values(fileUploads).find(\n        (fileUpload) => fileUpload.state === 'uploading' && fileUpload.file,\n      );\n      if (!upload) return;\n\n      const { id, file } = upload;\n      /** @type FileUploadAPIResponse */\n      let response;\n      try {\n        if (doFileUploadRequest) {\n          response = await doFileUploadRequest(file, channel);\n        } else {\n          response = await channel.sendFile(file);\n        }\n      } catch (e) {\n        console.warn(e);\n        let alreadyRemoved = false;\n\n        dispatch({ type: 'reduceNumberOfUploads' });\n        if (!fileUploads[id]) {\n          alreadyRemoved = true;\n        } else {\n          dispatch({ type: 'setFileUpload', id, state: 'failed' });\n        }\n        if (!alreadyRemoved && errorHandler) {\n          // TODO: verify if the paramaters passed to the error handler actually make sense\n          errorHandler(e, 'upload-file', file);\n        }\n        return;\n      }\n      dispatch({\n        type: 'setFileUpload',\n        id,\n        state: 'finished',\n        url: response.file,\n      });\n    })();\n  }, [fileUploads, channel, doFileUploadRequest, errorHandler]);\n\n  const removeFile = useCallback((id) => {\n    // TODO: cancel upload if still uploading\n    dispatch({ type: 'removeFileUpload', id });\n  }, []);\n\n  // Images\n\n  const uploadImage = useCallback(\n    async (id) => {\n      const img = imageUploads[id];\n      if (!img || !channel) return;\n      const { file } = img;\n      if (img.state !== 'uploading') {\n        dispatch({ type: 'setImageUpload', id, state: 'uploading' });\n      }\n      /** @type FileUploadAPIResponse */\n      let response;\n      try {\n        if (doImageUploadRequest) {\n          response = await doImageUploadRequest(file, channel);\n        } else {\n          response = await channel.sendImage(file);\n        }\n      } catch (e) {\n        console.warn(e);\n        let alreadyRemoved = false;\n        dispatch({ type: 'reduceNumberOfUploads' });\n        if (!imageUploads[id]) {\n          alreadyRemoved = true;\n        } else {\n          dispatch({ type: 'setImageUpload', id, state: 'failed' });\n        }\n        if (!alreadyRemoved && errorHandler) {\n          // TODO: verify if the paramaters passed to the error handler actually make sense\n          errorHandler(e, 'upload-image', {\n            id,\n            file,\n          });\n        }\n        return;\n      }\n      if (!imageUploads[id]) return; // removed before done\n      dispatch({\n        type: 'setImageUpload',\n        id,\n        state: 'finished',\n        url: response.file,\n      });\n    },\n    [imageUploads, channel, doImageUploadRequest, errorHandler],\n  );\n\n  useEffect(() => {\n    if (FileReader) {\n      const upload = Object.values(imageUploads).find(\n        (imageUpload) =>\n          imageUpload.state === 'uploading' &&\n          !!imageUpload.file &&\n          !imageUpload.previewUri,\n      );\n      if (upload) {\n        const { id, file } = upload;\n        // TODO: Possibly use URL.createObjectURL instead. However, then we need\n        // to release the previews when not used anymore though.\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          if (typeof event.target?.result !== 'string') return;\n          dispatch({\n            type: 'setImageUpload',\n            id,\n            previewUri: event.target.result,\n          });\n        };\n        reader.readAsDataURL(file);\n        uploadImage(id);\n        return () => {\n          reader.onload = null;\n        };\n      }\n    }\n    return () => {};\n  }, [imageUploads, uploadImage]);\n\n  const removeImage = useCallback((id) => {\n    dispatch({ type: 'removeImageUpload', id });\n    // TODO: cancel upload if still uploading\n  }, []);\n\n  const uploadNewFiles = useCallback(\n    /**\n     * @param {FileList} files\n     */\n    (files) => {\n      Array.from(files).forEach((file) => {\n        const id = generateRandomId();\n        if (file.type.startsWith('image/')) {\n          dispatch({ type: 'setImageUpload', id, file, state: 'uploading' });\n        } else if (file instanceof File && !noFiles) {\n          dispatch({ type: 'setFileUpload', id, file, state: 'uploading' });\n        }\n      });\n    },\n    [noFiles],\n  );\n\n  const onPaste = useCallback(\n    (e) => {\n      (async (event) => {\n        // TODO: Move this handler to package with ImageDropzone\n        const { items } = event.clipboardData;\n        if (!dataTransferItemsHaveFiles(items)) {\n          return;\n        }\n\n        event.preventDefault();\n        // Get a promise for the plain text in case no files are\n        // found. This needs to be done here because chrome cleans\n        // up the DataTransferItems after resolving of a promise.\n        let plainTextPromise;\n        /** @type {DataTransferItem} */\n        const plainTextItem = [...items].find(\n          ({ kind, type }) => kind === 'string' && type === 'text/plain',\n        );\n        if (plainTextItem) {\n          plainTextPromise = new Promise((resolve) => {\n            plainTextItem.getAsString((s) => {\n              resolve(s);\n            });\n          });\n        }\n\n        const fileLikes = await dataTransferItemsToFiles(items);\n        if (fileLikes.length) {\n          uploadNewFiles(fileLikes);\n          return;\n        }\n        // fallback to regular text paste\n        if (plainTextPromise) {\n          const s = await plainTextPromise;\n          insertText(s);\n        }\n      })(e);\n    },\n    [uploadNewFiles, insertText],\n  );\n\n  return {\n    ...state,\n    // refs\n    textareaRef,\n    emojiPickerRef,\n    // handlers\n    uploadNewFiles,\n    removeImage,\n    uploadImage,\n    removeFile,\n    uploadFile,\n    onSelectEmoji,\n    getUsers,\n    getCommands,\n    handleSubmit,\n    handleChange,\n    onPaste,\n    onSelectItem,\n    openEmojiPicker,\n  };\n}\n","// @ts-check\nimport React, { useContext } from 'react';\n// @ts-ignore\nimport { Picker } from 'emoji-mart';\nimport { TranslationContext } from '../../context';\nimport { filterEmoji } from '../../utils';\n\n/** @type {React.FC<import(\"types\").MessageInputEmojiPickerProps>} */\nconst EmojiPicker = ({\n  emojiPickerIsOpen,\n  emojiPickerRef,\n  onSelectEmoji,\n  small,\n}) => {\n  const { t } = useContext(TranslationContext);\n  if (emojiPickerIsOpen) {\n    const className = small\n      ? 'str-chat__small-message-input-emojipicker'\n      : 'str-chat__input--emojipicker';\n\n    return (\n      <div className={className} ref={emojiPickerRef}>\n        <Picker\n          native\n          emoji=\"point_up\"\n          title={t('Pick your emoji')}\n          onSelect={onSelectEmoji}\n          color=\"#006CFF\"\n          showPreview={false}\n          useButton={true}\n          emojisToShowFilter={filterEmoji}\n        />\n      </div>\n    );\n  }\n  return null;\n};\n\nexport default EmojiPicker;\n","// @ts-check\nimport React, { useContext } from 'react';\n// @ts-ignore\nimport { ImagePreviewer, FilePreviewer } from 'react-file-utils';\nimport { ChannelContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").MessageInputUploadsProps>} */\nconst UploadsPreview = ({\n  imageOrder,\n  imageUploads,\n  removeImage,\n  uploadImage,\n  uploadNewFiles,\n  numberOfUploads,\n  fileOrder,\n  fileUploads,\n  removeFile,\n  uploadFile,\n}) => {\n  const channelContext = useContext(ChannelContext);\n  return (\n    <>\n      {imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={imageOrder.map((id) => imageUploads[id])}\n          handleRemove={removeImage}\n          handleRetry={uploadImage}\n          handleFiles={uploadNewFiles}\n          multiple={channelContext.multipleUploads}\n          disabled={\n            channelContext.maxNumberOfFiles !== undefined &&\n            numberOfUploads >= channelContext.maxNumberOfFiles\n          }\n        />\n      )}\n      {fileOrder.length > 0 && (\n        <FilePreviewer\n          uploads={fileOrder.map((id) => fileUploads[id])}\n          handleRemove={removeFile}\n          handleRetry={uploadFile}\n          handleFiles={uploadNewFiles}\n        />\n      )}\n    </>\n  );\n};\n\nexport default UploadsPreview;\n","// @ts-check\nimport React, { useContext } from 'react';\nimport { TranslationContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").SendButtonProps>} */\nconst SendButton = ({ sendMessage }) => {\n  const { t } = useContext(TranslationContext);\n  return (\n    <button className=\"str-chat__send-button\" onClick={sendMessage}>\n      <svg\n        width=\"18\"\n        height=\"17\"\n        viewBox=\"0 0 18 17\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <title>{t('Send')}</title>\n        <path\n          d=\"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\"\n          fillRule=\"evenodd\"\n          fill=\"#006cff\"\n        />\n      </svg>\n    </button>\n  );\n};\n\nexport default React.memo(SendButton);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n// @ts-ignore\nimport {\n  ImageDropzone,\n  FileUploadButton,\n  // @ts-ignore\n} from 'react-file-utils';\n\nimport { TranslationContext, ChannelContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport { Tooltip } from '../Tooltip';\nimport useMessageInput from './hooks/messageInput';\nimport EmojiPicker from './EmojiPicker';\nimport UploadsPreview from './UploadsPreview';\nimport SendButtonComponent from './SendButton';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst MessageInputLarge = (props) => {\n  const messageInput = useMessageInput(props);\n  const { t } = useContext(TranslationContext);\n  const channelContext = useContext(ChannelContext);\n\n  /**\n   * @typedef {import(\"stream-chat\").Event} ClientEvent\n   * @param {{ [userid: string]: ClientEvent } | {}} typingUsers\n   */\n  const constructTypingString = (typingUsers) => {\n    const otherTypingUsers = Object.values(typingUsers)\n      .filter(({ user }) => channelContext.client?.user.id !== user?.id)\n      .map(({ user }) => user?.name || user?.id);\n    if (otherTypingUsers.length === 0) return '';\n    if (otherTypingUsers.length === 1) {\n      return t('{{ user }} is typing...', { user: otherTypingUsers[0] });\n    }\n    if (otherTypingUsers.length === 2) {\n      // joins all with \"and\" but =no commas\n      // example: \"bob and sam\"\n      return t('{{ firstUser }} and {{ secondUser }} are typing...', {\n        firstUser: otherTypingUsers[0],\n        secondUser: otherTypingUsers[1],\n      });\n    }\n    // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, and sam\"\n    return t('{{ commaSeparatedUsers }} and {{ lastUser }} are typing...', {\n      commaSeparatedUsers: otherTypingUsers.slice(0, -1).join(', '),\n      lastUser: otherTypingUsers[otherTypingUsers.length - 1],\n    });\n  };\n\n  const { SendButton } = props;\n  return (\n    <div className=\"str-chat__input-large\">\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        multiple={channelContext.multipleUploads}\n        disabled={\n          channelContext.maxNumberOfFiles !== undefined &&\n          messageInput.numberOfUploads >= channelContext.maxNumberOfFiles\n        }\n        handleFiles={messageInput.uploadNewFiles}\n      >\n        <div className=\"str-chat__input\">\n          <EmojiPicker {...messageInput} />\n          <div className=\"str-chat__input--textarea-wrapper\">\n            <UploadsPreview {...messageInput} />\n            <ChatAutoComplete\n              commands={messageInput.getCommands()}\n              innerRef={messageInput.textareaRef}\n              handleSubmit={messageInput.handleSubmit}\n              onChange={messageInput.handleChange}\n              onSelectItem={messageInput.onSelectItem}\n              value={messageInput.text}\n              rows={1}\n              maxRows={props.maxRows}\n              placeholder={t('Type your message')}\n              onPaste={messageInput.onPaste}\n              triggers={props.autocompleteTriggers}\n              grow={props.grow}\n              disabled={props.disabled}\n              additionalTextareaProps={props.additionalTextareaProps}\n            />\n            <div className=\"str-chat__emojiselect-wrapper\">\n              <Tooltip>{t('Open emoji picker')}</Tooltip>\n              <span\n                className=\"str-chat__input-emojiselect\"\n                onClick={messageInput.openEmojiPicker}\n                ref={messageInput.emojiPickerRef}\n              >\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <title>{t('Open emoji picker')}</title>\n                  <path\n                    d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                    fillRule=\"evenodd\"\n                  />\n                </svg>\n              </span>\n            </div>\n            <div\n              className=\"str-chat__fileupload-wrapper\"\n              data-testid=\"fileinput\"\n            >\n              <Tooltip>{t('Attach files')}</Tooltip>\n              <FileUploadButton\n                multiple={channelContext.multipleUploads}\n                disabled={\n                  channelContext.maxNumberOfFiles !== undefined &&\n                  messageInput.numberOfUploads >=\n                    channelContext.maxNumberOfFiles\n                }\n                accepts={channelContext.acceptedFiles}\n                handleFiles={messageInput.uploadNewFiles}\n              >\n                <span className=\"str-chat__input-fileupload\">\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <title>{t('Attach files')}</title>\n                    <path\n                      d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </span>\n              </FileUploadButton>\n            </div>\n          </div>\n          {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n        </div>\n        <div>\n          <div className=\"str-chat__input-footer\">\n            <span\n              className={`str-chat__input-footer--count ${\n                !channelContext.watcher_count\n                  ? 'str-chat__input-footer--count--hidden'\n                  : ''\n              }`}\n            >\n              {t('{{ watcherCount }} online', {\n                watcherCount: channelContext.watcher_count,\n              })}\n            </span>\n            <span className=\"str-chat__input-footer--typing\">\n              {constructTypingString(channelContext.typing || {})}\n            </span>\n          </div>\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n\nMessageInputLarge.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  // @ts-ignore\n  SendButton: PropTypes.elementType,\n};\n\nMessageInputLarge.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  Input: MessageInputLarge,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {},\n};\n\nexport default MessageInputLarge;\n","import React from 'react';\nimport MessageInputLarge from './MessageInputLarge';\nimport SendButton from './SendButton';\n\nconst MessageInput = (props) => {\n  const { Input } = props;\n  return <Input {...props} />;\n};\n\nMessageInput.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  Input: MessageInputLarge,\n  SendButton,\n  additionalTextareaProps: {},\n};\n\nexport default React.memo(MessageInput);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n// @ts-ignore\nimport { ImageDropzone, FileUploadButton } from 'react-file-utils';\n\nimport { TranslationContext, ChannelContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport { Tooltip } from '../Tooltip';\nimport useMessageInput from './hooks/messageInput';\nimport UploadsPreview from './UploadsPreview';\nimport EmojiPicker from './EmojiPicker';\nimport SendButtonComponent from './SendButton';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst MessageInputFlat = (props) => {\n  const messageInput = useMessageInput(props);\n  const channelContext = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n  const { SendButton } = props;\n\n  return (\n    <div\n      className={`str-chat__input-flat ${\n        SendButton ? 'str-chat__input-flat--send-button-active' : null\n      }`}\n    >\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        multiple={channelContext.multipleUploads}\n        disabled={\n          channelContext.maxNumberOfFiles !== undefined &&\n          messageInput.numberOfUploads >= channelContext.maxNumberOfFiles\n        }\n        handleFiles={messageInput.uploadNewFiles}\n      >\n        <div className=\"str-chat__input-flat-wrapper\">\n          <EmojiPicker {...messageInput} />\n\n          <div className=\"str-chat__input-flat--textarea-wrapper\">\n            <UploadsPreview {...messageInput} />\n            <ChatAutoComplete\n              commands={messageInput.getCommands()}\n              innerRef={messageInput.textareaRef}\n              handleSubmit={messageInput.handleSubmit}\n              onSelectItem={messageInput.onSelectItem}\n              onChange={messageInput.handleChange}\n              value={messageInput.text}\n              rows={1}\n              maxRows={props.maxRows}\n              placeholder={t('Type your message')}\n              onPaste={messageInput.onPaste}\n              triggers={props.autocompleteTriggers}\n              grow={props.grow}\n              disabled={props.disabled}\n              additionalTextareaProps={props.additionalTextareaProps}\n            />\n\n            <div className=\"str-chat__emojiselect-wrapper\">\n              <Tooltip>{t('Open emoji picker')}</Tooltip>\n              <span\n                className=\"str-chat__input-flat-emojiselect\"\n                onClick={messageInput.openEmojiPicker}\n              >\n                <svg width=\"28\" height=\"28\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <title>{t('Open emoji picker')}</title>\n                  <path\n                    d=\"M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z\"\n                    fillRule=\"evenodd\"\n                  />\n                </svg>\n              </span>\n            </div>\n            <div\n              className=\"str-chat__fileupload-wrapper\"\n              data-testid=\"fileinput\"\n            >\n              <Tooltip>{t('Attach files')}</Tooltip>\n              <FileUploadButton\n                multiple={channelContext.multipleUploads}\n                disabled={\n                  channelContext.maxNumberOfFiles !== undefined &&\n                  messageInput.numberOfUploads >=\n                    channelContext.maxNumberOfFiles\n                }\n                accepts={channelContext.acceptedFiles}\n                handleFiles={messageInput.uploadNewFiles}\n              >\n                <span className=\"str-chat__input-flat-fileupload\">\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <title>{t('Attach files')}</title>\n                    <path\n                      d=\"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </span>\n              </FileUploadButton>\n            </div>\n          </div>\n          {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n\nMessageInputFlat.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  // @ts-ignore\n  SendButton: PropTypes.elementType,\n};\n\nMessageInputFlat.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {},\n};\n\nexport default MessageInputFlat;\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n// @ts-ignore\nimport { ImageDropzone, FileUploadButton } from 'react-file-utils';\nimport { TranslationContext, ChannelContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport { Tooltip } from '../Tooltip';\nimport useMessageInput from './hooks/messageInput';\nimport UploadsPreview from './UploadsPreview';\nimport EmojiPicker from './EmojiPicker';\nimport SendButtonComponent from './SendButton';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst MessageInputSmall = (props) => {\n  const messageInput = useMessageInput(props);\n  const channelContext = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n  const { SendButton } = props;\n\n  return (\n    <div className=\"str-chat__small-message-input__wrapper\">\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        multiple={channelContext.multipleUploads}\n        disabled={\n          channelContext.maxNumberOfFiles !== undefined &&\n          messageInput.numberOfUploads >= channelContext.maxNumberOfFiles\n        }\n        handleFiles={messageInput.uploadNewFiles}\n      >\n        <div\n          className={`str-chat__small-message-input ${\n            SendButton\n              ? 'str-chat__small-message-input--send-button-active'\n              : null\n          }`}\n        >\n          <EmojiPicker {...messageInput} small />\n          <div className=\"str-chat__small-message-input--textarea-wrapper\">\n            <UploadsPreview {...messageInput} />\n\n            <ChatAutoComplete\n              commands={messageInput.getCommands()}\n              innerRef={messageInput.textareaRef}\n              handleSubmit={messageInput.handleSubmit}\n              onChange={messageInput.handleChange}\n              value={messageInput.text}\n              rows={1}\n              maxRows={props.maxRows}\n              onSelectItem={messageInput.onSelectItem}\n              placeholder={t('Type your message')}\n              onPaste={messageInput.onPaste}\n              triggers={props.autocompleteTriggers}\n              grow={props.grow}\n              disabled={props.disabled}\n              additionalTextareaProps={props.additionalTextareaProps}\n            />\n\n            <div className=\"str-chat__emojiselect-wrapper\">\n              <Tooltip>{t('Open emoji picker')}</Tooltip>\n              <span\n                className=\"str-chat__small-message-input-emojiselect\"\n                onClick={messageInput.openEmojiPicker}\n              >\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <title>{t('Open emoji picker')}</title>\n                  <path\n                    d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                    fillRule=\"evenodd\"\n                  />\n                </svg>\n              </span>\n            </div>\n\n            <div\n              className=\"str-chat__fileupload-wrapper\"\n              data-testid=\"fileinput\"\n            >\n              <Tooltip>{t('Attach files')}</Tooltip>\n              <FileUploadButton\n                multiple={channelContext.multipleUploads}\n                disabled={\n                  channelContext.maxNumberOfFiles !== undefined &&\n                  messageInput.numberOfUploads >=\n                    channelContext.maxNumberOfFiles\n                }\n                accepts={channelContext.acceptedFiles}\n                handleFiles={messageInput.uploadNewFiles}\n              >\n                <span className=\"str-chat__small-message-input-fileupload\">\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <title>{t('Attach files')}</title>\n                    <path\n                      d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </span>\n              </FileUploadButton>\n            </div>\n          </div>\n          {SendButton && <SendButton sendMessage={messageInput.handleSubmit} />}\n        </div>\n      </ImageDropzone>\n    </div>\n  );\n};\n\nMessageInputSmall.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n  /**\n   * Override the default triggers of the ChatAutoComplete component\n   */\n  autocompleteTriggers: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  // @ts-ignore\n  SendButton: PropTypes.elementType,\n};\n\nMessageInputSmall.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {},\n};\n\nexport default MessageInputSmall;\n","// @ts-check\nimport React, { useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\n// @ts-ignore\nimport { ImageDropzone, FileUploadButton } from 'react-file-utils';\nimport { Tooltip } from '../Tooltip';\n\nimport { ChannelContext, TranslationContext } from '../../context';\nimport { ChatAutoComplete } from '../ChatAutoComplete';\nimport useMessageInput from './hooks/messageInput';\nimport UploadsPreview from './UploadsPreview';\nimport EmojiPicker from './EmojiPicker';\nimport SendButtonComponent from './SendButton';\nimport { KEY_CODES } from '../AutoCompleteTextarea';\n\n/** @type {React.FC<import(\"types\").MessageInputProps>} */\nconst EditMessageForm = (props) => {\n  const messageInput = useMessageInput(props);\n  const channelContext = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  const { clearEditingState } = props;\n\n  useEffect(() => {\n    /** @type {(event: KeyboardEvent) => void} Typescript syntax */\n    const onKeyDown = (event) => {\n      console.log('event.keyCode :>> ', event.keyCode);\n      if (event.keyCode === KEY_CODES.ESC && clearEditingState)\n        clearEditingState();\n    };\n\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [clearEditingState]);\n\n  return (\n    <div className=\"str-chat__edit-message-form\">\n      <ImageDropzone\n        accept={channelContext.acceptedFiles}\n        multiple={channelContext.multipleUploads}\n        disabled={\n          channelContext.maxNumberOfFiles !== undefined &&\n          messageInput.numberOfUploads >= channelContext.maxNumberOfFiles\n        }\n        handleFiles={messageInput.uploadNewFiles}\n      >\n        <form onSubmit={messageInput.handleSubmit}>\n          <UploadsPreview {...messageInput} />\n          <EmojiPicker {...messageInput} small />\n          <ChatAutoComplete\n            commands={messageInput.getCommands()}\n            innerRef={messageInput.textareaRef}\n            handleSubmit={messageInput.handleSubmit}\n            onChange={messageInput.handleChange}\n            onSelectItem={messageInput.onSelectItem}\n            placeholder={t('Type your message')}\n            value={messageInput.text}\n            rows={1}\n            maxRows={props.maxRows}\n            onPaste={messageInput.onPaste}\n            grow={props.grow}\n            additionalTextareaProps={props.additionalTextareaProps}\n          />\n          <div className=\"str-chat__message-team-form-footer\">\n            <div className=\"str-chat__edit-message-form-options\">\n              <span\n                className=\"str-chat__input-emojiselect\"\n                onClick={messageInput.openEmojiPicker}\n              >\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <title>{t('Open emoji picker')}</title>\n                  <path\n                    d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                    fillRule=\"evenodd\"\n                  />\n                </svg>\n              </span>\n              <div\n                className=\"str-chat__fileupload-wrapper\"\n                data-testid=\"fileinput\"\n              >\n                <Tooltip>{t('Attach files')}</Tooltip>\n                <FileUploadButton\n                  multiple={channelContext.multipleUploads}\n                  disabled={\n                    channelContext.maxNumberOfFiles !== undefined &&\n                    messageInput.numberOfUploads >=\n                      channelContext.maxNumberOfFiles\n                  }\n                  accepts={channelContext.acceptedFiles}\n                  handleFiles={messageInput.uploadNewFiles}\n                >\n                  <span className=\"str-chat__input-fileupload\">\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <title>{t('Attach files')}</title>\n                      <path\n                        d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                        fillRule=\"nonzero\"\n                      />\n                    </svg>\n                  </span>\n                </FileUploadButton>\n              </div>\n            </div>\n            <div>\n              <button onClick={props.clearEditingState}>{t('Cancel')}</button>\n              <button type=\"submit\">{t('Send')}</button>\n            </div>\n          </div>\n        </form>\n      </ImageDropzone>\n    </div>\n  );\n};\n\nEditMessageForm.propTypes = {\n  /** Set focus to the text input if this is enabled */\n  focus: PropTypes.bool.isRequired,\n  /** Grow the textarea while you're typing */\n  grow: PropTypes.bool.isRequired,\n  /** Specify the max amount of rows the textarea is able to grow */\n  maxRows: PropTypes.number.isRequired,\n  /** Make the textarea disabled */\n  disabled: PropTypes.bool,\n  /** enable/disable firing the typing event */\n  publishTypingEvent: PropTypes.bool,\n  /**\n   * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n   */\n  additionalTextareaProps: PropTypes.object,\n  /**\n   * @param message: the Message object to be sent\n   * @param cid: the channel id\n   */\n  overrideSubmitHandler: PropTypes.func,\n  /** Override image upload request */\n  doImageUploadRequest: PropTypes.func,\n  /** Override file upload request */\n  doFileUploadRequest: PropTypes.func,\n  /**\n   * Custom UI component for send button.\n   *\n   * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n   * */\n  // @ts-ignore\n  SendButton: PropTypes.elementType,\n  /**\n   * Clears edit state for current message (passed down from message component)\n   */\n  clearEditingState: PropTypes.func,\n};\n\nEditMessageForm.defaultProps = {\n  focus: false,\n  disabled: false,\n  publishTypingEvent: true,\n  grow: true,\n  maxRows: 10,\n  SendButton: SendButtonComponent,\n  additionalTextareaProps: {},\n};\n\nexport default EditMessageForm;\n","// @ts-check\nimport React, {\n  useState,\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  useEffect,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { NimbleEmoji } from 'emoji-mart';\nimport { Avatar } from '../Avatar';\n\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../../utils';\n\n/** @type {React.ForwardRefRenderFunction<HTMLDivElement | null, import(\"types\").ReactionSelectorProps>} */\nconst ReactionSelectorWithRef = (\n  {\n    latest_reactions,\n    reaction_counts,\n    reactionOptions = defaultMinimalEmojis,\n    reverse = false,\n    handleReaction,\n    detailedView = true,\n  },\n  ref,\n) => {\n  const [tooltipReactionType, setTooltipReactionType] = useState(null);\n  const [tooltipPositions, setTooltipPositions] = useState(\n    /** @type {{ tooltip: number, arrow: number } | null} */ (null),\n  );\n  const containerRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n  const tooltipRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n  const targetRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n\n  // @ts-ignore because it's okay for our ref to be null in the parent component.\n  useImperativeHandle(ref, () => containerRef.current);\n\n  const showTooltip = useCallback((e, reactionType) => {\n    targetRef.current = e.target;\n    setTooltipReactionType(reactionType);\n  }, []);\n\n  const hideTooltip = useCallback(() => {\n    setTooltipReactionType(null);\n    setTooltipPositions(null);\n  }, []);\n\n  useEffect(() => {\n    if (tooltipReactionType) {\n      const tooltip = tooltipRef.current?.getBoundingClientRect();\n      const target = targetRef.current?.getBoundingClientRect();\n      const container = containerRef.current?.getBoundingClientRect();\n\n      if (!tooltip || !target || !container) return;\n\n      const tooltipPosition =\n        tooltip.width === container.width || tooltip.x < container.x\n          ? 0\n          : target.left + target.width / 2 - container.left - tooltip.width / 2;\n      const arrowPosition =\n        target.x - tooltip.x + target.width / 2 - tooltipPosition;\n      setTooltipPositions({\n        tooltip: tooltipPosition,\n        arrow: arrowPosition,\n      });\n    }\n  }, [tooltipReactionType, containerRef]);\n\n  /**\n   * @param {string | null} type\n   * @returns {string[] | undefined}\n   * */\n  const getUsersPerReactionType = (type) =>\n    latest_reactions\n      ?.map((reaction) => {\n        if (reaction.type === type) {\n          return reaction.user?.name || reaction.user?.id;\n        }\n        return null;\n      })\n      .filter(Boolean);\n\n  /**\n   * @param {string | null} type\n   * @returns {import(\"stream-chat\").User | undefined}\n   * */\n  const getLatestUserForReactionType = (type) =>\n    latest_reactions?.find(\n      (reaction) => reaction.type === type && !!reaction.user,\n    )?.user;\n\n  return (\n    <div\n      data-testid=\"reaction-selector\"\n      className={`str-chat__reaction-selector ${\n        reverse ? 'str-chat__reaction-selector--reverse' : ''\n      }`}\n      ref={containerRef}\n    >\n      {!!tooltipReactionType && detailedView && (\n        <div\n          className=\"str-chat__reaction-selector-tooltip\"\n          ref={tooltipRef}\n          style={{\n            left: tooltipPositions?.tooltip,\n            visibility: tooltipPositions ? 'visible' : 'hidden',\n          }}\n        >\n          <div className=\"arrow\" style={{ left: tooltipPositions?.arrow }} />\n          {getUsersPerReactionType(tooltipReactionType)?.map(\n            (user, i, users) => (\n              <span className=\"latest-user-username\" key={`key-${i}-${user}`}>\n                {`${user}${i < users.length - 1 ? ', ' : ''}`}\n              </span>\n            ),\n          )}\n        </div>\n      )}\n      <ul className=\"str-chat__message-reactions-list\">\n        {reactionOptions.map((reactionOption) => {\n          const latestUser = getLatestUserForReactionType(reactionOption.id);\n\n          const count = reaction_counts && reaction_counts[reactionOption.id];\n          return (\n            <li\n              key={`item-${reactionOption.id}`}\n              className=\"str-chat__message-reactions-list-item\"\n              data-text={reactionOption.id}\n              onClick={() =>\n                handleReaction && handleReaction(reactionOption.id)\n              }\n            >\n              {!!count && detailedView && (\n                <React.Fragment>\n                  <div\n                    className=\"latest-user\"\n                    onMouseEnter={(e) => showTooltip(e, reactionOption.id)}\n                    onMouseLeave={hideTooltip}\n                  >\n                    {latestUser ? (\n                      <Avatar\n                        image={latestUser.image}\n                        size={20}\n                        name={latestUser.name || null}\n                      />\n                    ) : (\n                      <div className=\"latest-user-not-found\" />\n                    )}\n                  </div>\n                </React.Fragment>\n              )}\n              <NimbleEmoji\n                // @ts-ignore because emoji-mart types don't support specifying\n                // spriteUrl instead of imageUrl, while the implementation does\n                emoji={reactionOption}\n                {...emojiSetDef}\n                data={emojiData}\n              />\n\n              {Boolean(count) && detailedView && (\n                <span className=\"str-chat__message-reactions-list-item__count\">\n                  {count || ''}\n                </span>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nconst ReactionSelector = React.forwardRef(ReactionSelectorWithRef);\n\nReactionSelector.propTypes = {\n  /**\n   * Array of latest reactions.\n   * Reaction object has following structure:\n   *\n   * ```json\n   * {\n   *  \"type\": \"love\",\n   *  \"user_id\": \"demo_user_id\",\n   *  \"user\": {\n   *    ...userObject\n   *  },\n   *  \"created_at\": \"datetime\";\n   * }\n   * ```\n   * */\n  latest_reactions: PropTypes.array,\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n  reverse: PropTypes.bool,\n  /**\n   * Handler to set/unset reaction on message.\n   *\n   * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * */\n  handleReaction: PropTypes.func.isRequired,\n  /** Enable the avatar display */\n  detailedView: PropTypes.bool,\n};\n\nexport default React.memo(ReactionSelector);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n// @ts-ignore\nimport { NimbleEmoji } from 'emoji-mart';\n\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../../utils';\n\n/** @type {React.FC<import(\"types\").ReactionsListProps>} */\nconst ReactionsList = ({\n  reactions,\n  reaction_counts,\n  reactionOptions = defaultMinimalEmojis,\n  reverse = false,\n  onClick,\n}) => {\n  const getTotalReactionCount = () =>\n    Object.values(reaction_counts || {}).reduce(\n      (total, count) => total + count,\n      0,\n    );\n\n  /** @param {string} type */\n  const getOptionForType = (type) =>\n    reactionOptions.find((option) => option.id === type);\n\n  const getReactionTypes = () => {\n    if (!reactions) return [];\n    const allTypes = new Set();\n    reactions.forEach(({ type }) => {\n      allTypes.add(type);\n    });\n    return Array.from(allTypes);\n  };\n\n  return (\n    <div\n      data-testid=\"reaction-list\"\n      className={`str-chat__reaction-list ${\n        reverse ? 'str-chat__reaction-list--reverse' : ''\n      }`}\n      onClick={onClick}\n    >\n      <ul>\n        {getReactionTypes().map((reactionType) => {\n          const emojiDefinition = getOptionForType(reactionType);\n          return emojiDefinition ? (\n            <li key={emojiDefinition.id}>\n              <NimbleEmoji\n                // emoji-mart type defs don't support spriteSheet use case\n                // (but implementation does)\n                // @ts-ignore\n                emoji={emojiDefinition}\n                {...emojiSetDef}\n                size={16}\n                data={emojiData}\n              />{' '}\n              &nbsp;\n            </li>\n          ) : null;\n        })}\n        <li>\n          <span className=\"str-chat__reaction-list--counter\">\n            {getTotalReactionCount()}\n          </span>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nReactionsList.propTypes = {\n  reactions: PropTypes.array,\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n  reverse: PropTypes.bool,\n  onClick: PropTypes.func,\n};\n\nexport default React.memo(ReactionsList);\n","// @ts-check\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n// @ts-ignore\nimport { NimbleEmoji } from 'emoji-mart';\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../../utils';\n\n/** @type {React.FC<import(\"types\").SimpleReactionsListProps>} */\nconst SimpleReactionsList = ({\n  reactions,\n  reaction_counts,\n  reactionOptions = defaultMinimalEmojis,\n  handleReaction,\n}) => {\n  const [tooltipReactionType, setTooltipReactionType] = useState(null);\n\n  /** @param {string | null} type */\n  const getUsersPerReactionType = (type) =>\n    reactions\n      ?.map((reaction) => {\n        if (reaction.type === type) {\n          return reaction.user?.name || reaction.user?.id;\n        }\n        return null;\n      })\n      .filter(Boolean);\n\n  const getTotalReactionCount = () =>\n    Object.values(reaction_counts || {}).reduce(\n      (total, count) => total + count,\n      0,\n    );\n\n  const getReactionTypes = () => {\n    if (!reactions) return [];\n    const allTypes = new Set();\n    reactions.forEach(({ type }) => {\n      allTypes.add(type);\n    });\n    return Array.from(allTypes);\n  };\n\n  /** @param {string} type */\n  const getOptionForType = (type) =>\n    reactionOptions.find((option) => option.id === type);\n\n  return (\n    <ul\n      data-testid=\"simple-reaction-list\"\n      className=\"str-chat__simple-reactions-list\"\n      onMouseLeave={() => setTooltipReactionType(null)}\n    >\n      {getReactionTypes().map((reactionType, i) => {\n        const emojiDefinition = getOptionForType(reactionType);\n        return emojiDefinition ? (\n          <li\n            className=\"str-chat__simple-reactions-list-item\"\n            key={`${emojiDefinition?.id}-${i}`}\n            onClick={() => handleReaction && handleReaction(reactionType)}\n          >\n            <span onMouseEnter={() => setTooltipReactionType(reactionType)}>\n              <NimbleEmoji\n                // emoji-mart type defs don't support spriteSheet use case\n                // (but implementation does)\n                // @ts-ignore\n                emoji={emojiDefinition}\n                {...emojiSetDef}\n                size={13}\n                data={emojiData}\n              />\n              &nbsp;\n            </span>\n\n            {tooltipReactionType === getOptionForType(reactionType)?.id && (\n              <div className=\"str-chat__simple-reactions-list-tooltip\">\n                <div className=\"arrow\" />\n                {getUsersPerReactionType(tooltipReactionType)?.join(', ')}\n              </div>\n            )}\n          </li>\n        ) : null;\n      })}\n      {reactions?.length !== 0 && (\n        <li className=\"str-chat__simple-reactions-list-item--last-number\">\n          {getTotalReactionCount()}\n        </li>\n      )}\n    </ul>\n  );\n};\n\nSimpleReactionsList.propTypes = {\n  reactions: PropTypes.array,\n  /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n  reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n  /** Provide a list of reaction options [{id: 'angry', emoji: 'angry'}] */\n  reactionOptions: PropTypes.array,\n  /**\n   * Handler to set/unset reaction on message.\n   *\n   * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * */\n  handleReaction: PropTypes.func,\n};\n\nexport default React.memo(SimpleReactionsList);\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\nexport const handleActionWarning = `Action handler was called, but it is missing one of its required arguments.\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.`;\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => (name: string, value: string, event: React.MouseEvent<HTMLElement>) => Promise<void>}\n */\nexport const useActionHandler = (message) => {\n  const { channel, updateMessage, removeMessage } = useContext(ChannelContext);\n  return async (name, value, event) => {\n    event.preventDefault();\n    if (!message || !updateMessage || !removeMessage || !channel) {\n      console.warn(handleActionWarning);\n      return;\n    }\n    const messageID = message.id;\n    const formData = {\n      [name]: value,\n    };\n\n    const data = await channel.sendAction(messageID, formData);\n\n    if (data && data.message) {\n      updateMessage(data.message);\n    } else {\n      removeMessage(message);\n    }\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) =>  (event: React.MouseEvent<HTMLElement>) => Promise<void>}\n */\nexport const useDeleteHandler = (message) => {\n  const { updateMessage, client } = useContext(ChannelContext);\n  return async (event) => {\n    event.preventDefault();\n    if (!message || !client || !updateMessage) {\n      return;\n    }\n    const data = await client.deleteMessage(message.id);\n    updateMessage(data.message);\n  };\n};\n","// @ts-check\nimport { useState } from 'react';\n\n/**\n * @type {(\n *   customInitialState?: boolean,\n *   customSetEditing?: (event: React.MouseEvent<HTMLElement>) => void,\n *   customClearEditing?: (event: React.MouseEvent<HTMLElement>) => void\n * ) => {\n *   editing: boolean,\n *   setEdit: (event: React.MouseEvent<HTMLElement>) => void,\n *   clearEdit: (event: React.MouseEvent<HTMLElement>) => void\n * }}\n */\nexport const useEditHandler = (\n  customInitialState = false,\n  customSetEditing,\n  customClearEditingHandler,\n) => {\n  const [editing, setEditing] = useState(customInitialState);\n\n  const setEdit =\n    customSetEditing ||\n    ((event) => {\n      event?.preventDefault();\n      setEditing(true);\n    });\n  const clearEdit =\n    customClearEditingHandler ||\n    ((event) => {\n      event?.preventDefault();\n      setEditing(false);\n    });\n  return { editing, setEdit, clearEdit };\n};\n","// @ts-check\nimport deepequal from 'react-fast-compare';\nimport PropTypes from 'prop-types';\n\n/**\n * Following function validates a function which returns notification message.\n * It validates if the first parameter is function and also if return value of function is string or no.\n *\n * @type {(func: Function, args: any) => null | string}\n */\nexport const validateAndGetMessage = (func, args) => {\n  if (!func || typeof func !== 'function') return null;\n\n  const returnValue = func(...args);\n\n  if (typeof returnValue !== 'string') return null;\n\n  return returnValue;\n};\n\n/**\n * Tell if the owner of the current message is muted\n *\n * @type {(message?: import('stream-chat').MessageResponse, mutes?: import('stream-chat').Mute[]) => boolean}\n */\nexport const isUserMuted = (message, mutes) => {\n  if (!mutes || !message) {\n    return false;\n  }\n\n  const userMuted = mutes.filter(\n    /** @type {(el: import('stream-chat').Mute) => boolean} Typescript syntax */\n    (el) => el.target.id === message.user?.id,\n  );\n  return !!userMuted.length;\n};\n\nexport const MESSAGE_ACTIONS = {\n  edit: 'edit',\n  delete: 'delete',\n  flag: 'flag',\n  mute: 'mute',\n};\n\n/**\n * @typedef {{\n *   canEdit: boolean;\n *   canDelete: boolean;\n *   canMute: boolean;\n *   canFlag: boolean;\n * }} Capabilities\n * @type {(actions: string[] | boolean, capabilities: Capabilities) => string[]} Typescript syntax\n */\nexport const getMessageActions = (\n  actions,\n  { canDelete, canFlag, canEdit, canMute },\n) => {\n  const messageActionsAfterPermission = [];\n  let messageActions = [];\n\n  if (actions && typeof actions === 'boolean') {\n    // If value of actions is true, then populate all the possible values\n    messageActions = Object.keys(MESSAGE_ACTIONS);\n  } else if (actions && actions.length > 0) {\n    messageActions = [...actions];\n  } else {\n    return [];\n  }\n\n  if (canEdit && messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n  }\n\n  if (canDelete && messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n  }\n\n  if (canFlag && messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n  }\n\n  if (canMute && messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n  }\n\n  return messageActionsAfterPermission;\n};\n\n/**\n * @typedef {Pick<import('types').MessageComponentProps, 'message' | 'readBy' | 'groupStyles' | 'lastReceivedId' | 'messageListRect'>} MessageEqualProps\n * @type {(props: MessageEqualProps, nextProps: MessageEqualProps) => boolean} Typescript syntax\n */\nexport const areMessagePropsEqual = (props, nextProps) => {\n  return (\n    // Message content is equal\n    nextProps.message === props.message &&\n    // Message was read by someone\n    deepequal(nextProps.readBy, props.readBy) &&\n    // Group style changes (it often happens that the last 3 messages of a channel have different group styles)\n    deepequal(nextProps.groupStyles, props.groupStyles) &&\n    // @ts-ignore\n    deepequal(nextProps.mutes, props.mutes) &&\n    // Last message received in the channel changes\n    deepequal(nextProps.lastReceivedId, props.lastReceivedId) &&\n    // User toggles edit state\n    // @ts-ignore // TODO: fix\n    nextProps.editing === props.editing &&\n    // Message wrapper layout changes\n    nextProps.messageListRect === props.messageListRect\n  );\n};\n\n/**\n * @type {(nextProps: import('types').MessageComponentProps, props: import('types').MessageComponentProps ) => boolean} Typescript syntax\n */\nexport const shouldMessageComponentUpdate = (props, nextProps) => {\n  // Component should only update if:\n  return !areMessagePropsEqual(props, nextProps);\n};\n\n/** @type {(message: import('stream-chat').MessageResponse | undefined) => boolean} */\nexport const messageHasReactions = (message) => {\n  return !!message?.latest_reactions && !!message.latest_reactions.length;\n};\n\n/** @type {(message: import('stream-chat').MessageResponse | undefined) => boolean} */\nexport const messageHasAttachments = (message) => {\n  return !!message?.attachments && !!message.attachments.length;\n};\n\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => import('stream-chat').Attachment[] }\n */\nexport const getImages = (message) => {\n  if (!message?.attachments) {\n    return [];\n  }\n  return message.attachments.filter(\n    /** @type {(item: import('stream-chat').Attachment) => boolean} Typescript syntax */\n    (item) => item.type === 'image',\n  );\n};\n\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => import('stream-chat').Attachment[] }\n */\nexport const getNonImageAttachments = (message) => {\n  if (!message?.attachments) {\n    return [];\n  }\n  return message.attachments.filter(\n    /** @type {(item: import('stream-chat').Attachment) => boolean} Typescript syntax */\n    (item) => item.type !== 'image',\n  );\n};\n\nexport const MessagePropTypes = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  html: PropTypes.string.isRequired,\n  created_at: PropTypes.instanceOf(Date).isRequired,\n  updated_at: PropTypes.instanceOf(Date).isRequired,\n}).isRequired;\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext, TranslationContext } from '../../../context';\nimport { validateAndGetMessage } from '../utils';\n\nexport const missingUseFlagHandlerParameterWarning =\n  'useFlagHandler was called but it is missing one or more necessary parameters.';\n\n/**\n * @typedef {{\n *   notify?: import('types').MessageComponentProps['addNotification'],\n *   getSuccessNotification?: import('types').MessageComponentProps['getMuteUserSuccessNotification'],\n *   getErrorNotification?: import('types').MessageComponentProps['getMuteUserErrorNotification'],\n * }} NotificationArg\n * @type {(message: import('stream-chat').MessageResponse | undefined, notification: NotificationArg) => (event: React.MouseEvent<HTMLElement>) => Promise<void>}\n */\nexport const useFlagHandler = (message, notifications = {}) => {\n  const { client } = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  /** @type {(event: React.MouseEvent<HTMLElement>) => Promise<void>} Typescript syntax */\n  return async (event) => {\n    event.preventDefault();\n    const {\n      notify,\n      getSuccessNotification,\n      getErrorNotification,\n    } = notifications;\n\n    if (!client || !t || !notify || !message) {\n      console.warn(missingUseFlagHandlerParameterWarning);\n      return;\n    }\n\n    try {\n      await client.flagMessage(message.id);\n      const successMessage =\n        getSuccessNotification &&\n        validateAndGetMessage(getSuccessNotification, [message]);\n      notify(\n        successMessage || t('Message has been successfully flagged'),\n        'success',\n      );\n    } catch (e) {\n      const errorMessage =\n        getErrorNotification &&\n        validateAndGetMessage(getErrorNotification, [message]);\n      notify(\n        errorMessage ||\n          t(\n            'Error adding flag: Either the flag already exist or there is issue with network connection ...',\n          ),\n        'error',\n      );\n    }\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/** @type {(fn: Function | undefined, message: import('stream-chat').MessageResponse | undefined) => Handler} * */\nfunction createEventHandler(fn, message) {\n  return (e) => {\n    if (typeof fn !== 'function' || !message?.mentioned_users) {\n      return;\n    }\n    fn(e, message.mentioned_users);\n  };\n}\n\n/**\n * @typedef {React.EventHandler<React.SyntheticEvent>} Handler\n * @typedef { import('stream-chat').MessageResponse | undefined } Message\n * @typedef { (event: React.MouseEvent, user: import('stream-chat').UserResponse[] ) => void } CustomMentionHandler\n * @type {(\n *   message: Message,\n *   customMentionHandler?: {\n *     onMentionsClick?: CustomMentionHandler,\n *     onMentionsHover?: CustomMentionHandler\n *   }\n * ) => { onMentionsClick: Handler, onMentionsHover: Handler }}\n */\nexport const useMentionsHandler = (message, customMentionHandler) => {\n  /**\n   * @type{import('types').ChannelContextValue}\n   */\n  const {\n    onMentionsClick: channelOnMentionsClick,\n    onMentionsHover: channelOnMentionsHover,\n  } = useContext(ChannelContext);\n  const onMentionsClick =\n    customMentionHandler?.onMentionsClick ||\n    channelOnMentionsClick ||\n    (() => {});\n  const onMentionsHover =\n    customMentionHandler?.onMentionsHover ||\n    channelOnMentionsHover ||\n    (() => {});\n\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsClick: createEventHandler(onMentionsClick, message),\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsHover: createEventHandler(onMentionsHover, message),\n  };\n};\n\n/**\n * @type {(\n *   message: Message,\n *   eventHandlers?: {\n *     onMentionsClick?: Handler,\n *     onMentionsHover?: Handler,\n *   },\n * ) => { onMentionsClick: Handler, onMentionsHover: Handler }}\n */\nexport const useMentionsUIHandler = (message, eventHandlers) => {\n  /**\n   * @type{import('types').ChannelContextValue}\n   */\n  const { onMentionsClick, onMentionsHover } = useContext(ChannelContext);\n\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsClick:\n      eventHandlers?.onMentionsClick ||\n      createEventHandler(onMentionsClick, message),\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onMentionsHover:\n      eventHandlers?.onMentionsHover ||\n      createEventHandler(onMentionsHover, message),\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { isUserMuted, validateAndGetMessage } from '../utils';\nimport { ChannelContext, TranslationContext } from '../../../context';\n\nexport const missingUseMuteHandlerParamsWarning =\n  'useMuteHandler was called but it is missing one or more necessary parameter.';\n\n/**\n * @typedef {{\n *   notify?: import('types').MessageComponentProps['addNotification'],\n *   getSuccessNotification?: import('types').MessageComponentProps['getMuteUserSuccessNotification'],\n *   getErrorNotification?: import('types').MessageComponentProps['getMuteUserErrorNotification'],\n * }} NotificationArg\n * @type {(message: import('stream-chat').MessageResponse | undefined, notification: NotificationArg) => (event: React.MouseEvent<HTMLElement>) => Promise<void>}\n */\nexport const useMuteHandler = (message, notifications = {}) => {\n  const { client, mutes } = useContext(ChannelContext);\n  const { t } = useContext(TranslationContext);\n\n  /** @type {(event: React.MouseEvent<HTMLElement>) => Promise<void>} Typescript syntax */\n  return async (event) => {\n    event.preventDefault();\n    const {\n      notify,\n      getSuccessNotification,\n      getErrorNotification,\n    } = notifications;\n\n    if (!t || !message?.user || !notify || !client) {\n      console.warn(missingUseMuteHandlerParamsWarning);\n      return;\n    }\n    if (!isUserMuted(message, mutes)) {\n      try {\n        await client.muteUser(message.user.id);\n        const successMessage =\n          getSuccessNotification &&\n          validateAndGetMessage(getSuccessNotification, [message.user]);\n\n        notify(\n          successMessage ||\n            t(`{{ user }} has been muted`, {\n              user: message.user.name || message.user.id,\n            }),\n          'success',\n        );\n      } catch (e) {\n        const errorMessage =\n          getErrorNotification &&\n          validateAndGetMessage(getErrorNotification, [message.user]);\n\n        notify(errorMessage || t('Error muting a user ...'), 'error');\n      }\n    } else {\n      try {\n        await client.unmuteUser(message.user.id);\n        const fallbackMessage = t(`{{ user }} has been unmuted`, {\n          user: message.user.name || message.user.id,\n        });\n        const successMessage =\n          (getSuccessNotification &&\n            validateAndGetMessage(getSuccessNotification, [message.user])) ||\n          fallbackMessage;\n\n        if (typeof successMessage === 'string') {\n          notify(successMessage, 'success');\n        }\n      } catch (e) {\n        const errorMessage =\n          (getErrorNotification &&\n            validateAndGetMessage(getErrorNotification, [message.user])) ||\n          t('Error unmuting a user ...');\n        if (typeof errorMessage === 'string') {\n          notify(errorMessage, 'error');\n        }\n      }\n    }\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/**\n * @type {(\n *   message: import('stream-chat').MessageResponse | undefined,\n *   customOpenThread?: (message: import('stream-chat').MessageResponse, event: React.SyntheticEvent) => void\n * ) => (event: React.SyntheticEvent) => void}\n */\nexport const useOpenThreadHandler = (message, customOpenThread) => {\n  /**\n   * @type{import('types').ChannelContextValue}\n   */\n  const { openThread: channelOpenThread } = useContext(ChannelContext);\n\n  const openThread = customOpenThread || channelOpenThread;\n  return (event) => {\n    if (!openThread || !message) {\n      console.warn(\n        'Open thread handler was called but it is missing one of its parameters',\n      );\n      return;\n    }\n    openThread(message, event);\n  };\n};\n","// @ts-check\nimport { useContext, useCallback, useEffect, useRef, useState } from 'react';\nimport { ChannelContext } from '../../../context';\n\nexport const reactionHandlerWarning = `Reaction handler was called, but it is missing one of its required arguments.\n      Make sure the ChannelContext was properly set and that this hook was initialized with a valid message.`;\n/**\n * @type {(message: import('stream-chat').MessageResponse | undefined) => (reactionType: string, event: React.MouseEvent) => Promise<void>}\n */\nexport const useReactionHandler = (message) => {\n  const { client, channel, updateMessage } = useContext(ChannelContext);\n\n  return async (reactionType, event) => {\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    if (!updateMessage || !message || !channel || !client) {\n      console.warn(reactionHandlerWarning);\n      return;\n    }\n\n    let userExistingReaction = null;\n\n    const currentUser = client.userID;\n    if (message.own_reactions) {\n      message.own_reactions.forEach((reaction) => {\n        // own user should only ever contain the current user id\n        // just in case we check to prevent bugs with message updates from breaking reactions\n        if (\n          reaction.user &&\n          currentUser === reaction.user.id &&\n          reaction.type === reactionType\n        ) {\n          userExistingReaction = reaction;\n        } else if (reaction.user && currentUser !== reaction.user.id) {\n          console.warn(\n            `message.own_reactions contained reactions from a different user, this indicates a bug`,\n          );\n        }\n      });\n    }\n\n    const originalMessage = message;\n    let reactionChangePromise;\n\n    /*\n    - Make the API call in the background\n    - If it fails, revert to the old message...\n     */\n    if (userExistingReaction) {\n      reactionChangePromise = channel.deleteReaction(\n        message.id,\n        // @ts-ignore Typescript doesn't understand that the userExistingReaction variable might have been mutated inside the foreach loop\n        userExistingReaction.type,\n      );\n    } else {\n      // add the reaction\n      const messageID = message.id;\n\n      const reaction = { type: reactionType };\n\n      // this.props.channel.state.addReaction(tmpReaction, this.props.message);\n      reactionChangePromise = channel.sendReaction(messageID, reaction);\n    }\n\n    try {\n      // only wait for the API call after the state is updated\n      await reactionChangePromise;\n    } catch (e) {\n      // revert to the original message if the API call fails\n      updateMessage(originalMessage);\n    }\n  };\n};\n\n/**\n * @typedef {{ onReactionListClick: () => void, showDetailedReactions: boolean }} ReactionClickHandler\n * @type {(\n *   message: import('stream-chat').MessageResponse | undefined,\n *   reactionSelectorRef: React.RefObject<HTMLDivElement | null>,\n *   messageWrapperRef?: React.RefObject<HTMLElement | null>\n * ) => ReactionClickHandler}\n */\nexport const useReactionClick = (\n  message,\n  reactionSelectorRef,\n  messageWrapperRef,\n) => {\n  const [showDetailedReactions, setShowDetailedReactions] = useState(false);\n  const messageDeleted = !!message?.deleted_at;\n  const hasListener = useRef(false);\n  /** @type {EventListener} */\n  const closeDetailedReactions = useCallback(\n    (event) => {\n      if (\n        event.target &&\n        // @ts-ignore\n        reactionSelectorRef?.current?.contains(event.target)\n      ) {\n        return;\n      }\n      setShowDetailedReactions(false);\n    },\n    [setShowDetailedReactions, reactionSelectorRef],\n  );\n\n  useEffect(() => {\n    const messageWrapper = messageWrapperRef?.current;\n    if (showDetailedReactions && !hasListener.current) {\n      hasListener.current = true;\n      document.addEventListener('click', closeDetailedReactions);\n      document.addEventListener('touchend', closeDetailedReactions);\n      if (messageWrapper) {\n        messageWrapper.addEventListener('mouseleave', closeDetailedReactions);\n      }\n    }\n    if (!showDetailedReactions && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n      if (messageWrapper) {\n        messageWrapper.removeEventListener(\n          'mouseleave',\n          closeDetailedReactions,\n        );\n      }\n      hasListener.current = false;\n    }\n    return () => {\n      if (hasListener.current) {\n        document.removeEventListener('click', closeDetailedReactions);\n        document.removeEventListener('touchend', closeDetailedReactions);\n        if (messageWrapper) {\n          messageWrapper.removeEventListener(\n            'mouseleave',\n            closeDetailedReactions,\n          );\n        }\n        hasListener.current = false;\n      }\n    };\n  }, [showDetailedReactions, closeDetailedReactions, messageWrapperRef]);\n\n  useEffect(() => {\n    const messageWrapper = messageWrapperRef?.current;\n    if (messageDeleted && hasListener.current) {\n      document.removeEventListener('click', closeDetailedReactions);\n      document.removeEventListener('touchend', closeDetailedReactions);\n      if (messageWrapper) {\n        messageWrapper.removeEventListener(\n          'mouseleave',\n          closeDetailedReactions,\n        );\n      }\n      hasListener.current = false;\n    }\n  }, [messageDeleted, closeDetailedReactions, messageWrapperRef]);\n\n  /** @type {() => void} Typescript syntax */\n  const onReactionListClick = () => {\n    setShowDetailedReactions(true);\n  };\n  return {\n    onReactionListClick,\n    showDetailedReactions,\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/**\n * @type {(\n *  customRetrySendMessage?: (message: import('stream-chat').Message) => Promise<void>\n * ) => (message: import('stream-chat').Message | undefined) => Promise<void>}\n */\nexport const useRetryHandler = (customRetrySendMessage) => {\n  /**\n   *@type {import('types').ChannelContextValue}\n   */\n  const { retrySendMessage: contextRetrySendMessage } = useContext(\n    ChannelContext,\n  );\n  const retrySendMessage = customRetrySendMessage || contextRetrySendMessage;\n  return async (message) => {\n    if (retrySendMessage && message) {\n      await retrySendMessage(message);\n    }\n  };\n};\n","// @ts-check\n/**\n * @typedef {React.EventHandler<React.SyntheticEvent>} Handler\n * @typedef {(e: React.MouseEvent, user: import('stream-chat').User) => void} UserEventHandler\n * @type {(message: import('stream-chat').MessageResponse | undefined, eventHandlers: {onUserClickHandler?: UserEventHandler, onUserHoverHandler?: UserEventHandler}) => { onUserClick: Handler, onUserHover: Handler }}\n */\nexport const useUserHandler = (message, eventHandlers) => {\n  return {\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onUserClick: (e) => {\n      if (\n        typeof eventHandlers?.onUserClickHandler !== 'function' ||\n        !message?.user\n      ) {\n        return;\n      }\n      eventHandlers.onUserClickHandler(e, message.user);\n    },\n    /** @type {(e: React.MouseEvent<HTMLElement>) => void} Typescript syntax */\n    onUserHover: (e) => {\n      if (\n        typeof eventHandlers?.onUserHoverHandler !== 'function' ||\n        !message?.user\n      ) {\n        return;\n      }\n\n      eventHandlers.onUserHoverHandler(e, message.user);\n    },\n  };\n};\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChannelContext } from '../../../context';\n\n/**\n * @typedef {{\n *   isMyMessage: boolean;\n *   isAdmin: boolean;\n *   isModerator: boolean;\n *   isOwner: boolean;\n *   canEditMessage: boolean;\n *   canDeleteMessage: boolean;\n * }} UserRoles\n * @type {(message: import('stream-chat').MessageResponse | undefined) => UserRoles} Typescript syntax\n */\nexport const useUserRole = (message) => {\n  const { client, channel } = useContext(ChannelContext);\n\n  const isMyMessage =\n    !!message?.user && !!client?.user && client.user.id === message.user.id;\n\n  const isAdmin =\n    client?.user?.role === 'admin' ||\n    channel?.state?.membership?.role === 'admin';\n  const isOwner = channel?.state?.membership?.role === 'owner';\n  const isModerator =\n    channel?.state?.membership?.role === 'channel_moderator' ||\n    channel?.state?.membership?.role === 'moderator';\n  const canEditMessage = isMyMessage || isModerator || isOwner || isAdmin;\n  const canDeleteMessage = canEditMessage;\n\n  return {\n    isMyMessage,\n    isAdmin,\n    isOwner,\n    isModerator,\n    canEditMessage,\n    canDeleteMessage,\n  };\n};\n","// @ts-check\nimport React, { useContext, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { MESSAGE_ACTIONS } from '../Message/utils';\nimport { TranslationContext } from '../../context';\n\n/** @type {React.FC<import(\"types\").MessageActionsBoxProps>} */\nconst MessageActionsBox = ({\n  handleFlag,\n  handleMute,\n  handleEdit,\n  handleDelete,\n  getMessageActions,\n  isUserMuted,\n  open = false,\n  mine,\n  messageListRect,\n}) => {\n  const { t } = useContext(TranslationContext);\n  const messageActions = getMessageActions();\n  const [reverse, setReverse] = useState(false);\n\n  const checkIfReverse = useCallback(\n    (containerElement) => {\n      if (!containerElement) {\n        setReverse(false);\n        return;\n      }\n      if (open) {\n        const containerRect = containerElement.getBoundingClientRect();\n\n        if (mine) {\n          setReverse(\n            !!messageListRect && containerRect.left < messageListRect.left,\n          );\n        } else {\n          setReverse(\n            !!messageListRect &&\n              containerRect.right + 5 > messageListRect.right,\n          );\n        }\n      }\n    },\n    [messageListRect, mine, open],\n  );\n\n  return (\n    <div\n      data-testid=\"message-actions-box\"\n      className={`str-chat__message-actions-box\n        ${open ? 'str-chat__message-actions-box--open' : ''}\n        ${mine ? 'str-chat__message-actions-box--mine' : ''}\n        ${reverse ? 'str-chat__message-actions-box--reverse' : ''}\n      `}\n      ref={checkIfReverse}\n    >\n      <ul className=\"str-chat__message-actions-list\">\n        {messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1 && (\n          <button onClick={handleFlag}>\n            <li className=\"str-chat__message-actions-list-item\">{t('Flag')}</li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 && (\n          <button onClick={handleMute}>\n            <li className=\"str-chat__message-actions-list-item\">\n              {isUserMuted && isUserMuted() ? t('Unmute') : t('Mute')}\n            </li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1 && (\n          <button onClick={handleEdit}>\n            <li className=\"str-chat__message-actions-list-item\">\n              {t('Edit Message')}\n            </li>\n          </button>\n        )}\n        {messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1 && (\n          <button onClick={handleDelete}>\n            <li className=\"str-chat__message-actions-list-item\">\n              {t('Delete')}\n            </li>\n          </button>\n        )}\n      </ul>\n    </div>\n  );\n};\n\nMessageActionsBox.propTypes = {\n  /** If the message actions box should be open or not */\n  open: PropTypes.bool,\n  /** If message belongs to current user. */\n  mine: PropTypes.bool,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: /** @type {PropTypes.Validator<DOMRect>} */ (PropTypes.object),\n  /**\n   * Handler for flaging a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleFlag: PropTypes.func,\n  /**\n   * Handler for muting a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleMute: PropTypes.func,\n  /**\n   * Handler for editing a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleEdit: PropTypes.func,\n  /**\n   * Handler for deleting a current message\n   *\n   * @param event React's MouseEventHandler event\n   * @returns void\n   * */\n  handleDelete: PropTypes.func,\n  /**\n   * Returns array of avalable message actions for current message.\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   */\n  getMessageActions: PropTypes.func.isRequired,\n};\nexport default React.memo(MessageActionsBox);\n","// @ts-check\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport MessageActionsBox from './MessageActionsBox';\nimport {\n  useDeleteHandler,\n  useUserRole,\n  useFlagHandler,\n  useMuteHandler,\n} from '../Message/hooks';\nimport { isUserMuted } from '../Message/utils';\nimport { ChatContext } from '../../context';\n\n/**\n * @type { React.FC<import('types').MessageActionsProps> }\n */\nexport const MessageActions = (props) => {\n  const {\n    addNotification,\n    message,\n    getMessageActions,\n    messageListRect,\n    messageWrapperRef,\n    setEditingState,\n    getMuteUserSuccessNotification,\n    getMuteUserErrorNotification,\n    getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification,\n    handleFlag: propHandleFlag,\n    handleMute: propHandleMute,\n    handleDelete: propHandleDelete,\n    inline,\n    customWrapperClass,\n  } = props;\n  const { mutes } = useContext(ChatContext);\n  const messageActions = getMessageActions();\n  const [actionsBoxOpen, setActionsBoxOpen] = useState(false);\n  const { isMyMessage } = useUserRole(message);\n  const handleDelete = useDeleteHandler(message);\n  const handleFlag = useFlagHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getFlagMessageErrorNotification,\n    getErrorNotification: getFlagMessageSuccessNotification,\n  });\n  const handleMute = useMuteHandler(message, {\n    notify: addNotification,\n    getErrorNotification: getMuteUserSuccessNotification,\n    getSuccessNotification: getMuteUserErrorNotification,\n  });\n  const isMuted = useCallback(() => {\n    return isUserMuted(message, mutes);\n  }, [message, mutes]);\n\n  /** @type {() => void} Typescript syntax */\n  const hideOptions = useCallback(() => setActionsBoxOpen(false), []);\n  const messageDeletedAt = !!message?.deleted_at;\n  useEffect(() => {\n    if (messageWrapperRef?.current) {\n      messageWrapperRef.current.addEventListener('onMouseLeave', hideOptions);\n    }\n  }, [messageWrapperRef, hideOptions]);\n  useEffect(() => {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n\n  useEffect(() => {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n    return () => {\n      document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n  if (messageActions.length === 0) {\n    return null;\n  }\n\n  return (\n    <MessageActionsWrapper\n      inline={inline}\n      customWrapperClass={customWrapperClass}\n      setActionsBoxOpen={setActionsBoxOpen}\n    >\n      <MessageActionsBox\n        getMessageActions={getMessageActions}\n        open={actionsBoxOpen}\n        messageListRect={messageListRect}\n        handleFlag={propHandleFlag || handleFlag}\n        isUserMuted={isMuted}\n        handleMute={propHandleMute || handleMute}\n        handleEdit={setEditingState}\n        handleDelete={propHandleDelete || handleDelete}\n        mine={isMyMessage}\n      />\n      <svg\n        width=\"11\"\n        height=\"4\"\n        viewBox=\"0 0 11 4\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\"\n          fillRule=\"nonzero\"\n        />\n      </svg>\n    </MessageActionsWrapper>\n  );\n};\n\n/**\n * This is a workaround to encompass the different styles message actions can have at the moment\n * while allowing for sharing the component's stateful logic.\n * @type { React.FC<import('types').MessageActionsWrapperProps> }\n */\nconst MessageActionsWrapper = (props) => {\n  const { children, customWrapperClass, inline, setActionsBoxOpen } = props;\n  const defaultWrapperClass =\n    'str-chat__message-simple__actions__action str-chat__message-simple__actions__action--options';\n  const wrapperClass =\n    typeof customWrapperClass === 'string'\n      ? customWrapperClass\n      : defaultWrapperClass;\n  /** @type {() => void} Typescript syntax */\n  const onClickOptionsAction = () => setActionsBoxOpen(true);\n  const wrapperProps = {\n    'data-testid': 'message-actions',\n    onClick: onClickOptionsAction,\n    className: wrapperClass,\n  };\n  if (inline) {\n    return <span {...wrapperProps}>{children}</span>;\n  }\n  return <div {...wrapperProps}>{children}</div>;\n};\n","// @ts-check\nimport React, { useContext } from 'react';\nimport { useUserRole, useOpenThreadHandler } from './hooks';\nimport { ChannelContext } from '../../context';\nimport { MessageActions } from '../MessageActions';\nimport { ThreadIcon, ReactionIcon } from './icons';\n\n/**\n * @type { React.FC<import('types').MessageOptionsProps> }\n */\nconst MessageOptionsComponent = (props) => {\n  const {\n    displayActions = true,\n    displayLeft = true,\n    displayReplies = true,\n    handleOpenThread: propHandleOpenThread,\n    initialMessage,\n    message,\n    messageWrapperRef,\n    onReactionListClick,\n    theme = 'simple',\n    threadList,\n  } = props;\n  const { isMyMessage } = useUserRole(message);\n  const handleOpenThread = useOpenThreadHandler(message);\n  /**\n   * @type {import('types').ChannelContextValue}\n   */\n  const { channel } = useContext(ChannelContext);\n  const channelConfig = channel?.getConfig();\n  const shouldShowReplies =\n    displayReplies && !threadList && channelConfig && channelConfig.replies;\n  const shouldShowReactions = channelConfig && channelConfig.reactions;\n  if (\n    !message ||\n    message.type === 'error' ||\n    message.type === 'system' ||\n    message.type === 'ephemeral' ||\n    message.status === 'failed' ||\n    message.status === 'sending' ||\n    initialMessage\n  ) {\n    return null;\n  }\n  if (isMyMessage && displayLeft) {\n    return (\n      <div\n        data-testid=\"message-options-left\"\n        className={`str-chat__message-${theme}__actions`}\n      >\n        {<MessageActions {...props} messageWrapperRef={messageWrapperRef} />}\n        {shouldShowReplies && (\n          <div\n            data-testid=\"thread-action\"\n            onClick={propHandleOpenThread || handleOpenThread}\n            className={`str-chat__message-${theme} str-chat__message-${theme}__actions__action--thread`}\n          >\n            <ThreadIcon />\n          </div>\n        )}\n        {shouldShowReactions && (\n          <div\n            data-testid=\"message-reaction-action\"\n            className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--reactions`}\n            onClick={onReactionListClick}\n          >\n            <ReactionIcon />\n          </div>\n        )}\n      </div>\n    );\n  }\n  return (\n    <div\n      data-testid=\"message-options\"\n      className={`str-chat__message-${theme}__actions`}\n    >\n      {shouldShowReactions && (\n        <div\n          data-testid=\"message-reaction-action\"\n          className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--reactions`}\n          onClick={onReactionListClick}\n        >\n          <ReactionIcon />\n        </div>\n      )}\n      {shouldShowReplies && (\n        <div\n          onClick={propHandleOpenThread || handleOpenThread}\n          data-testid=\"thread-action\"\n          className={`str-chat__message-${theme}__actions__action str-chat__message-${theme}__actions__action--thread`}\n        >\n          <ThreadIcon />\n        </div>\n      )}\n      {displayActions && (\n        <MessageActions {...props} messageWrapperRef={messageWrapperRef} />\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(MessageOptionsComponent);\n","// @ts-check\nimport React, { useMemo, useContext, useRef } from 'react';\nimport { isOnlyEmojis, renderText } from '../../utils';\nimport { TranslationContext } from '../../context';\nimport { ReactionsList, ReactionSelector } from '../Reactions';\nimport {\n  useReactionHandler,\n  useReactionClick,\n  useMentionsUIHandler,\n} from './hooks';\nimport { messageHasReactions, messageHasAttachments } from './utils';\nimport MessageOptions from './MessageOptions';\n\n/**\n * @type { React.FC<import('types').MessageTextProps> }\n */\nconst MessageTextComponent = (props) => {\n  const {\n    onMentionsClickMessage: propOnMentionsClick,\n    onMentionsHoverMessage: propOnMentionsHover,\n    customWrapperClass,\n    customInnerClass,\n    theme = 'simple',\n    message,\n    unsafeHTML,\n    customOptionProps,\n  } = props;\n  const reactionSelectorRef = useRef(\n    /** @type {HTMLDivElement | null} */ (null),\n  );\n  const { onMentionsClick, onMentionsHover } = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n  const { onReactionListClick, showDetailedReactions } = useReactionClick(\n    message,\n    reactionSelectorRef,\n  );\n  const { t } = useContext(TranslationContext);\n  const hasReactions = messageHasReactions(message);\n  const hasAttachment = messageHasAttachments(message);\n  const handleReaction = useReactionHandler(message);\n  const messageText = useMemo(\n    () => renderText(message?.text, message?.mentioned_users),\n    [message?.text, message?.mentioned_users],\n  );\n  const wrapperClass = customWrapperClass || 'str-chat__message-text';\n  const innerClass =\n    customInnerClass ||\n    `str-chat__message-text-inner str-chat__message-${theme}-text-inner`;\n\n  if (!message?.text) {\n    return null;\n  }\n\n  return (\n    <div className={wrapperClass}>\n      <div\n        data-testid=\"message-text-inner-wrapper\"\n        className={`\n          ${innerClass}\n          ${\n            hasAttachment\n              ? ` str-chat__message-${theme}-text-inner--has-attachment`\n              : ''\n          }\n          ${\n            isOnlyEmojis(message.text)\n              ? ` str-chat__message-${theme}-text-inner--is-emoji`\n              : ''\n          }\n        `.trim()}\n        onMouseOver={onMentionsHover}\n        onClick={onMentionsClick}\n      >\n        {message.type === 'error' && (\n          <div className={`str-chat__${theme}-message--error-message`}>\n            {t && t('Error · Unsent')}\n          </div>\n        )}\n        {message.status === 'failed' && (\n          <div className={`str-chat__${theme}-message--error-message`}>\n            {t && t('Message Failed · Click to try again')}\n          </div>\n        )}\n\n        {unsafeHTML ? (\n          <div dangerouslySetInnerHTML={{ __html: message.html }} />\n        ) : (\n          messageText\n        )}\n\n        {/* if reactions show them */}\n        {hasReactions && !showDetailedReactions && (\n          <ReactionsList\n            reactions={message.latest_reactions}\n            reaction_counts={message.reaction_counts}\n            onClick={onReactionListClick}\n            reverse={true}\n          />\n        )}\n        {showDetailedReactions && (\n          <ReactionSelector\n            handleReaction={handleReaction}\n            detailedView\n            reaction_counts={message.reaction_counts}\n            latest_reactions={message.latest_reactions}\n            ref={reactionSelectorRef}\n          />\n        )}\n      </div>\n      <MessageOptions\n        {...props}\n        {...customOptionProps}\n        onReactionListClick={onReactionListClick}\n      />\n    </div>\n  );\n};\n\nexport default React.memo(MessageTextComponent);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { TranslationContext } from '../../context';\nimport { useUserRole } from './hooks/useUserRole';\nimport { MessagePropTypes } from './utils';\n\n/**\n * @type{React.FC<import('types').MessageDeletedProps>}\n */\nconst MessageDeleted = (props) => {\n  const { message } = props;\n  const { t } = useContext(TranslationContext);\n  const { isMyMessage } = useUserRole(message);\n  if (props.isMyMessage) {\n    console.warn(\n      'The isMyMessage is deprecated, and will be removed in the next major release.',\n    );\n  }\n  const messageClasses =\n    (props.isMyMessage && props.isMyMessage(message)) || isMyMessage\n      ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\n      : 'str-chat__message str-chat__message-simple';\n\n  return (\n    <div\n      key={message.id}\n      className={`${messageClasses} str-chat__message--deleted ${message.type} `}\n      data-testid={'message-deleted-component'}\n    >\n      <div className=\"str-chat__message--deleted-inner\">\n        {t && t('This message was deleted...')}\n      </div>\n    </div>\n  );\n};\n\nMessageDeleted.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  // @ts-ignore\n  // Ignoring this for now as Typescript definitions on 'strem-chat' are wrong.\n  message: MessagePropTypes,\n  /** @deprecated This is no longer needed. The component should now rely on the user role custom hook */\n  isMyMessage: PropTypes.func,\n};\n\nexport default MessageDeleted;\n","// @ts-check\nimport React, { useContext, useMemo } from 'react';\nimport { TranslationContext } from '../../context';\n\nexport const defaultTimestampFormat = 'h:mmA';\nexport const notValidDateWarning =\n  'MessageTimestamp was called without a message, or message has invalid created_at date.';\nexport const noParsingFunctionWarning =\n  'MessageTimestamp was called but there is no datetime parsing function available';\n/**\n * @type { (\n *   messageCreatedAt?: string,\n *   formatDate?: import('types').MessageTimestampProps['formatDate'],\n *   calendar?: boolean,\n *   tDateTimeParser?: import('types').MessageTimestampProps['tDateTimeParser'],\n *   format?: string,\n * ) => string | null }\n */\nfunction getDateString(\n  messageCreatedAt,\n  formatDate,\n  calendar,\n  tDateTimeParser,\n  format,\n) {\n  if (!messageCreatedAt || !Date.parse(messageCreatedAt)) {\n    console.warn(notValidDateWarning);\n    return null;\n  }\n\n  if (typeof formatDate === 'function') {\n    return formatDate(new Date(messageCreatedAt));\n  }\n\n  if (!tDateTimeParser) {\n    console.warn(noParsingFunctionWarning);\n    return null;\n  }\n\n  const parsedTime = tDateTimeParser(messageCreatedAt);\n  if (calendar && typeof parsedTime.calendar !== 'function') {\n    return null;\n  }\n\n  return calendar ? parsedTime.calendar() : parsedTime.format(format);\n}\n/**\n * @typedef { import('types').MessageTimestampProps } Props\n * @type { React.FC<Props> }\n */\nconst MessageTimestamp = (props) => {\n  const {\n    message,\n    formatDate,\n    tDateTimeParser: propTDatetimeParser,\n    customClass = '',\n    format = defaultTimestampFormat,\n    calendar = false,\n  } = props;\n  const { tDateTimeParser: contextTDateTimeParser } = useContext(\n    TranslationContext,\n  );\n  const tDateTimeParser = propTDatetimeParser || contextTDateTimeParser;\n  const when = useMemo(\n    () =>\n      getDateString(\n        message?.created_at,\n        formatDate,\n        calendar,\n        tDateTimeParser,\n        format,\n      ),\n    [formatDate, calendar, tDateTimeParser, format, message?.created_at],\n  );\n\n  if (!when) {\n    return null;\n  }\n\n  return (\n    <time\n      className={customClass}\n      dateTime={message?.created_at}\n      title={message?.created_at}\n    >\n      {when}\n    </time>\n  );\n};\n\nexport default React.memo(MessageTimestamp);\n","// @ts-check\nimport React, { useContext, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport MessageRepliesCountButton from './MessageRepliesCountButton';\nimport { getReadByTooltipText, smartRender } from '../../utils';\nimport { TranslationContext, ChannelContext } from '../../context';\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar } from '../Avatar';\nimport { Gallery } from '../Gallery';\nimport { Modal } from '../Modal';\nimport { MessageInput, EditMessageForm } from '../MessageInput';\nimport { Tooltip } from '../Tooltip';\nimport { LoadingIndicator } from '../Loading';\nimport { ReactionsList, ReactionSelector } from '../Reactions';\nimport MessageOptions from './MessageOptions';\nimport MessageText from './MessageText';\nimport DefaultMessageDeleted from './MessageDeleted';\nimport {\n  useActionHandler,\n  useOpenThreadHandler,\n  useReactionClick,\n  useReactionHandler,\n  useRetryHandler,\n  useUserHandler,\n  useUserRole,\n} from './hooks';\nimport {\n  areMessagePropsEqual,\n  messageHasReactions,\n  messageHasAttachments,\n} from './utils';\nimport { DeliveredCheckIcon } from './icons';\nimport MessageTimestamp from './MessageTimestamp';\n\n/**\n * MessageSimple - Render component, should be used together with the Message component\n *\n * @example ../../docs/MessageSimple.md\n * @type { React.FC<import('types').MessageSimpleProps> }\n */\n// eslint-disable-next-line sonarjs/cognitive-complexity\nconst MessageSimple = (props) => {\n  const {\n    clearEditingState,\n    editing,\n    message,\n    threadList,\n    formatDate,\n    updateMessage: propUpdateMessage,\n    handleAction: propHandleAction,\n    handleOpenThread: propHandleOpenThread,\n    handleReaction: propHandleReaction,\n    handleRetry: propHandleRetry,\n    onUserClick: onUserClickCustomHandler,\n    onUserHover: onUserHoverCustomHandler,\n    tDateTimeParser: propTDateTimeParser,\n  } = props;\n  const { updateMessage: channelUpdateMessage } = useContext(ChannelContext);\n  const updateMessage = propUpdateMessage || channelUpdateMessage;\n  const { isMyMessage } = useUserRole(message);\n  const handleOpenThread = useOpenThreadHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const handleAction = useActionHandler(message);\n  const handleRetry = useRetryHandler();\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: onUserClickCustomHandler,\n    onUserHoverHandler: onUserHoverCustomHandler,\n  });\n  const reactionSelectorRef = React.createRef();\n  const messageWrapperRef = useRef(null);\n  const { onReactionListClick, showDetailedReactions } = useReactionClick(\n    message,\n    reactionSelectorRef,\n  );\n  const {\n    Attachment = DefaultAttachment,\n    MessageDeleted = DefaultMessageDeleted,\n  } = props;\n\n  const hasReactions = messageHasReactions(message);\n  const hasAttachment = messageHasAttachments(message);\n\n  const messageClasses = isMyMessage\n    ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\n    : 'str-chat__message str-chat__message-simple';\n\n  const images =\n    hasAttachment &&\n    message?.attachments?.filter(\n      /** @type {(item: import('stream-chat').Attachment) => boolean} Typescript syntax */\n      (item) => item.type === 'image',\n    );\n\n  if (message?.type === 'message.read' || message?.type === 'message.date') {\n    return null;\n  }\n\n  if (message?.deleted_at) {\n    return smartRender(MessageDeleted, { message }, null);\n  }\n  return (\n    <React.Fragment>\n      {editing && (\n        <Modal open={editing} onClose={clearEditingState}>\n          <MessageInput\n            Input={EditMessageForm}\n            message={message}\n            clearEditingState={clearEditingState}\n            updateMessage={updateMessage}\n            {...props.additionalMessageInputProps}\n          />\n        </Modal>\n      )}\n      {message && (\n        <div\n          key={message.id || ''}\n          className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message--${message.type}\n\t\t\t\t\t\tstr-chat__message--${message.status}\n\t\t\t\t\t\t${message.text ? 'str-chat__message--has-text' : 'has-no-text'}\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message--has-attachment' : ''}\n\t\t\t\t\t\t${hasReactions ? 'str-chat__message--with-reactions' : ''}\n\t\t\t\t\t`.trim()}\n          ref={messageWrapperRef}\n        >\n          <MessageSimpleStatus {...props} />\n\n          {message.user && (\n            <Avatar\n              image={message.user.image}\n              name={message.user.name || message.user.id}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          )}\n          <div\n            data-testid=\"message-inner\"\n            className=\"str-chat__message-inner\"\n            onClick={() => {\n              if (\n                message.status === 'failed' &&\n                (propHandleRetry || handleRetry)\n              ) {\n                const retryHandler = propHandleRetry || handleRetry;\n                // FIXME: type checking fails here because in the case of a failed message,\n                // `message` is of type Client.Message (i.e. request object)\n                // instead of Client.MessageResponse (i.e. server response object)\n                // @ts-ignore\n                retryHandler(message);\n              }\n            }}\n          >\n            {!message.text && (\n              <React.Fragment>\n                {\n                  <MessageOptions\n                    {...props}\n                    messageWrapperRef={messageWrapperRef}\n                    onReactionListClick={onReactionListClick}\n                    handleOpenThread={propHandleOpenThread}\n                  />\n                }\n                {/* if reactions show them */}\n                {hasReactions && !showDetailedReactions && (\n                  <ReactionsList\n                    reactions={message.latest_reactions}\n                    reaction_counts={message.reaction_counts}\n                    onClick={onReactionListClick}\n                    reverse={true}\n                  />\n                )}\n                {showDetailedReactions && (\n                  <ReactionSelector\n                    handleReaction={propHandleReaction || handleReaction}\n                    detailedView\n                    reaction_counts={message.reaction_counts}\n                    latest_reactions={message.latest_reactions}\n                    ref={reactionSelectorRef}\n                  />\n                )}\n              </React.Fragment>\n            )}\n\n            <div className=\"str-chat__message-attachment-container\">\n              {hasAttachment &&\n                message.attachments?.map(\n                  /** @type {(item: import('stream-chat').Attachment) => React.ReactElement | null} Typescript syntax */\n                  (attachment, index) => {\n                    if (\n                      attachment.type === 'image' &&\n                      images &&\n                      images.length > 1\n                    )\n                      return null;\n                    return (\n                      <Attachment\n                        key={`${message.id}-${index}`}\n                        attachment={attachment}\n                        actionHandler={propHandleAction || handleAction}\n                      />\n                    );\n                  },\n                )}\n            </div>\n            {images && images.length > 1 && <Gallery images={images} />}\n            {message.text && (\n              <MessageText\n                {...props}\n                customOptionProps={{\n                  messageWrapperRef,\n                  handleOpenThread: propHandleOpenThread,\n                }}\n                // FIXME: There's some unmatched definition between the infered and the declared\n                // ReactionSelector reference\n                // @ts-ignore\n                reactionSelectorRef={reactionSelectorRef}\n              />\n            )}\n            {!threadList && message.reply_count !== 0 && (\n              <div className=\"str-chat__message-simple-reply-button\">\n                <MessageRepliesCountButton\n                  onClick={propHandleOpenThread || handleOpenThread}\n                  reply_count={message.reply_count}\n                />\n              </div>\n            )}\n            <div\n              className={`str-chat__message-data str-chat__message-simple-data`}\n            >\n              {!isMyMessage && message.user ? (\n                <span className=\"str-chat__message-simple-name\">\n                  {message.user.name || message.user.id}\n                </span>\n              ) : null}\n              <MessageTimestamp\n                customClass=\"str-chat__message-simple-timestamp\"\n                tDateTimeParser={propTDateTimeParser}\n                formatDate={formatDate}\n                message={message}\n                calendar\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </React.Fragment>\n  );\n};\n\n/** @type { React.FC<import('types').MessageSimpleProps> } */\nconst MessageSimpleStatus = ({\n  readBy,\n  message,\n  threadList,\n  lastReceivedId,\n}) => {\n  const { t } = useContext(TranslationContext);\n  const { client } = useContext(ChannelContext);\n  const { isMyMessage } = useUserRole(message);\n  if (!isMyMessage || message?.type === 'error') {\n    return null;\n  }\n  const justReadByMe =\n    readBy &&\n    readBy.length === 1 &&\n    readBy[0] &&\n    client &&\n    readBy[0].id === client.user.id;\n  if (message && message.status === 'sending') {\n    return (\n      <span\n        className=\"str-chat__message-simple-status\"\n        data-testid=\"message-status-sending\"\n      >\n        <Tooltip>{t && t('Sending...')}</Tooltip>\n        <LoadingIndicator />\n      </span>\n    );\n  }\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    const lastReadUser = readBy.filter(\n      /** @type {(item: import('stream-chat').UserResponse) => boolean} Typescript syntax */\n      (item) => !!item && !!client && item.id !== client.user.id,\n    )[0];\n    return (\n      <span\n        className=\"str-chat__message-simple-status\"\n        data-testid=\"message-status-read-by\"\n      >\n        <Tooltip>{readBy && getReadByTooltipText(readBy, t, client)}</Tooltip>\n        <Avatar\n          name={lastReadUser && lastReadUser.name ? lastReadUser.name : null}\n          image={lastReadUser && lastReadUser.image ? lastReadUser.image : null}\n          size={15}\n        />\n        {readBy.length > 2 && (\n          <span\n            className=\"str-chat__message-simple-status-number\"\n            data-testid=\"message-status-read-by-many\"\n          >\n            {readBy.length - 1}\n          </span>\n        )}\n      </span>\n    );\n  }\n  if (\n    message &&\n    message.status === 'received' &&\n    message.id === lastReceivedId &&\n    !threadList\n  ) {\n    return (\n      <span\n        className=\"str-chat__message-simple-status\"\n        data-testid=\"message-status-received\"\n      >\n        <Tooltip>{t && t('Delivered')}</Tooltip>\n        <DeliveredCheckIcon />\n      </span>\n    );\n  }\n  return null;\n};\n\nMessageSimple.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes\n    .object.isRequired),\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').AttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   * */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.oneOfType(\n    [PropTypes.node, PropTypes.func, PropTypes.object],\n  ).isRequired),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** Client object */\n  // @ts-ignore\n  client: PropTypes.object,\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n  /** Channel config object */\n  channelConfig: /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */ (PropTypes\n    .object.isRequired),\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n  /**\n   * Function to open thread on current messxage\n   * @deprecated The component now relies on the useThreadHandler custom hook\n   * You can customize the behaviour for your thread handler on the <Channel> component instead.\n   */\n  handleOpenThread: PropTypes.func,\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n  /**\n   * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions: PropTypes.func.isRequired,\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   * @deprecated This component now relies on the useRetryHandler custom hook.\n   */\n  handleRetry: PropTypes.func,\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   * @deprecated This component now relies on the useReactionHandler custom hook.\n   */\n  handleReaction: PropTypes.func,\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n  actionsEnabled: PropTypes.bool,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    top: PropTypes.number.isRequired,\n    right: PropTypes.number.isRequired,\n    bottom: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    toJSON: PropTypes.func.isRequired,\n  }),\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   * @deprecated This component now relies on the useActionHandler custom hook, and this prop will be removed on the next major release.\n   */\n  handleAction: PropTypes.func,\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   * @deprecated This component now relies on the useMentionsHandler custom hook, and this prop will be removed on the next major release.\n   * You can customize the behaviour for your mention handler on the <Channel> component instead.\n   */\n  onMentionsHoverMessage: PropTypes.func,\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   * @deprecated This component now relies on the useMentionsHandler custom hook, and this prop will be removed on the next major release.\n   * You can customize the behaviour for your mention handler on the <Channel> component instead.\n   */\n  onMentionsClickMessage: PropTypes.func,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n  /**\n   * Additional props for underlying MessageInput component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(MessageSimple, areMessagePropsEqual);\n","// @ts-check\nimport React, { useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Channel, StreamChat } from 'stream-chat';\nimport { ChannelContext } from '../../context';\nimport MessageSimple from './MessageSimple';\nimport {\n  MESSAGE_ACTIONS,\n  getMessageActions,\n  areMessagePropsEqual,\n} from './utils';\nimport {\n  useMuteHandler,\n  useEditHandler,\n  useReactionHandler,\n  useDeleteHandler,\n  useActionHandler,\n  useRetryHandler,\n  useMentionsHandler,\n  useUserHandler,\n  useOpenThreadHandler,\n  useUserRole,\n  useFlagHandler,\n} from './hooks';\n\n/**\n * Message - A high level component which implements all the logic required for a message.\n * The actual rendering of the message is delegated via the \"Message\" property\n *\n * @example ../../docs/Message.md\n * @type { React.FC<import('types').MessageComponentProps> }\n */\nconst Message = (props) => {\n  const {\n    addNotification,\n    getFlagMessageErrorNotification,\n    getFlagMessageSuccessNotification,\n    getMuteUserErrorNotification,\n    getMuteUserSuccessNotification,\n    message,\n    channel: propChannel,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    openThread: propOpenThread,\n    retrySendMessage: propRetrySendMessage,\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n    Message: MessageUIComponent = MessageSimple,\n    messageActions = Object.keys(MESSAGE_ACTIONS),\n    formatDate,\n    groupStyles = [],\n  } = props;\n  const { channel: contextChannel } = useContext(ChannelContext);\n  const channel = propChannel || contextChannel;\n  const channelConfig = channel?.getConfig && channel.getConfig();\n  const { editing, setEdit, clearEdit } = useEditHandler();\n  const handleDelete = useDeleteHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const handleAction = useActionHandler(message);\n  const handleRetry = useRetryHandler(propRetrySendMessage);\n  const handleOpenThread = useOpenThreadHandler(message, propOpenThread);\n  const handleFlag = useFlagHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getFlagMessageSuccessNotification,\n    getErrorNotification: getFlagMessageErrorNotification,\n  });\n  const handleMute = useMuteHandler(message, {\n    notify: addNotification,\n    getSuccessNotification: getMuteUserSuccessNotification,\n    getErrorNotification: getMuteUserErrorNotification,\n  });\n  const { onMentionsClick, onMentionsHover } = useMentionsHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n  const { isMyMessage, isAdmin, isModerator, isOwner } = useUserRole(message);\n  const canEdit = isMyMessage || isModerator || isOwner || isAdmin;\n  const canDelete = canEdit;\n  const messageActionsHandler = useCallback(() => {\n    if (!message || !messageActions) {\n      return [];\n    }\n\n    return getMessageActions(messageActions, {\n      canDelete,\n      canEdit,\n      canFlag: !isMyMessage,\n      canMute: !isMyMessage && !!channelConfig?.mutes,\n    });\n  }, [channelConfig, message, messageActions, canDelete, canEdit, isMyMessage]);\n\n  const actionsEnabled =\n    message && message.type === 'regular' && message.status === 'received';\n\n  return (\n    MessageUIComponent && (\n      <MessageUIComponent\n        {...props}\n        editing={editing}\n        formatDate={formatDate}\n        clearEditingState={clearEdit}\n        setEditingState={setEdit}\n        groupStyles={groupStyles}\n        actionsEnabled={actionsEnabled}\n        Message={MessageUIComponent}\n        handleReaction={handleReaction}\n        getMessageActions={messageActionsHandler}\n        handleFlag={handleFlag}\n        handleMute={handleMute}\n        handleAction={handleAction}\n        handleDelete={handleDelete}\n        handleEdit={setEdit}\n        handleRetry={handleRetry}\n        handleOpenThread={handleOpenThread}\n        isMyMessage={() => isMyMessage}\n        channelConfig={channelConfig}\n        onMentionsClickMessage={onMentionsClick}\n        onMentionsHoverMessage={onMentionsHover}\n        onUserClick={onUserClick}\n        onUserHover={onUserHover}\n      />\n    )\n  );\n};\n\nMessage.propTypes = {\n  /** The message object */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes.shape(\n    {\n      text: PropTypes.string.isRequired,\n      html: PropTypes.string.isRequired,\n      type: PropTypes.string.isRequired,\n      reaction_counts: PropTypes.objectOf(PropTypes.number.isRequired),\n      reaction_scores: PropTypes.objectOf(PropTypes.number.isRequired),\n      created_at: PropTypes.string.isRequired,\n      updated_at: PropTypes.string.isRequired,\n    },\n  ).isRequired),\n  /** The client connection object for connecting to Stream */\n  client: PropTypes.instanceOf(StreamChat).isRequired,\n  /** The current channel this message is displayed in */\n  channel: PropTypes.instanceOf(Channel).isRequired,\n  /** A list of users that have read this message */\n  readBy: PropTypes.array,\n  /** groupStyles, a list of styles to apply to this message. ie. top, bottom, single etc */\n  groupStyles: PropTypes.array,\n  /**\n   * Message UI component to display a message in message list.\n   * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\n   * */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n  /**\n   * Attachment UI component to display attachment in individual message.\n   * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').AttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /**\n   * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\n   * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n   * */\n  messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageSuccessNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageErrorNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserSuccessNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserErrorNotification: PropTypes.func,\n  /** Latest message id on current channel */\n  lastReceivedId: PropTypes.string,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: /** @type {PropTypes.Validator<DOMRect>} */ (PropTypes.object),\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  members: /** @type {PropTypes.Validator<import('seamless-immutable').ImmutableObject<{[user_id: string]: import('stream-chat').Member}> | null | undefined>} */ (PropTypes.object),\n  /**\n   * Function to add custom notification on messagelist\n   *\n   * @param text Notification text to display\n   * @param type Type of notification. 'success' | 'error'\n   * */\n  addNotification: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  updateMessage: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  removeMessage: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  retrySendMessage: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  onMentionsClick: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  onMentionsHover: PropTypes.func,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user the User object for the corresponding user.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for hover events on the user that posted the message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user the User object for the corresponding user.\n   */\n  onUserHover: PropTypes.func,\n  /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n  openThread: PropTypes.func,\n  /**\n   * Additional props for underlying MessageInput component.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n};\n\nMessage.defaultProps = {\n  Message: MessageSimple,\n  readBy: [],\n  groupStyles: [],\n  messageActions: Object.keys(MESSAGE_ACTIONS),\n};\n\nexport default React.memo(Message, areMessagePropsEqual);\n","// @ts-check\nimport React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { smartRender } from '../../utils';\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar } from '../Avatar';\nimport { Gallery } from '../Gallery';\nimport { ReactionsList, ReactionSelector } from '../Reactions';\nimport MessageRepliesCountButton from './MessageRepliesCountButton';\nimport {\n  areMessagePropsEqual,\n  messageHasReactions,\n  messageHasAttachments,\n  getImages,\n} from './utils';\nimport MessageOptions from './MessageOptions';\nimport MessageText from './MessageText';\nimport {\n  useUserRole,\n  useReactionClick,\n  useReactionHandler,\n  useActionHandler,\n  useOpenThreadHandler,\n  useUserHandler,\n} from './hooks';\nimport MessageTimestamp from './MessageTimestamp';\n\n/**\n * MessageCommerce - Render component, should be used together with the Message component\n *\n * @example ../../docs/MessageCommerce.md\n * @type { React.FC<import('types').MessageCommerceProps> }\n */\nconst MessageCommerce = (props) => {\n  const {\n    message,\n    formatDate,\n    groupStyles,\n    actionsEnabled,\n    threadList,\n    MessageDeleted,\n    getMessageActions,\n    handleReaction: propHandleReaction,\n    handleAction: propHandleAction,\n    handleOpenThread: propHandleOpenThread,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    tDateTimeParser: propTDateTimeParser,\n  } = props;\n  const Attachment = props.Attachment || DefaultAttachment;\n  const hasReactions = messageHasReactions(message);\n  const handleAction = useActionHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const handleOpenThread = useOpenThreadHandler(message);\n  const reactionSelectorRef = useRef(null);\n  const { onReactionListClick, showDetailedReactions } = useReactionClick(\n    message,\n    reactionSelectorRef,\n  );\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n  const { isMyMessage } = useUserRole(message);\n  const messageClasses = `str-chat__message-commerce str-chat__message-commerce--${\n    isMyMessage ? 'right' : 'left'\n  }`;\n\n  const hasAttachment = messageHasAttachments(message);\n  const images = getImages(message);\n\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message?.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n\n  if (\n    message &&\n    (message.type === 'message.read' || message.type === 'message.date')\n  ) {\n    return null;\n  }\n\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  return (\n    <React.Fragment>\n      <div\n        data-testid=\"message-commerce-wrapper\"\n        key={message?.id || ''}\n        className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message-commerce--${message?.type}\n\t\t\t\t\t\t${\n              message?.text\n                ? 'str-chat__message-commerce--has-text'\n                : 'str-chat__message-commerce--has-no-text'\n            }\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce--has-attachment' : ''}\n\t\t\t\t\t\t${hasReactions ? 'str-chat__message-commerce--with-reactions' : ''}\n\t\t\t\t\t\t${`str-chat__message-commerce--${firstGroupStyle}`}\n\t\t\t\t\t`.trim()}\n      >\n        {(firstGroupStyle === 'bottom' || firstGroupStyle === 'single') && (\n          <Avatar\n            image={message?.user?.image}\n            size={32}\n            name={message?.user?.name || message?.user?.id}\n            onClick={onUserClick}\n            onMouseOver={onUserHover}\n          />\n        )}\n        <div className=\"str-chat__message-commerce-inner\">\n          {message && !message.text && (\n            <React.Fragment>\n              {\n                <MessageOptions\n                  {...props}\n                  displayLeft={false}\n                  displayReplies={false}\n                  displayActions={false}\n                  onReactionListClick={onReactionListClick}\n                  theme={'commerce'}\n                />\n              }\n              {/* if reactions show them */}\n              {hasReactions && !showDetailedReactions && (\n                <ReactionsList\n                  reactions={message.latest_reactions}\n                  reaction_counts={message.reaction_counts}\n                  onClick={onReactionListClick}\n                />\n              )}\n              {showDetailedReactions && (\n                <ReactionSelector\n                  reverse={false}\n                  handleReaction={propHandleReaction || handleReaction}\n                  detailedView\n                  reaction_counts={message.reaction_counts}\n                  latest_reactions={message.latest_reactions}\n                  ref={reactionSelectorRef}\n                />\n              )}\n            </React.Fragment>\n          )}\n\n          {message?.attachments &&\n            (!images || images.length <= 1) &&\n            message.attachments.map((attachment, index) => (\n              <Attachment\n                key={`${message.id}-${index}`}\n                attachment={attachment}\n                actionHandler={propHandleAction || handleAction}\n              />\n            ))}\n\n          {!!images.length && <Gallery images={images} />}\n\n          {message?.text && (\n            <MessageText\n              actionsEnabled={actionsEnabled}\n              customWrapperClass=\"str-chat__message-commerce-text\"\n              customInnerClass=\"str-chat__message-commerce-text-inner\"\n              customOptionProps={{\n                displayLeft: false,\n                displayReplies: false,\n                displayActions: false,\n                theme: 'commerce',\n              }}\n              getMessageActions={getMessageActions}\n              message={message}\n              messageListRect={props.messageListRect}\n              unsafeHTML={props.unsafeHTML}\n              onMentionsClickMessage={props.onMentionsClickMessage}\n              onMentionsHoverMessage={props.onMentionsHoverMessage}\n              theme=\"commerce\"\n            />\n          )}\n          {!threadList && (\n            <div className=\"str-chat__message-commerce-reply-button\">\n              <MessageRepliesCountButton\n                onClick={propHandleOpenThread || handleOpenThread}\n                reply_count={message?.reply_count}\n              />\n            </div>\n          )}\n          <div className=\"str-chat__message-commerce-data\">\n            {!isMyMessage ? (\n              <span className=\"str-chat__message-commerce-name\">\n                {message?.user?.name || message?.user?.id}\n              </span>\n            ) : null}\n            <MessageTimestamp\n              formatDate={formatDate}\n              customClass=\"str-chat__message-commerce-timestamp\"\n              message={message}\n              tDateTimeParser={propTDateTimeParser}\n              format=\"LT\"\n            />\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nMessageCommerce.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes\n    .object.isRequired),\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').AttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.oneOfType(\n    [PropTypes.node, PropTypes.func, PropTypes.object],\n  ).isRequired),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n  /** Channel config object */\n  channelConfig: /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */ (PropTypes\n    .object.isRequired),\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n  /**\n   * Function to open thread on current messxage\n   * @deprecated The component now relies on the useThreadHandler custom hook\n   * You can customize the behaviour for your thread handler on the <Channel> component instead.\n   */\n  handleOpenThread: PropTypes.func,\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n  /** Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute] */\n  getMessageActions: PropTypes.func.isRequired,\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   * @deprecated This component now relies on the useReactionHandler custom hook.\n   */\n  handleReaction: PropTypes.func,\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n  actionsEnabled: PropTypes.bool,\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   * @deprecated This component now relies on the useActionHandler custom hook, and this prop will be removed on the next major release.\n   */\n  handleAction: PropTypes.func,\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n  /** Position of message in group. Possible values: top, bottom, middle, single */\n  groupStyles: PropTypes.array,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   * @deprecated This component now relies on the useUserHandler custom hook, and this prop will be removed on the next major release.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   * @deprecated This component now relies on the useUserHandler custom hook, and this prop will be removed on the next major release.\n   */\n  onUserHover: PropTypes.func,\n  /** The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(MessageCommerce, areMessagePropsEqual);\n","// @ts-check\nimport React, {\n  useCallback,\n  useEffect,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport MessageRepliesCountButton from './MessageRepliesCountButton';\n\nimport { isOnlyEmojis, renderText, smartRender } from '../../utils';\nimport { ChannelContext, TranslationContext } from '../../context';\n\nimport { Avatar } from '../Avatar';\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Gallery } from '../Gallery';\nimport { MessageInput, EditMessageForm } from '../MessageInput';\nimport { SimpleReactionsList, ReactionSelector } from '../Reactions';\nimport {\n  useReactionHandler,\n  useUserHandler,\n  useRetryHandler,\n  useOpenThreadHandler,\n  useActionHandler,\n  useReactionClick,\n  useMentionsUIHandler,\n  useEditHandler,\n} from './hooks';\nimport {\n  messageHasAttachments,\n  getImages,\n  getNonImageAttachments,\n  areMessagePropsEqual,\n} from './utils';\nimport { MessageActions } from '../MessageActions';\nimport { ReactionIcon, ThreadIcon, ErrorIcon } from './icons';\nimport MessageTimestamp from './MessageTimestamp';\n\n/**\n * MessageLivestream - Render component, should be used together with the Message component\n * Implements the look and feel for a livestream use case.\n *\n * @example ../../docs/MessageLivestream.md\n * @typedef { import('../../../types').MessageLivestreamProps } Props\n * @type { React.FC<Props> }\n */\n// eslint-disable-next-line sonarjs/cognitive-complexity\nconst MessageLivestreamComponent = (props) => {\n  const {\n    message,\n    groupStyles,\n    editing: propEditing,\n    setEditingState: propSetEdit,\n    clearEditingState: propClearEdit,\n    initialMessage,\n    unsafeHTML,\n    formatDate,\n    onUserClick: propOnUserClick,\n    handleReaction: propHandleReaction,\n    handleOpenThread: propHandleOpenThread,\n    onUserHover: propOnUserHover,\n    handleRetry: propHandleRetry,\n    handleAction: propHandleAction,\n    updateMessage: propUpdateMessage,\n    onMentionsClickMessage: propOnMentionsClick,\n    onMentionsHoverMessage: propOnMentionsHover,\n    Attachment = DefaultAttachment,\n    t: propT,\n    tDateTimeParser: propTDateTimeParser,\n    MessageDeleted,\n  } = props;\n  const { t: contextT } = useContext(TranslationContext);\n  const t = propT || contextT;\n  const messageWrapperRef = useRef(null);\n  const reactionSelectorRef = useRef(null);\n  /**\n   *@type {import('types').ChannelContextValue}\n   */\n  const { updateMessage: channelUpdateMessage } = useContext(ChannelContext);\n  const { onMentionsClick, onMentionsHover } = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n  const handleAction = useActionHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const handleOpenThread = useOpenThreadHandler(message);\n  const {\n    editing: ownEditing,\n    setEdit: ownSetEditing,\n    clearEdit: ownClearEditing,\n  } = useEditHandler();\n  const editing = propEditing || ownEditing;\n  const setEdit = propSetEdit || ownSetEditing;\n  const clearEdit = propClearEdit || ownClearEditing;\n  const handleRetry = useRetryHandler();\n  const retryHandler = propHandleRetry || handleRetry;\n  const { onReactionListClick, showDetailedReactions } = useReactionClick(\n    message,\n    reactionSelectorRef,\n    messageWrapperRef,\n  );\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n  const messageText = useMemo(\n    () => renderText(message?.text, message?.mentioned_users),\n    [message?.text, message?.mentioned_users],\n  );\n\n  const hasAttachment = messageHasAttachments(message);\n  const galleryImages = getImages(message);\n  const attachments = getNonImageAttachments(message);\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (\n    !message ||\n    message.type === 'message.read' ||\n    message.type === 'message.date'\n  ) {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n  if (editing) {\n    return (\n      <div\n        data-testid={'message-livestream-edit'}\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--editing`}\n      >\n        {(firstGroupStyle === 'top' || firstGroupStyle === 'single') && (\n          <div className=\"str-chat__message-team-meta\">\n            <Avatar\n              image={message.user?.image}\n              name={message.user?.name || message.user?.id}\n              size={40}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          </div>\n        )}\n        <MessageInput\n          Input={EditMessageForm}\n          message={message}\n          clearEditingState={clearEdit}\n          updateMessage={propUpdateMessage || channelUpdateMessage}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <div\n        data-testid=\"message-livestream\"\n        className={`str-chat__message-livestream str-chat__message-livestream--${firstGroupStyle} str-chat__message-livestream--${\n          message.type\n        } str-chat__message-livestream--${message.status} ${\n          initialMessage ? 'str-chat__message-livestream--initial-message' : ''\n        }`}\n        ref={messageWrapperRef}\n      >\n        {showDetailedReactions && (\n          <ReactionSelector\n            reverse={false}\n            handleReaction={handleReaction}\n            detailedView\n            latest_reactions={message?.latest_reactions}\n            reaction_counts={message?.reaction_counts}\n            ref={reactionSelectorRef}\n          />\n        )}\n        <MessageLivestreamActions\n          initialMessage={initialMessage}\n          message={message}\n          formatDate={formatDate}\n          onReactionListClick={onReactionListClick}\n          messageWrapperRef={messageWrapperRef}\n          getMessageActions={props.getMessageActions}\n          tDateTimeParser={propTDateTimeParser}\n          channelConfig={props.channelConfig}\n          threadList={props.threadList}\n          handleOpenThread={propHandleOpenThread || handleOpenThread}\n          setEditingState={setEdit}\n        />\n        <div className=\"str-chat__message-livestream-left\">\n          <Avatar\n            image={message.user?.image}\n            name={message.user?.name || message?.user?.id}\n            size={30}\n            onClick={onUserClick}\n            onMouseOver={onUserHover}\n          />\n        </div>\n        <div className=\"str-chat__message-livestream-right\">\n          <div className=\"str-chat__message-livestream-content\">\n            <div className=\"str-chat__message-livestream-author\">\n              <strong>{message.user?.name || message.user?.id}</strong>\n              {message?.type === 'error' && (\n                <div className=\"str-chat__message-team-error-header\">\n                  {t('Only visible to you')}\n                </div>\n              )}\n            </div>\n\n            <div\n              data-testid=\"message-livestream-text\"\n              className={\n                isOnlyEmojis(message.text)\n                  ? 'str-chat__message-livestream-text--is-emoji'\n                  : ''\n              }\n              onMouseOver={onMentionsHover}\n              onClick={onMentionsClick}\n            >\n              {message.type !== 'error' &&\n                message.status !== 'failed' &&\n                !unsafeHTML &&\n                messageText}\n\n              {message.type !== 'error' &&\n                message.status !== 'failed' &&\n                unsafeHTML && (\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                )}\n\n              {message.type === 'error' && !message.command && (\n                <p data-testid=\"message-livestream-error\">\n                  <ErrorIcon />\n                  {message.text}\n                </p>\n              )}\n\n              {message.type === 'error' && message.command && (\n                <p data-testid=\"message-livestream-command-error\">\n                  <ErrorIcon />\n                  {/* TODO: Translate following sentence */}\n                  <strong>/{message.command}</strong> is not a valid command\n                </p>\n              )}\n              {message.status === 'failed' && (\n                <p\n                  onClick={() => {\n                    if (retryHandler) {\n                      // FIXME: type checking fails here because in the case of a failed message,\n                      // `message` is of type Client.Message (i.e. request object)\n                      // instead of Client.MessageResponse (i.e. server response object)\n                      // @ts-ignore\n                      retryHandler(message);\n                    }\n                  }}\n                >\n                  <ErrorIcon />\n                  {t('Message failed. Click to try again.')}\n                </p>\n              )}\n            </div>\n\n            {hasAttachment &&\n              attachments.map(\n                /** @type {(item: import('stream-chat').Attachment) => React.ReactElement | null} Typescript syntax */\n                (attachment, index) => (\n                  <Attachment\n                    key={`${message?.id}-${index}`}\n                    attachment={attachment}\n                    actionHandler={propHandleAction || handleAction}\n                  />\n                ),\n              )}\n\n            {galleryImages.length !== 0 && <Gallery images={galleryImages} />}\n\n            <SimpleReactionsList\n              reaction_counts={message.reaction_counts}\n              reactions={message.latest_reactions}\n              handleReaction={propHandleReaction || handleReaction}\n            />\n\n            {!initialMessage && (\n              <MessageRepliesCountButton\n                onClick={propHandleOpenThread || handleOpenThread}\n                reply_count={message.reply_count}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\n/**\n * @type { React.FC<import('types').MessageLivestreamActionProps> }\n */\nconst MessageLivestreamActions = (props) => {\n  const {\n    initialMessage,\n    message,\n    channelConfig,\n    threadList,\n    formatDate,\n    messageWrapperRef,\n    onReactionListClick,\n    getMessageActions,\n    handleOpenThread,\n    tDateTimeParser: propTDateTimeParser,\n  } = props;\n  const [actionsBoxOpen, setActionsBoxOpen] = useState(false);\n  /** @type {() => void} Typescript syntax */\n  const hideOptions = useCallback(() => setActionsBoxOpen(false), []);\n  const messageDeletedAt = !!message?.deleted_at;\n  const messageWrapper = messageWrapperRef?.current;\n  useEffect(() => {\n    if (messageWrapper) {\n      messageWrapper.addEventListener('mouseleave', hideOptions);\n    }\n\n    return () => {\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', hideOptions);\n      }\n    };\n  }, [messageWrapper, hideOptions]);\n  useEffect(() => {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n\n  useEffect(() => {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n    return () => {\n      document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (\n    initialMessage ||\n    !message ||\n    message.type === 'error' ||\n    message.type === 'system' ||\n    message.type === 'ephemeral' ||\n    message.status === 'failed' ||\n    message.status === 'sending'\n  ) {\n    return null;\n  }\n\n  return (\n    <div\n      data-testid={'message-livestream-actions'}\n      className={`str-chat__message-livestream-actions`}\n    >\n      <MessageTimestamp\n        customClass=\"str-chat__message-livestream-time\"\n        message={message}\n        formatDate={formatDate}\n        tDateTimeParser={propTDateTimeParser}\n      />\n      {channelConfig && channelConfig.reactions && (\n        <span\n          onClick={onReactionListClick}\n          data-testid=\"message-livestream-reactions-action\"\n        >\n          <span>\n            <ReactionIcon />\n          </span>\n        </span>\n      )}\n      {!threadList && channelConfig && channelConfig.replies && (\n        <span\n          data-testid=\"message-livestream-thread-action\"\n          onClick={handleOpenThread}\n        >\n          <ThreadIcon />\n        </span>\n      )}\n      <MessageActions\n        {...props}\n        getMessageActions={getMessageActions}\n        customWrapperClass={''}\n        inline\n      />\n    </div>\n  );\n};\n\nMessageLivestreamComponent.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes\n    .object.isRequired),\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').AttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   *\n   * */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.oneOfType(\n    [PropTypes.node, PropTypes.func, PropTypes.object],\n  ).isRequired),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n  /** Channel config object */\n  channelConfig: /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */ (PropTypes\n    .object.isRequired),\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n  /** Function to open thread on current messxage */\n  handleOpenThread: PropTypes.func,\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n  /**\n   * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions: PropTypes.func.isRequired,\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   */\n  handleRetry: PropTypes.func,\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   */\n  handleReaction: PropTypes.func,\n  /** If actions such as edit, delete, flag, mute are enabled on message */\n  /** @deprecated This property is no longer used * */\n  actionsEnabled: PropTypes.bool,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    top: PropTypes.number.isRequired,\n    right: PropTypes.number.isRequired,\n    bottom: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    toJSON: PropTypes.func.isRequired,\n  }),\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  handleAction: PropTypes.func,\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(MessageLivestreamComponent, areMessagePropsEqual);\n","// @ts-check\nimport React, { Fragment, useMemo, useContext, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport MessageRepliesCountButton from './MessageRepliesCountButton';\nimport {\n  isOnlyEmojis,\n  renderText,\n  getReadByTooltipText,\n  smartRender,\n} from '../../utils';\nimport { ChannelContext, TranslationContext } from '../../context';\nimport { Attachment as DefaultAttachment } from '../Attachment';\nimport { Avatar } from '../Avatar';\nimport { Gallery } from '../Gallery';\nimport { MessageInput, EditMessageForm } from '../MessageInput';\nimport { MessageActions } from '../MessageActions';\nimport { Tooltip } from '../Tooltip';\nimport { LoadingIndicator } from '../Loading';\nimport { SimpleReactionsList, ReactionSelector } from '../Reactions';\nimport {\n  useUserRole,\n  useActionHandler,\n  useUserHandler,\n  useReactionClick,\n  useRetryHandler,\n  useReactionHandler,\n  useOpenThreadHandler,\n  useMentionsUIHandler,\n  useEditHandler,\n} from './hooks';\nimport {\n  getNonImageAttachments,\n  areMessagePropsEqual,\n  getImages,\n} from './utils';\nimport {\n  ReactionIcon,\n  ThreadIcon,\n  ErrorIcon,\n  DeliveredCheckIcon,\n} from './icons';\nimport MessageTimestamp from './MessageTimestamp';\n\n/**\n * MessageTeam - Render component, should be used together with the Message component\n * Implements the look and feel for a team style collaboration environment\n *\n * @example ../../docs/MessageTeam.md\n * @typedef { import('types').MessageTeamProps } Props\n *\n * @type {React.FC<Props>}\n */\n// eslint-disable-next-line sonarjs/cognitive-complexity\nconst MessageTeam = (props) => {\n  const {\n    message,\n    threadList,\n    formatDate,\n    initialMessage,\n    unsafeHTML,\n    getMessageActions,\n    MessageDeleted,\n    editing: propEditing,\n    setEditingState: propSetEdit,\n    clearEditingState: propClearEdit,\n    onMentionsHoverMessage: propOnMentionsHover,\n    onMentionsClickMessage: propOnMentionsClick,\n    channelConfig: propChannelConfig,\n    handleAction: propHandleAction,\n    handleOpenThread: propHandleOpenThread,\n    handleReaction: propHandleReaction,\n    handleRetry: propHandleRetry,\n    updateMessage: propUpdateMessage,\n    onUserClick: propOnUserClick,\n    onUserHover: propOnUserHover,\n    t: propT,\n  } = props;\n\n  /**\n   *@type {import('types').ChannelContextValue}\n   */\n  const { channel, updateMessage: channelUpdateMessage } = useContext(\n    ChannelContext,\n  );\n  const channelConfig = propChannelConfig || channel?.getConfig();\n  const { t: contextT } = useContext(TranslationContext);\n  const t = propT || contextT;\n  const groupStyles = props.groupStyles || ['single'];\n  const reactionSelectorRef = useRef(null);\n  const messageWrapperRef = useRef(null);\n  const {\n    editing: ownEditing,\n    setEdit: ownSetEditing,\n    clearEdit: ownClearEditing,\n  } = useEditHandler();\n  const editing = propEditing || ownEditing;\n  const setEdit = propSetEdit || ownSetEditing;\n  const clearEdit = propClearEdit || ownClearEditing;\n  const handleOpenThread = useOpenThreadHandler(message);\n  const handleReaction = useReactionHandler(message);\n  const retryHandler = useRetryHandler();\n  const retry = propHandleRetry || retryHandler;\n  const { onMentionsClick, onMentionsHover } = useMentionsUIHandler(message, {\n    onMentionsClick: propOnMentionsClick,\n    onMentionsHover: propOnMentionsHover,\n  });\n  const { onReactionListClick, showDetailedReactions } = useReactionClick(\n    message,\n    reactionSelectorRef,\n    messageWrapperRef,\n  );\n  const { onUserClick, onUserHover } = useUserHandler(message, {\n    onUserClickHandler: propOnUserClick,\n    onUserHoverHandler: propOnUserHover,\n  });\n  const messageText = useMemo(\n    () => renderText(message?.text, message?.mentioned_users),\n    [message?.text, message?.mentioned_users],\n  );\n  const galleryImages = getImages(message);\n  const attachments = getNonImageAttachments(message);\n  const firstGroupStyle = groupStyles ? groupStyles[0] : '';\n\n  if (message?.type === 'message.read') {\n    return null;\n  }\n\n  if (message?.deleted_at) {\n    return smartRender(MessageDeleted, props, null);\n  }\n\n  if (editing) {\n    return (\n      <div\n        data-testid=\"message-team-edit\"\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--editing`}\n      >\n        {(firstGroupStyle === 'top' || firstGroupStyle === 'single') && (\n          <div className=\"str-chat__message-team-meta\">\n            <Avatar\n              image={message?.user?.image}\n              name={message?.user?.name || message?.user?.id}\n              size={40}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          </div>\n        )}\n        <MessageInput\n          Input={EditMessageForm}\n          message={message}\n          clearEditingState={clearEdit}\n          updateMessage={propUpdateMessage || channelUpdateMessage}\n        />\n      </div>\n    );\n  }\n  return (\n    <React.Fragment>\n      <div\n        data-testid=\"message-team\"\n        className={`str-chat__message-team str-chat__message-team--${firstGroupStyle} str-chat__message-team--${\n          message?.type\n        } ${threadList ? 'thread-list' : ''} str-chat__message-team--${\n          message?.status\n        }`}\n        ref={messageWrapperRef}\n      >\n        <div className=\"str-chat__message-team-meta\">\n          {firstGroupStyle === 'top' ||\n          firstGroupStyle === 'single' ||\n          initialMessage ? (\n            <Avatar\n              image={message?.user?.image}\n              name={message?.user?.name || message?.user?.id}\n              size={40}\n              onClick={onUserClick}\n              onMouseOver={onUserHover}\n            />\n          ) : (\n            <div\n              data-testid=\"team-meta-spacer\"\n              style={{ width: 40, marginRight: 0 }}\n            />\n          )}\n          <MessageTimestamp\n            message={message}\n            tDateTimeParser={props.tDateTimeParser}\n            formatDate={formatDate}\n          />\n        </div>\n        <div className=\"str-chat__message-team-group\">\n          {message &&\n            (firstGroupStyle === 'top' ||\n              firstGroupStyle === 'single' ||\n              initialMessage) && (\n              <div\n                data-testid=\"message-team-author\"\n                className=\"str-chat__message-team-author\"\n                onClick={onUserClick}\n              >\n                <strong>{message.user?.name || message.user?.id}</strong>\n                {message.type === 'error' && (\n                  <div className=\"str-chat__message-team-error-header\">\n                    {t('Only visible to you')}\n                  </div>\n                )}\n              </div>\n            )}\n          <div\n            data-testid=\"message-team-content\"\n            className={`str-chat__message-team-content str-chat__message-team-content--${firstGroupStyle} str-chat__message-team-content--${\n              message?.text === '' ? 'image' : 'text'\n            }`}\n          >\n            {!initialMessage &&\n              message &&\n              message.status !== 'sending' &&\n              message.status !== 'failed' &&\n              message.type !== 'system' &&\n              message.type !== 'ephemeral' &&\n              message.type !== 'error' && (\n                <div\n                  data-testid=\"message-team-actions\"\n                  className={`str-chat__message-team-actions`}\n                >\n                  {message && showDetailedReactions && (\n                    <ReactionSelector\n                      handleReaction={propHandleReaction || handleReaction}\n                      latest_reactions={message.latest_reactions}\n                      reaction_counts={message.reaction_counts}\n                      detailedView={true}\n                      ref={reactionSelectorRef}\n                    />\n                  )}\n\n                  {channelConfig && channelConfig.reactions && (\n                    <span\n                      data-testid=\"message-team-reaction-icon\"\n                      title=\"Reactions\"\n                      onClick={onReactionListClick}\n                    >\n                      <ReactionIcon />\n                    </span>\n                  )}\n                  {!threadList && channelConfig && channelConfig.replies && (\n                    <span\n                      data-testid=\"message-team-thread-icon\"\n                      title=\"Start a thread\"\n                      onClick={propHandleOpenThread || handleOpenThread}\n                    >\n                      <ThreadIcon />\n                    </span>\n                  )}\n                  {message &&\n                    getMessageActions &&\n                    getMessageActions().length > 0 && (\n                      <MessageActions\n                        addNotification={props.addNotification}\n                        message={message}\n                        getMessageActions={props.getMessageActions}\n                        messageListRect={props.messageListRect}\n                        messageWrapperRef={messageWrapperRef}\n                        setEditingState={setEdit}\n                        getMuteUserSuccessNotification={\n                          props.getMuteUserSuccessNotification\n                        }\n                        getMuteUserErrorNotification={\n                          props.getMuteUserErrorNotification\n                        }\n                        getFlagMessageErrorNotification={\n                          props.getFlagMessageErrorNotification\n                        }\n                        getFlagMessageSuccessNotification={\n                          props.getFlagMessageSuccessNotification\n                        }\n                        handleFlag={props.handleFlag}\n                        handleMute={props.handleMute}\n                        handleEdit={props.handleEdit}\n                        handleDelete={props.handleDelete}\n                        customWrapperClass={''}\n                        inline\n                      />\n                    )}\n                </div>\n              )}\n            {message && (\n              <span\n                data-testid=\"message-team-message\"\n                className={\n                  isOnlyEmojis(message.text)\n                    ? 'str-chat__message-team-text--is-emoji'\n                    : ''\n                }\n                onMouseOver={onMentionsHover}\n                onClick={onMentionsClick}\n              >\n                {unsafeHTML ? (\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                ) : (\n                  messageText\n                )}\n              </span>\n            )}\n\n            {galleryImages.length !== 0 && <Gallery images={galleryImages} />}\n\n            {message && message.text === '' && (\n              <MessageTeamAttachments\n                Attachment={props.Attachment}\n                message={message}\n                handleAction={propHandleAction}\n              />\n            )}\n\n            {message?.latest_reactions &&\n              message.latest_reactions.length !== 0 &&\n              message.text !== '' && (\n                <SimpleReactionsList\n                  reaction_counts={message.reaction_counts}\n                  handleReaction={propHandleReaction || handleReaction}\n                  reactions={message.latest_reactions}\n                />\n              )}\n            {message?.status === 'failed' && (\n              <button\n                data-testid=\"message-team-failed\"\n                className=\"str-chat__message-team-failed\"\n                onClick={() => {\n                  if (message.status === 'failed' && retry) {\n                    // FIXME: type checking fails here because in the case of a failed message,\n                    // `message` is of type Client.Message (i.e. request object)\n                    // instead of Client.MessageResponse (i.e. server response object)\n                    // @ts-ignore\n                    retry(message);\n                  }\n                }}\n              >\n                <ErrorIcon />\n                {t('Message failed. Click to try again.')}\n              </button>\n            )}\n          </div>\n          <MessageTeamStatus\n            readBy={props.readBy}\n            message={message}\n            threadList={threadList}\n            lastReceivedId={props.lastReceivedId}\n            t={propT}\n          />\n          {message && message.text !== '' && attachments && (\n            <MessageTeamAttachments\n              Attachment={props.Attachment}\n              message={message}\n              handleAction={propHandleAction}\n            />\n          )}\n          {message?.latest_reactions &&\n            message.latest_reactions.length !== 0 &&\n            message.text === '' && (\n              <SimpleReactionsList\n                reaction_counts={message.reaction_counts}\n                handleReaction={propHandleReaction || handleReaction}\n                reactions={message.latest_reactions}\n              />\n            )}\n          {!threadList && message && (\n            <MessageRepliesCountButton\n              onClick={propHandleOpenThread || handleOpenThread}\n              reply_count={message.reply_count}\n            />\n          )}\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\n/** @type {(props: import('types').MessageTeamStatusProps) => React.ReactElement | null} */\nconst MessageTeamStatus = (props) => {\n  const { readBy, message, threadList, lastReceivedId, t: propT } = props;\n  const { client } = useContext(ChannelContext);\n  const { t: contextT } = useContext(TranslationContext);\n  const t = propT || contextT;\n  const { isMyMessage } = useUserRole(message);\n  if (!isMyMessage || message?.type === 'error') {\n    return null;\n  }\n  const justReadByMe =\n    readBy &&\n    client?.user &&\n    readBy.length === 1 &&\n    readBy[0] &&\n    readBy[0].id === client.user.id;\n  if (message && message.status === 'sending') {\n    return (\n      <span\n        className=\"str-chat__message-team-status\"\n        data-testid=\"message-team-sending\"\n      >\n        <Tooltip>{t && t('Sending...')}</Tooltip>\n        <LoadingIndicator />\n      </span>\n    );\n  }\n\n  if (readBy && readBy.length !== 0 && !threadList && !justReadByMe) {\n    const lastReadUser = readBy.filter(\n      (item) => item && client?.user && item.id !== client.user.id,\n    )[0];\n    return (\n      <span className=\"str-chat__message-team-status\">\n        <Tooltip>{getReadByTooltipText(readBy, t, client)}</Tooltip>\n        <Avatar\n          name={lastReadUser && lastReadUser.name ? lastReadUser.name : null}\n          image={lastReadUser && lastReadUser.image ? lastReadUser.image : null}\n          size={15}\n        />\n        {readBy.length - 1 > 1 && (\n          <span\n            data-testid=\"message-team-read-by-count\"\n            className=\"str-chat__message-team-status-number\"\n          >\n            {readBy.length - 1}\n          </span>\n        )}\n      </span>\n    );\n  }\n\n  if (\n    message &&\n    message.status === 'received' &&\n    message.id === lastReceivedId &&\n    !threadList\n  ) {\n    return (\n      <span\n        data-testid=\"message-team-received\"\n        className=\"str-chat__message-team-status\"\n      >\n        <Tooltip>{t && t('Delivered')}</Tooltip>\n        <DeliveredCheckIcon />\n      </span>\n    );\n  }\n\n  return null;\n};\n\n/** @type {(props: import('types').MessageTeamAttachmentsProps) => React.ReactElement | null} Typescript syntax */\nconst MessageTeamAttachments = (props) => {\n  const {\n    Attachment = DefaultAttachment,\n    message,\n    handleAction: propHandleAction,\n  } = props;\n  const handleAction = useActionHandler(message);\n  const attachments = getNonImageAttachments(message);\n  if (attachments.length > 0 && Attachment) {\n    return (\n      <Fragment>\n        {attachments.map(\n          /** @type {(item: import('stream-chat').Attachment) => React.ReactElement | null} Typescript syntax */\n          (attachment, index) => (\n            <Attachment\n              key={`${message?.id}-${index}`}\n              attachment={attachment}\n              actionHandler={propHandleAction || handleAction}\n            />\n          ),\n        )}\n      </Fragment>\n    );\n  }\n  return null;\n};\n\nMessageTeam.propTypes = {\n  /** The [message object](https://getstream.io/chat/docs/#message_format) */\n  message: /** @type {PropTypes.Validator<import('stream-chat').MessageResponse>} */ (PropTypes\n    .object.isRequired),\n  /**\n   * The attachment UI component.\n   * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  Attachment: /** @type {PropTypes.Validator<React.ElementType<import('types').AttachmentUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   *\n   * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n   *\n   * The higher order message component, most logic is delegated to this component\n   * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n   * */\n  Message: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageUIComponentProps>>} */ (PropTypes.oneOfType(\n    [PropTypes.node, PropTypes.func, PropTypes.object],\n  ).isRequired),\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** Client object */\n  client: /** @type {PropTypes.Validator<import('stream-chat').StreamChat>} */ (PropTypes.object),\n  /** If its parent message in thread. */\n  initialMessage: PropTypes.bool,\n  /** Channel config object */\n  channelConfig: /** @type {PropTypes.Validator<import('stream-chat').ChannelConfig>} */ (PropTypes\n    .object.isRequired),\n  /** If component is in thread list */\n  threadList: PropTypes.bool,\n  /** Function to open thread on current messxage */\n  handleOpenThread: PropTypes.func,\n  /** If the message is in edit state */\n  editing: PropTypes.bool,\n  /** Function to exit edit state */\n  clearEditingState: PropTypes.func,\n  /** Returns true if message belongs to current user */\n  isMyMessage: PropTypes.func,\n  /**\n   * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n   * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n   * */\n  getMessageActions: /** @type {PropTypes.Validator<() => Array<string>>} */ (PropTypes.func),\n  /**\n   * Function to publish updates on message to channel\n   *\n   * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n   * */\n  updateMessage: PropTypes.func,\n  /**\n   * Reattempt sending a message\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n   */\n  handleRetry: PropTypes.func,\n  /**\n   * Add or remove reaction on message\n   *\n   * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n   * @param event Dom event which triggered this function\n   */\n  handleReaction: PropTypes.func,\n  /** DOMRect object for parent MessageList component */\n  messageListRect: /** @type {PropTypes.Validator<DOMRect>} */ (PropTypes.object),\n  /**\n   * @param name {string} Name of action\n   * @param value {string} Value of action\n   * @param event Dom event that triggered this handler\n   */\n  handleAction: PropTypes.func,\n  /**\n   * The handler for hover event on @mention in message\n   *\n   * @param event Dom hover event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsHoverMessage: PropTypes.func,\n  /**\n   * The handler for click event on @mention in message\n   *\n   * @param event Dom click event which triggered handler.\n   * @param user Target user object\n   */\n  onMentionsClickMessage: PropTypes.func,\n  /**\n   * The handler for click event on the user that posted the message\n   *\n   * @param event Dom click event which triggered handler.\n   */\n  onUserClick: PropTypes.func,\n  /**\n   * The handler for mouseOver event on the user that posted the message\n   *\n   * @param event Dom mouseOver event which triggered handler.\n   */\n  onUserHover: PropTypes.func,\n  /** Position of message in group. Possible values: top, bottom, middle, single */\n  groupStyles: PropTypes.array,\n  /**\n   * The component that will be rendered if the message has been deleted.\n   * All of Message's props are passed into this component.\n   */\n  MessageDeleted: /** @type {PropTypes.Validator<React.ElementType<import('types').MessageDeletedProps>>} */ (PropTypes.elementType),\n};\n\nexport default React.memo(MessageTeam, areMessagePropsEqual);\n","// @ts-check\nimport { useCallback } from 'react';\n\n/**\n * @typedef {import('stream-chat').UserResponse} UserResponse\n * @typedef {(e: React.MouseEvent, user?: UserResponse) => void} MentionsHandler\n * @param {MentionsHandler=} onMentionsHover\n * @param {MentionsHandler=} onMentionsClick\n */\nconst useMentionsHandlers = (onMentionsHover, onMentionsClick) => {\n  return useCallback(\n    /** @type {(e: React.MouseEvent<HTMLSpanElement>, mentioned_users: UserResponse[]) => void} */\n    (e, mentioned_users) => {\n      if (!onMentionsHover && !onMentionsClick) return;\n      // eslint-disable-next-line prefer-destructuring\n      const target = /** @type {HTMLSpanElement} */ (e.target);\n      const tagName = target?.tagName.toLowerCase();\n      const textContent = target?.innerHTML.replace('*', '');\n      if (tagName === 'strong' && textContent[0] === '@') {\n        const userName = textContent.replace('@', '');\n        const user = mentioned_users.find(\n          ({ name, id }) => name === userName || id === userName,\n        );\n        if (\n          onMentionsHover &&\n          typeof onMentionsHover === 'function' &&\n          e.type === 'mouseover'\n        ) {\n          onMentionsHover(e, user);\n        }\n        if (\n          onMentionsClick &&\n          e.type === 'click' &&\n          typeof onMentionsClick === 'function'\n        ) {\n          onMentionsClick(e, user);\n        }\n      }\n    },\n    [onMentionsClick, onMentionsHover],\n  );\n};\n\nexport default useMentionsHandlers;\n","// @ts-check\nimport { useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Message} Message\n * @typedef {import('stream-chat').UpdateMessageAPIResponse} UpdateResponse\n * @param {((cid: string, updatedMessage: Message) => Promise<UpdateResponse>) | undefined} doUpdateMessageRequest\n * @returns {(updatedMessage: Message) => Promise<UpdateResponse>}\n */\nconst useEditMessageHandler = (doUpdateMessageRequest) => {\n  const { channel, client } = useContext(ChatContext);\n  return (updatedMessage) => {\n    if (doUpdateMessageRequest && channel) {\n      return Promise.resolve(\n        doUpdateMessageRequest(channel.cid, updatedMessage),\n      );\n    }\n    return client.updateMessage(updatedMessage);\n  };\n};\n\nexport default useEditMessageHandler;\n","// @ts-check\nimport Immutable from 'seamless-immutable';\n\n/** @type {import('./types').ChannelStateReducer} */\nexport const channelReducer = (state, action) => {\n  switch (action.type) {\n    case 'initStateFromChannel': {\n      const { channel } = action;\n      return {\n        ...state,\n        messages: channel.state.messages,\n        read: channel.state.read,\n        watchers: channel.state.watchers,\n        members: channel.state.members,\n        watcherCount: channel.state.watcher_count,\n        loading: false,\n      };\n    }\n    case 'copyStateFromChannelOnEvent': {\n      const { channel } = action;\n      return {\n        ...state,\n        messages: channel.state.messages,\n        read: channel.state.read,\n        watchers: channel.state.watchers,\n        typing: channel.state.typing,\n        watcherCount: channel.state.watcher_count,\n      };\n    }\n    case 'setThread': {\n      const { message } = action;\n      return { ...state, thread: message };\n    }\n    case 'loadMoreFinished': {\n      const { hasMore, messages } = action;\n      return {\n        ...state,\n        loadingMore: false,\n        hasMore,\n        messages,\n      };\n    }\n    case 'setLoadingMore': {\n      const { loadingMore } = action;\n      return { ...state, loadingMore };\n    }\n    case 'copyMessagesFromChannel': {\n      const { channel, parentId } = action;\n      return {\n        ...state,\n        messages: channel.state.messages,\n        threadMessages: parentId\n          ? channel.state.threads[parentId] || []\n          : state.threadMessages,\n      };\n    }\n    case 'updateThreadOnEvent': {\n      const { channel, message } = action;\n      if (!state.thread) return state;\n      return {\n        ...state,\n        threadMessages: channel.state.threads[state.thread.id],\n        thread:\n          message?.id === state.thread.id\n            ? channel.state.messageToImmutable(message)\n            : state.thread,\n      };\n    }\n    case 'openThread': {\n      const { message, channel } = action;\n      return {\n        ...state,\n        thread: message,\n        threadMessages: channel.state.threads[message.id] || [],\n      };\n    }\n    case 'startLoadingThread': {\n      return {\n        ...state,\n        threadLoadingMore: true,\n      };\n    }\n    case 'loadMoreThreadFinished': {\n      const { threadHasMore, threadMessages } = action;\n      return {\n        ...state,\n        threadHasMore,\n        threadMessages,\n        threadLoadingMore: false,\n      };\n    }\n    case 'closeThread': {\n      return {\n        ...state,\n        thread: null,\n        threadMessages: Immutable([]),\n        threadLoadingMore: false,\n      };\n    }\n    case 'setError': {\n      const { error } = action;\n      return { ...state, error };\n    }\n    default:\n      return state;\n  }\n};\n\n/** @type {import('./types').ChannelState} */\nexport const initialState = {\n  error: null,\n  loading: true,\n  loadingMore: false,\n  hasMore: true,\n  messages: Immutable([]),\n  typing: Immutable(/** @type {any} infer from ChannelState */ ({})),\n  members: Immutable(/** @type {any} infer from ChannelState */ ({})),\n  watchers: Immutable(/** @type {any} infer from ChannelState */ ({})),\n  watcherCount: 0,\n  read: Immutable(/** @type {any} infer from ChannelState */ ({})),\n  thread: null,\n  threadMessages: Immutable([]),\n  threadLoadingMore: false,\n  threadHasMore: true,\n};\n","// @ts-check\nimport React, {\n  useEffect,\n  useCallback,\n  useContext,\n  useRef,\n  useReducer,\n  useLayoutEffect,\n} from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport PropTypes from 'prop-types';\nimport debounce from 'lodash.debounce';\nimport throttle from 'lodash.throttle';\nimport { logChatPromiseExecution, Channel as StreamChannel } from 'stream-chat';\n\nimport { ChatContext, ChannelContext, TranslationContext } from '../../context';\nimport { Attachment as AttachmentComponent } from '../Attachment';\nimport { MessageSimple as MessageSimpleComponent } from '../Message';\nimport {\n  LoadingIndicator as LoadingIndicatorComponent,\n  LoadingErrorIndicator as LoadingErrorIndicatorComponent,\n} from '../Loading';\nimport useMentionsHandlers from './hooks/useMentionsHandlers';\nimport useEditMessageHandler from './hooks/useEditMessageHandler';\nimport { channelReducer, initialState } from './channelState';\n\n/** @type {React.FC<import('types').ChannelProps>}>} */\nconst Channel = ({ EmptyPlaceholder = null, ...props }) => {\n  const { channel: contextChannel } = useContext(ChatContext);\n  const channel = props.channel || contextChannel;\n  if (!channel?.cid) {\n    return EmptyPlaceholder;\n  }\n  return <ChannelInner {...props} channel={channel} key={channel.cid} />;\n};\n\nChannel.propTypes = {\n  /** Which channel to connect to, will initialize the channel if it's not initialized yet */\n  channel: PropTypes.instanceOf(StreamChannel),\n  /**\n   * Empty channel UI component. This will be shown on the screen if there is no active channel.\n   *\n   * Defaults to null which skips rendering the Channel\n   *\n   * */\n  EmptyPlaceholder: PropTypes.element,\n  /**\n   * Error indicator UI component. This will be shown on the screen if channel query fails.\n   *\n   * Defaults to and accepts same props as: [LoadingErrorIndicator](https://getstream.github.io/stream-chat-react/#loadingerrorindicator)\n   *\n   * */\n  // @ts-ignore elementType\n  LoadingErrorIndicator: PropTypes.elementType,\n  /**\n   * Loading indicator UI component. This will be shown on the screen until the messages are\n   * being queried from channelœ. Once the messages are loaded, loading indicator is removed from the screen\n   * and replaced with children of the Channel component.\n   *\n   * Defaults to and accepts same props as: [LoadingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingIndicator.js)\n   */\n  // @ts-ignore elementType\n  LoadingIndicator: PropTypes.elementType,\n  /**\n   * Message UI component to display a message in message list.\n   *\n   * Available built-in components (also accepts the same props as):\n   *\n   * 1. [MessageSimple](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageSimple.js) (default)\n   * 2. [MessageTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageTeam.js)\n   * 3. [MessageLivestream](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageLivestream.js)\n   * 3. [MessageCommerce](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageCommerce.js)\n   *\n   * */\n  // @ts-ignore elementType\n  Message: PropTypes.elementType,\n  /**\n   * Attachment UI component to display attachment in individual message.\n   *\n   * Defaults to and accepts same props as: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n   * */\n  // @ts-ignore elementType\n  Attachment: PropTypes.elementType,\n  /**\n   * Handle for click on @mention in message\n   *\n   * @param {Event} event DOM Click event\n   * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is clicked\n   */\n  onMentionsClick: PropTypes.func,\n  /**\n   * Handle for hover on @mention in message\n   *\n   * @param {Event} event DOM hover event\n   * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is hovered\n   */\n  onMentionsHover: PropTypes.func,\n  /** Weather to allow multiple attachment uploads */\n  multipleUploads: PropTypes.bool,\n  /** List of accepted file types */\n  acceptedFiles: PropTypes.array,\n  /** Maximum number of attachments allowed per message */\n  maxNumberOfFiles: PropTypes.number,\n  /** Override send message request (Advanced usage only)\n   *\n   * @param {String} channelId full channel ID in format of `type:id`\n   * @param {Object} message\n   */\n  doSendMessageRequest: PropTypes.func,\n  /** Override update(edit) message request (Advanced usage only)\n   *\n   * @param {String} channelId full channel ID in format of `type:id`\n   * @param {Object} updatedMessage\n   */\n  doUpdateMessageRequest: PropTypes.func,\n};\n\n/** @type {React.FC<import('types').ChannelProps & { channel: import('stream-chat').Channel }>} */\nconst ChannelInner = ({\n  LoadingIndicator = LoadingIndicatorComponent,\n  LoadingErrorIndicator = LoadingErrorIndicatorComponent,\n  Attachment = AttachmentComponent,\n  Message = MessageSimpleComponent,\n  ...props\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n}) => {\n  const { channel } = props;\n  const [state, dispatch] = useReducer(channelReducer, initialState);\n  const originalTitle = useRef('');\n  const lastRead = useRef(new Date());\n  const chatContext = useContext(ChatContext);\n  const { t } = useContext(TranslationContext);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const throttledCopyStateFromChannel = useCallback(\n    throttle(\n      () => {\n        dispatch({ type: 'copyStateFromChannelOnEvent', channel });\n      },\n      500,\n      { leading: true, trailing: true },\n    ),\n    [channel],\n  );\n\n  const markRead = useCallback(() => {\n    if (channel.disconnected || !channel.getConfig().read_events) {\n      return;\n    }\n    lastRead.current = new Date();\n\n    logChatPromiseExecution(channel.markRead(), 'mark read');\n\n    if (originalTitle.current) {\n      document.title = originalTitle.current;\n    }\n  }, [channel]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const markReadThrottled = useCallback(\n    throttle(markRead, 500, { leading: true, trailing: true }),\n    [markRead],\n  );\n\n  const handleEvent = useCallback(\n    (e) => {\n      dispatch({ type: 'updateThreadOnEvent', message: e.message, channel });\n\n      if (e.type === 'message.new') {\n        let mainChannelUpdated = true;\n        if (e.message.parent_id && !e.message.show_in_channel) {\n          mainChannelUpdated = false;\n        }\n\n        if (\n          mainChannelUpdated &&\n          e.message.user.id !== chatContext.client.userID\n        ) {\n          if (!document.hidden) {\n            markReadThrottled();\n          } else if (channel.getConfig().read_events) {\n            const unread = channel.countUnread(lastRead.current);\n            document.title = `(${unread}) ${originalTitle.current}`;\n          }\n        }\n      }\n\n      throttledCopyStateFromChannel();\n    },\n    [\n      channel,\n      throttledCopyStateFromChannel,\n      chatContext.client.userID,\n      markReadThrottled,\n    ],\n  );\n\n  // useLayoutEffect here to prevent spinner. Use Suspense when it is available in stable release\n  useLayoutEffect(() => {\n    let errored = false;\n    let done = false;\n    const onVisibilityChange = () => {\n      if (!document.hidden) {\n        markRead();\n      }\n    };\n\n    (async () => {\n      if (!channel.initialized) {\n        try {\n          await channel.watch();\n        } catch (e) {\n          dispatch({ type: 'setError', error: e });\n          errored = true;\n        }\n      }\n      done = true;\n      originalTitle.current = document.title;\n      if (!errored) {\n        dispatch({ type: 'initStateFromChannel', channel });\n        if (channel.countUnread() > 0) markRead();\n        // The more complex sync logic is done in chat.js\n        // listen to client.connection.recovered and all channel events\n        document.addEventListener('visibilitychange', onVisibilityChange);\n        chatContext.client.on('connection.recovered', handleEvent);\n        channel.on(handleEvent);\n      }\n    })();\n    return () => {\n      if (errored || !done) return;\n      document.removeEventListener('visibilitychange', onVisibilityChange);\n      channel.off(handleEvent);\n      chatContext.client.off('connection.recovered', handleEvent);\n    };\n  }, [channel, chatContext.client, handleEvent, markRead, props.channel]);\n\n  useEffect(() => {\n    if (state.thread) {\n      for (let i = state.messages.length - 1; i >= 0; i -= 1) {\n        if (state.messages[i].id === state.thread.id) {\n          dispatch({ type: 'setThread', message: state.messages[i] });\n          break;\n        }\n      }\n    }\n  }, [state.messages, state.thread]);\n\n  // Message\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const loadMoreFinished = useCallback(\n    debounce(\n      /**\n       * @param {boolean} hasMore\n       * @param {import('seamless-immutable').ImmutableArray<import('stream-chat').MessageResponse>} messages\n       */\n      (hasMore, messages) => {\n        dispatch({ type: 'loadMoreFinished', hasMore, messages });\n      },\n      2000,\n      {\n        leading: true,\n        trailing: true,\n      },\n    ),\n    [],\n  );\n\n  const loadMore = useCallback(\n    async (limit = 100) => {\n      // prevent duplicate loading events...\n      const oldestMessage = state.messages[0];\n      if (state.loadingMore || oldestMessage?.status !== 'received') return;\n      dispatch({ type: 'setLoadingMore', loadingMore: true });\n\n      const oldestID = oldestMessage?.id || null;\n\n      const perPage = limit;\n      let queryResponse;\n      try {\n        queryResponse = await channel.query({\n          messages: { limit: perPage, id_lt: oldestID },\n        });\n      } catch (e) {\n        console.warn('message pagination request failed with error', e);\n        dispatch({ type: 'setLoadingMore', loadingMore: false });\n        return;\n      }\n      const hasMoreMessages = queryResponse.messages.length === perPage;\n\n      loadMoreFinished(hasMoreMessages, channel.state.messages);\n    },\n    [channel, loadMoreFinished, state.loadingMore, state.messages],\n  );\n\n  const updateMessage = useCallback(\n    (updatedMessage) => {\n      // adds the message to the local channel state..\n      // this adds to both the main channel state as well as any reply threads\n      channel.state.addMessageSorted(updatedMessage);\n\n      dispatch({\n        type: 'copyMessagesFromChannel',\n        parentId: state.thread && updatedMessage.parent_id,\n        channel,\n      });\n    },\n    [channel, state.thread],\n  );\n\n  const { doSendMessageRequest } = props;\n  const doSendMessage = useCallback(\n    async (message) => {\n      const { text, attachments, id, parent_id, mentioned_users } = message;\n      const messageData = {\n        text,\n        attachments,\n        mentioned_users,\n        id,\n        parent_id,\n      };\n\n      try {\n        let messageResponse;\n        if (doSendMessageRequest) {\n          messageResponse = await doSendMessageRequest(\n            channel.cid,\n            messageData,\n          );\n        } else {\n          messageResponse = await channel.sendMessage(messageData);\n        }\n\n        // replace it after send is completed\n        if (messageResponse && messageResponse.message) {\n          updateMessage({\n            ...messageResponse.message,\n            status: 'received',\n          });\n        }\n      } catch (e) {\n        // set the message to failed..\n        updateMessage({\n          ...message,\n          status: 'failed',\n        });\n      }\n    },\n    [channel, doSendMessageRequest, updateMessage],\n  );\n\n  const createMessagePreview = useCallback(\n    (text, attachments, parent, mentioned_users) => {\n      // create a preview of the message\n      const clientSideID = `${chatContext.client.userID}-${uuidv4()}`;\n      return {\n        text,\n        html: text,\n        __html: text,\n        id: clientSideID,\n        type: 'regular',\n        status: 'sending',\n        user: chatContext.client.user,\n        created_at: new Date(),\n        attachments,\n        mentioned_users,\n        reactions: [],\n        ...(parent?.id ? { parent_id: parent.id } : null),\n      };\n    },\n    [chatContext.client.user, chatContext.client.userID],\n  );\n\n  const sendMessage = useCallback(\n    async ({ text, attachments = [], mentioned_users = [], parent }) => {\n      // remove error messages upon submit\n      channel.state.filterErrorMessages();\n\n      // create a local preview message to show in the UI\n      const messagePreview = createMessagePreview(\n        text,\n        attachments,\n        parent,\n        mentioned_users,\n      );\n\n      // first we add the message to the UI\n      updateMessage(messagePreview);\n\n      await doSendMessage(messagePreview);\n    },\n    [channel.state, createMessagePreview, doSendMessage, updateMessage],\n  );\n\n  const retrySendMessage = useCallback(\n    async (message) => {\n      // set the message status to sending\n      updateMessage({\n        ...message,\n        status: 'sending',\n      });\n      // actually try to send the message...\n      await doSendMessage(message);\n    },\n    [doSendMessage, updateMessage],\n  );\n\n  const removeMessage = useCallback(\n    (message) => {\n      channel.state.removeMessage(message);\n      dispatch({\n        type: 'copyMessagesFromChannel',\n        parentId: state.thread && message.parent_id,\n        channel,\n      });\n    },\n    [channel, state.thread],\n  );\n\n  // Thread\n\n  const openThread = useCallback(\n    (message, e) => {\n      if (e && e.preventDefault) {\n        e.preventDefault();\n      }\n\n      dispatch({ type: 'openThread', message, channel });\n    },\n    [channel],\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const loadMoreThreadFinished = useCallback(\n    debounce(\n      /**\n       * @param {boolean} threadHasMore\n       * @param {import('seamless-immutable').ImmutableArray<import('stream-chat').MessageResponse>} threadMessages\n       */\n      (threadHasMore, threadMessages) => {\n        dispatch({\n          type: 'loadMoreThreadFinished',\n          threadHasMore,\n          threadMessages,\n        });\n      },\n      2000,\n      { leading: true, trailing: true },\n    ),\n    [],\n  );\n\n  const loadMoreThread = useCallback(async () => {\n    // prevent duplicate loading events...\n    if (state.threadLoadingMore || !state.thread) return;\n    dispatch({ type: 'startLoadingThread' });\n    const parentID = state.thread.id;\n    const oldMessages = channel.state.threads[parentID] || [];\n    const oldestMessageID = oldMessages[0] ? oldMessages[0].id : null;\n    const limit = 50;\n    const queryResponse = await channel.getReplies(parentID, {\n      limit,\n      id_lt: oldestMessageID,\n    });\n\n    const threadHasMoreMessages = queryResponse.messages.length === limit;\n\n    const newThreadMessages = channel.state.threads[parentID] || [];\n\n    // next set loadingMore to false so we can start asking for more data...\n    loadMoreThreadFinished(threadHasMoreMessages, newThreadMessages);\n  }, [channel, loadMoreThreadFinished, state.thread, state.threadLoadingMore]);\n\n  const closeThread = useCallback((e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n    dispatch({ type: 'closeThread' });\n  }, []);\n\n  const onMentionsHoverOrClick = useMentionsHandlers(\n    props.onMentionsHover,\n    props.onMentionsClick,\n  );\n\n  const editMessage = useEditMessageHandler(props.doUpdateMessageRequest);\n\n  const channelContextValue = {\n    // state\n    ...state,\n    watcher_count: state.watcherCount,\n    // props\n    channel,\n    Message,\n    Attachment,\n    multipleUploads: props.multipleUploads,\n    acceptedFiles: props.acceptedFiles,\n    maxNumberOfFiles: props.maxNumberOfFiles,\n    mutes: chatContext.mutes,\n    // handlers\n    loadMore,\n    editMessage,\n    updateMessage,\n    sendMessage,\n    retrySendMessage,\n    removeMessage,\n    openThread,\n    loadMoreThread,\n    closeThread,\n    onMentionsClick: onMentionsHoverOrClick,\n    onMentionsHover: onMentionsHoverOrClick,\n    // from chatContext, for legacy reasons\n    client: chatContext.client,\n  };\n\n  let core;\n  if (state.error) {\n    core = <LoadingErrorIndicator error={state.error} />;\n  } else if (state.loading) {\n    core = <LoadingIndicator size={25} />;\n  } else if (!props.channel?.watch) {\n    core = <div>{t('Channel Missing')}</div>;\n  } else {\n    core = (\n      <ChannelContext.Provider value={channelContextValue}>\n        <div className=\"str-chat__container\">{props.children}</div>\n      </ChannelContext.Provider>\n    );\n  }\n\n  return (\n    <div className={`str-chat str-chat-channel ${chatContext.theme}`}>\n      {core}\n    </div>\n  );\n};\n\nexport default React.memo(Channel);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Avatar } from '../Avatar';\nimport { ChannelContext, TranslationContext, ChatContext } from '../../context';\n\n/**\n * ChannelHeader - Render some basic information about this channel\n * @example ../../docs/ChannelHeader.md\n * @type {React.FC<import('types').ChannelHeaderProps>}\n */\nconst ChannelHeader = ({ title, live }) => {\n  /** @type {import(\"types\").TranslationContextValue} */\n  const { t } = useContext(TranslationContext);\n  /** @type {import(\"types\").ChannelContextValue} */\n  const { channel, watcher_count } = useContext(ChannelContext);\n  const { openMobileNav } = useContext(ChatContext);\n\n  return (\n    <div className=\"str-chat__header-livestream\">\n      <div className=\"str-chat__header-hamburger\" onClick={openMobileNav}>\n        <span className=\"str-chat__header-hamburger--line\"></span>\n        <span className=\"str-chat__header-hamburger--line\"></span>\n        <span className=\"str-chat__header-hamburger--line\"></span>\n      </div>\n      {channel && channel.data.image && (\n        <Avatar\n          image={channel.data.image}\n          shape=\"rounded\"\n          size={channel.type === 'commerce' ? 60 : 40}\n        />\n      )}\n      <div className=\"str-chat__header-livestream-left\">\n        <p className=\"str-chat__header-livestream-left--title\">\n          {title || (channel && channel.data.name)}{' '}\n          {live && (\n            <span className=\"str-chat__header-livestream-left--livelabel\">\n              {t('live')}\n            </span>\n          )}\n        </p>\n        {channel && channel.data.subtitle && (\n          <p className=\"str-chat__header-livestream-left--subtitle\">\n            {channel.data.subtitle}\n          </p>\n        )}\n        <p className=\"str-chat__header-livestream-left--members\">\n          {!live &&\n            channel &&\n            channel.data.member_count &&\n            channel.data.member_count > 0 && (\n              <>\n                {t('{{ memberCount }} members', {\n                  memberCount: channel.data.member_count,\n                })}\n                ,{' '}\n              </>\n            )}\n          {t('{{ watcherCount }} online', { watcherCount: watcher_count })}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nChannelHeader.propTypes = {\n  /** Set title manually */\n  title: PropTypes.string,\n  /** Show a little indicator that the channel is live right now */\n  live: PropTypes.bool,\n};\n\nexport default React.memo(ChannelHeader);\n","export default \"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E\"","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LoadingChannels } from '../Loading';\nimport { TranslationContext } from '../../context';\n\nimport placeholder from '../../assets/str-chat__connection-error.svg';\n\n/**\n * ChatDown - Indicator that chat is down or your network isn't working\n * @example ../../docs/ChatDown.md\n * @typedef {import('types').ChatDownProps} Props\n * @type {React.FC<Props>}\n */\nconst ChatDown = ({ image, type = 'Error', text }) => {\n  const { t } = useContext(TranslationContext);\n\n  return (\n    <div className=\"str-chat__down\">\n      <LoadingChannels />\n      <div className=\"str-chat__down-main\">\n        <img data-testid=\"chatdown-img\" src={image || placeholder} />\n        <h1>{type}</h1>\n        <h3>\n          {text ||\n            t('Error connecting to chat, refresh the page to try again.')}\n        </h3>\n      </div>\n    </div>\n  );\n};\n\nChatDown.propTypes = {\n  /** The image url for this error */\n  image: PropTypes.string,\n  /** The type of error */\n  type: PropTypes.string.isRequired,\n  /** The error message to show */\n  text: PropTypes.string,\n};\n\nexport default React.memo(ChatDown);\n","export default \"data:image/svg+xml,%3Csvg%20width%3D%228%22%20height%3D%225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cpath%20id%3D%22b%22%20d%3D%22M.667.667L4%204%207.333.667z%22%2F%3E%3Cfilter%20x%3D%22-7.5%25%22%20y%3D%22-15%25%22%20width%3D%22115%25%22%20height%3D%22160%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeComposite%20in%3D%22shadowOffsetOuter1%22%20in2%3D%22SourceAlpha%22%20operator%3D%22out%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.685858243%200%22%20in%3D%22shadowOffsetOuter1%22%2F%3E%3C%2Ffilter%3E%3C%2Fdefs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3Cuse%20fill-opacity%3D%22.7%22%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\"","// @ts-check\n\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar } from '../Avatar';\nimport { ChatDown } from '../ChatDown';\nimport { LoadingChannels } from '../Loading';\nimport { ChatContext } from '../../context';\n\nimport chevrondown from '../../assets/str-chat__icon-chevron-down.svg';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type React.FC<import('types').ChannelListUIComponentProps>\n */\nconst ChannelListTeam = ({\n  error = false,\n  loading,\n  sidebarImage,\n  showSidebar,\n  LoadingErrorIndicator = ChatDown,\n  LoadingIndicator = LoadingChannels,\n  children,\n}) => {\n  const { client } = useContext(ChatContext);\n\n  if (error) {\n    return <LoadingErrorIndicator type=\"Connection Error\" />;\n  }\n  if (loading) {\n    return <LoadingIndicator />;\n  }\n  return (\n    <div className=\"str-chat__channel-list-team\">\n      {showSidebar && (\n        <div className=\"str-chat__channel-list-team__sidebar\">\n          <div className=\"str-chat__channel-list-team__sidebar--top\">\n            <Avatar image={sidebarImage} size={50} />\n          </div>\n        </div>\n      )}\n      <div className=\"str-chat__channel-list-team__main\">\n        <div className=\"str-chat__channel-list-team__header\">\n          <div className=\"str-chat__channel-list-team__header--left\">\n            <Avatar\n              image={client.user.image}\n              name={client.user.name || client.user.id}\n              size={40}\n            />\n          </div>\n          <div className=\"str-chat__channel-list-team__header--middle\">\n            <div className=\"str-chat__channel-list-team__header--title\">\n              {client.user.name || client.user.id}\n            </div>\n            <div\n              className={`str-chat__channel-list-team__header--status ${client.user.status}`}\n            >\n              {client.user.status}\n            </div>\n          </div>\n          <div className=\"str-chat__channel-list-team__header--right\">\n            <button className=\"str-chat__channel-list-team__header--button\">\n              <img src={chevrondown} />\n            </button>\n          </div>\n        </div>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nChannelListTeam.propTypes = {\n  /** When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js) */\n  loading: PropTypes.bool,\n  /** When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js) */\n  error: PropTypes.bool,\n  /** When true, sidebar containing logo of the team is visible */\n  showSidebar: PropTypes.bool,\n  /** Url for sidebar logo image. */\n  sidebarImage: PropTypes.string,\n  /**\n   * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').LoadingIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Error indicator UI Component. It will be displayed if `error` prop is true\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').ChatDownProps>>} */ (PropTypes.elementType),\n};\n\nexport default ChannelListTeam;\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n// @ts-ignore\nimport { LoadingIndicator } from 'react-file-utils';\n\n/**\n * @type {React.FC<import('types').LoadMoreButtonProps>}\n */\nconst LoadMoreButton = ({ onClick, refreshing, children = 'Load more' }) => (\n  <div className=\"str-chat__load-more-button\">\n    <button\n      className=\"str-chat__load-more-button__button\"\n      onClick={onClick}\n      data-testid=\"load-more-button\"\n      disabled={refreshing}\n    >\n      {refreshing ? <LoadingIndicator /> : children}\n    </button>\n  </div>\n);\n\nLoadMoreButton.propTypes = {\n  /** onClick handler load more button. Pagination logic should be executed in this handler. */\n  onClick: PropTypes.func.isRequired,\n  /** If true, LoadingIndicator is displayed instead of button */\n  refreshing: PropTypes.bool.isRequired,\n};\n\nexport default React.memo(LoadMoreButton);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport DefaultLoadMoreButton from './LoadMoreButton';\nimport { smartRender } from '../../utils';\n\nconst LoadMorePaginator = ({\n  reverse,\n  hasNextPage,\n  refreshing,\n  loadNextPage,\n  LoadMoreButton,\n  children,\n}) => (\n  <>\n    {!reverse && children}\n    {hasNextPage &&\n      smartRender(LoadMoreButton, { refreshing, onClick: loadNextPage })}\n    {reverse && children}\n  </>\n);\n\nLoadMorePaginator.defaultProps = {\n  LoadMoreButton: DefaultLoadMoreButton,\n};\n\nLoadMorePaginator.propTypes = {\n  LoadMoreButton: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.func,\n    PropTypes.object,\n  ]),\n  /** callback to load the next page */\n  loadNextPage: PropTypes.func,\n  /** indicates if there is a next page to load */\n  hasNextPage: PropTypes.bool,\n  /** display the items in opposite order */\n  reverse: PropTypes.bool,\n};\n\nexport default React.memo(LoadMorePaginator);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { TranslationContext } from '../../context';\n\n/**\n * @type {React.FC<import('types').EmptyStateIndicatorProps>} param0\n */\nconst EmptyStateIndicator = ({ listType }) => {\n  const { t } = useContext(TranslationContext);\n  if (listType === 'channel')\n    return <p>{t('You have no channels currently')}</p>;\n\n  if (listType === 'message') return null;\n\n  return <p>No items exist</p>;\n};\n\nEmptyStateIndicator.propTypes = {\n  /** channel | message */\n  listType: PropTypes.string.isRequired,\n};\n\nexport default React.memo(EmptyStateIndicator);\n","// @ts-check\n\n/**\n * @param {string} cid\n * @param {import('stream-chat').Channel[]} channels\n */\nexport const moveChannelUp = (cid, channels) => {\n  // get channel index\n  const channelIndex = channels.findIndex((channel) => channel.cid === cid);\n\n  if (channelIndex <= 0) return channels;\n\n  // get channel from channels\n  const channel = channels[channelIndex];\n\n  // remove channel from current position\n  channels.splice(channelIndex, 1);\n  // add channel at the start\n  channels.unshift(channel);\n\n  return [...channels];\n};\n\n/**\n * @param {import('stream-chat').StreamChat} client\n * @param {string} type\n * @param {string} [id]\n */\nexport const getChannel = async (client, type, id) => {\n  const channel = client.channel(type, id);\n  await channel.watch();\n  return channel;\n};\n\nexport const MAX_QUERY_CHANNELS_LIMIT = 30;\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\nimport { moveChannelUp } from '../utils';\n\n/**\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {boolean} [lockChannelOrder]\n */\nexport const useMessageNewListener = (\n  setChannels,\n  lockChannelOrder = false,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = (e) => {\n      setChannels((channels) => {\n        if (!lockChannelOrder) return moveChannelUp(e.cid, channels);\n        return channels;\n      });\n    };\n\n    client.on('message.new', handleEvent);\n\n    return () => {\n      client.off('message.new', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [lockChannelOrder]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { ChatContext } from '../../../context';\nimport { getChannel } from '../utils';\n\n/**\n * @typedef {import('stream-chat').Event<string>} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\nexport const useNotificationMessageNewListener = (\n  setChannels,\n  customHandler,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = async (e) => {\n      // if new message, put move channel up\n      // get channel if not in state currently\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else if (e.channel?.type) {\n        const channel = await getChannel(client, e.channel.type, e.channel.id);\n        // move channel to starting position\n        setChannels((channels) => {\n          return uniqBy([channel, ...channels], 'cid');\n        });\n      }\n    };\n\n    client.on('notification.message_new', handleEvent);\n\n    return () => {\n      client.off('notification.message_new', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { ChatContext } from '../../../context';\nimport { getChannel } from '../utils';\n\n/**\n * @typedef {import('stream-chat').Event<string>} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\nexport const useNotificationAddedToChannelListener = (\n  setChannels,\n  customHandler,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = async (e) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else if (e.channel?.type) {\n        const channel = await getChannel(client, e.channel.type, e.channel.id);\n        setChannels((channels) => uniqBy([channel, ...channels], 'cid'));\n      }\n    };\n\n    client.on('notification.added_to_channel', handleEvent);\n\n    return () => {\n      client.off('notification.added_to_channel', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event<string>} NotificationAddedToChannelEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: NotificationAddedToChannelEvent) => void} [customHandler]\n */\nexport const useNotificationRemovedFromChannelListener = (\n  setChannels,\n  customHandler,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = (e) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else {\n        setChannels((channels) =>\n          channels.filter((channel) => channel.cid !== e.channel?.cid),\n        );\n      }\n    };\n\n    client.on('notification.removed_from_channel', handleEvent);\n\n    return () => {\n      client.off('notification.removed_from_channel', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event<string>} ChannelDeletedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelDeletedEvent) => void} [customHandler]\n */\nexport const useChannelDeletedListener = (setChannels, customHandler) => {\n  const { client } = useContext(ChatContext);\n\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = (e) => {\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      } else {\n        setChannels((channels) => {\n          const channelIndex = channels.findIndex(\n            (channel) => channel.cid === e.channel?.cid,\n          );\n\n          if (channelIndex < 0) return [...channels];\n\n          // Remove the deleted channel from the list.s\n          channels.splice(channelIndex, 1);\n\n          // eslint-disable-next-line consistent-return\n          return [...channels];\n        });\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n\n    return () => {\n      client.off('channel.deleted', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event<string>} ChannelTruncatedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelTruncatedEvent) => void} [customHandler]\n * @param {() => void} [forceUpdate]\n */\nexport const useChannelTruncatedListener = (\n  setChannels,\n  customHandler,\n  forceUpdate,\n) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = (e) => {\n      setChannels((channels) => [...channels]);\n\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      }\n      forceUpdate?.();\n    };\n\n    client.on('channel.truncated', handleEvent);\n\n    return () => {\n      client.off('channel.truncated', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {import('stream-chat').Event<string>} ChannelUpdatedEvent\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n * @param {(setChannels: SetChannels, event: ChannelUpdatedEvent) => void} [customHandler]\n * @param {() => void} [forceUpdate]\n */\nexport const useChannelUpdatedListener = (\n  setChannels,\n  customHandler,\n  forceUpdate,\n) => {\n  const { client } = useContext(ChatContext);\n\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = (e) => {\n      setChannels((channels) => {\n        const channelIndex = channels.findIndex(\n          (channel) => channel.cid === e.channel?.cid,\n        );\n\n        if (channelIndex > -1 && e.channel) {\n          const newChannels = channels;\n          newChannels[channelIndex].data = e.channel;\n          return [...newChannels];\n        }\n\n        return channels;\n      });\n      forceUpdate?.();\n      if (customHandler && typeof customHandler === 'function') {\n        customHandler(setChannels, e);\n      }\n    };\n\n    client.on('channel.updated', handleEvent);\n\n    return () => {\n      client.off('channel.updated', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [customHandler]);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @param {() => void} [forceUpdate]\n */\nexport const useConnectionRecoveredListener = (forceUpdate) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    const handleEvent = () => {\n      forceUpdate?.();\n    };\n\n    client.on('connection.recovered', handleEvent);\n\n    return () => {\n      client.off('connection.recovered', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n","// @ts-check\n\nimport { useEffect, useContext } from 'react';\nimport { ChatContext } from '../../../context';\n\n/**\n * @typedef {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} SetChannels\n * @param {SetChannels} setChannels\n */\nexport const useUserPresenceChangedListener = (setChannels) => {\n  const { client } = useContext(ChatContext);\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = (e) => {\n      setChannels((channels) => {\n        const newChannels = channels.map((channel) => {\n          if (!e.user?.id || !channel.state.members[e.user.id]) return channel;\n\n          channel.state.members.setIn([e.user.id, 'user'], e.user);\n\n          return channel;\n        });\n\n        return [...newChannels];\n      });\n    };\n\n    client.on('user.presence.changed', handleEvent);\n\n    return () => {\n      client.off('user.presence.changed', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n","// @ts-check\n\nimport { useEffect, useState } from 'react';\nimport { MAX_QUERY_CHANNELS_LIMIT } from '../utils';\n/**\n * @typedef {import('stream-chat').Channel} Channel\n * @param {import('stream-chat').StreamChat} client\n * @param {import('types').ChannelFilters} filters\n * @param {import('types').ChannelSort} [sort]\n * @param {import('types').ChannelOptions} [options]\n * @param {(channels: Channel[], setChannels: React.Dispatch<React.SetStateAction<Channel[]>>) => void} [activeChannelHandler]\n */\nexport const usePaginatedChannels = (\n  client,\n  filters,\n  sort,\n  options,\n  activeChannelHandler,\n) => {\n  const [channels, setChannels] = useState(/** @type {Channel[]} */ ([]));\n  const [loadingChannels, setLoadingChannels] = useState(true);\n  const [refreshing, setRefreshing] = useState(true);\n  const [offset, setOffset] = useState(0);\n  const [error, setError] = useState(false);\n  const [hasNextPage, setHasNextPage] = useState(true);\n\n  /**\n   * @param {string} [queryType]\n   */\n  const queryChannels = async (queryType) => {\n    if (queryType === 'reload') {\n      setChannels([]);\n      setLoadingChannels(true);\n    }\n\n    setRefreshing(true);\n\n    const newOptions = {\n      offset: queryType === 'reload' ? 0 : offset,\n      ...options,\n      limit: options?.limit ?? MAX_QUERY_CHANNELS_LIMIT,\n    };\n\n    try {\n      const channelQueryResponse = await client.queryChannels(\n        filters,\n        sort || {},\n        newOptions,\n      );\n\n      let newChannels;\n      if (queryType === 'reload') {\n        newChannels = channelQueryResponse;\n      } else {\n        newChannels = [...channels, ...channelQueryResponse];\n      }\n\n      setChannels(newChannels);\n      setRefreshing(false);\n      setHasNextPage(channelQueryResponse.length >= newOptions.limit);\n\n      // Set active channel only after first page.\n      if (offset === 0 && activeChannelHandler) {\n        activeChannelHandler(newChannels, setChannels);\n      }\n\n      setOffset(newChannels.length);\n    } catch (e) {\n      console.warn(e);\n      setError(true);\n    }\n    setLoadingChannels(false);\n    setRefreshing(false);\n  };\n\n  const loadNextPage = () => {\n    queryChannels();\n  };\n\n  useEffect(() => {\n    queryChannels('reload');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filters]);\n\n  return {\n    channels,\n    loadNextPage,\n    hasNextPage,\n    status: {\n      loadingChannels,\n      refreshing,\n      error,\n    },\n    setChannels,\n  };\n};\n","// @ts-check\n\nimport { useEffect } from 'react';\n\n/**\n * @param {React.MutableRefObject<HTMLDivElement | null>} channelListRef\n * @param {boolean} navOpen\n * @param {() => void} [closeMobileNav]\n */\nexport const useMobileNavigation = (\n  channelListRef,\n  navOpen,\n  closeMobileNav,\n) => {\n  useEffect(() => {\n    /** @param {MouseEvent} e */\n    const handleClickOutside = (e) => {\n      if (\n        channelListRef.current &&\n        !channelListRef.current.contains(\n          /** @type {Node | null} */ (e.target),\n        ) &&\n        navOpen\n      ) {\n        closeMobileNav?.();\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [navOpen, channelListRef, closeMobileNav]);\n};\n","// @ts-check\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChatContext } from '../../context';\nimport { smartRender } from '../../utils';\n\nimport ChannelListTeam from './ChannelListTeam';\nimport { LoadMorePaginator } from '../LoadMore';\nimport { LoadingChannels } from '../Loading';\nimport { EmptyStateIndicator as DefaultEmptyStateIndicator } from '../EmptyStateIndicator';\nimport { ChannelPreview, ChannelPreviewLastMessage } from '../ChannelPreview';\nimport { ChatDown } from '../ChatDown';\n\nimport { useMessageNewListener } from './hooks/useMessageNewListener';\nimport { useNotificationMessageNewListener } from './hooks/useNotificationMessageNewListener';\nimport { useNotificationAddedToChannelListener } from './hooks/useNotificationAddedToChannelListener';\nimport { useNotificationRemovedFromChannelListener } from './hooks/useNotificationRemovedFromChannelListener';\nimport { useChannelDeletedListener } from './hooks/useChannelDeletedListener';\nimport { useChannelTruncatedListener } from './hooks/useChannelTruncatedListener';\nimport { useChannelUpdatedListener } from './hooks/useChannelUpdatedListener';\nimport { useConnectionRecoveredListener } from './hooks/useConnectionRecoveredListener';\nimport { useUserPresenceChangedListener } from './hooks/useUserPresenceChangedListener';\nimport { usePaginatedChannels } from './hooks/usePaginatedChannels';\nimport { useMobileNavigation } from './hooks/useMobileNavigation';\n\nimport { MAX_QUERY_CHANNELS_LIMIT, moveChannelUp } from './utils';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type {React.FC<import('types').ChannelListProps>}\n */\nconst ChannelList = (props) => {\n  const {\n    client,\n    setActiveChannel,\n    navOpen = false,\n    closeMobileNav,\n    channel,\n    theme,\n  } = useContext(ChatContext);\n  const channelListRef = useRef(/** @type {HTMLDivElement | null} */ (null));\n  const [channelUpdateCount, setChannelUpdateCount] = useState(0);\n\n  /**\n   * Set a channel with id {customActiveChannel} as active and move it to the top of the list.\n   * If customActiveChannel prop is absent, then set the first channel in list as active channel.\n   * @param {import('stream-chat').Channel[]} channels\n   * @param {React.Dispatch<React.SetStateAction<import('stream-chat').Channel[]>>} setChannels\n   */\n  const activeChannelHandler = (channels, setChannels) => {\n    const {\n      setActiveChannelOnMount = true,\n      customActiveChannel,\n      watchers,\n      options = {},\n    } = props;\n\n    if (\n      !channels ||\n      channels.length === 0 ||\n      channels.length > (options.limit || MAX_QUERY_CHANNELS_LIMIT)\n    ) {\n      return;\n    }\n\n    if (customActiveChannel) {\n      const customActiveChannelObject = channels.find(\n        (chan) => chan.id === customActiveChannel,\n      );\n      if (customActiveChannelObject) {\n        setActiveChannel?.(customActiveChannelObject, watchers);\n        const newChannels = moveChannelUp(\n          customActiveChannelObject.cid,\n          channels,\n        );\n        setChannels(newChannels);\n      }\n\n      return;\n    }\n\n    if (setActiveChannelOnMount) {\n      setActiveChannel?.(channels[0], watchers);\n    }\n  };\n\n  // When channel list (channels array) is updated without any shallow changes (or with only deep changes), then we want\n  // to force the channel preview to re-render.\n  // This happens in case of event channel.updated, channel.truncated etc. Inner properties of channel is updated but\n  // react renderer will only make shallow comparison and choose to not to re-render the UI.\n  // By updating the dummy prop - channelUpdateCount, we can force this re-render.\n  const forceUpdate = () => {\n    setChannelUpdateCount((count) => count + 1);\n  };\n\n  const {\n    channels,\n    loadNextPage,\n    hasNextPage,\n    status,\n    setChannels,\n  } = usePaginatedChannels(\n    client,\n    props.filters || {},\n    props.sort || {},\n    props.options || {},\n    activeChannelHandler,\n  );\n\n  useMobileNavigation(channelListRef, navOpen, closeMobileNav);\n\n  // All the event listeners\n  useMessageNewListener(setChannels, props.lockChannelOrder);\n  useNotificationMessageNewListener(setChannels, props.onMessageNew);\n  useNotificationAddedToChannelListener(setChannels, props.onAddedToChannel);\n  useNotificationRemovedFromChannelListener(\n    setChannels,\n    props.onRemovedFromChannel,\n  );\n  useChannelDeletedListener(setChannels, props.onChannelDeleted);\n  useChannelTruncatedListener(\n    setChannels,\n    props.onChannelTruncated,\n    forceUpdate,\n  );\n  useChannelUpdatedListener(setChannels, props.onChannelUpdated, forceUpdate);\n  useConnectionRecoveredListener(forceUpdate);\n  useUserPresenceChangedListener(setChannels);\n\n  // If the active channel is deleted, then unset the active channel.\n  useEffect(() => {\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = (e) => {\n      if (e.channel?.cid === channel?.cid) {\n        setActiveChannel?.();\n      }\n    };\n\n    client.on('channel.deleted', handleEvent);\n\n    return () => {\n      client.off('channel.deleted', handleEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // renders the channel preview or item\n  /** @param {import('stream-chat').Channel} item */\n  const renderChannel = (item) => {\n    if (!item) return null;\n\n    const { Preview = ChannelPreviewLastMessage, watchers = {} } = props;\n    const previewProps = {\n      channel: item,\n      Preview,\n      activeChannel: channel,\n      setActiveChannel,\n      watchers,\n      key: item.id,\n      // To force the update of preview component upon channel update.\n      channelUpdateCount,\n    };\n    return smartRender(ChannelPreview, { ...previewProps });\n  };\n\n  // renders the empty state indicator (when there are no channels)\n  const renderEmptyStateIndicator = () => {\n    const { EmptyStateIndicator = DefaultEmptyStateIndicator } = props;\n\n    return <EmptyStateIndicator listType=\"channel\" />;\n  };\n\n  // renders the list.\n  const renderList = () => {\n    const {\n      List = ChannelListTeam,\n      Paginator = LoadMorePaginator,\n      showSidebar,\n      LoadingIndicator = LoadingChannels,\n      LoadingErrorIndicator = ChatDown,\n    } = props;\n\n    return (\n      <List\n        loading={status.loadingChannels}\n        error={status.error}\n        showSidebar={showSidebar}\n        LoadingIndicator={LoadingIndicator}\n        LoadingErrorIndicator={LoadingErrorIndicator}\n      >\n        {!channels || channels.length === 0\n          ? renderEmptyStateIndicator()\n          : smartRender(Paginator, {\n              loadNextPage,\n              hasNextPage,\n              refreshing: status.refreshing,\n              children: channels.map((item) => renderChannel(item)),\n            })}\n      </List>\n    );\n  };\n\n  return (\n    <React.Fragment>\n      <div\n        className={`str-chat str-chat-channel-list ${theme} ${\n          navOpen ? 'str-chat-channel-list--open' : ''\n        }`}\n        ref={channelListRef}\n      >\n        {renderList()}\n      </div>\n    </React.Fragment>\n  );\n};\n\nChannelList.propTypes = {\n  /** Indicator for Empty State */\n  EmptyStateIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').EmptyStateIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n   * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n   * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n   *\n   * The Preview to use, defaults to ChannelPreviewLastMessage\n   * */\n  Preview: /** @type {PropTypes.Validator<React.ElementType<import('types').ChannelPreviewUIComponentProps>>} */ (PropTypes.elementType),\n\n  /**\n   * Loading indicator UI Component. It will be displayed until the channels are\n   * being queried from API. Once the channels are loaded/queried, loading indicator is removed\n   * and replaced with children of the Channel component.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').LoadingIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Error indicator UI Component. It will be displayed if there is any error if loading the channels.\n   * This error could be related to network or failing API.\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').ChatDownProps>>} */ (PropTypes.elementType),\n  /**\n   * Custom UI Component for container of list of channels. Note that, list (UI component) of channels is passed\n   * to this component as children. This component is for the purpose of adding header to channel list or styling container\n   * for list of channels.\n   *\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [ChannelListTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListTeam.js) (default)\n   * 2. [ChannelListMessenger](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListMessenger.js)\n   *\n   * It has access to some additional props:\n   *\n   * - `setActiveChannel` {function} Check [chat context](https://getstream.github.io/stream-chat-react/#chat)\n   * - `activeChannel` Currently active channel object\n   * - `channels` {array} List of channels in channel list\n   */\n  List: /** @type {PropTypes.Validator<React.ElementType<import('types').ChannelListUIComponentProps>>} */ (PropTypes.elementType),\n  /**\n   * Paginator component for channels. It contains all the pagination logic such as\n   * - fetching next page of results when needed e.g., when scroll reaches the end of list\n   * - UI to display loading indicator when next page is being loaded\n   * - call to action button to trigger loading of next page.\n   *\n   * Available built-in options (also accepts the same props as):\n   *\n   * 1. [LoadMorePaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadMorePaginator.js)\n   * 2. [InfiniteScrollPaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/InfiniteScrollPaginator.js)\n   */\n  Paginator: /** @type {PropTypes.Validator<React.ElementType<import('types').PaginatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Function that overrides default behaviour when new message is received on channel that is not being watched\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.message_new` event\n   * */\n  onMessageNew: PropTypes.func,\n  /**\n   * Function that overrides default behaviour when users gets added to a channel\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.added_to_channel` event\n   * */\n  onAddedToChannel: PropTypes.func,\n  /**\n   * Function that overrides default behaviour when users gets removed from a channel\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.removed_from_channel` event\n   * */\n  onRemovedFromChannel: PropTypes.func,\n  /**\n   * Function that overrides default behaviour when channel gets updated\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `notification.channel_updated` event\n   * */\n  onChannelUpdated: PropTypes.func,\n  /**\n   * Function to customize behaviour when channel gets truncated\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `channel.truncated` event\n   * */\n  onChannelTruncated: PropTypes.func,\n  /**\n   * Function that overrides default behaviour when channel gets deleted. In absence of this prop, channel will be removed from the list.\n   *\n   * @param {Component} setChannels Setter for channels value in state.\n   * @param {Event}     event       [Event object](https://getstream.io/chat/docs/event_object/?language=js) corresponding to `channel.deleted` event\n   * */\n  onChannelDeleted: PropTypes.func,\n  /**\n   * Object containing query filters\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for filter.\n   * */\n  filters: /** @type {PropTypes.Validator<import('types').ChannelFilters>} */ (PropTypes.object),\n  /**\n   * Object containing query options\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for options.\n   * */\n  options: PropTypes.object,\n  /**\n   * Object containing sort parameters\n   * @see See [Channel query documentation](https://getstream.io/chat/docs/query_channels/?language=js) for a list of available fields for sort.\n   * */\n  sort: /** @type {PropTypes.Validator<import('types').ChannelSort>} */ (PropTypes.object),\n  /**\n   * Object containing watcher parameters\n   * @see See [Pagination documentation](https://getstream.io/chat/docs/channel_pagination/?language=js) for a list of available fields for sort.\n   * */\n  watchers: /** @type {PropTypes.Validator<{ limit?: number | undefined; offset?: number | undefined} | null | undefined> | undefined} */ (PropTypes.object),\n\n  /**\n   * Set a Channel (of this id) to be active and move it to the top of the list of channels by ID.\n   * */\n  customActiveChannel: PropTypes.string,\n  /**\n   * Last channel will be set as active channel if true, defaults to true\n   */\n  setActiveChannelOnMount: PropTypes.bool,\n  /**\n   * If true, channels won't be dynamically sorted by most recent message.\n   */\n  lockChannelOrder: PropTypes.bool,\n};\n\nexport default React.memo(ChannelList);\n","// @ts-check\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChatDown } from '../ChatDown';\nimport { LoadingChannels } from '../Loading';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ../../docs/ChannelList.md\n * @type React.FC<import('types').ChannelListUIComponentProps>\n */\nexport const ChannelListMessenger = ({\n  error = false,\n  loading,\n  LoadingErrorIndicator = ChatDown,\n  LoadingIndicator = LoadingChannels,\n  children,\n}) => {\n  if (error) {\n    return <LoadingErrorIndicator type=\"Connection Error\" />;\n  }\n  if (loading) {\n    return <LoadingIndicator />;\n  }\n  return (\n    <div className=\"str-chat__channel-list-messenger\">\n      <div className=\"str-chat__channel-list-messenger__main\">{children}</div>\n    </div>\n  );\n};\n\nChannelListMessenger.propTypes = {\n  /** When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js) */\n  loading: PropTypes.bool,\n  /** When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js) */\n  error: PropTypes.bool,\n  /**\n   * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n   *\n   * Defaults to and accepts same props as:\n   * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n   *\n   */\n  LoadingIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').LoadingIndicatorProps>>} */ (PropTypes.elementType),\n  /**\n   * Error indicator UI Component. It will be displayed if `error` prop is true\n   *\n   * Defaults to and accepts same props as:\n   * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n   *\n   */\n  LoadingErrorIndicator: /** @type {PropTypes.Validator<React.ElementType<import('types').ChatDownProps>>} */ (PropTypes.elementType),\n};\n\nexport default ChannelListMessenger;\n","// @ts-check\nimport React from 'react';\n\n/**\n * @type {React.FC}\n */\nconst ChannelSearch = () => (\n  <div className=\"str-chat__channel-search\">\n    <input type=\"text\" placeholder=\"Search\" />\n    <button type=\"submit\">\n      <svg\n        width=\"18\"\n        height=\"17\"\n        viewBox=\"0 0 18 17\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\"\n          fillRule=\"evenodd\"\n        />\n      </svg>\n    </button>\n  </div>\n);\n\nexport default React.memo(ChannelSearch);\n","// @ts-check\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Dayjs from 'dayjs';\nimport { ChatContext, TranslationContext } from '../../context';\nimport { Streami18n } from '../../i18n';\n\n/**\n * Chat - Wrapper component for Chat. The needs to be placed around any other chat components.\n * This Chat component provides the ChatContext to all other components.\n *\n * The ChatContext provides the following props:\n *\n * - client (the client connection)\n * - channels (the list of channels)\n * - setActiveChannel (a function to set the currently active channel)\n * - channel (the currently active channel)\n *\n * It also exposes the withChatContext HOC which you can use to consume the ChatContext\n *\n * @example ../../docs/Chat.md\n * @typedef {import('stream-chat').Channel | undefined} ChannelState\n * @type {React.FC<{ client: import('stream-chat').StreamChat, theme?: string, i18nInstance?: Streami18n, initialNavOpen?: boolean }>}\n */\nconst Chat = ({\n  client,\n  theme = 'messaging light',\n  i18nInstance,\n  initialNavOpen = true,\n  children,\n}) => {\n  const [translators, setTranslators] = useState(\n    /** @type { Required<import('types').TranslationContextValue>} */ ({\n      t: /** @param {string} key */ (key) => key,\n      tDateTimeParser: (input) => Dayjs(input),\n    }),\n  );\n  const [mutes, setMutes] = useState(\n    /** @type {import('stream-chat').Mute[]} */ ([]),\n  );\n  const [navOpen, setNavOpen] = useState(initialNavOpen);\n  const [channel, setChannel] = useState(\n    /** @type {ChannelState} */ (undefined),\n  );\n\n  const openMobileNav = () => setTimeout(() => setNavOpen(true), 100);\n  const closeMobileNav = () => setNavOpen(false);\n  const clientMutes = client?.user?.mutes;\n\n  useEffect(() => {\n    setMutes(clientMutes || []);\n\n    /** @param {import('stream-chat').Event<string>} e */\n    const handleEvent = (e) => {\n      if (e.type === 'notification.mutes_updated') setMutes(e.me?.mutes || []);\n    };\n    if (client) client.on(handleEvent);\n    return () => client && client.off(handleEvent);\n  }, [client, clientMutes]);\n\n  useEffect(() => {\n    let streami18n;\n    if (i18nInstance instanceof Streami18n) streami18n = i18nInstance;\n    else streami18n = new Streami18n({ language: 'en' });\n\n    streami18n.registerSetLanguageCallback((t) =>\n      setTranslators((prevTranslator) => ({ ...prevTranslator, t })),\n    );\n    streami18n.getTranslators().then((translator) => {\n      if (translator) setTranslators(translator);\n    });\n  }, [i18nInstance]);\n\n  const setActiveChannel = useCallback(\n    /**\n     * @param {ChannelState} activeChannel\n     * @param {{ limit?: number; offset?: number }} [watchers]\n     * @param {React.BaseSyntheticEvent} [e]\n     */\n    async (activeChannel, watchers = {}, e) => {\n      if (e && e.preventDefault) e.preventDefault();\n\n      if (activeChannel && Object.keys(watchers).length) {\n        await activeChannel.query({ watch: true, watchers });\n      }\n      setChannel(activeChannel);\n      closeMobileNav();\n    },\n    [],\n  );\n\n  if (!translators.t) return null;\n\n  return (\n    <ChatContext.Provider\n      value={{\n        client,\n        theme,\n        channel,\n        mutes,\n        navOpen,\n        setActiveChannel,\n        openMobileNav,\n        closeMobileNav,\n      }}\n    >\n      <TranslationContext.Provider value={translators}>\n        {children}\n      </TranslationContext.Provider>\n    </ChatContext.Provider>\n  );\n};\n\nChat.propTypes = {\n  /** The StreamChat client object */\n  client: /** @type {PropTypes.Validator<import('stream-chat').StreamChat>} */ (PropTypes\n    .object.isRequired),\n  /**\n   *\n   * Theme could be used for custom styling of the components.\n   *\n   * You can override the classes used in our components under parent theme class.\n   *\n   * e.g. If you want to build a theme where background of message is black\n   *\n   * ```\n   *  <Chat client={client} theme={demo}>\n   *    <Channel>\n   *      <MessageList />\n   *    </Channel>\n   *  </Chat>\n   * ```\n   *\n   * ```scss\n   *  .demo.str-chat {\n   *    .str-chat__message-simple {\n   *      &-text-inner {\n   *        background-color: black;\n   *      }\n   *    }\n   *  }\n   * ```\n   *\n   * Built in available themes:\n   *\n   *  - `messaging light`\n   *  - `messaging dark`\n   *  - `team light`\n   *  - `team dark`\n   *  - `commerce light`\n   *  - `commerce dark`\n   *  - `livestream light`\n   *  - `livestream dark`\n   */\n  theme: PropTypes.string,\n  /** navOpen initial status */\n  initialNavOpen: PropTypes.bool,\n};\n\nexport default Chat;\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { TranslationContext } from '../../context';\n\n/**\n * DateSeparator - A simple date separator\n *\n * @example ../../docs/DateSeparator.md\n * @type {React.FC<import('types').DateSeparatorProps>}\n */\nconst DateSeparator = ({ position = 'right', formatDate, date }) => {\n  const { tDateTimeParser } = useContext(TranslationContext);\n  if (typeof date === 'string') return null;\n\n  return (\n    <div className=\"str-chat__date-separator\">\n      {(position === 'right' || position === 'center') && (\n        <hr className=\"str-chat__date-separator-line\" />\n      )}\n      <div className=\"str-chat__date-separator-date\">\n        {formatDate\n          ? formatDate(date)\n          : tDateTimeParser(date.toISOString()).calendar()}\n      </div>\n      {(position === 'left' || position === 'center') && (\n        <hr className=\"str-chat__date-separator-line\" />\n      )}\n    </div>\n  );\n};\n\nDateSeparator.propTypes = {\n  /** The date to format */\n  date: PropTypes.instanceOf(Date).isRequired,\n  /** Set the position of the date in the separator */\n  position: PropTypes.oneOf(['left', 'center', 'right']),\n  /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n  formatDate: PropTypes.func,\n};\n\nexport default React.memo(DateSeparator);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar } from '../Avatar';\nimport { TranslationContext } from '../../context';\n\n/**\n * EventComponent - Custom render component for system and channel event messages\n * @type {React.FC<import('types').EventComponentProps>}\n */\nconst EventComponent = ({ message }) => {\n  const { tDateTimeParser } = useContext(TranslationContext);\n  const { type, text, event, created_at } = message;\n\n  if (type === 'system')\n    return (\n      <div className=\"str-chat__message--system\">\n        <div className=\"str-chat__message--system__text\">\n          <div className=\"str-chat__message--system__line\" />\n          <p>{text}</p>\n          <div className=\"str-chat__message--system__line\" />\n        </div>\n        <div className=\"str-chat__message--system__date\">\n          <strong>{tDateTimeParser(created_at).format('dddd')} </strong>\n          at {tDateTimeParser(created_at).format('hh:mm A')}\n        </div>\n      </div>\n    );\n\n  if (\n    type === 'channel.event' &&\n    (event.type === 'member.removed' || event.type === 'member.added')\n  ) {\n    const name = event.user.name || event.user.id;\n    const sentence = `${name} ${\n      event.type === 'member.added'\n        ? 'has joined the chat'\n        : 'was removed from the chat'\n    }`;\n\n    return (\n      <div className=\"str-chat__event-component__channel-event\">\n        <Avatar image={event.user.image} name={name} />\n        <div className=\"str-chat__event-component__channel-event__content\">\n          <em className=\"str-chat__event-component__channel-event__sentence\">\n            {sentence}\n          </em>\n          <div className=\"str-chat__event-component__channel-event__date\">\n            {tDateTimeParser(created_at).format('LT')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nEventComponent.propTypes = {\n  /** Message object */\n  // @ts-ignore\n  message: PropTypes.object.isRequired,\n};\n\nexport default React.memo(EventComponent);\n","// @ts-check\nimport React, { useCallback, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Prevents Chrome hangups\n * See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n * @param {Event} e\n */\nconst mousewheelListener = (e) => {\n  if (e instanceof WheelEvent && e.deltaY === 1) {\n    e.preventDefault();\n  }\n};\n\n/**\n * @param {HTMLElement | Element | null} el\n * @returns {number}\n */\nconst calculateTopPosition = (el) => {\n  if (el instanceof HTMLElement) {\n    return el.offsetTop + calculateTopPosition(el.offsetParent);\n  }\n  return 0;\n};\n\n/**\n * Computes by recursively summing offsetTop until an element without offsetParent is reached\n * @param {HTMLElement} el\n * @param {number} scrollTop\n */\nconst calculateOffset = (el, scrollTop) => {\n  if (!el) {\n    return 0;\n  }\n\n  return (\n    calculateTopPosition(el) +\n    (el.offsetHeight - scrollTop - window.innerHeight)\n  );\n};\n\n/** @param {import(\"types\").InfiniteScrollProps} props */\nconst InfiniteScroll = ({\n  children,\n  element = 'div',\n  hasMore = false,\n  initialLoad = true,\n  isReverse = false,\n  loader,\n  loadMore,\n  threshold = 250,\n  useCapture = false,\n  useWindow = true,\n  isLoading = false,\n  listenToScroll,\n  ...elementProps\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n}) => {\n  const scrollComponent = useRef(/** @type {HTMLElement | null} */ (null));\n\n  const scrollListener = useCallback(() => {\n    const el = scrollComponent.current;\n    if (!el) return;\n    const { parentElement } = el;\n\n    let offset = 0;\n    let reverseOffset = 0;\n    if (useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        window.pageYOffset !== undefined ? window.pageYOffset : doc.scrollTop;\n      offset = calculateOffset(el, scrollTop);\n      reverseOffset = scrollTop;\n    } else if (parentElement) {\n      offset =\n        el.scrollHeight - parentElement.scrollTop - parentElement.clientHeight;\n      reverseOffset = parentElement.scrollTop;\n    }\n    if (listenToScroll) listenToScroll(offset, reverseOffset);\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      (isReverse ? reverseOffset : offset) < Number(threshold) &&\n      el.offsetParent !== null &&\n      typeof loadMore === 'function'\n    ) {\n      loadMore();\n    }\n  }, [useWindow, isReverse, threshold, listenToScroll, loadMore]);\n\n  useEffect(() => {\n    const scrollEl = useWindow ? window : scrollComponent.current?.parentNode;\n    if (!hasMore || isLoading || !scrollEl) {\n      return () => {};\n    }\n\n    scrollEl.addEventListener('scroll', scrollListener, useCapture);\n    scrollEl.addEventListener('resize', scrollListener, useCapture);\n\n    if (initialLoad) {\n      scrollListener();\n    }\n\n    return () => {\n      scrollEl.removeEventListener('scroll', scrollListener, useCapture);\n      scrollEl.removeEventListener('resize', scrollListener, useCapture);\n    };\n  }, [hasMore, initialLoad, isLoading, scrollListener, useCapture, useWindow]);\n\n  useEffect(() => {\n    const scrollEl = useWindow ? window : scrollComponent.current?.parentNode;\n    if (!scrollEl) return () => {};\n    scrollEl.addEventListener('mousewheel', mousewheelListener, useCapture);\n    return () =>\n      scrollEl.removeEventListener(\n        'mousewheel',\n        mousewheelListener,\n        useCapture,\n      );\n  }, [useCapture, useWindow]);\n\n  const attributes = {\n    ...elementProps,\n    /** @param {HTMLElement} e */\n    ref: (e) => {\n      scrollComponent.current = e;\n    },\n  };\n\n  const childrenArray = [children];\n  if (isLoading && loader) {\n    if (isReverse) {\n      childrenArray.unshift(loader);\n    } else {\n      childrenArray.push(loader);\n    }\n  }\n  return React.createElement(element, attributes, childrenArray);\n};\n\nInfiniteScroll.propTypes = {\n  element: PropTypes.elementType,\n  hasMore: PropTypes.bool,\n  initialLoad: PropTypes.bool,\n  isReverse: PropTypes.bool,\n  loader: PropTypes.node,\n  loadMore: PropTypes.func.isRequired,\n  pageStart: PropTypes.number,\n  isLoading: PropTypes.bool,\n  threshold: PropTypes.number,\n  useCapture: PropTypes.bool,\n  useWindow: PropTypes.bool,\n};\n\nexport default InfiniteScroll;\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n// @ts-ignore\nimport { LoadingIndicator as DefaultLoadingIndicator } from 'react-file-utils';\n\nimport InfiniteScroll from './InfiniteScroll';\n\n/**\n * @type { React.FC<import('types').InfiniteScrollPaginatorProps>}\n */\nconst InfiniteScrollPaginator = ({\n  LoadingIndicator = DefaultLoadingIndicator,\n  loadNextPage,\n  hasNextPage,\n  refreshing,\n  reverse,\n  threshold,\n  children,\n}) => (\n  <InfiniteScroll\n    loadMore={loadNextPage}\n    hasMore={hasNextPage}\n    isLoading={refreshing}\n    isReverse={reverse}\n    threshold={threshold}\n    useWindow={false}\n    loader={\n      <div\n        className=\"str-chat__infinite-scroll-paginator\"\n        key=\"loadingindicator\"\n      >\n        <LoadingIndicator />\n      </div>\n    }\n  >\n    {children}\n  </InfiniteScroll>\n);\n\nInfiniteScrollPaginator.propTypes = {\n  /** callback to load the next page */\n  loadNextPage: PropTypes.func.isRequired,\n  /** indicates if there is a next page to load */\n  hasNextPage: PropTypes.bool,\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: PropTypes.bool,\n  /** display the items in opposite order */\n  reverse: PropTypes.bool,\n  /** Offset from when to start the loadNextPage call */\n  threshold: PropTypes.number,\n  /** The loading indicator to use */\n  // @ts-ignore\n  LoadingIndicator: PropTypes.elementType,\n};\n\nexport default InfiniteScrollPaginator;\n","// @ts-check\nimport React from 'react';\nimport InfiniteScroll from './InfiniteScroll';\n\n/** @type {React.FC<import(\"types\").InfiniteScrollProps>} */\nconst ReverseInfiniteScroll = (props) => (\n  <InfiniteScroll {...props} isReverse />\n);\n\nexport default ReverseInfiniteScroll;\n","import React from 'react';\n\nconst Center = ({ children }) => (\n  <div className=\"str-chat__list__center\">{children}</div>\n);\n\nexport default React.memo(Center);\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/** @type {React.FC<import('types').MessageNotificationProps>} */\nconst MessageNotification = ({ showNotification, onClick, children }) => {\n  if (!showNotification) return null;\n  return (\n    <button\n      data-testid=\"message-notification\"\n      className=\"str-chat__message-notification\"\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n};\n\nMessageNotification.defaultProps = {\n  showNotification: true,\n};\n\nMessageNotification.propTypes = {\n  /** If we should show the notification or not */\n  showNotification: PropTypes.bool.isRequired,\n  /** Onclick handler */\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(MessageNotification);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst CustomNotification = ({ children, active, type }) => {\n  if (!active) return null;\n\n  return (\n    <div\n      className={`str-chat__custom-notification notification-${type}`}\n      data-testid=\"custom-notification\"\n    >\n      {children}\n    </div>\n  );\n};\n\nCustomNotification.propTypes = {\n  active: PropTypes.bool,\n  type: PropTypes.string,\n};\n\nexport default React.memo(CustomNotification);\n","/* eslint-disable sonarjs/cognitive-complexity */\n/* eslint-disable no-continue */\n/* eslint-disable sonarjs/no-duplicate-string */\nimport React, { useMemo } from 'react';\nimport deepequal from 'react-fast-compare';\n\nimport { Message } from '../Message';\nimport { InfiniteScroll } from '../InfiniteScrollPaginator';\n\n// fast since it usually iterates just the last few messages\nconst getLastReceived = (messages) => {\n  for (let i = messages.length - 1; i > 0; i -= 1) {\n    if (messages[i].status === 'received') return messages[i].id;\n  }\n  return null;\n};\n\nconst getReadStates = (messages, read) => {\n  // create object with empty array for each message id\n  const readData = {};\n  Object.values(read).forEach((readState) => {\n    if (!readState.last_read) return;\n\n    let userLastReadMsgId;\n    messages.forEach((msg) => {\n      if (msg.updated_at < readState.last_read) userLastReadMsgId = msg.id;\n    });\n\n    if (userLastReadMsgId) {\n      if (!readData[userLastReadMsgId]) readData[userLastReadMsgId] = [];\n      readData[userLastReadMsgId].push(readState.user);\n    }\n  });\n\n  return readData;\n};\n\nconst insertDates = (messages) => {\n  const newMessages = [];\n  for (let i = 0, l = messages.length; i < l; i += 1) {\n    const message = messages[i];\n    if (message.type === 'message.read') {\n      newMessages.push(message);\n      continue;\n    }\n    const messageDate = message.created_at.toDateString();\n    let prevMessageDate = messageDate;\n    if (i > 0) {\n      prevMessageDate = messages[i - 1].created_at.toDateString();\n    }\n\n    if (i === 0 || messageDate !== prevMessageDate) {\n      newMessages.push(\n        { type: 'message.date', date: message.created_at },\n        message,\n      );\n    } else {\n      newMessages.push(message);\n    }\n  }\n\n  return newMessages;\n};\n\nconst insertIntro = (messages, headerPosition) => {\n  const newMessages = messages;\n  // if no headerPosition is set, HeaderComponent will go at the top\n  if (!headerPosition) {\n    newMessages.unshift({ type: 'channel.intro' });\n    return newMessages;\n  }\n\n  // if no messages, intro get's inserted\n  if (!newMessages.length) {\n    newMessages.unshift({ type: 'channel.intro' });\n    return newMessages;\n  }\n\n  // else loop over the messages\n  for (let i = 0, l = messages.length; i < l; i += 1) {\n    const message = messages[i];\n\n    const messageTime = message.created_at\n      ? message.created_at.getTime()\n      : null;\n    const nextMessageTime =\n      messages[i + 1] && messages[i + 1].created_at\n        ? messages[i + 1].created_at.getTime()\n        : null;\n\n    // headerposition is smaller than message time so comes after;\n    if (messageTime < headerPosition) {\n      // if header position is also smaller than message time continue;\n      if (nextMessageTime < headerPosition) {\n        if (messages[i + 1] && messages[i + 1].type === 'message.date')\n          continue;\n        if (!nextMessageTime) {\n          newMessages.push({ type: 'channel.intro' });\n          return newMessages;\n        }\n        continue;\n      } else {\n        newMessages.splice(i + 1, 0, { type: 'channel.intro' });\n        return newMessages;\n      }\n    }\n  }\n\n  return newMessages;\n};\n\nconst getGroupStyles = (\n  message,\n  previousMessage,\n  nextMessage,\n  noGroupByUser,\n) => {\n  if (message.type === 'message.date') return '';\n  if (message.type === 'channel.event') return '';\n  if (message.type === 'channel.intro') return '';\n\n  if (noGroupByUser || message.attachments.length !== 0) return 'single';\n\n  const isTopMessage =\n    !previousMessage ||\n    previousMessage.type === 'channel.intro' ||\n    previousMessage.type === 'message.date' ||\n    previousMessage.type === 'system' ||\n    previousMessage.type === 'channel.event' ||\n    previousMessage.attachments.length !== 0 ||\n    message.user.id !== previousMessage.user.id ||\n    previousMessage.type === 'error' ||\n    previousMessage.deleted_at;\n\n  const isBottomMessage =\n    !nextMessage ||\n    nextMessage.type === 'message.date' ||\n    nextMessage.type === 'system' ||\n    nextMessage.type === 'channel.event' ||\n    nextMessage.type === 'channel.intro' ||\n    nextMessage.attachments.length !== 0 ||\n    message.user.id !== nextMessage.user.id ||\n    nextMessage.type === 'error' ||\n    nextMessage.deleted_at;\n\n  if (!isTopMessage && !isBottomMessage) {\n    if (message.deleted_at || message.type === 'error') return 'single';\n    return 'middle';\n  }\n\n  if (isBottomMessage) {\n    if (isTopMessage || message.deleted_at || message.type === 'error')\n      return 'single';\n    return 'bottom';\n  }\n\n  if (isTopMessage) return 'top';\n\n  return '';\n};\n\nconst MessageListInner = (props) => {\n  const {\n    EmptyStateIndicator,\n    MessageSystem,\n    DateSeparator,\n    HeaderComponent,\n    headerPosition,\n    bottomRef,\n    onMessageLoadCaptured,\n    messages,\n    noGroupByUser,\n    client,\n    threadList,\n    read,\n    internalMessageProps,\n    internalInfiniteScrollProps,\n  } = props;\n\n  const enrichedMessages = useMemo(() => {\n    const messageWithDates = insertDates(messages);\n    // messageWithDates.sort((a, b) => a.created_at - b.created_at); // TODO: remove if no issue came up\n    if (HeaderComponent) return insertIntro(messageWithDates, headerPosition);\n    return messageWithDates;\n  }, [HeaderComponent, headerPosition, messages]);\n\n  const messageGroupStyles = useMemo(\n    () =>\n      enrichedMessages.reduce((acc, message, i) => {\n        const style = getGroupStyles(\n          message,\n          enrichedMessages[i - 1],\n          enrichedMessages[i + 1],\n          noGroupByUser,\n        );\n        if (style) acc[message.id] = style;\n        return acc;\n      }, {}),\n    [enrichedMessages, noGroupByUser],\n  );\n\n  // get the readData, but only for messages submitted by the user themselves\n  const readData = useMemo(\n    () =>\n      getReadStates(\n        enrichedMessages.filter(({ user }) => user?.id === client.userID),\n        read,\n      ),\n    [client.userID, enrichedMessages, read],\n  );\n\n  const lastReceivedId = useMemo(() => getLastReceived(enrichedMessages), [\n    enrichedMessages,\n  ]);\n\n  const elements = useMemo(() => {\n    return enrichedMessages.map((message) => {\n      if (message.type === 'message.date') {\n        if (threadList) return null;\n\n        return (\n          <li key={`${message.date.toISOString()}-i`}>\n            <DateSeparator date={message.date} />\n          </li>\n        );\n      }\n\n      if (message.type === 'channel.intro') {\n        return (\n          <li key=\"intro\">\n            <HeaderComponent />\n          </li>\n        );\n      }\n\n      if (message.type === 'channel.event' || message.type === 'system') {\n        if (!MessageSystem) return null;\n        return (\n          <li key={message.event?.created_at || message.created_at || ''}>\n            <MessageSystem message={message} />\n          </li>\n        );\n      }\n\n      if (message.type !== 'message.read') {\n        const groupStyles = messageGroupStyles[message.id] || '';\n\n        return (\n          <li\n            className={`str-chat__li str-chat__li--${groupStyles}`}\n            key={message.id || message.created_at}\n            onLoadCapture={onMessageLoadCaptured}\n          >\n            <Message\n              client={client}\n              message={message}\n              groupStyles={[groupStyles]} /* TODO: convert to simple string */\n              readBy={readData[message.id] || []}\n              lastReceivedId={lastReceivedId}\n              threadList={threadList}\n              {...internalMessageProps}\n            />\n          </li>\n        );\n      }\n\n      return null;\n    });\n  }, [\n    MessageSystem,\n    client,\n    enrichedMessages,\n    internalMessageProps,\n    lastReceivedId,\n    messageGroupStyles,\n    onMessageLoadCaptured,\n    readData,\n    threadList,\n  ]);\n\n  if (!elements.length) return <EmptyStateIndicator listType=\"message\" />;\n\n  return (\n    <InfiniteScroll\n      isReverse\n      useWindow={false}\n      className=\"str-chat__reverse-infinite-scroll\"\n      data-testid=\"reverse-infinite-scroll\"\n      {...internalInfiniteScrollProps}\n    >\n      <ul className=\"str-chat__ul\">{elements}</ul>\n\n      <div key=\"bottom\" ref={bottomRef} />\n    </InfiniteScroll>\n  );\n};\n\nexport default React.memo(MessageListInner, deepequal);\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { Channel } from 'stream-chat';\nimport Center from './Center';\nimport MessageNotification from './MessageNotification';\nimport CustomNotification from './CustomNotification';\nimport MessageListInner from './MessageListInner';\nimport { MESSAGE_ACTIONS } from '../Message/utils';\nimport { smartRender } from '../../utils';\n\nimport { ChannelContext, withTranslationContext } from '../../context';\nimport { Attachment } from '../Attachment';\nimport { MessageSimple } from '../Message';\nimport { EmptyStateIndicator as DefaultEmptyStateIndicator } from '../EmptyStateIndicator';\nimport { LoadingIndicator as DefaultLoadingIndicator } from '../Loading';\nimport { EventComponent } from '../EventComponent';\nimport { DateSeparator as DefaultDateSeparator } from '../DateSeparator';\n\n/**\n * MessageList - The message list components renders a list of messages. Its a consumer of [Channel Context](https://getstream.github.io/stream-chat-react/#channel)\n *\n * @example ../../docs/MessageList.md\n * @extends PureComponent\n */\nclass MessageList extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      newMessagesNotification: false,\n      online: true,\n      notifications: [],\n    };\n\n    this.bottomRef = React.createRef();\n    this.messageList = React.createRef();\n    this.notificationTimeouts = [];\n  }\n\n  connectionChanged = ({ online }) => {\n    if (this.state.online !== online) this.setState({ online });\n  };\n\n  componentDidMount() {\n    // start at the bottom\n    this.scrollToBottom();\n    const messageListRect = this.messageList.current.getBoundingClientRect();\n\n    this.setState({\n      messageListRect,\n    });\n\n    this.props.client.on('connection.changed', this.connectionChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.client.off('connection.changed', this.connectionChanged);\n\n    this.notificationTimeouts.forEach(clearTimeout);\n  }\n\n  getSnapshotBeforeUpdate(prevProps) {\n    if (this.props.threadList) {\n      return null;\n    }\n    // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n\n    if (prevProps.messages.length < this.props.messages.length) {\n      const list = this.messageList.current;\n      return {\n        offsetTop: list.scrollTop,\n        offsetBottom: list.scrollHeight - list.scrollTop,\n      };\n    }\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n    const userScrolledUp = this.userScrolledUp();\n    const currentLastMessage = this.props.messages[\n      this.props.messages.length - 1\n    ];\n    const previousLastMessage =\n      prevProps.messages[prevProps.messages.length - 1];\n    if (!previousLastMessage || !currentLastMessage) {\n      return;\n    }\n\n    const hasNewMessage = currentLastMessage.id !== previousLastMessage.id;\n    const isOwner = currentLastMessage.user.id === this.props.client.userID;\n\n    const list = this.messageList.current;\n\n    // always scroll down when it's your own message that you added...\n    const scrollToBottom = hasNewMessage && (isOwner || !userScrolledUp);\n\n    if (scrollToBottom) {\n      this.scrollToBottom();\n\n      // remove the scroll notification if we already scrolled down...\n      if (this.state.newMessagesNotification)\n        this.setState({ newMessagesNotification: false });\n\n      return;\n    }\n\n    if (snapshot !== null) {\n      // Maintain the offsetTop of scroll so that content in viewport doesn't move.\n      // This is for the case where user has scroll up significantly and a new message arrives from someone.\n      if (hasNewMessage) {\n        this.scrollToTarget(snapshot.offsetTop, this.messageList.current);\n      } else {\n        // Maintain the bottomOffset of scroll.\n        // This is for the case of pagination, when more messages get loaded.\n        this.scrollToTarget(\n          list.scrollHeight - snapshot.offsetBottom,\n          this.messageList.current,\n        );\n      }\n    }\n\n    // Check the scroll position... if you're scrolled up show a little notification\n    if (hasNewMessage && !this.state.newMessagesNotification) {\n      this.setState({ newMessagesNotification: true });\n    }\n  }\n\n  scrollToBottom = () => {\n    this._scrollToRef(this.bottomRef, this.messageList);\n  };\n\n  _scrollToRef = (el, parent) => {\n    const scrollDown = () => {\n      if (el && el.current && parent && parent.current) {\n        this.scrollToTarget(el.current, parent.current);\n      }\n    };\n\n    scrollDown();\n    // scroll down after images load again\n    setTimeout(scrollDown, 200);\n  };\n\n  /**\n   * target - target to scroll to (DOM element, scrollTop Number, 'top', or 'bottom'\n   * containerEl - DOM element for the container with scrollbars\n   * source: https://stackoverflow.com/a/48429314\n   */\n  scrollToTarget = (target, containerEl) => {\n    // Moved up here for readability:\n    const isElement = target && target.nodeType === 1;\n    const isNumber =\n      Object.prototype.toString.call(target) === '[object Number]';\n\n    let scrollTop;\n    if (isElement) scrollTop = target.offsetTop;\n    else if (isNumber) scrollTop = target;\n    else if (target === 'top') scrollTop = 0;\n    else if (target === 'bottom')\n      scrollTop = containerEl.scrollHeight - containerEl.offsetHeight;\n\n    if (scrollTop !== undefined) containerEl.scrollTop = scrollTop; // eslint-disable-line no-param-reassign\n  };\n\n  goToNewMessages = () => {\n    this.scrollToBottom();\n    this.setState({ newMessagesNotification: false });\n  };\n\n  userScrolledUp = () => this.scrollOffset > 310;\n\n  listenToScroll = (offset) => {\n    this.scrollOffset = offset;\n    if (this.state.newMessagesNotification && !this.userScrolledUp()) {\n      this.setState({ newMessagesNotification: false });\n    }\n  };\n\n  /**\n   * Adds a temporary notification to message list.\n   * Notification will be removed after 5 seconds.\n   *\n   * @param notificationText  Text of notification to be added\n   * @param type              Type of notification. success | error\n   */\n  addNotification = (notificationText, type) => {\n    if (typeof notificationText !== 'string') return;\n    if (type !== 'success' && type !== 'error') return;\n\n    const id = uuidv4();\n\n    this.setState(({ notifications }) => ({\n      notifications: [...notifications, { id, text: notificationText, type }],\n    }));\n\n    // remove the notification after 5000 ms\n    const ct = setTimeout(\n      () =>\n        this.setState(({ notifications }) => ({\n          notifications: notifications.filter((n) => n.id !== id),\n        })),\n      5000,\n    );\n\n    this.notificationTimeouts.push(ct);\n  };\n\n  onMessageLoadCaptured = () => {\n    // A load event (emitted by e.g. an <img>) was captured on a message.\n    // In some cases, the loaded asset is larger than the placeholder, which means we have to scroll down.\n    if (!this.userScrolledUp()) {\n      this.scrollToBottom();\n    }\n  };\n\n  loadMore = () =>\n    this.props.messageLimit\n      ? this.props.loadMore(this.props.messageLimit)\n      : this.props.loadMore();\n\n  render() {\n    const { t } = this.props;\n\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat__list ${\n            this.props.threadList ? 'str-chat__list--thread' : ''\n          }`}\n          ref={this.messageList}\n        >\n          <MessageListInner\n            EmptyStateIndicator={this.props.EmptyStateIndicator}\n            MessageSystem={this.props.MessageSystem}\n            HeaderComponent={this.props.HeaderComponent}\n            headerPosition={this.props.headerPosition}\n            DateSeparator={this.props.DateSeparator || this.props.dateSeparator}\n            messages={this.props.messages}\n            noGroupByUser={this.props.noGroupByUser}\n            threadList={this.props.threadList}\n            client={this.props.client}\n            read={this.props.read}\n            bottomRef={this.bottomRef}\n            onMessageLoadCaptured={this.onMessageLoadCaptured}\n            internalInfiniteScrollProps={{\n              hasMore: this.props.hasMore,\n              isLoading: this.props.loadingMore,\n              listenToScroll: this.listenToScroll,\n              loadMore: this.loadMore,\n              loader: (\n                <Center key=\"loadingindicator\">\n                  {smartRender(this.props.LoadingIndicator, { size: 20 }, null)}\n                </Center>\n              ),\n            }}\n            internalMessageProps={{\n              messageListRect: this.state.messageListRect,\n              openThread: this.props.openThread,\n              members: this.props.members,\n              watchers: this.props.watchers,\n              channel: this.props.channel,\n              retrySendMessage: this.props.retrySendMessage,\n              addNotification: this.addNotification,\n              updateMessage: this.props.updateMessage,\n              removeMessage: this.props.removeMessage,\n              Message: this.props.Message,\n              mutes: this.props.mutes,\n              unsafeHTML: this.props.unsafeHTML,\n              Attachment: this.props.Attachment,\n              onMentionsClick: this.props.onMentionsClick,\n              onMentionsHover: this.props.onMentionsHover,\n              messageActions: this.props.messageActions,\n              additionalMessageInputProps: this.props\n                .additionalMessageInputProps,\n              getFlagMessageSuccessNotification: this.props\n                .getFlagMessageSuccessNotification,\n              getFlagMessageErrorNotification: this.props\n                .getFlagMessageErrorNotification,\n              getMuteUserSuccessNotification: this.props\n                .getMuteUserSuccessNotification,\n              getMuteUserErrorNotification: this.props\n                .getMuteUserErrorNotification,\n            }}\n          />\n        </div>\n\n        <div className=\"str-chat__list-notifications\">\n          {this.state.notifications.map((notification) => (\n            <CustomNotification\n              active={true}\n              key={notification.id}\n              type={notification.type}\n            >\n              {notification.text}\n            </CustomNotification>\n          ))}\n\n          <CustomNotification active={!this.state.online} type=\"error\">\n            {t('Connection failure, reconnecting now...')}\n          </CustomNotification>\n\n          <MessageNotification\n            showNotification={this.state.newMessagesNotification}\n            onClick={this.goToNewMessages}\n          >\n            {t('New Messages!')}\n          </MessageNotification>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nMessageList.propTypes = {\n  /**\n   * Date separator UI component to render\n   *\n   * Defaults to and accepts same props as: [DateSeparator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/DateSeparator.js)\n   * */\n  dateSeparator: PropTypes.elementType,\n  /** Turn off grouping of messages by user */\n  noGroupByUser: PropTypes.bool,\n  /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n  unsafeHTML: PropTypes.bool,\n  /** Set the limit to use when paginating messages */\n  messageLimit: PropTypes.number,\n  /**\n   * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\n   * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n   * */\n  messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n  /**\n   * Boolean weather current message list is a thread.\n   */\n  threadList: PropTypes.bool,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageSuccessNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n   *\n   * */\n  getFlagMessageErrorNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserSuccessNotification: PropTypes.func,\n  /**\n   * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n   *\n   * This function should accept following params:\n   *\n   * @param user A user object which is being muted\n   *\n   * */\n  getMuteUserErrorNotification: PropTypes.func,\n  /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n  client: PropTypes.object,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  Attachment: PropTypes.elementType,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  Message: PropTypes.elementType,\n  /**\n   * Custom UI component to display system messages.\n   *\n   * Defaults to and accepts same props as: [EventComponent](https://github.com/GetStream/stream-chat-react/blob/master/src/components/EventComponent.js)\n   */\n  MessageSystem: PropTypes.elementType,\n  /**\n   * The UI Indicator to use when MessagerList or ChannelList is empty\n   * */\n  EmptyStateIndicator: PropTypes.elementType,\n  /**\n   * Component to render at the top of the MessageList\n   * */\n  HeaderComponent: PropTypes.elementType,\n  /**\n   * Component to render at the top of the MessageList while loading new messages\n   * */\n  LoadingIndicator: PropTypes.elementType,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  messages: PropTypes.array.isRequired,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  channel: PropTypes.instanceOf(Channel).isRequired,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  updateMessage: PropTypes.func.isRequired,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  retrySendMessage: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  removeMessage: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  onMentionsClick: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  onMentionsHover: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  openThread: PropTypes.func,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  members: PropTypes.object,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  watchers: PropTypes.object,\n  /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n  read: PropTypes.object,\n  /**\n   * Additional props for underlying MessageInput component. We have instance of MessageInput\n   * component in MessageSimple component, for handling edit state.\n   * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n   * */\n  additionalMessageInputProps: PropTypes.object,\n};\n\nMessageList.defaultProps = {\n  Message: MessageSimple,\n  MessageSystem: EventComponent,\n  threadList: false,\n  Attachment,\n  DateSeparator: DefaultDateSeparator,\n  LoadingIndicator: DefaultLoadingIndicator,\n  EmptyStateIndicator: DefaultEmptyStateIndicator,\n  unsafeHTML: false,\n  noGroupByUser: false,\n  messageActions: Object.keys(MESSAGE_ACTIONS),\n};\n\nexport default withTranslationContext((props) => (\n  <ChannelContext.Consumer>\n    {/* TODO: only used props needs to be passed in */}\n    {({ typing, ...channelContext }) => (\n      <MessageList {...channelContext} {...props} />\n    )}\n  </ChannelContext.Consumer>\n));\n","// @ts-check\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Channel } from 'stream-chat';\nimport { smartRender } from '../../utils';\nimport { withChannelContext, withTranslationContext } from '../../context';\nimport { Message } from '../Message';\nimport { MessageList } from '../MessageList';\nimport { MessageInput, MessageInputSmall } from '../MessageInput';\n\n/**\n * Thread - The Thread renders a parent message with a list of replies. Use the standard message list of the main channel's messages.\n * The thread is only used for the list of replies to a message.\n * Underlying MessageList, MessageInput and Message components can be customized using props:\n * - additionalParentMessageProps\n * - additionalMessageListProps\n * - additionalMessageInputProps\n *\n * @example ../../docs/Thread.md\n * @typedef { import('types').ThreadProps & import('types').ChannelContextValue & import('types').TranslationContextValue} Props\n * @extends PureComponent<Props, any>\n */\nclass Thread extends PureComponent {\n  static propTypes = {\n    /** Display the thread on 100% width of it's container. Useful for mobile style view */\n    fullWidth: PropTypes.bool,\n    /** Make input focus on mounting thread */\n    autoFocus: PropTypes.bool,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    channel: PropTypes.instanceOf(Channel).isRequired,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    Message: /** @type {PropTypes.Validator<React.ComponentType<import('types').MessageUIComponentProps>>} */ (PropTypes.elementType),\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     * The thread (the parent [message object](https://getstream.io/chat/docs/#message_format)) */\n    thread: /** @type {PropTypes.Validator<import('seamless-immutable').ImmutableObject<import('stream-chat').MessageResponse>>} */ (PropTypes.object),\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     * The array of immutable messages to render. By default they are provided by parent Channel component */\n    threadMessages:\n      /** @type {PropTypes.Validator<import('seamless-immutable').ImmutableArray<import('stream-chat').MessageResponse>>} */\n      (PropTypes.array),\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     *\n     * Function which provides next page of thread messages.\n     * loadMoreThread is called when infinite scroll wants to load more messages\n     * */\n    loadMoreThread: PropTypes.func.isRequired,\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     * If there are more messages available, set to false when the end of pagination is reached.\n     * */\n    threadHasMore: PropTypes.bool,\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     * If the thread is currently loading more messages. This is helpful to display a loading indicator on threadlist */\n    threadLoadingMore: PropTypes.bool,\n    /**\n     * Additional props for underlying Message component of parent message at the top.\n     * Available props - https://getstream.github.io/stream-chat-react/#message\n     * */\n    additionalParentMessageProps: PropTypes.object,\n    /**\n     * Additional props for underlying MessageList component.\n     * Available props - https://getstream.github.io/stream-chat-react/#messagelist\n     * */\n    additionalMessageListProps: PropTypes.object,\n    /**\n     * Additional props for underlying MessageInput component.\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n     * */\n    additionalMessageInputProps: PropTypes.object,\n    /** Customized MessageInput component to used within Thread instead of default MessageInput \n        Useable as follows:\n        ```\n        <Thread MessageInput={(props) => <MessageInput parent={props.parent} Input={MessageInputSmall} /> }/>\n        ```\n    */\n    MessageInput: /** @type {PropTypes.Validator<React.ComponentType<import('types').MessageInputProps>>} */ (PropTypes.elementType),\n  };\n\n  static defaultProps = {\n    threadHasMore: true,\n    threadLoadingMore: true,\n    fullWidth: false,\n    autoFocus: true,\n    MessageInput,\n  };\n\n  render() {\n    if (!this.props.thread) {\n      return null;\n    }\n    const parentID = this.props.thread.id;\n    const cid = this.props.channel && this.props.channel.cid;\n\n    const key = `thread-${parentID}-${cid}`;\n    // We use a wrapper to make sure the key variable is set.\n    // this ensures that if you switch thread the component is recreated\n    return <ThreadInner {...this.props} key={key} />;\n  }\n}\n\n/** @extends {PureComponent<Props, any>} */\nclass ThreadInner extends React.PureComponent {\n  static propTypes = {\n    /** Channel is passed via the Channel Context */\n    channel: PropTypes.object.isRequired,\n    /** the thread (just a message) that we're rendering */\n    thread: PropTypes.object.isRequired,\n  };\n\n  /** @param { any } props */\n  constructor(props) {\n    super(props);\n    this.messageList = React.createRef();\n  }\n\n  componentDidMount() {\n    const { thread, loadMoreThread } = this.props;\n    const parentID = thread && thread.id;\n    if (parentID && thread?.reply_count && loadMoreThread) {\n      loadMoreThread();\n    }\n  }\n\n  /** @param {Props} prevProps */\n  getSnapshotBeforeUpdate(prevProps) {\n    // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n    if (\n      prevProps.threadMessages &&\n      this.props.threadMessages &&\n      prevProps.threadMessages.length < this.props.threadMessages.length\n    ) {\n      const list = this.messageList.current;\n      return list.clientHeight + list.scrollTop === list.scrollHeight;\n    }\n    return null;\n  }\n\n  /**\n   * @param {Props} prevProps\n   * @param {any} prevState\n   * @param {number} snapshot\n   */\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const { thread, threadMessages, loadMoreThread } = this.props;\n    const parentID = thread?.id;\n\n    if (\n      parentID &&\n      thread?.reply_count &&\n      thread.reply_count > 0 &&\n      threadMessages?.length === 0 &&\n      loadMoreThread\n    ) {\n      loadMoreThread();\n    }\n\n    // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n    if (snapshot !== null) {\n      const scrollDown = () => {\n        const list = this.messageList.current;\n        if (snapshot) list.scrollTop = list.scrollHeight;\n      };\n      scrollDown();\n      // scroll down after images load again\n      setTimeout(scrollDown, 100);\n    }\n  }\n\n  render() {\n    const { t, closeThread, thread } = this.props;\n\n    if (!thread) {\n      return null;\n    }\n\n    const read = {};\n    return (\n      <div\n        className={`str-chat__thread ${\n          this.props.fullWidth ? 'str-chat__thread--full' : ''\n        }`}\n      >\n        <div className=\"str-chat__thread-header\">\n          <div className=\"str-chat__thread-header-details\">\n            <strong>{t && t('Thread')}</strong>\n            <small>\n              {' '}\n              {t &&\n                t('{{ replyCount }} replies', {\n                  replyCount: thread.reply_count,\n                })}\n            </small>\n          </div>\n          <button\n            onClick={(e) => closeThread && closeThread(e)}\n            className=\"str-chat__square-button\"\n            data-testid=\"close-button\"\n          >\n            <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\n                fillRule=\"evenodd\"\n              />\n            </svg>\n          </button>\n        </div>\n        <div className=\"str-chat__thread-list\" ref={this.messageList}>\n          <Message\n            // @ts-ignore\n            message={thread}\n            initialMessage\n            threadList\n            Message={this.props.Message}\n            // TODO: remove the following line in next release, since we already have additionalParentMessageProps now.\n            {...this.props}\n            {...this.props.additionalParentMessageProps}\n          />\n          <div className=\"str-chat__thread-start\">\n            {t && t('Start of a new thread')}\n          </div>\n          <MessageList\n            messages={this.props.threadMessages}\n            read={read}\n            threadList\n            loadMore={this.props.loadMoreThread}\n            hasMore={this.props.threadHasMore}\n            loadingMore={this.props.threadLoadingMore}\n            Message={this.props.Message}\n            {...this.props.additionalMessageListProps}\n          />\n        </div>\n        {smartRender(this.props.MessageInput, {\n          Input: MessageInputSmall,\n          parent: this.props.thread,\n          focus: this.props.autoFocus,\n          publishTypingEvent: false,\n          ...this.props.additionalMessageInputProps,\n        })}\n      </div>\n    );\n  }\n}\n\nexport default withChannelContext(withTranslationContext(Thread));\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar } from '../Avatar';\n/**\n * TypingIndicator lists users currently typing\n * @typedef {import('types').TypingIndicatorProps} Props\n * @type {React.FC<Props>}\n */\nconst TypingIndicator = (props) => {\n  const typing = Object.values(props.typing);\n  let show;\n  if (\n    typing.length === 0 ||\n    (typing.length === 1 && typing[0].user.id === props.client.user.id)\n  ) {\n    show = false;\n  } else {\n    show = true;\n  }\n\n  return (\n    <div\n      className={`str-chat__typing-indicator ${\n        show ? 'str-chat__typing-indicator--typing' : ''\n      }`}\n    >\n      <div className=\"str-chat__typing-indicator__avatars\">\n        {typing\n          .filter(({ user }) => user.id !== props.client.user.id)\n          .map(({ user }) => (\n            <Avatar\n              image={user.image}\n              size={32}\n              name={user.name || user.id}\n              key={user.id}\n            />\n          ))}\n      </div>\n      <div className=\"str-chat__typing-indicator__dots\">\n        <span className=\"str-chat__typing-indicator__dot\" />\n        <span className=\"str-chat__typing-indicator__dot\" />\n        <span className=\"str-chat__typing-indicator__dot\" />\n      </div>\n    </div>\n  );\n};\n\nTypingIndicator.propTypes = {\n  /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chatcontext) doc */\n  // @ts-ignore\n  client: PropTypes.object,\n  /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channelcontext) doc */\n  typing: PropTypes.object.isRequired,\n};\n\nexport default React.memo(TypingIndicator);\n","// @ts-check\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChannelContext } from '../../context';\n\n/**\n * Window - A UI component for conditionally displaying thread or channel.\n *\n * @example ../../docs/Window.md\n * @type { React.FC<import('types').WindowProps>}\n */\nconst Window = ({ children, hideOnThread = false }) => {\n  const { thread } = useContext(ChannelContext);\n  // If thread is active and window should hide on thread. Return null\n  if (thread && hideOnThread) return null;\n\n  return <div className={`str-chat__main-panel`}>{children}</div>;\n};\n\nWindow.propTypes = {\n  /** show or hide the window when a thread is active */\n  hideOnThread: PropTypes.bool,\n};\n\nexport default React.memo(Window);\n"]},"metadata":{},"sourceType":"module"}